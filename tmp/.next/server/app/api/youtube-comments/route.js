/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/youtube-comments/route";
exports.ids = ["app/api/youtube-comments/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fyoutube-comments%2Froute&page=%2Fapi%2Fyoutube-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-comments%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fyoutube-comments%2Froute&page=%2Fapi%2Fyoutube-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-comments%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _mnt_f_data_git_claude_code_ayauke_page_ayauke_page_src_app_api_youtube_comments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/youtube-comments/route.ts */ \"(rsc)/./src/app/api/youtube-comments/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/youtube-comments/route\",\n        pathname: \"/api/youtube-comments\",\n        filename: \"route\",\n        bundlePath: \"app/api/youtube-comments/route\"\n    },\n    resolvedPagePath: \"/mnt/f/data/git/claude-code/ayauke-page/ayauke-page/src/app/api/youtube-comments/route.ts\",\n    nextConfigOutput,\n    userland: _mnt_f_data_git_claude_code_ayauke_page_ayauke_page_src_app_api_youtube_comments_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ5b3V0dWJlLWNvbW1lbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ5b3V0dWJlLWNvbW1lbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGeW91dHViZS1jb21tZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZtbnQlMkZmJTJGZGF0YSUyRmdpdCUyRmNsYXVkZS1jb2RlJTJGYXlhdWtlLXBhZ2UlMkZheWF1a2UtcGFnZSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGbW50JTJGZiUyRmRhdGElMkZnaXQlMkZjbGF1ZGUtY29kZSUyRmF5YXVrZS1wYWdlJTJGYXlhdWtlLXBhZ2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3lDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2FwcC9hcGkveW91dHViZS1jb21tZW50cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkveW91dHViZS1jb21tZW50cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3lvdXR1YmUtY29tbWVudHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3lvdXR1YmUtY29tbWVudHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2FwcC9hcGkveW91dHViZS1jb21tZW50cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fyoutube-comments%2Froute&page=%2Fapi%2Fyoutube-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-comments%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/youtube-comments/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/youtube-comments/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_authOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authOptions */ \"(rsc)/./src/lib/authOptions.ts\");\n/* harmony import */ var _lib_permissions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/permissions */ \"(rsc)/./src/lib/permissions.ts\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/models/YouTubeComment */ \"(rsc)/./src/models/YouTubeComment.ts\");\n\n\n\n\n\n\n// 타임라인 패턴 정규식 (시간:분:초 형식도 지원)\nconst TIMELINE_PATTERNS = [\n    /(\\d{1,2}):(\\d{2}):(\\d{2})/g,\n    /(\\d{1,2}):(\\d{2})/g,\n    /(\\d{1,2})분(\\d{2})초/g,\n    /@(\\d{1,2}):(\\d{2}):(\\d{2})/g,\n    /@(\\d{1,2}):(\\d{2})/g,\n    /\\b(\\d{1,2})분\\b/g,\n    /\\b(\\d+)초\\b/g // 45초\n];\n// 타임라인 댓글 검사\nfunction isTimelineComment(comment) {\n    return TIMELINE_PATTERNS.some((pattern)=>pattern.test(comment));\n}\n// 타임스탬프 추출 (우선순위에 따라 정확한 패턴만 매칭)\nfunction extractTimestamps(comment) {\n    const timestamps = [];\n    // 우선순위 순서로 패턴 체크 (긴 패턴부터)\n    const priorityPatterns = [\n        /(\\d{1,2}):(\\d{2}):(\\d{2})/g,\n        /@(\\d{1,2}):(\\d{2}):(\\d{2})/g,\n        /(\\d{1,2}):(\\d{2})/g,\n        /@(\\d{1,2}):(\\d{2})/g,\n        /(\\d{1,2})분(\\d{2})초/g,\n        /\\b(\\d{1,2})분\\b/g,\n        /\\b(\\d+)초\\b/g // 45초\n    ];\n    let remainingComment = comment;\n    for (const pattern of priorityPatterns){\n        const matches = remainingComment.match(pattern);\n        if (matches) {\n            timestamps.push(...matches);\n            // 매칭된 부분을 제거하여 중복 매칭 방지\n            matches.forEach((match)=>{\n                remainingComment = remainingComment.replace(match, ' '.repeat(match.length));\n            });\n        }\n        // 전역 플래그 초기화\n        pattern.lastIndex = 0;\n    }\n    return [\n        ...new Set(timestamps)\n    ]; // 중복 제거\n}\n// 아야 아카이브 채널 ID (하드코딩)\nconst AYAUKE_ARCHIVE_CHANNEL_ID = 'UCsFclToX4FEApNjAsodeGpg';\n// YouTube API에서 채널 정보 가져오기 - 두 단계로 처리\nasync function getChannelVideos(channelId, publishedAfter) {\n    const API_KEY = process.env.YOUTUBE_API_KEY;\n    if (!API_KEY) throw new Error('YouTube API 키가 설정되지 않았습니다.');\n    // 1단계: 채널의 uploads 플레이리스트 ID 가져오기\n    const channelResponse = await fetch(`https://www.googleapis.com/youtube/v3/channels?key=${API_KEY}&id=${channelId}&part=contentDetails`);\n    if (!channelResponse.ok) {\n        throw new Error(`채널 정보 조회 오류: ${channelResponse.status}`);\n    }\n    const channelData = await channelResponse.json();\n    if (!channelData.items || channelData.items.length === 0) {\n        throw new Error('채널을 찾을 수 없습니다.');\n    }\n    const uploadsPlaylistId = channelData.items[0].contentDetails.relatedPlaylists.uploads;\n    // 2단계: uploads 플레이리스트에서 비디오 목록 가져오기 (페이지네이션 지원)\n    let allItems = [];\n    let nextPageToken = '';\n    do {\n        const params = new URLSearchParams({\n            key: API_KEY,\n            playlistId: uploadsPlaylistId,\n            part: 'snippet,contentDetails',\n            maxResults: '50'\n        });\n        if (nextPageToken) {\n            params.append('pageToken', nextPageToken);\n        }\n        const playlistResponse = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?${params}`);\n        if (!playlistResponse.ok) {\n            throw new Error(`플레이리스트 조회 오류: ${playlistResponse.status}`);\n        }\n        const playlistData = await playlistResponse.json();\n        const items = playlistData.items || [];\n        allItems.push(...items);\n        nextPageToken = playlistData.nextPageToken;\n        // API 호출 제한을 위한 딜레이 (줄임)\n        if (nextPageToken) {\n            await new Promise((resolve)=>setTimeout(resolve, 50));\n        }\n    }while (nextPageToken);\n    console.log(`📺 총 ${allItems.length}개 비디오 발견`);\n    // publishedAfter 필터 적용\n    if (publishedAfter) {\n        allItems = allItems.filter((item)=>new Date(item.snippet.publishedAt) > publishedAfter);\n    }\n    // search API와 호환되는 형태로 변환\n    return allItems.map((item)=>({\n            id: {\n                videoId: item.snippet.resourceId.videoId\n            },\n            snippet: item.snippet\n        }));\n}\n// YouTube API에서 비디오 댓글 가져오기\nasync function getVideoComments(videoId) {\n    const API_KEY = process.env.YOUTUBE_API_KEY;\n    if (!API_KEY) throw new Error('YouTube API 키가 설정되지 않았습니다.');\n    const url = `https://www.googleapis.com/youtube/v3/commentThreads?` + `key=${API_KEY}&videoId=${videoId}&part=snippet&maxResults=100&order=time`;\n    const response = await fetch(url);\n    if (!response.ok) {\n        if (response.status === 403) {\n            // 댓글이 비활성화된 경우\n            return [];\n        }\n        throw new Error(`YouTube API 오류: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.items || [];\n}\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !(0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.hasPermission)(session.user.role, _lib_permissions__WEBPACK_IMPORTED_MODULE_3__.Permission.SONGS_VIEW)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '권한이 필요합니다.'\n            }, {\n                status: 403\n            });\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const action = searchParams.get('action');\n        const videoId = searchParams.get('videoId');\n        const page = parseInt(searchParams.get('page') || '1');\n        const limit = parseInt(searchParams.get('limit') || '20');\n        const search = searchParams.get('search') || '';\n        switch(action){\n            case 'channel-stats':\n                // 채널 통계 조회\n                const channelId = AYAUKE_ARCHIVE_CHANNEL_ID;\n                const channel = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeChannel.findOne({\n                    channelId\n                });\n                // 검색 조건 구성\n                const searchQuery = {\n                    channelId\n                };\n                if (search) {\n                    searchQuery.title = {\n                        $regex: search,\n                        $options: 'i'\n                    };\n                }\n                const totalVideos = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.countDocuments(searchQuery);\n                const videos = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.find(searchQuery).sort({\n                    publishedAt: -1\n                }).skip((page - 1) * limit).limit(limit);\n                const totalComments = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.countDocuments();\n                const timelineComments = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.countDocuments({\n                    isTimeline: true\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        channel,\n                        videos,\n                        pagination: {\n                            currentPage: page,\n                            totalPages: Math.ceil(totalVideos / limit),\n                            totalVideos,\n                            limit\n                        },\n                        stats: {\n                            totalVideos,\n                            totalComments,\n                            timelineComments,\n                            processedComments: await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.countDocuments({\n                                isProcessed: true\n                            })\n                        }\n                    }\n                });\n            case 'video-details':\n                if (!videoId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'videoId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                const video = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.findOne({\n                    videoId\n                });\n                const comments = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.find({\n                    videoId\n                }).sort({\n                    publishedAt: -1\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        video,\n                        comments,\n                        stats: {\n                            total: comments.length,\n                            timeline: comments.filter((c)=>c.isTimeline).length,\n                            processed: comments.filter((c)=>c.isProcessed).length\n                        }\n                    }\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: '올바르지 않은 action입니다.'\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error('YouTube 댓글 API 오류:', error);\n        // 더 자세한 에러 정보 제공\n        let errorMessage = '알 수 없는 오류가 발생했습니다.';\n        if (error instanceof Error) {\n            errorMessage = error.message;\n            // YouTube API 관련 에러 메시지 개선\n            if (error.message.includes('채널 정보 조회 오류: 403')) {\n                errorMessage = 'YouTube API 키 권한이 부족합니다. API 키를 확인해주세요.';\n            } else if (error.message.includes('채널 정보 조회 오류: 404')) {\n                errorMessage = '채널을 찾을 수 없습니다. 채널 ID를 확인해주세요.';\n            } else if (error.message.includes('플레이리스트 조회 오류')) {\n                errorMessage = '채널의 비디오 목록을 가져올 수 없습니다.';\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !(0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.hasPermission)(session.user.role, _lib_permissions__WEBPACK_IMPORTED_MODULE_3__.Permission.SONGS_EDIT)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '편집 권한이 필요합니다.'\n            }, {\n                status: 403\n            });\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const body = await request.json();\n        const { action, channelId, videoId, commentId, data } = body;\n        switch(action){\n            case 'sync-channel':\n                // 전체 채널 동기화\n                console.log('🎬 채널 동기화 시작...');\n                // 채널 ID 사용\n                const syncChannelId = AYAUKE_ARCHIVE_CHANNEL_ID;\n                const videos = await getChannelVideos(syncChannelId);\n                let processedVideos = 0;\n                let totalTimelineComments = 0;\n                // 새로운 데이터 추적을 위한 변수들\n                let newVideos = 0;\n                let newComments = 0;\n                let newTimelineComments = 0;\n                const syncStartTime = new Date();\n                // 병렬 처리를 위한 배치 크기 (YouTube API 제한 고려)\n                const BATCH_SIZE = 3;\n                // 비디오 정보 먼저 일괄 저장 (새로운 비디오 추적)\n                const videoSavePromises = videos.map(async (videoItem)=>{\n                    const videoId = videoItem.id.videoId;\n                    const snippet = videoItem.snippet;\n                    // 기존 비디오 확인\n                    const existingVideo = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.findOne({\n                        videoId\n                    });\n                    const isNewVideo = !existingVideo;\n                    await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.findOneAndUpdate({\n                        videoId\n                    }, {\n                        channelId: syncChannelId,\n                        title: snippet.title,\n                        publishedAt: new Date(snippet.publishedAt),\n                        thumbnailUrl: snippet.thumbnails?.medium?.url || '',\n                        lastCommentSync: new Date()\n                    }, {\n                        upsert: true,\n                        new: true\n                    });\n                    return {\n                        videoId,\n                        isNewVideo\n                    };\n                });\n                const videoResults = await Promise.all(videoSavePromises);\n                newVideos = videoResults.filter((result)=>result.isNewVideo).length;\n                console.log(`💾 ${videos.length}개 비디오 정보 저장 완료 (새로운 비디오: ${newVideos}개)`);\n                // 댓글 수집을 배치로 병렬 처리\n                for(let i = 0; i < videos.length; i += BATCH_SIZE){\n                    const batch = videos.slice(i, i + BATCH_SIZE);\n                    const batchPromises = batch.map(async (videoItem)=>{\n                        const videoId = videoItem.id.videoId;\n                        const snippet = videoItem.snippet;\n                        try {\n                            const comments = await getVideoComments(videoId);\n                            let videoTimelineComments = 0;\n                            let videoNewComments = 0;\n                            let videoNewTimelineComments = 0;\n                            for (const commentItem of comments){\n                                const comment = commentItem.snippet.topLevelComment.snippet;\n                                const isTimeline = isTimelineComment(comment.textDisplay);\n                                if (isTimeline) videoTimelineComments++;\n                                // 기존 댓글 확인\n                                const existingComment = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.findOne({\n                                    commentId: commentItem.id\n                                });\n                                const isNewComment = !existingComment;\n                                await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.findOneAndUpdate({\n                                    commentId: commentItem.id\n                                }, {\n                                    videoId,\n                                    authorName: comment.authorDisplayName,\n                                    textContent: comment.textDisplay,\n                                    publishedAt: new Date(comment.publishedAt),\n                                    likeCount: comment.likeCount || 0,\n                                    isTimeline,\n                                    extractedTimestamps: isTimeline ? extractTimestamps(comment.textDisplay) : []\n                                }, {\n                                    upsert: true,\n                                    new: true\n                                });\n                                // 새로운 댓글 카운트\n                                if (isNewComment) {\n                                    videoNewComments++;\n                                    if (isTimeline) videoNewTimelineComments++;\n                                }\n                            }\n                            // 비디오 통계 업데이트\n                            await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.updateOne({\n                                videoId\n                            }, {\n                                totalComments: comments.length,\n                                timelineComments: videoTimelineComments\n                            });\n                            return {\n                                videoId,\n                                title: snippet.title,\n                                timelineComments: videoTimelineComments,\n                                newComments: videoNewComments,\n                                newTimelineComments: videoNewTimelineComments\n                            };\n                        } catch (error) {\n                            console.log(`❌ ${videoId} 댓글 수집 실패:`, error);\n                            return {\n                                videoId,\n                                title: snippet.title,\n                                timelineComments: 0,\n                                newComments: 0,\n                                newTimelineComments: 0\n                            };\n                        }\n                    });\n                    // 배치 완료 대기\n                    const batchResults = await Promise.all(batchPromises);\n                    // 결과 처리\n                    batchResults.forEach((result)=>{\n                        totalTimelineComments += result.timelineComments;\n                        newComments += result.newComments;\n                        newTimelineComments += result.newTimelineComments;\n                        processedVideos++;\n                        const newIndicator = result.newComments > 0 ? ` (새로운 댓글: ${result.newComments}개${result.newTimelineComments > 0 ? `, 타임라인: ${result.newTimelineComments}개` : ''})` : '';\n                        console.log(`✅ ${processedVideos}/${videos.length} - ${result.title}: ${result.timelineComments}개 타임라인 댓글${newIndicator}`);\n                    });\n                    // 배치 간 딜레이 (API 제한 고려)\n                    if (i + BATCH_SIZE < videos.length) {\n                        await new Promise((resolve)=>setTimeout(resolve, 300));\n                    }\n                }\n                // 채널 정보 업데이트\n                await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeChannel.findOneAndUpdate({\n                    channelId: syncChannelId\n                }, {\n                    channelName: '아야 다시보기',\n                    channelUrl: 'https://www.youtube.com/@AyaUke_Archive',\n                    lastSyncDate: new Date(),\n                    totalVideos: videos.length,\n                    totalComments: await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.countDocuments(),\n                    timelineComments: totalTimelineComments\n                }, {\n                    upsert: true,\n                    new: true\n                });\n                // 결과 메시지 생성\n                const syncEndTime = new Date();\n                const syncDuration = Math.round((syncEndTime.getTime() - syncStartTime.getTime()) / 1000);\n                let resultMessage = '';\n                if (newVideos === 0 && newComments === 0) {\n                    resultMessage = `동기화 완료: 새로운 데이터가 없습니다. (처리시간: ${syncDuration}초)`;\n                } else {\n                    const newDataParts = [];\n                    if (newVideos > 0) newDataParts.push(`새로운 비디오 ${newVideos}개`);\n                    if (newComments > 0) newDataParts.push(`새로운 댓글 ${newComments}개`);\n                    if (newTimelineComments > 0) newDataParts.push(`새로운 타임라인 댓글 ${newTimelineComments}개`);\n                    resultMessage = `동기화 완료: ${newDataParts.join(', ')} 수집됨! (처리시간: ${syncDuration}초)`;\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: resultMessage,\n                    data: {\n                        totalVideos: processedVideos,\n                        totalTimelineComments,\n                        newVideos,\n                        newComments,\n                        newTimelineComments,\n                        syncDuration\n                    }\n                });\n            case 'sync-video':\n                // 개별 비디오 댓글 새로고침\n                if (!videoId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'videoId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                const comments = await getVideoComments(videoId);\n                let timelineCount = 0;\n                let newCommentsCount = 0;\n                let newTimelineCount = 0;\n                for (const commentItem of comments){\n                    const comment = commentItem.snippet.topLevelComment.snippet;\n                    const isTimeline = isTimelineComment(comment.textDisplay);\n                    if (isTimeline) timelineCount++;\n                    // 기존 댓글 확인\n                    const existingComment = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.findOne({\n                        commentId: commentItem.id\n                    });\n                    const isNewComment = !existingComment;\n                    await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.findOneAndUpdate({\n                        commentId: commentItem.id\n                    }, {\n                        videoId,\n                        authorName: comment.authorDisplayName,\n                        textContent: comment.textDisplay,\n                        publishedAt: new Date(comment.publishedAt),\n                        likeCount: comment.likeCount || 0,\n                        isTimeline,\n                        extractedTimestamps: isTimeline ? extractTimestamps(comment.textDisplay) : []\n                    }, {\n                        upsert: true,\n                        new: true\n                    });\n                    // 새로운 댓글 카운트\n                    if (isNewComment) {\n                        newCommentsCount++;\n                        if (isTimeline) newTimelineCount++;\n                    }\n                }\n                await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.updateOne({\n                    videoId\n                }, {\n                    totalComments: comments.length,\n                    timelineComments: timelineCount,\n                    lastCommentSync: new Date()\n                });\n                // 결과 메시지 생성\n                let videoResultMessage = '';\n                if (newCommentsCount === 0) {\n                    videoResultMessage = `비디오 동기화 완료: 새로운 댓글이 없습니다. (총 ${comments.length}개 댓글, ${timelineCount}개 타임라인)`;\n                } else {\n                    const newParts = [\n                        `새로운 댓글 ${newCommentsCount}개`\n                    ];\n                    if (newTimelineCount > 0) newParts.push(`새로운 타임라인 댓글 ${newTimelineCount}개`);\n                    videoResultMessage = `비디오 동기화 완료: ${newParts.join(', ')} 수집됨! (총 ${comments.length}개 댓글, ${timelineCount}개 타임라인)`;\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: videoResultMessage,\n                    data: {\n                        totalComments: comments.length,\n                        timelineCount,\n                        newComments: newCommentsCount,\n                        newTimelineComments: newTimelineCount\n                    }\n                });\n            case 'update-comment':\n                // 댓글 상태 업데이트\n                if (!commentId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'commentId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                const updateData = {};\n                if (data.isProcessed !== undefined) {\n                    updateData.isProcessed = data.isProcessed;\n                    if (data.isProcessed) {\n                        updateData.processedBy = session.user.channelId;\n                        updateData.processedAt = new Date();\n                    }\n                }\n                if (data.isTimeline !== undefined) {\n                    updateData.isTimeline = data.isTimeline;\n                    updateData.manuallyMarked = true;\n                    // 타임라인 상태 변경 시 타임스탬프 재추출\n                    const comment = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.findOne({\n                        commentId\n                    });\n                    if (comment && data.isTimeline) {\n                        updateData.extractedTimestamps = extractTimestamps(comment.textContent);\n                    } else {\n                        updateData.extractedTimestamps = [];\n                    }\n                }\n                await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.updateOne({\n                    commentId\n                }, updateData);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: '댓글 상태가 업데이트되었습니다.'\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: '올바르지 않은 action입니다.'\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error('YouTube 댓글 처리 오류:', error);\n        // 더 자세한 에러 정보 제공\n        let errorMessage = '알 수 없는 오류가 발생했습니다.';\n        if (error instanceof Error) {\n            errorMessage = error.message;\n            // YouTube API 관련 에러 메시지 개선\n            if (error.message.includes('채널 정보 조회 오류: 403')) {\n                errorMessage = 'YouTube API 키 권한이 부족합니다. API 키를 확인해주세요.';\n            } else if (error.message.includes('채널 정보 조회 오류: 404')) {\n                errorMessage = '채널을 찾을 수 없습니다. 채널 ID를 확인해주세요.';\n            } else if (error.message.includes('플레이리스트 조회 오류')) {\n                errorMessage = '채널의 비디오 목록을 가져올 수 없습니다.';\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS95b3V0dWJlLWNvbW1lbnRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ047QUFDRjtBQUN3QjtBQUNsQztBQUNpRDtBQUV2Riw4QkFBOEI7QUFDOUIsTUFBTVMsb0JBQW9CO0lBQ3hCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLGNBQThCLE1BQU07Q0FDckM7QUFFRCxhQUFhO0FBQ2IsU0FBU0Msa0JBQWtCQyxPQUFlO0lBQ3hDLE9BQU9GLGtCQUFrQkcsSUFBSSxDQUFDQyxDQUFBQSxVQUFXQSxRQUFRQyxJQUFJLENBQUNIO0FBQ3hEO0FBRUEsaUNBQWlDO0FBQ2pDLFNBQVNJLGtCQUFrQkosT0FBZTtJQUN4QyxNQUFNSyxhQUF1QixFQUFFO0lBRS9CLDBCQUEwQjtJQUMxQixNQUFNQyxtQkFBbUI7UUFDdkI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EsY0FBOEIsTUFBTTtLQUNyQztJQUVELElBQUlDLG1CQUFtQlA7SUFFdkIsS0FBSyxNQUFNRSxXQUFXSSxpQkFBa0I7UUFDdEMsTUFBTUUsVUFBVUQsaUJBQWlCRSxLQUFLLENBQUNQO1FBQ3ZDLElBQUlNLFNBQVM7WUFDWEgsV0FBV0ssSUFBSSxJQUFJRjtZQUNuQix3QkFBd0I7WUFDeEJBLFFBQVFHLE9BQU8sQ0FBQ0YsQ0FBQUE7Z0JBQ2RGLG1CQUFtQkEsaUJBQWlCSyxPQUFPLENBQUNILE9BQU8sSUFBSUksTUFBTSxDQUFDSixNQUFNSyxNQUFNO1lBQzVFO1FBQ0Y7UUFDQSxhQUFhO1FBQ2JaLFFBQVFhLFNBQVMsR0FBRztJQUN0QjtJQUVBLE9BQU87V0FBSSxJQUFJQyxJQUFJWDtLQUFZLEVBQUUsUUFBUTtBQUMzQztBQUVBLHVCQUF1QjtBQUN2QixNQUFNWSw0QkFBNEI7QUFFbEMsc0NBQXNDO0FBQ3RDLGVBQWVDLGlCQUFpQkMsU0FBaUIsRUFBRUMsY0FBcUI7SUFDdEUsTUFBTUMsVUFBVUMsUUFBUUMsR0FBRyxD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QUFpQjtnQkFDakRGLGVBQWU7WUFDakI7UUFDRjtRQUVBLE9BQU8xSCxxREFBWUEsQ0FBQzBDLElBQUksQ0FDdEI7WUFBRXlDLFNBQVM7WUFBT0MsT0FBT3NDO1FBQWEsR0FDdEM7WUFBRWxGLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2FwcC9hcGkveW91dHViZS1jb21tZW50cy9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9uZXh0JztcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aE9wdGlvbnMnO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiwgUGVybWlzc2lvbiwgVXNlclJvbGUgfSBmcm9tICdAL2xpYi9wZXJtaXNzaW9ucyc7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL21vbmdvZGInO1xuaW1wb3J0IHsgWW91VHViZUNoYW5uZWwsIFlvdVR1YmVWaWRlbywgWW91VHViZUNvbW1lbnQgfSBmcm9tICdAL21vZGVscy9Zb3VUdWJlQ29tbWVudCc7XG5cbi8vIO2DgOyehOudvOyduCDtjKjthLQg7KCV6rec7IudICjsi5zqsIQ667aEOuy0iCDtmJXsi53rj4Qg7KeA7JuQKVxuY29uc3QgVElNRUxJTkVfUEFUVEVSTlMgPSBbXG4gIC8oXFxkezEsMn0pOihcXGR7Mn0pOihcXGR7Mn0pL2csICAgLy8gMToyMzo0NSAo7Iuc6rCEOuu2hDrstIgpXG4gIC8oXFxkezEsMn0pOihcXGR7Mn0pL2csICAgICAgICAgICAvLyAzOjQ1ICjrtoQ67LSIKVxuICAvKFxcZHsxLDJ9Keu2hChcXGR7Mn0p7LSIL2csICAgICAgICAgLy8gM+u2hDQ17LSIICBcbiAgL0AoXFxkezEsMn0pOihcXGR7Mn0pOihcXGR7Mn0pL2csICAvLyBAMToyMzo0NSAo7Iuc6rCEOuu2hDrstIgpXG4gIC9AKFxcZHsxLDJ9KTooXFxkezJ9KS9nLCAgICAgICAgICAvLyBAMzo0NSAo67aEOuy0iClcbiAgL1xcYihcXGR7MSwyfSnrtoRcXGIvZywgICAgICAgICAgICAvLyAz67aEXG4gIC9cXGIoXFxkKynstIhcXGIvZyAgICAgICAgICAgICAgICAgLy8gNDXstIhcbl07XG5cbi8vIO2DgOyehOudvOyduCDrjJPquIAg6rKA7IKsXG5mdW5jdGlvbiBpc1RpbWVsaW5lQ29tbWVudChjb21tZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFRJTUVMSU5FX1BBVFRFUk5TLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoY29tbWVudCkpO1xufVxuXG4vLyDtg4DsnoTsiqTtg6ztlIQg7LaU7LacICjsmrDshKDsiJzsnITsl5Ag65Sw6528IOygle2Zle2VnCDtjKjthLTrp4wg66ek7LmtKVxuZnVuY3Rpb24gZXh0cmFjdFRpbWVzdGFtcHMoY29tbWVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCB0aW1lc3RhbXBzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgLy8g7Jqw7ISg7Iic7JyEIOyInOyEnOuhnCDtjKjthLQg7LK07YGsICjquLQg7Yyo7YS067aA7YSwKVxuICBjb25zdCBwcmlvcml0eVBhdHRlcm5zID0gW1xuICAgIC8oXFxkezEsMn0pOihcXGR7Mn0pOihcXGR7Mn0pL2csICAgLy8gMToyMzo0NSAo7Iuc6rCEOuu2hDrstIgpIC0g7LWc7Jqw7ISgXG4gICAgL0AoXFxkezEsMn0pOihcXGR7Mn0pOihcXGR7Mn0pL2csICAvLyBAMToyMzo0NSAo7Iuc6rCEOuu2hDrstIgpIC0g7LWc7Jqw7ISgXG4gICAgLyhcXGR7MSwyfSk6KFxcZHsyfSkvZywgICAgICAgICAgIC8vIDM6NDUgKOu2hDrstIgpXG4gICAgL0AoXFxkezEsMn0pOihcXGR7Mn0pL2csICAgICAgICAgIC8vIEAzOjQ1ICjrtoQ67LSIKVxuICAgIC8oXFxkezEsMn0p67aEKFxcZHsyfSnstIgvZywgICAgICAgICAvLyAz67aENDXstIggIFxuICAgIC9cXGIoXFxkezEsMn0p67aEXFxiL2csICAgICAgICAgICAgLy8gM+u2hFxuICAgIC9cXGIoXFxkKynstIhcXGIvZyAgICAgICAgICAgICAgICAgLy8gNDXstIhcbiAgXTtcbiAgXG4gIGxldCByZW1haW5pbmdDb21tZW50ID0gY29tbWVudDtcbiAgXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBwcmlvcml0eVBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlbWFpbmluZ0NvbW1lbnQubWF0Y2gocGF0dGVybik7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIHRpbWVzdGFtcHMucHVzaCguLi5tYXRjaGVzKTtcbiAgICAgIC8vIOunpOy5reuQnCDrtoDrtoTsnYQg7KCc6rGw7ZWY7JesIOykkeuztSDrp6Tsua0g67Cp7KeAXG4gICAgICBtYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xuICAgICAgICByZW1haW5pbmdDb21tZW50ID0gcmVtYWluaW5nQ29tbWVudC5yZXBsYWNlKG1hdGNoLCAnICcucmVwZWF0KG1hdGNoLmxlbmd0aCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIOyghOyXrSDtlIzrnpjqt7gg7LSI6riw7ZmUXG4gICAgcGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICB9XG4gIFxuICByZXR1cm4gWy4uLm5ldyBTZXQodGltZXN0YW1wcyldOyAvLyDspJHrs7Ug7KCc6rGwXG59XG5cbi8vIOyVhOyVvCDslYTsubTsnbTruIwg7LGE64SQIElEICjtlZjrk5zsvZTrlKkpXG5jb25zdCBBWUFVS0VfQVJDSElWRV9DSEFOTkVMX0lEID0gJ1VDc0ZjbFRvWDRGRUFwTmpBc29kZUdwZyc7XG5cbi8vIFlvdVR1YmUgQVBJ7JeQ7IScIOyxhOuEkCDsoJXrs7Qg6rCA7KC47Jik6riwIC0g65GQIOuLqOqzhOuhnCDsspjrpqxcbmFzeW5jIGZ1bmN0aW9uIGdldENoYW5uZWxWaWRlb3MoY2hhbm5lbElkOiBzdHJpbmcsIHB1Ymxpc2hlZEFmdGVyPzogRGF0ZSkge1xuICBjb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuWU9VVFVCRV9BUElfS0VZO1xuICBpZiAoIUFQSV9LRVkpIHRocm93IG5ldyBFcnJvcignWW91VHViZSBBUEkg7YKk6rCAIOyEpOygleuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG5cbiAgLy8gMeuLqOqzhDog7LGE64SQ7J2YIHVwbG9hZHMg7ZSM66CI7J2066as7Iqk7Yq4IElEIOqwgOyguOyYpOq4sFxuICBjb25zdCBjaGFubmVsUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9jaGFubmVscz9rZXk9JHtBUElfS0VZfSZpZD0ke2NoYW5uZWxJZH0mcGFydD1jb250ZW50RGV0YWlsc2BcbiAgKTtcblxuICBpZiAoIWNoYW5uZWxSZXNwb25zZS5vaykge1xuICAgIHRocm93IG5ldyBFcnJvcihg7LGE64SQIOygleuztCDsobDtmowg7Jik66WYOiAke2NoYW5uZWxSZXNwb25zZS5zdGF0dXN9YCk7XG4gIH1cblxuICBjb25zdCBjaGFubmVsRGF0YSA9IGF3YWl0IGNoYW5uZWxSZXNwb25zZS5qc29uKCk7XG4gIGlmICghY2hhbm5lbERhdGEuaXRlbXMgfHwgY2hhbm5lbERhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfssYTrhJDsnYQg7LC+7J2EIOyImCDsl4bsirXri4jri6QuJyk7XG4gIH1cblxuICBjb25zdCB1cGxvYWRzUGxheWxpc3RJZCA9IGNoYW5uZWxEYXRhLml0ZW1zWzBdLmNvbnRlbnREZXRhaWxzLnJlbGF0ZWRQbGF5bGlzdHMudXBsb2FkcztcblxuICAvLyAy64uo6rOEOiB1cGxvYWRzIO2UjOugiOydtOumrOyKpO2KuOyXkOyEnCDruYTrlJTsmKQg66qp66GdIOqwgOyguOyYpOq4sCAo7Y6Y7J207KeA64Sk7J207IWYIOyngOybkClcbiAgbGV0IGFsbEl0ZW1zID0gW107XG4gIGxldCBuZXh0UGFnZVRva2VuID0gJyc7XG4gIFxuICBkbyB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICBrZXk6IEFQSV9LRVksXG4gICAgICBwbGF5bGlzdElkOiB1cGxvYWRzUGxheWxpc3RJZCxcbiAgICAgIHBhcnQ6ICdzbmlwcGV0LGNvbnRlbnREZXRhaWxzJyxcbiAgICAgIG1heFJlc3VsdHM6ICc1MCdcbiAgICB9KTtcbiAgICBcbiAgICBpZiAobmV4dFBhZ2VUb2tlbikge1xuICAgICAgcGFyYW1zLmFwcGVuZCgncGFnZVRva2VuJywgbmV4dFBhZ2VUb2tlbik7XG4gICAgfVxuXG4gICAgY29uc3QgcGxheWxpc3RSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvcGxheWxpc3RJdGVtcz8ke3BhcmFtc31gXG4gICAgKTtcbiAgICBcbiAgICBpZiAoIXBsYXlsaXN0UmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihg7ZSM66CI7J2066as7Iqk7Yq4IOyhsO2ajCDsmKTrpZg6ICR7cGxheWxpc3RSZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGxheWxpc3REYXRhID0gYXdhaXQgcGxheWxpc3RSZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgaXRlbXMgPSBwbGF5bGlzdERhdGEuaXRlbXMgfHwgW107XG4gICAgXG4gICAgYWxsSXRlbXMucHVzaCguLi5pdGVtcyk7XG4gICAgbmV4dFBhZ2VUb2tlbiA9IHBsYXlsaXN0RGF0YS5uZXh0UGFnZVRva2VuO1xuICAgIFxuICAgIC8vIEFQSSDtmLjstpwg7KCc7ZWc7J2EIOychO2VnCDrlJzroIjsnbQgKOykhOyehClcbiAgICBpZiAobmV4dFBhZ2VUb2tlbikge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSk7XG4gICAgfVxuICAgIFxuICB9IHdoaWxlIChuZXh0UGFnZVRva2VuKTtcblxuICBjb25zb2xlLmxvZyhg8J+TuiDstJ0gJHthbGxJdGVtcy5sZW5ndGh96rCcIOu5hOuUlOyYpCDrsJzqsqxgKTtcblxuICAvLyBwdWJsaXNoZWRBZnRlciDtlYTthLAg7KCB7JqpXG4gIGlmIChwdWJsaXNoZWRBZnRlcikge1xuICAgIGFsbEl0ZW1zID0gYWxsSXRlbXMuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICBuZXcgRGF0ZShpdGVtLnNuaXBwZXQucHVibGlzaGVkQXQpID4gcHVibGlzaGVkQWZ0ZXJcbiAgICApO1xuICB9XG5cbiAgLy8gc2VhcmNoIEFQSeyZgCDtmLjtmZjrkJjripQg7ZiV7YOc66GcIOuzgO2ZmFxuICByZXR1cm4gYWxsSXRlbXMubWFwKGl0ZW0gPT4gKHtcbiAgICBpZDoge1xuICAgICAgdmlkZW9JZDogaXRlbS5zbmlwcGV0LnJlc291cmNlSWQudmlkZW9JZFxuICAgIH0sXG4gICAgc25pcHBldDogaXRlbS5zbmlwcGV0XG4gIH0pKTtcbn1cblxuLy8gWW91VHViZSBBUEnsl5DshJwg67mE65SU7JikIOuMk+q4gCDqsIDsoLjsmKTquLBcbmFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvQ29tbWVudHModmlkZW9JZDogc3RyaW5nKSB7XG4gIGNvbnN0IEFQSV9LRVkgPSBwcm9jZXNzLmVudi5ZT1VUVUJFX0FQSV9LRVk7XG4gIGlmICghQVBJX0tFWSkgdGhyb3cgbmV3IEVycm9yKCdZb3VUdWJlIEFQSSDtgqTqsIAg7ISk7KCV65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcblxuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9jb21tZW50VGhyZWFkcz9gICtcbiAgICBga2V5PSR7QVBJX0tFWX0mdmlkZW9JZD0ke3ZpZGVvSWR9JnBhcnQ9c25pcHBldCZtYXhSZXN1bHRzPTEwMCZvcmRlcj10aW1lYDtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gIFxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAvLyDrjJPquIDsnbQg67mE7Zmc7ISx7ZmU65CcIOqyveyasFxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFlvdVR1YmUgQVBJIOyYpOulmDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gIH1cblxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICByZXR1cm4gZGF0YS5pdGVtcyB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBpZiAoIXNlc3Npb24gfHwgIWhhc1Blcm1pc3Npb24oc2Vzc2lvbi51c2VyLnJvbGUgYXMgVXNlclJvbGUsIFBlcm1pc3Npb24uU09OR1NfVklFVykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfqtoztlZzsnbQg7ZWE7JqU7ZWp64uI64ukLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xuXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IGFjdGlvbiA9IHNlYXJjaFBhcmFtcy5nZXQoJ2FjdGlvbicpO1xuICAgIGNvbnN0IHZpZGVvSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd2aWRlb0lkJyk7XG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2UnKSB8fCAnMScpO1xuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnMjAnKTtcbiAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKSB8fCAnJztcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdjaGFubmVsLXN0YXRzJzpcbiAgICAgICAgLy8g7LGE64SQIO2GteqzhCDsobDtmoxcbiAgICAgICAgY29uc3QgY2hhbm5lbElkID0gQVlBVUtFX0FSQ0hJVkVfQ0hBTk5FTF9JRDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBhd2FpdCBZb3VUdWJlQ2hhbm5lbC5maW5kT25lKHsgY2hhbm5lbElkIH0pO1xuICAgICAgICAvLyDqsoDsg4kg7KGw6rG0IOq1rOyEsVxuICAgICAgICBjb25zdCBzZWFyY2hRdWVyeTogYW55ID0geyBjaGFubmVsSWQgfTtcbiAgICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICAgIHNlYXJjaFF1ZXJ5LnRpdGxlID0geyAkcmVnZXg6IHNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b3RhbFZpZGVvcyA9IGF3YWl0IFlvdVR1YmVWaWRlby5jb3VudERvY3VtZW50cyhzZWFyY2hRdWVyeSk7XG4gICAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IFlvdVR1YmVWaWRlby5maW5kKHNlYXJjaFF1ZXJ5KVxuICAgICAgICAgIC5zb3J0KHsgcHVibGlzaGVkQXQ6IC0xIH0pXG4gICAgICAgICAgLnNraXAoKHBhZ2UgLSAxKSAqIGxpbWl0KVxuICAgICAgICAgIC5saW1pdChsaW1pdCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b3RhbENvbW1lbnRzID0gYXdhaXQgWW91VHViZUNvbW1lbnQuY291bnREb2N1bWVudHMoKTtcbiAgICAgICAgY29uc3QgdGltZWxpbmVDb21tZW50cyA9IGF3YWl0IFlvdVR1YmVDb21tZW50LmNvdW50RG9jdW1lbnRzKHsgaXNUaW1lbGluZTogdHJ1ZSB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBjaGFubmVsLFxuICAgICAgICAgICAgdmlkZW9zLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICBjdXJyZW50UGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsVmlkZW9zIC8gbGltaXQpLFxuICAgICAgICAgICAgICB0b3RhbFZpZGVvcyxcbiAgICAgICAgICAgICAgbGltaXRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgICB0b3RhbFZpZGVvcyxcbiAgICAgICAgICAgICAgdG90YWxDb21tZW50cyxcbiAgICAgICAgICAgICAgdGltZWxpbmVDb21tZW50cyxcbiAgICAgICAgICAgICAgcHJvY2Vzc2VkQ29tbWVudHM6IGF3YWl0IFlvdVR1YmVDb21tZW50LmNvdW50RG9jdW1lbnRzKHsgaXNQcm9jZXNzZWQ6IHRydWUgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICd2aWRlby1kZXRhaWxzJzpcbiAgICAgICAgaWYgKCF2aWRlb0lkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICd2aWRlb0lk6rCAIO2VhOyalO2VqeuLiOuLpC4nIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmlkZW8gPSBhd2FpdCBZb3VUdWJlVmlkZW8uZmluZE9uZSh7IHZpZGVvSWQgfSk7XG4gICAgICAgIGNvbnN0IGNvbW1lbnRzID0gYXdhaXQgWW91VHViZUNvbW1lbnQuZmluZCh7IHZpZGVvSWQgfSkuc29ydCh7IHB1Ymxpc2hlZEF0OiAtMSB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB2aWRlbyxcbiAgICAgICAgICAgIGNvbW1lbnRzLFxuICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgdG90YWw6IGNvbW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdGltZWxpbmU6IGNvbW1lbnRzLmZpbHRlcihjID0+IGMuaXNUaW1lbGluZSkubGVuZ3RoLFxuICAgICAgICAgICAgICBwcm9jZXNzZWQ6IGNvbW1lbnRzLmZpbHRlcihjID0+IGMuaXNQcm9jZXNzZWQpLmxlbmd0aFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+yYrOuwlOultOyngCDslYrsnYAgYWN0aW9u7J6F64uI64ukLicgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdZb3VUdWJlIOuMk+q4gCBBUEkg7Jik66WYOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyDrjZQg7J6Q7IS47ZWcIOyXkOufrCDsoJXrs7Qg7KCc6rO1XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9ICfslYwg7IiYIOyXhuuKlCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLic7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICBcbiAgICAgIC8vIFlvdVR1YmUgQVBJIOq0gOugqCDsl5Drn6wg66mU7Iuc7KeAIOqwnOyEoFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ+yxhOuEkCDsoJXrs7Qg7KGw7ZqMIOyYpOulmDogNDAzJykpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1lvdVR1YmUgQVBJIO2CpCDqtoztlZzsnbQg67aA7KGx7ZWp64uI64ukLiBBUEkg7YKk66W8IO2ZleyduO2VtOyjvOyEuOyalC4nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCfssYTrhJAg7KCV67O0IOyhsO2ajCDsmKTrpZg6IDQwNCcpKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICfssYTrhJDsnYQg7LC+7J2EIOyImCDsl4bsirXri4jri6QuIOyxhOuEkCBJROulvCDtmZXsnbjtlbTso7zshLjsmpQuJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygn7ZSM66CI7J2066as7Iqk7Yq4IOyhsO2ajCDsmKTrpZgnKSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAn7LGE64SQ7J2YIOu5hOuUlOyYpCDrqqnroZ3snYQg6rCA7KC47JisIOyImCDsl4bsirXri4jri6QuJztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBpZiAoIXNlc3Npb24gfHwgIWhhc1Blcm1pc3Npb24oc2Vzc2lvbi51c2VyLnJvbGUgYXMgVXNlclJvbGUsIFBlcm1pc3Npb24uU09OR1NfRURJVCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICftjrjsp5Eg6raM7ZWc7J20IO2VhOyalO2VqeuLiOuLpC4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IGFjdGlvbiwgY2hhbm5lbElkLCB2aWRlb0lkLCBjb21tZW50SWQsIGRhdGEgfSA9IGJvZHk7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnc3luYy1jaGFubmVsJzpcbiAgICAgICAgLy8g7KCE7LK0IOyxhOuEkCDrj5nquLDtmZRcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjqwg7LGE64SQIOuPmeq4sO2ZlCDsi5zsnpEuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOyxhOuEkCBJRCDsgqzsmqlcbiAgICAgICAgY29uc3Qgc3luY0NoYW5uZWxJZCA9IEFZQVVLRV9BUkNISVZFX0NIQU5ORUxfSUQ7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aWRlb3MgPSBhd2FpdCBnZXRDaGFubmVsVmlkZW9zKHN5bmNDaGFubmVsSWQpO1xuICAgICAgICBsZXQgcHJvY2Vzc2VkVmlkZW9zID0gMDtcbiAgICAgICAgbGV0IHRvdGFsVGltZWxpbmVDb21tZW50cyA9IDA7XG4gICAgICAgIFxuICAgICAgICAvLyDsg4jroZzsmrQg642w7J207YSwIOy2lOyggeydhCDsnITtlZwg67OA7IiY65OkXG4gICAgICAgIGxldCBuZXdWaWRlb3MgPSAwO1xuICAgICAgICBsZXQgbmV3Q29tbWVudHMgPSAwO1xuICAgICAgICBsZXQgbmV3VGltZWxpbmVDb21tZW50cyA9IDA7XG4gICAgICAgIGNvbnN0IHN5bmNTdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIC8vIOuzkeugrCDsspjrpqzrpbwg7JyE7ZWcIOuwsOy5mCDtgazquLAgKFlvdVR1YmUgQVBJIOygnO2VnCDqs6DroKQpXG4gICAgICAgIGNvbnN0IEJBVENIX1NJWkUgPSAzO1xuICAgICAgICBcbiAgICAgICAgLy8g67mE65SU7JikIOygleuztCDrqLzsoIAg7J286rSEIOyggOyepSAo7IOI66Gc7Jq0IOu5hOuUlOyYpCDstpTsoIEpXG4gICAgICAgIGNvbnN0IHZpZGVvU2F2ZVByb21pc2VzID0gdmlkZW9zLm1hcChhc3luYyAodmlkZW9JdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgdmlkZW9JZCA9IHZpZGVvSXRlbS5pZC52aWRlb0lkO1xuICAgICAgICAgIGNvbnN0IHNuaXBwZXQgPSB2aWRlb0l0ZW0uc25pcHBldDtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDquLDsobQg67mE65SU7JikIO2ZleyduFxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVmlkZW8gPSBhd2FpdCBZb3VUdWJlVmlkZW8uZmluZE9uZSh7IHZpZGVvSWQgfSk7XG4gICAgICAgICAgY29uc3QgaXNOZXdWaWRlbyA9ICFleGlzdGluZ1ZpZGVvO1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IFlvdVR1YmVWaWRlby5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICAgICAgeyB2aWRlb0lkIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNoYW5uZWxJZDogc3luY0NoYW5uZWxJZCxcbiAgICAgICAgICAgICAgdGl0bGU6IHNuaXBwZXQudGl0bGUsXG4gICAgICAgICAgICAgIHB1Ymxpc2hlZEF0OiBuZXcgRGF0ZShzbmlwcGV0LnB1Ymxpc2hlZEF0KSxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsVXJsOiBzbmlwcGV0LnRodW1ibmFpbHM/Lm1lZGl1bT8udXJsIHx8ICcnLFxuICAgICAgICAgICAgICBsYXN0Q29tbWVudFN5bmM6IG5ldyBEYXRlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IHZpZGVvSWQsIGlzTmV3VmlkZW8gfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmlkZW9SZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodmlkZW9TYXZlUHJvbWlzZXMpO1xuICAgICAgICBuZXdWaWRlb3MgPSB2aWRlb1Jlc3VsdHMuZmlsdGVyKHJlc3VsdCA9PiByZXN1bHQuaXNOZXdWaWRlbykubGVuZ3RoO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+SviAke3ZpZGVvcy5sZW5ndGh96rCcIOu5hOuUlOyYpCDsoJXrs7Qg7KCA7J6lIOyZhOujjCAo7IOI66Gc7Jq0IOu5hOuUlOyYpDogJHtuZXdWaWRlb3N96rCcKWApO1xuXG4gICAgICAgIC8vIOuMk+q4gCDsiJjsp5HsnYQg67Cw7LmY66GcIOuzkeugrCDsspjrpqxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWRlb3MubGVuZ3RoOyBpICs9IEJBVENIX1NJWkUpIHtcbiAgICAgICAgICBjb25zdCBiYXRjaCA9IHZpZGVvcy5zbGljZShpLCBpICsgQkFUQ0hfU0laRSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgYmF0Y2hQcm9taXNlcyA9IGJhdGNoLm1hcChhc3luYyAodmlkZW9JdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWRlb0lkID0gdmlkZW9JdGVtLmlkLnZpZGVvSWQ7XG4gICAgICAgICAgICBjb25zdCBzbmlwcGV0ID0gdmlkZW9JdGVtLnNuaXBwZXQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gYXdhaXQgZ2V0VmlkZW9Db21tZW50cyh2aWRlb0lkKTtcbiAgICAgICAgICAgICAgbGV0IHZpZGVvVGltZWxpbmVDb21tZW50cyA9IDA7XG4gICAgICAgICAgICAgIGxldCB2aWRlb05ld0NvbW1lbnRzID0gMDtcbiAgICAgICAgICAgICAgbGV0IHZpZGVvTmV3VGltZWxpbmVDb21tZW50cyA9IDA7XG5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjb21tZW50SXRlbSBvZiBjb21tZW50cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBjb21tZW50SXRlbS5zbmlwcGV0LnRvcExldmVsQ29tbWVudC5zbmlwcGV0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzVGltZWxpbmUgPSBpc1RpbWVsaW5lQ29tbWVudChjb21tZW50LnRleHREaXNwbGF5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoaXNUaW1lbGluZSkgdmlkZW9UaW1lbGluZUNvbW1lbnRzKys7XG5cbiAgICAgICAgICAgICAgICAvLyDquLDsobQg64yT6riAIO2ZleyduFxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ29tbWVudCA9IGF3YWl0IFlvdVR1YmVDb21tZW50LmZpbmRPbmUoeyBjb21tZW50SWQ6IGNvbW1lbnRJdGVtLmlkIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3Q29tbWVudCA9ICFleGlzdGluZ0NvbW1lbnQ7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBZb3VUdWJlQ29tbWVudC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICAgICAgICAgICAgeyBjb21tZW50SWQ6IGNvbW1lbnRJdGVtLmlkIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvSWQsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvck5hbWU6IGNvbW1lbnQuYXV0aG9yRGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiBjb21tZW50LnRleHREaXNwbGF5LFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoZWRBdDogbmV3IERhdGUoY29tbWVudC5wdWJsaXNoZWRBdCksXG4gICAgICAgICAgICAgICAgICAgIGxpa2VDb3VudDogY29tbWVudC5saWtlQ291bnQgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaXNUaW1lbGluZSxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkVGltZXN0YW1wczogaXNUaW1lbGluZSA/IGV4dHJhY3RUaW1lc3RhbXBzKGNvbW1lbnQudGV4dERpc3BsYXkpIDogW11cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLy8g7IOI66Gc7Jq0IOuMk+q4gCDsubTsmrTtirhcbiAgICAgICAgICAgICAgICBpZiAoaXNOZXdDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICB2aWRlb05ld0NvbW1lbnRzKys7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lbGluZSkgdmlkZW9OZXdUaW1lbGluZUNvbW1lbnRzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8g67mE65SU7JikIO2GteqzhCDsl4XrjbDsnbTtirhcbiAgICAgICAgICAgICAgYXdhaXQgWW91VHViZVZpZGVvLnVwZGF0ZU9uZShcbiAgICAgICAgICAgICAgICB7IHZpZGVvSWQgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0b3RhbENvbW1lbnRzOiBjb21tZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICB0aW1lbGluZUNvbW1lbnRzOiB2aWRlb1RpbWVsaW5lQ29tbWVudHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2aWRlb0lkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBzbmlwcGV0LnRpdGxlLFxuICAgICAgICAgICAgICAgIHRpbWVsaW5lQ29tbWVudHM6IHZpZGVvVGltZWxpbmVDb21tZW50cyxcbiAgICAgICAgICAgICAgICBuZXdDb21tZW50czogdmlkZW9OZXdDb21tZW50cyxcbiAgICAgICAgICAgICAgICBuZXdUaW1lbGluZUNvbW1lbnRzOiB2aWRlb05ld1RpbWVsaW5lQ29tbWVudHNcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKdjCAke3ZpZGVvSWR9IOuMk+q4gCDsiJjsp5Eg7Iuk7YyoOmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2aWRlb0lkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBzbmlwcGV0LnRpdGxlLFxuICAgICAgICAgICAgICAgIHRpbWVsaW5lQ29tbWVudHM6IDAsXG4gICAgICAgICAgICAgICAgbmV3Q29tbWVudHM6IDAsXG4gICAgICAgICAgICAgICAgbmV3VGltZWxpbmVDb21tZW50czogMFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8g67Cw7LmYIOyZhOujjCDrjIDquLBcbiAgICAgICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDqsrDqs7wg7LKY66asXG4gICAgICAgICAgYmF0Y2hSZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHRvdGFsVGltZWxpbmVDb21tZW50cyArPSByZXN1bHQudGltZWxpbmVDb21tZW50cztcbiAgICAgICAgICAgIG5ld0NvbW1lbnRzICs9IHJlc3VsdC5uZXdDb21tZW50cztcbiAgICAgICAgICAgIG5ld1RpbWVsaW5lQ29tbWVudHMgKz0gcmVzdWx0Lm5ld1RpbWVsaW5lQ29tbWVudHM7XG4gICAgICAgICAgICBwcm9jZXNzZWRWaWRlb3MrKztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbmV3SW5kaWNhdG9yID0gcmVzdWx0Lm5ld0NvbW1lbnRzID4gMCA/IGAgKOyDiOuhnOyatCDrjJPquIA6ICR7cmVzdWx0Lm5ld0NvbW1lbnRzfeqwnCR7cmVzdWx0Lm5ld1RpbWVsaW5lQ29tbWVudHMgPiAwID8gYCwg7YOA7J6E65287J24OiAke3Jlc3VsdC5uZXdUaW1lbGluZUNvbW1lbnRzfeqwnGAgOiAnJ30pYCA6ICcnO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSAke3Byb2Nlc3NlZFZpZGVvc30vJHt2aWRlb3MubGVuZ3RofSAtICR7cmVzdWx0LnRpdGxlfTogJHtyZXN1bHQudGltZWxpbmVDb21tZW50c33qsJwg7YOA7J6E65287J24IOuMk+q4gCR7bmV3SW5kaWNhdG9yfWApO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8g67Cw7LmYIOqwhCDrlJzroIjsnbQgKEFQSSDsoJztlZwg6rOg66CkKVxuICAgICAgICAgIGlmIChpICsgQkFUQ0hfU0laRSA8IHZpZGVvcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDssYTrhJAg7KCV67O0IOyXheuNsOydtO2KuFxuICAgICAgICBhd2FpdCBZb3VUdWJlQ2hhbm5lbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICAgIHsgY2hhbm5lbElkOiBzeW5jQ2hhbm5lbElkIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2hhbm5lbE5hbWU6ICfslYTslbwg64uk7Iuc67O06riwJyxcbiAgICAgICAgICAgIGNoYW5uZWxVcmw6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9AQXlhVWtlX0FyY2hpdmUnLFxuICAgICAgICAgICAgbGFzdFN5bmNEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdG90YWxWaWRlb3M6IHZpZGVvcy5sZW5ndGgsXG4gICAgICAgICAgICB0b3RhbENvbW1lbnRzOiBhd2FpdCBZb3VUdWJlQ29tbWVudC5jb3VudERvY3VtZW50cygpLFxuICAgICAgICAgICAgdGltZWxpbmVDb21tZW50czogdG90YWxUaW1lbGluZUNvbW1lbnRzXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyDqsrDqs7wg66mU7Iuc7KeAIOyDneyEsVxuICAgICAgICBjb25zdCBzeW5jRW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHN5bmNEdXJhdGlvbiA9IE1hdGgucm91bmQoKHN5bmNFbmRUaW1lLmdldFRpbWUoKSAtIHN5bmNTdGFydFRpbWUuZ2V0VGltZSgpKSAvIDEwMDApO1xuICAgICAgICBcbiAgICAgICAgbGV0IHJlc3VsdE1lc3NhZ2UgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXdWaWRlb3MgPT09IDAgJiYgbmV3Q29tbWVudHMgPT09IDApIHtcbiAgICAgICAgICByZXN1bHRNZXNzYWdlID0gYOuPmeq4sO2ZlCDsmYTro4w6IOyDiOuhnOyatCDrjbDsnbTthLDqsIAg7JeG7Iq164uI64ukLiAo7LKY66as7Iuc6rCEOiAke3N5bmNEdXJhdGlvbn3stIgpYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBuZXdEYXRhUGFydHMgPSBbXTtcbiAgICAgICAgICBpZiAobmV3VmlkZW9zID4gMCkgbmV3RGF0YVBhcnRzLnB1c2goYOyDiOuhnOyatCDruYTrlJTsmKQgJHtuZXdWaWRlb3N96rCcYCk7XG4gICAgICAgICAgaWYgKG5ld0NvbW1lbnRzID4gMCkgbmV3RGF0YVBhcnRzLnB1c2goYOyDiOuhnOyatCDrjJPquIAgJHtuZXdDb21tZW50c33qsJxgKTtcbiAgICAgICAgICBpZiAobmV3VGltZWxpbmVDb21tZW50cyA+IDApIG5ld0RhdGFQYXJ0cy5wdXNoKGDsg4jroZzsmrQg7YOA7J6E65287J24IOuMk+q4gCAke25ld1RpbWVsaW5lQ29tbWVudHN96rCcYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVzdWx0TWVzc2FnZSA9IGDrj5nquLDtmZQg7JmE66OMOiAke25ld0RhdGFQYXJ0cy5qb2luKCcsICcpfSDsiJjsp5HrkKghICjsspjrpqzsi5zqsIQ6ICR7c3luY0R1cmF0aW9ufey0iClgO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdE1lc3NhZ2UsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG90YWxWaWRlb3M6IHByb2Nlc3NlZFZpZGVvcyxcbiAgICAgICAgICAgIHRvdGFsVGltZWxpbmVDb21tZW50cyxcbiAgICAgICAgICAgIG5ld1ZpZGVvcyxcbiAgICAgICAgICAgIG5ld0NvbW1lbnRzLFxuICAgICAgICAgICAgbmV3VGltZWxpbmVDb21tZW50cyxcbiAgICAgICAgICAgIHN5bmNEdXJhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ3N5bmMtdmlkZW8nOlxuICAgICAgICAvLyDqsJzrs4Qg67mE65SU7JikIOuMk+q4gCDsg4jroZzqs6DsuahcbiAgICAgICAgaWYgKCF2aWRlb0lkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICd2aWRlb0lk6rCAIO2VhOyalO2VqeuLiOuLpC4nIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29tbWVudHMgPSBhd2FpdCBnZXRWaWRlb0NvbW1lbnRzKHZpZGVvSWQpO1xuICAgICAgICBsZXQgdGltZWxpbmVDb3VudCA9IDA7XG4gICAgICAgIGxldCBuZXdDb21tZW50c0NvdW50ID0gMDtcbiAgICAgICAgbGV0IG5ld1RpbWVsaW5lQ291bnQgPSAwO1xuXG4gICAgICAgIGZvciAoY29uc3QgY29tbWVudEl0ZW0gb2YgY29tbWVudHMpIHtcbiAgICAgICAgICBjb25zdCBjb21tZW50ID0gY29tbWVudEl0ZW0uc25pcHBldC50b3BMZXZlbENvbW1lbnQuc25pcHBldDtcbiAgICAgICAgICBjb25zdCBpc1RpbWVsaW5lID0gaXNUaW1lbGluZUNvbW1lbnQoY29tbWVudC50ZXh0RGlzcGxheSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGlzVGltZWxpbmUpIHRpbWVsaW5lQ291bnQrKztcblxuICAgICAgICAgIC8vIOq4sOyhtCDrjJPquIAg7ZmV7J24XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdDb21tZW50ID0gYXdhaXQgWW91VHViZUNvbW1lbnQuZmluZE9uZSh7IGNvbW1lbnRJZDogY29tbWVudEl0ZW0uaWQgfSk7XG4gICAgICAgICAgY29uc3QgaXNOZXdDb21tZW50ID0gIWV4aXN0aW5nQ29tbWVudDtcblxuICAgICAgICAgIGF3YWl0IFlvdVR1YmVDb21tZW50LmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgICAgICB7IGNvbW1lbnRJZDogY29tbWVudEl0ZW0uaWQgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdmlkZW9JZCxcbiAgICAgICAgICAgICAgYXV0aG9yTmFtZTogY29tbWVudC5hdXRob3JEaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IGNvbW1lbnQudGV4dERpc3BsYXksXG4gICAgICAgICAgICAgIHB1Ymxpc2hlZEF0OiBuZXcgRGF0ZShjb21tZW50LnB1Ymxpc2hlZEF0KSxcbiAgICAgICAgICAgICAgbGlrZUNvdW50OiBjb21tZW50Lmxpa2VDb3VudCB8fCAwLFxuICAgICAgICAgICAgICBpc1RpbWVsaW5lLFxuICAgICAgICAgICAgICBleHRyYWN0ZWRUaW1lc3RhbXBzOiBpc1RpbWVsaW5lID8gZXh0cmFjdFRpbWVzdGFtcHMoY29tbWVudC50ZXh0RGlzcGxheSkgOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgdXBzZXJ0OiB0cnVlLCBuZXc6IHRydWUgfVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyDsg4jroZzsmrQg64yT6riAIOy5tOyatO2KuFxuICAgICAgICAgIGlmIChpc05ld0NvbW1lbnQpIHtcbiAgICAgICAgICAgIG5ld0NvbW1lbnRzQ291bnQrKztcbiAgICAgICAgICAgIGlmIChpc1RpbWVsaW5lKSBuZXdUaW1lbGluZUNvdW50Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgWW91VHViZVZpZGVvLnVwZGF0ZU9uZShcbiAgICAgICAgICB7IHZpZGVvSWQgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0b3RhbENvbW1lbnRzOiBjb21tZW50cy5sZW5ndGgsXG4gICAgICAgICAgICB0aW1lbGluZUNvbW1lbnRzOiB0aW1lbGluZUNvdW50LFxuICAgICAgICAgICAgbGFzdENvbW1lbnRTeW5jOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIOqysOqzvCDrqZTsi5zsp4Ag7IOd7ISxXG4gICAgICAgIGxldCB2aWRlb1Jlc3VsdE1lc3NhZ2UgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXdDb21tZW50c0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgdmlkZW9SZXN1bHRNZXNzYWdlID0gYOu5hOuUlOyYpCDrj5nquLDtmZQg7JmE66OMOiDsg4jroZzsmrQg64yT6riA7J20IOyXhuyKteuLiOuLpC4gKOy0nSAke2NvbW1lbnRzLmxlbmd0aH3qsJwg64yT6riALCAke3RpbWVsaW5lQ291bnR96rCcIO2DgOyehOudvOyduClgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG5ld1BhcnRzID0gW2Dsg4jroZzsmrQg64yT6riAICR7bmV3Q29tbWVudHNDb3VudH3qsJxgXTtcbiAgICAgICAgICBpZiAobmV3VGltZWxpbmVDb3VudCA+IDApIG5ld1BhcnRzLnB1c2goYOyDiOuhnOyatCDtg4DsnoTrnbzsnbgg64yT6riAICR7bmV3VGltZWxpbmVDb3VudH3qsJxgKTtcbiAgICAgICAgICBcbiAgICAgICAgICB2aWRlb1Jlc3VsdE1lc3NhZ2UgPSBg67mE65SU7JikIOuPmeq4sO2ZlCDsmYTro4w6ICR7bmV3UGFydHMuam9pbignLCAnKX0g7IiY7KeR65CoISAo7LSdICR7Y29tbWVudHMubGVuZ3RofeqwnCDrjJPquIAsICR7dGltZWxpbmVDb3VudH3qsJwg7YOA7J6E65287J24KWA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogdmlkZW9SZXN1bHRNZXNzYWdlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRvdGFsQ29tbWVudHM6IGNvbW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIHRpbWVsaW5lQ291bnQsXG4gICAgICAgICAgICBuZXdDb21tZW50czogbmV3Q29tbWVudHNDb3VudCxcbiAgICAgICAgICAgIG5ld1RpbWVsaW5lQ29tbWVudHM6IG5ld1RpbWVsaW5lQ291bnRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICd1cGRhdGUtY29tbWVudCc6XG4gICAgICAgIC8vIOuMk+q4gCDsg4Htg5wg7JeF642w7J207Yq4XG4gICAgICAgIGlmICghY29tbWVudElkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdjb21tZW50SWTqsIAg7ZWE7JqU7ZWp64uI64ukLicgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fTtcbiAgICAgICAgaWYgKGRhdGEuaXNQcm9jZXNzZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHVwZGF0ZURhdGEuaXNQcm9jZXNzZWQgPSBkYXRhLmlzUHJvY2Vzc2VkO1xuICAgICAgICAgIGlmIChkYXRhLmlzUHJvY2Vzc2VkKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLnByb2Nlc3NlZEJ5ID0gc2Vzc2lvbi51c2VyLmNoYW5uZWxJZDtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEucHJvY2Vzc2VkQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5pc1RpbWVsaW5lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhLmlzVGltZWxpbmUgPSBkYXRhLmlzVGltZWxpbmU7XG4gICAgICAgICAgdXBkYXRlRGF0YS5tYW51YWxseU1hcmtlZCA9IHRydWU7XG4gICAgICAgICAgLy8g7YOA7J6E65287J24IOyDge2DnCDrs4Dqsr0g7IucIO2DgOyehOyKpO2DrO2UhCDsnqzstpTstpxcbiAgICAgICAgICBjb25zdCBjb21tZW50ID0gYXdhaXQgWW91VHViZUNvbW1lbnQuZmluZE9uZSh7IGNvbW1lbnRJZCB9KTtcbiAgICAgICAgICBpZiAoY29tbWVudCAmJiBkYXRhLmlzVGltZWxpbmUpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZXh0cmFjdGVkVGltZXN0YW1wcyA9IGV4dHJhY3RUaW1lc3RhbXBzKGNvbW1lbnQudGV4dENvbnRlbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmV4dHJhY3RlZFRpbWVzdGFtcHMgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBZb3VUdWJlQ29tbWVudC51cGRhdGVPbmUoeyBjb21tZW50SWQgfSwgdXBkYXRlRGF0YSk7XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICfrjJPquIAg7IOB7YOc6rCAIOyXheuNsOydtO2KuOuQmOyXiOyKteuLiOuLpC4nXG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfsmKzrsJTrpbTsp4Ag7JWK7J2AIGFjdGlvbuyeheuLiOuLpC4nIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignWW91VHViZSDrjJPquIAg7LKY66asIOyYpOulmDonLCBlcnJvcik7XG4gICAgXG4gICAgLy8g642UIOyekOyEuO2VnCDsl5Drn6wg7KCV67O0IOygnOqztVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSAn7JWMIOyImCDsl4bripQg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nO1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgXG4gICAgICAvLyBZb3VUdWJlIEFQSSDqtIDroKgg7JeQ65+sIOuplOyLnOyngCDqsJzshKBcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCfssYTrhJAg7KCV67O0IOyhsO2ajCDsmKTrpZg6IDQwMycpKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdZb3VUdWJlIEFQSSDtgqQg6raM7ZWc7J20IOu2gOyhse2VqeuLiOuLpC4gQVBJIO2CpOulvCDtmZXsnbjtlbTso7zshLjsmpQuJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygn7LGE64SQIOygleuztCDsobDtmowg7Jik66WYOiA0MDQnKSkge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAn7LGE64SQ7J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukLiDssYTrhJAgSUTrpbwg7ZmV7J247ZW07KO87IS47JqULic7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ+2UjOugiOydtOumrOyKpO2KuCDsobDtmowg7Jik66WYJykpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+yxhOuEkOydmCDruYTrlJTsmKQg66qp66Gd7J2EIOqwgOyguOyYrCDsiJgg7JeG7Iq164uI64ukLic7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiaGFzUGVybWlzc2lvbiIsIlBlcm1pc3Npb24iLCJkYkNvbm5lY3QiLCJZb3VUdWJlQ2hhbm5lbCIsIllvdVR1YmVWaWRlbyIsIllvdVR1YmVDb21tZW50IiwiVElNRUxJTkVfUEFUVEVSTlMiLCJpc1RpbWVsaW5lQ29tbWVudCIsImNvbW1lbnQiLCJzb21lIiwicGF0dGVybiIsInRlc3QiLCJleHRyYWN0VGltZXN0YW1wcyIsInRpbWVzdGFtcHMiLCJwcmlvcml0eVBhdHRlcm5zIiwicmVtYWluaW5nQ29tbWVudCIsIm1hdGNoZXMiLCJtYXRjaCIsInB1c2giLCJmb3JFYWNoIiwicmVwbGFjZSIsInJlcGVhdCIsImxlbmd0aCIsImxhc3RJbmRleCIsIlNldCIsIkFZQVVLRV9BUkNISVZFX0NIQU5ORUxfSUQiLCJnZXRDaGFubmVsVmlkZW9zIiwiY2hhbm5lbElkIiwicHVibGlzaGVkQWZ0ZXIiLCJBUElfS0VZIiwicHJvY2VzcyIsImVudiIsIllPVVRVQkVfQVBJX0tFWSIsIkVycm9yIiwiY2hhbm5lbFJlc3BvbnNlIiwiZmV0Y2giLCJvayIsInN0YXR1cyIsImNoYW5uZWxEYXRhIiwianNvbiIsIml0ZW1zIiwidXBsb2Fkc1BsYXlsaXN0SWQiLCJjb250ZW50RGV0YWlscyIsInJlbGF0ZWRQbGF5bGlzdHMiLCJ1cGxvYWRzIiwiYWxsSXRlbXMiLCJuZXh0UGFnZVRva2VuIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwia2V5IiwicGxheWxpc3RJZCIsInBhcnQiLCJtYXhSZXN1bHRzIiwiYXBwZW5kIiwicGxheWxpc3RSZXNwb25zZSIsInBsYXlsaXN0RGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImNvbnNvbGUiLCJsb2ciLCJmaWx0ZXIiLCJpdGVtIiwiRGF0ZSIsInNuaXBwZXQiLCJwdWJsaXNoZWRBdCIsIm1hcCIsImlkIiwidmlkZW9JZCIsInJlc291cmNlSWQiLCJnZXRWaWRlb0NvbW1lbnRzIiwidXJsIiwicmVzcG9uc2UiLCJkYXRhIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwicm9sZSIsIlNPTkdTX1ZJRVciLCJzdWNjZXNzIiwiZXJyb3IiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJhY3Rpb24iLCJnZXQiLCJwYWdlIiwicGFyc2VJbnQiLCJsaW1pdCIsInNlYXJjaCIsImNoYW5uZWwiLCJmaW5kT25lIiwic2VhcmNoUXVlcnkiLCJ0aXRsZSIsIiRyZWdleCIsIiRvcHRpb25zIiwidG90YWxWaWRlb3MiLCJjb3VudERvY3VtZW50cyIsInZpZGVvcyIsImZpbmQiLCJzb3J0Iiwic2tpcCIsInRvdGFsQ29tbWVudHMiLCJ0aW1lbGluZUNvbW1lbnRzIiwiaXNUaW1lbGluZSIsInBhZ2luYXRpb24iLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInN0YXRzIiwicHJvY2Vzc2VkQ29tbWVudHMiLCJpc1Byb2Nlc3NlZCIsInZpZGVvIiwiY29tbWVudHMiLCJ0b3RhbCIsInRpbWVsaW5lIiwiYyIsInByb2Nlc3NlZCIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsIlBPU1QiLCJTT05HU19FRElUIiwiYm9keSIsImNvbW1lbnRJZCIsInN5bmNDaGFubmVsSWQiLCJwcm9jZXNzZWRWaWRlb3MiLCJ0b3RhbFRpbWVsaW5lQ29tbWVudHMiLCJuZXdWaWRlb3MiLCJuZXdDb21tZW50cyIsIm5ld1RpbWVsaW5lQ29tbWVudHMiLCJzeW5jU3RhcnRUaW1lIiwiQkFUQ0hfU0laRSIsInZpZGVvU2F2ZVByb21pc2VzIiwidmlkZW9JdGVtIiwiZXhpc3RpbmdWaWRlbyIsImlzTmV3VmlkZW8iLCJmaW5kT25lQW5kVXBkYXRlIiwidGh1bWJuYWlsVXJsIiwidGh1bWJuYWlscyIsIm1lZGl1bSIsImxhc3RDb21tZW50U3luYyIsInVwc2VydCIsIm5ldyIsInZpZGVvUmVzdWx0cyIsImFsbCIsInJlc3VsdCIsImkiLCJiYXRjaCIsInNsaWNlIiwiYmF0Y2hQcm9taXNlcyIsInZpZGVvVGltZWxpbmVDb21tZW50cyIsInZpZGVvTmV3Q29tbWVudHMiLCJ2aWRlb05ld1RpbWVsaW5lQ29tbWVudHMiLCJjb21tZW50SXRlbSIsInRvcExldmVsQ29tbWVudCIsInRleHREaXNwbGF5IiwiZXhpc3RpbmdDb21tZW50IiwiaXNOZXdDb21tZW50IiwiYXV0aG9yTmFtZSIsImF1dGhvckRpc3BsYXlOYW1lIiwidGV4dENvbnRlbnQiLCJsaWtlQ291bnQiLCJleHRyYWN0ZWRUaW1lc3RhbXBzIiwidXBkYXRlT25lIiwiYmF0Y2hSZXN1bHRzIiwibmV3SW5kaWNhdG9yIiwiY2hhbm5lbE5hbWUiLCJjaGFubmVsVXJsIiwibGFzdFN5bmNEYXRlIiwic3luY0VuZFRpbWUiLCJzeW5jRHVyYXRpb24iLCJyb3VuZCIsImdldFRpbWUiLCJyZXN1bHRNZXNzYWdlIiwibmV3RGF0YVBhcnRzIiwiam9pbiIsInRpbWVsaW5lQ291bnQiLCJuZXdDb21tZW50c0NvdW50IiwibmV3VGltZWxpbmVDb3VudCIsInZpZGVvUmVzdWx0TWVzc2FnZSIsIm5ld1BhcnRzIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsInByb2Nlc3NlZEJ5IiwicHJvY2Vzc2VkQXQiLCJtYW51YWxseU1hcmtlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/youtube-comments/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/adminChannels.ts":
/*!**********************************!*\
  !*** ./src/lib/adminChannels.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AYAUKE_ADMIN_CHANNELS: () => (/* binding */ AYAUKE_ADMIN_CHANNELS),\n/* harmony export */   AYAUKE_ADMIN_CHANNEL_IDS: () => (/* binding */ AYAUKE_ADMIN_CHANNEL_IDS),\n/* harmony export */   SUPER_ADMIN_CHANNELS: () => (/* binding */ SUPER_ADMIN_CHANNELS),\n/* harmony export */   SUPER_ADMIN_CHANNEL_IDS: () => (/* binding */ SUPER_ADMIN_CHANNEL_IDS),\n/* harmony export */   getAdminInfo: () => (/* binding */ getAdminInfo),\n/* harmony export */   getAyaukeAdminInfo: () => (/* binding */ getAyaukeAdminInfo),\n/* harmony export */   getStaticUserRole: () => (/* binding */ getStaticUserRole),\n/* harmony export */   getSuperAdminInfo: () => (/* binding */ getSuperAdminInfo),\n/* harmony export */   isAdminChannel: () => (/* binding */ isAdminChannel),\n/* harmony export */   isAyaukeAdminChannel: () => (/* binding */ isAyaukeAdminChannel),\n/* harmony export */   isSuperAdminChannel: () => (/* binding */ isSuperAdminChannel)\n/* harmony export */ });\n/* harmony import */ var _permissions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./permissions */ \"(rsc)/./src/lib/permissions.ts\");\n\n// 최고 관리자 권한을 가진 치지직 채널 ID 목록 (하드코딩)\nconst SUPER_ADMIN_CHANNEL_IDS = [\n    'd6017f757614569add71b0bc83a81382'\n];\n// 아야우케 관리자 권한을 가진 치지직 채널 ID 목록 (하드코딩)\nconst AYAUKE_ADMIN_CHANNEL_IDS = [\n    'abe8aa82baf3d3ef54ad8468ee73e7fc'\n];\n// 최고 관리자 채널 정보\nconst SUPER_ADMIN_CHANNELS = {\n    'd6017f757614569add71b0bc83a81382': {\n        name: '개발자',\n        role: '개발 관리자'\n    }\n};\n// 아야우케 관리자 채널 정보  \nconst AYAUKE_ADMIN_CHANNELS = {\n    'abe8aa82baf3d3ef54ad8468ee73e7fc': {\n        name: '아야우케',\n        role: '노래책 관리자'\n    }\n};\nfunction isSuperAdminChannel(channelId) {\n    if (!channelId) return false;\n    return SUPER_ADMIN_CHANNEL_IDS.includes(channelId);\n}\nfunction isAyaukeAdminChannel(channelId) {\n    if (!channelId) return false;\n    return AYAUKE_ADMIN_CHANNEL_IDS.includes(channelId);\n}\nfunction getSuperAdminInfo(channelId) {\n    if (!channelId || !isSuperAdminChannel(channelId)) return null;\n    return SUPER_ADMIN_CHANNELS[channelId] || null;\n}\nfunction getAyaukeAdminInfo(channelId) {\n    if (!channelId || !isAyaukeAdminChannel(channelId)) return null;\n    return AYAUKE_ADMIN_CHANNELS[channelId] || null;\n}\nfunction getStaticUserRole(channelId) {\n    if (!channelId) return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.USER;\n    if (isSuperAdminChannel(channelId)) {\n        return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.SUPER_ADMIN;\n    }\n    if (isAyaukeAdminChannel(channelId)) {\n        return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.AYAUKE_ADMIN;\n    }\n    return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.USER;\n}\n// 하위 호환성을 위한 함수들 (나중에 제거)\nfunction isAdminChannel(channelId) {\n    return isSuperAdminChannel(channelId) || isAyaukeAdminChannel(channelId);\n}\nfunction getAdminInfo(channelId) {\n    return getSuperAdminInfo(channelId) || getAyaukeAdminInfo(channelId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FkbWluQ2hhbm5lbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBRXhDLG9DQUFvQztBQUM3QixNQUFNQywwQkFBMEI7SUFDckM7Q0FDRCxDQUFTO0FBRVYsc0NBQXNDO0FBQy9CLE1BQU1DLDJCQUEyQjtJQUN0QztDQUNELENBQVM7QUFFVixlQUFlO0FBQ1IsTUFBTUMsdUJBQXVCO0lBQ2xDLG9DQUFvQztRQUNsQ0MsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7QUFDRixFQUFVO0FBRVYsbUJBQW1CO0FBQ1osTUFBTUMsd0JBQXdCO0lBQ25DLG9DQUFvQztRQUNsQ0YsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7QUFDRixFQUFVO0FBRUgsU0FBU0Usb0JBQW9CQyxTQUFvQztJQUN0RSxJQUFJLENBQUNBLFdBQVcsT0FBTztJQUN2QixPQUFPUCx3QkFBd0JRLFFBQVEsQ0FBQ0Q7QUFDMUM7QUFFTyxTQUFTRSxxQkFBcUJGLFNBQW9DO0lBQ3ZFLElBQUksQ0FBQ0EsV0FBVyxPQUFPO0lBQ3ZCLE9BQU9OLHlCQUF5Qk8sUUFBUSxDQUFDRDtBQUMzQztBQUVPLFNBQVNHLGtCQUFrQkgsU0FBb0M7SUFDcEUsSUFBSSxDQUFDQSxhQUFhLENBQUNELG9CQUFvQkMsWUFBWSxPQUFPO0lBQzFELE9BQU9MLG9CQUFvQixDQUFDSyxVQUErQyxJQUFJO0FBQ2pGO0FBRU8sU0FBU0ksbUJBQW1CSixTQUFvQztJQUNyRSxJQUFJLENBQUNBLGFBQWEsQ0FBQ0UscUJBQXFCRixZQUFZLE9BQU87SUFDM0QsT0FBT0YscUJBQXFCLENBQUNFLFVBQWdELElBQUk7QUFDbkY7QUFFTyxTQUFTSyxrQkFBa0JMLFNBQW9DO0lBQ3BFLElBQUksQ0FBQ0EsV0FBVyxPQUFPUixrREFBUUEsQ0FBQ2MsSUFBSTtJQUVwQyxJQUFJUCxvQkFBb0JDLFlBQVk7UUFDbEMsT0FBT1Isa0RBQVFBLENBQUNlLFdBQVc7SUFDN0I7SUFFQSxJQUFJTCxxQkFBcUJGLFlBQVk7UUFDbkMsT0FBT1Isa0RBQVFBLENBQUNnQixZQUFZO0lBQzlCO0lBRUEsT0FBT2hCLGtEQUFRQSxDQUFDYyxJQUFJO0FBQ3RCO0FBRUEsMEJBQTBCO0FBQ25CLFNBQVNHLGVBQWVULFNBQW9DO0lBQ2pFLE9BQU9ELG9CQUFvQkMsY0FBY0UscUJBQXFCRjtBQUNoRTtBQUVPLFNBQVNVLGFBQWFWLFNBQW9DO0lBQy9ELE9BQU9HLGtCQUFrQkgsY0FBY0ksbUJBQW1CSjtBQUM1RCIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9saWIvYWRtaW5DaGFubmVscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyUm9sZSB9IGZyb20gJy4vcGVybWlzc2lvbnMnXG5cbi8vIOy1nOqzoCDqtIDrpqzsnpAg6raM7ZWc7J2EIOqwgOynhCDsuZjsp4Dsp4Eg7LGE64SQIElEIOuqqeuhnSAo7ZWY65Oc7L2U65SpKVxuZXhwb3J0IGNvbnN0IFNVUEVSX0FETUlOX0NIQU5ORUxfSURTID0gW1xuICAnZDYwMTdmNzU3NjE0NTY5YWRkNzFiMGJjODNhODEzODInLCAvLyDsgqzsmqnsnpAgKOqwnOuwnOyekClcbl0gYXMgY29uc3RcblxuLy8g7JWE7JW87Jqw7LyAIOq0gOumrOyekCDqtoztlZzsnYQg6rCA7KeEIOy5mOyngOyngSDssYTrhJAgSUQg66qp66GdICjtlZjrk5zsvZTrlKkpXG5leHBvcnQgY29uc3QgQVlBVUtFX0FETUlOX0NIQU5ORUxfSURTID0gW1xuICAnYWJlOGFhODJiYWYzZDNlZjU0YWQ4NDY4ZWU3M2U3ZmMnLCAvLyDslYTslbzsmrDsvIAgKOuFuOuemOyxhSDqtIDrpqzsnpApXG5dIGFzIGNvbnN0XG5cbi8vIOy1nOqzoCDqtIDrpqzsnpAg7LGE64SQIOygleuztFxuZXhwb3J0IGNvbnN0IFNVUEVSX0FETUlOX0NIQU5ORUxTID0ge1xuICAnZDYwMTdmNzU3NjE0NTY5YWRkNzFiMGJjODNhODEzODInOiB7XG4gICAgbmFtZTogJ+qwnOuwnOyekCcsXG4gICAgcm9sZTogJ+qwnOuwnCDqtIDrpqzsnpAnLFxuICB9LFxufSBhcyBjb25zdFxuXG4vLyDslYTslbzsmrDsvIAg6rSA66as7J6QIOyxhOuEkCDsoJXrs7QgIFxuZXhwb3J0IGNvbnN0IEFZQVVLRV9BRE1JTl9DSEFOTkVMUyA9IHtcbiAgJ2FiZThhYTgyYmFmM2QzZWY1NGFkODQ2OGVlNzNlN2ZjJzoge1xuICAgIG5hbWU6ICfslYTslbzsmrDsvIAnLFxuICAgIHJvbGU6ICfrhbjrnpjssYUg6rSA66as7J6QJyxcbiAgfSxcbn0gYXMgY29uc3RcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwZXJBZG1pbkNoYW5uZWwoY2hhbm5lbElkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIGlmICghY2hhbm5lbElkKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIFNVUEVSX0FETUlOX0NIQU5ORUxfSURTLmluY2x1ZGVzKGNoYW5uZWxJZCBhcyBhbnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0F5YXVrZUFkbWluQ2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCFjaGFubmVsSWQpIHJldHVybiBmYWxzZVxuICByZXR1cm4gQVlBVUtFX0FETUlOX0NIQU5ORUxfSURTLmluY2x1ZGVzKGNoYW5uZWxJZCBhcyBhbnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBlckFkbWluSW5mbyhjaGFubmVsSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgaWYgKCFjaGFubmVsSWQgfHwgIWlzU3VwZXJBZG1pbkNoYW5uZWwoY2hhbm5lbElkKSkgcmV0dXJuIG51bGxcbiAgcmV0dXJuIFNVUEVSX0FETUlOX0NIQU5ORUxTW2NoYW5uZWxJZCBhcyBrZXlvZiB0eXBlb2YgU1VQRVJfQURNSU5fQ0hBTk5FTFNdIHx8IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF5YXVrZUFkbWluSW5mbyhjaGFubmVsSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgaWYgKCFjaGFubmVsSWQgfHwgIWlzQXlhdWtlQWRtaW5DaGFubmVsKGNoYW5uZWxJZCkpIHJldHVybiBudWxsXG4gIHJldHVybiBBWUFVS0VfQURNSU5fQ0hBTk5FTFNbY2hhbm5lbElkIGFzIGtleW9mIHR5cGVvZiBBWUFVS0VfQURNSU5fQ0hBTk5FTFNdIHx8IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXRpY1VzZXJSb2xlKGNoYW5uZWxJZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFVzZXJSb2xlIHtcbiAgaWYgKCFjaGFubmVsSWQpIHJldHVybiBVc2VyUm9sZS5VU0VSXG4gIFxuICBpZiAoaXNTdXBlckFkbWluQ2hhbm5lbChjaGFubmVsSWQpKSB7XG4gICAgcmV0dXJuIFVzZXJSb2xlLlNVUEVSX0FETUlOXG4gIH1cbiAgXG4gIGlmIChpc0F5YXVrZUFkbWluQ2hhbm5lbChjaGFubmVsSWQpKSB7XG4gICAgcmV0dXJuIFVzZXJSb2xlLkFZQVVLRV9BRE1JTlxuICB9XG4gIFxuICByZXR1cm4gVXNlclJvbGUuVVNFUlxufVxuXG4vLyDtlZjsnIQg7Zi47ZmY7ISx7J2EIOychO2VnCDtlajsiJjrk6QgKOuCmOykkeyXkCDsoJzqsbApXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbkNoYW5uZWwoY2hhbm5lbElkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIHJldHVybiBpc1N1cGVyQWRtaW5DaGFubmVsKGNoYW5uZWxJZCkgfHwgaXNBeWF1a2VBZG1pbkNoYW5uZWwoY2hhbm5lbElkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRtaW5JbmZvKGNoYW5uZWxJZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICByZXR1cm4gZ2V0U3VwZXJBZG1pbkluZm8oY2hhbm5lbElkKSB8fCBnZXRBeWF1a2VBZG1pbkluZm8oY2hhbm5lbElkKVxufSJdLCJuYW1lcyI6WyJVc2VyUm9sZSIsIlNVUEVSX0FETUlOX0NIQU5ORUxfSURTIiwiQVlBVUtFX0FETUlOX0NIQU5ORUxfSURTIiwiU1VQRVJfQURNSU5fQ0hBTk5FTFMiLCJuYW1lIiwicm9sZSIsIkFZQVVLRV9BRE1JTl9DSEFOTkVMUyIsImlzU3VwZXJBZG1pbkNoYW5uZWwiLCJjaGFubmVsSWQiLCJpbmNsdWRlcyIsImlzQXlhdWtlQWRtaW5DaGFubmVsIiwiZ2V0U3VwZXJBZG1pbkluZm8iLCJnZXRBeWF1a2VBZG1pbkluZm8iLCJnZXRTdGF0aWNVc2VyUm9sZSIsIlVTRVIiLCJTVVBFUl9BRE1JTiIsIkFZQVVLRV9BRE1JTiIsImlzQWRtaW5DaGFubmVsIiwiZ2V0QWRtaW5JbmZvIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/adminChannels.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authOptions.ts":
/*!********************************!*\
  !*** ./src/lib/authOptions.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_chzzkCookieManual__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/chzzkCookieManual */ \"(rsc)/./src/lib/chzzkCookieManual.ts\");\n/* harmony import */ var _lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/adminChannels */ \"(rsc)/./src/lib/adminChannels.ts\");\n/* harmony import */ var _lib_permissions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/permissions */ \"(rsc)/./src/lib/permissions.ts\");\n/* harmony import */ var _lib_userService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/userService */ \"(rsc)/./src/lib/userService.ts\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./src/models/User.ts\");\n/* harmony import */ var _models_UserActivity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/models/UserActivity */ \"(rsc)/./src/models/UserActivity.ts\");\n/* harmony import */ var _lib_chzzkOAuthProvider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/chzzkOAuthProvider */ \"(rsc)/./src/lib/chzzkOAuthProvider.ts\");\n/* harmony import */ var _lib_titleSystem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/titleSystem */ \"(rsc)/./src/lib/titleSystem.ts\");\n\n\n\n\n\n\n\n\n\n\n// 사용자 정보 메모리 캐시 (5분간 유효)\nconst userCache = new Map();\nconst CACHE_DURATION = 5 * 60 * 1000 // 5분\n;\n// 캐시된 사용자 정보 조회\nasync function getCachedUser(channelId) {\n    const now = Date.now();\n    const cached = userCache.get(channelId);\n    // 캐시가 있고 아직 유효하면 캐시 사용\n    if (cached && now - cached.timestamp < CACHE_DURATION) {\n        return cached.data;\n    }\n    // 캐시가 없거나 만료되었으면 DB 조회\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            channelId\n        });\n        // 조회 결과를 캐시에 저장\n        userCache.set(channelId, {\n            data: user,\n            timestamp: now\n        });\n        return user;\n    } catch (error) {\n        // DB 조회 실패 시 만료된 캐시라도 있으면 사용\n        if (cached) {\n            console.log('DB 조회 실패, 만료된 캐시 사용:', channelId);\n            return cached.data;\n        }\n        throw error;\n    }\n}\nconst authOptions = {\n    providers: [\n        (0,_lib_chzzkOAuthProvider__WEBPACK_IMPORTED_MODULE_8__[\"default\"])({\n            clientId: process.env.CHZZK_CLIENT_ID,\n            clientSecret: process.env.CHZZK_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            id: \"chzzk-cookie\",\n            name: \"치지직 쿠키 로그인\",\n            credentials: {\n                cookies: {\n                    label: \"치지직 쿠키\",\n                    type: \"text\",\n                    placeholder: \"NID_AUT=...; NID_SES=...\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.cookies) return null;\n                    const { client, userInfo } = await (0,_lib_chzzkCookieManual__WEBPACK_IMPORTED_MODULE_1__.createManualChzzkClient)('cookie-user', credentials.cookies);\n                    if (!userInfo || !userInfo.loggedIn) return null;\n                    let channelInfo = null;\n                    try {\n                        if (client.channel && typeof client.channel.info === 'function') {\n                            channelInfo = await client.channel.info(userInfo.userIdHash);\n                        }\n                    } catch (error) {\n                        console.log('채널 정보 가져오기 실패:', error);\n                    }\n                    const channelId = channelInfo?.channelId || userInfo.userIdHash;\n                    const channelName = channelInfo?.channelName || userInfo.nickname || '치지직 사용자';\n                    const isAdmin = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.isAdminChannel)(channelId);\n                    const adminInfo = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getAdminInfo)(channelId);\n                    const result = {\n                        id: userInfo.userIdHash,\n                        name: channelName,\n                        email: null,\n                        image: channelInfo?.channelImageUrl || null,\n                        naverId: null,\n                        channelId: channelId,\n                        channelName: channelName,\n                        channelImageUrl: channelInfo?.channelImageUrl || null,\n                        followerCount: channelInfo?.followerCount || null,\n                        isAdmin,\n                        adminRole: adminInfo?.role || null\n                    };\n                    try {\n                        await (0,_lib_userService__WEBPACK_IMPORTED_MODULE_4__.createOrUpdateUser)({\n                            channelId: channelId,\n                            channelName: channelName,\n                            profileImageUrl: channelInfo?.channelImageUrl\n                        });\n                    } catch (dbError) {\n                        console.error('사용자 DB 저장 오류:', dbError);\n                    }\n                    return result;\n                } catch (error) {\n                    console.error('치지직 쿠키 로그인 오류:', error);\n                    return null;\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user, account }) {\n            if (user) {\n                // OAuth 방식 (치지직 공식 API)\n                if (account?.provider === 'chzzk') {\n                    const channelId = user.channelId || user.id;\n                    const channelName = user.channelName || user.name;\n                    const role = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getStaticUserRole)(channelId);\n                    const adminInfo = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getAdminInfo)(channelId);\n                    token.naverId = null;\n                    token.channelId = channelId;\n                    token.channelName = channelName;\n                    token.channelImageUrl = user.channelImageUrl || user.image;\n                    token.followerCount = user.followerCount;\n                    token.role = role;\n                    token.isAdmin = (0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.roleToIsAdmin)(role) // 하위 호환성\n                    ;\n                    token.adminRole = adminInfo?.role || null;\n                    // 사용자 정보 DB에 저장\n                    try {\n                        const dbUser = await (0,_lib_userService__WEBPACK_IMPORTED_MODULE_4__.createOrUpdateUser)({\n                            channelId: channelId,\n                            channelName: channelName,\n                            profileImageUrl: user.channelImageUrl || user.image\n                        });\n                        token.userId = dbUser._id.toString() // MongoDB ObjectId를 토큰에 저장\n                        ;\n                    } catch (dbError) {\n                        console.error('OAuth 사용자 DB 저장 오류:', dbError);\n                    }\n                } else {\n                    const role = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getStaticUserRole)(user.channelId);\n                    const adminInfo = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getAdminInfo)(user.channelId);\n                    token.naverId = user.naverId;\n                    token.channelId = user.channelId;\n                    token.channelName = user.channelName;\n                    token.channelImageUrl = user.channelImageUrl;\n                    token.followerCount = user.followerCount;\n                    token.role = role;\n                    token.isAdmin = (0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.roleToIsAdmin)(role) // 하위 호환성\n                    ;\n                    token.adminRole = adminInfo?.role || null;\n                    // 쿠키 방식에서도 DB에 사용자 정보 저장하고 ObjectId 가져오기\n                    try {\n                        const dbUser = await (0,_lib_userService__WEBPACK_IMPORTED_MODULE_4__.createOrUpdateUser)({\n                            channelId: user.channelId,\n                            channelName: user.channelName,\n                            profileImageUrl: user.channelImageUrl\n                        });\n                        token.userId = dbUser._id.toString() // MongoDB ObjectId를 토큰에 저장\n                        ;\n                    } catch (dbError) {\n                        console.error('쿠키 방식 사용자 DB 저장 오류:', dbError);\n                    }\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                // 기본 토큰 정보 설정\n                session.user.id = token.userId // NextAuth 표준 필드\n                ;\n                session.user.naverId = token.naverId || null;\n                session.user.channelId = token.channelId;\n                session.user.userId = token.userId // MongoDB ObjectId 추가\n                ;\n                session.user.followerCount = token.followerCount;\n                session.user.role = token.role;\n                session.user.isAdmin = token.isAdmin;\n                session.user.adminRole = token.adminRole;\n                // 기본 세션 정보 먼저 설정 (토큰 기반)\n                session.user.channelName = token.channelName;\n                session.user.name = token.channelName;\n                session.user.channelImageUrl = token.channelImageUrl;\n                // 캐시된 사용자 정보 가져오기 (선택적 업데이트)\n                try {\n                    const user = await getCachedUser(token.channelId);\n                    if (user) {\n                        // DB에서 가져온 정보로 업데이트 (기존 정보 덮어씀)\n                        session.user.channelName = user.channelName;\n                        session.user.name = user.displayName || user.channelName;\n                        session.user.image = user.profileImageUrl || session.user.channelImageUrl;\n                        session.user.channelImageUrl = user.profileImageUrl || session.user.channelImageUrl;\n                        session.user.role = user.role // DB에서 가져온 최신 권한 사용\n                        ;\n                        session.user.isAdmin = (0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.roleToIsAdmin)(user.role);\n                        // 선택된 칭호 정보 추가\n                        const selectedTitle = (0,_lib_titleSystem__WEBPACK_IMPORTED_MODULE_9__.getSelectedTitleInfo)(user);\n                        session.user.selectedTitle = selectedTitle;\n                    }\n                // DB에 사용자가 없으면 기본 정보 그대로 사용\n                } catch (error) {\n                    console.error('세션 콜백에서 사용자 정보 조회 오류:', error);\n                // DB 연결 실패 시 기본 정보(토큰 기반) 그대로 사용\n                // 별도 처리 불필요 - 이미 위에서 기본값 설정됨\n                }\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: '/auth/signin',\n        error: '/auth/error'\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: false\n};\n// 중복 체크인 방지를 위한 메모리 캐시 (userId:date -> timestamp)\nconst checkinCache = new Map();\n/**\n * 세션 콜백에서 자동으로 일일 체크인 처리\n */ async function performDailyCheckin(user) {\n    try {\n        const today = new Date().toISOString().split('T')[0] // YYYY-MM-DD\n        ;\n        const now = new Date();\n        // 오늘 활동 기록이 있는지 확인 (세션에서는 첫 방문 생성만)\n        let todayActivity = await _models_UserActivity__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n            userId: user._id,\n            date: today\n        });\n        // 오늘 활동 기록이 이미 있으면 아무것도 하지 않음\n        if (todayActivity) {\n            return;\n        }\n        // 기존 사용자의 activityStats가 없으면 초기화\n        if (!user.activityStats) {\n            user.activityStats = {\n                totalLoginDays: 0,\n                currentStreak: 0,\n                longestStreak: 0,\n                lastVisitDate: null\n            };\n        }\n        // 오늘 첫 방문 - 새로운 활동 기록 생성\n        todayActivity = new _models_UserActivity__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n            userId: user._id,\n            date: today,\n            visitCount: 1,\n            firstVisitAt: now,\n            lastVisitAt: now\n        });\n        // 연속 접속일 계산\n        const yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        const yesterdayStr = yesterday.toISOString().split('T')[0];\n        if (user.activityStats.lastVisitDate === yesterdayStr) {\n            // 어제 방문했으면 연속 접속일 증가\n            user.activityStats.currentStreak += 1;\n        } else if (user.activityStats.lastVisitDate !== today) {\n            // 어제 방문 안했으면 연속 접속일 초기화 (오늘부터 1일)\n            user.activityStats.currentStreak = 1;\n        }\n        // 최장 연속 접속일 기록 업데이트\n        if (user.activityStats.currentStreak > user.activityStats.longestStreak) {\n            user.activityStats.longestStreak = user.activityStats.currentStreak;\n        }\n        // 총 로그인 날 수 증가\n        user.activityStats.totalLoginDays += 1;\n        user.activityStats.lastVisitDate = today;\n        await todayActivity.save();\n        await user.save();\n        console.log(`🎯 첫 방문 기록 생성: ${user.channelName} - 연속 ${user.activityStats.currentStreak}일`);\n    } catch (error) {\n        console.error('자동 체크인 처리 오류:', error);\n    // 에러가 발생해도 세션 처리는 계속 진행\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGNBQWNjLElBQUk7UUFDeEIsTUFBTWhGLEtBQUtnRixJQUFJO1FBRWY1RSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxlQUFlLEVBQUVMLEtBQUs2QixXQUFXLENBQUMsTUFBTSxFQUFFN0IsS0FBS29FLGFBQWEsQ0FBQ0UsYUFBYSxDQUFDLENBQUMsQ0FBQztJQUM1RixFQUFFLE9BQU9uRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxpQkFBaUJBO0lBQy9CLHdCQUF3QjtJQUMxQjtBQUNGIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi9hdXRoT3B0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiXG5pbXBvcnQgeyBjcmVhdGVNYW51YWxDaHp6a0NsaWVudCB9IGZyb20gXCJAL2xpYi9jaHp6a0Nvb2tpZU1hbnVhbFwiXG5pbXBvcnQgeyBpc0FkbWluQ2hhbm5lbCwgZ2V0QWRtaW5JbmZvLCBnZXRTdGF0aWNVc2VyUm9sZSB9IGZyb20gXCJAL2xpYi9hZG1pbkNoYW5uZWxzXCJcbmltcG9ydCB7IHJvbGVUb0lzQWRtaW4gfSBmcm9tICdAL2xpYi9wZXJtaXNzaW9ucydcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlVXNlciB9IGZyb20gJ0AvbGliL3VzZXJTZXJ2aWNlJ1xuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICdAL2xpYi9tb25nb2RiJ1xuaW1wb3J0IFVzZXIgZnJvbSAnQC9tb2RlbHMvVXNlcidcbmltcG9ydCBVc2VyQWN0aXZpdHkgZnJvbSAnQC9tb2RlbHMvVXNlckFjdGl2aXR5J1xuaW1wb3J0IENoenprUHJvdmlkZXIgZnJvbSAnQC9saWIvY2h6emtPQXV0aFByb3ZpZGVyJ1xuaW1wb3J0IHsgZ2V0U2VsZWN0ZWRUaXRsZUluZm8gfSBmcm9tICdAL2xpYi90aXRsZVN5c3RlbSdcblxuLy8g7IKs7Jqp7J6QIOygleuztCDrqZTrqqjrpqwg7LqQ7IucICg167aE6rCEIOycoO2aqClcbmNvbnN0IHVzZXJDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGRhdGE6IGFueSwgdGltZXN0YW1wOiBudW1iZXIgfT4oKVxuY29uc3QgQ0FDSEVfRFVSQVRJT04gPSA1ICogNjAgKiAxMDAwIC8vIDXrtoRcblxuLy8g7LqQ7Iuc65CcIOyCrOyaqeyekCDsoJXrs7Qg7KGw7ZqMXG5hc3luYyBmdW5jdGlvbiBnZXRDYWNoZWRVc2VyKGNoYW5uZWxJZDogc3RyaW5nKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3QgY2FjaGVkID0gdXNlckNhY2hlLmdldChjaGFubmVsSWQpXG4gIFxuICAvLyDsupDsi5zqsIAg7J6I6rOgIOyVhOyngSDsnKDtmqjtlZjrqbQg7LqQ7IucIOyCrOyaqVxuICBpZiAoY2FjaGVkICYmIChub3cgLSBjYWNoZWQudGltZXN0YW1wKSA8IENBQ0hFX0RVUkFUSU9OKSB7XG4gICAgcmV0dXJuIGNhY2hlZC5kYXRhXG4gIH1cbiAgXG4gIC8vIOy6kOyLnOqwgCDsl4bqsbDrgpgg66eM66OM65CY7JeI7Jy866m0IERCIOyhsO2ajFxuICB0cnkge1xuICAgIGF3YWl0IGRiQ29ubmVjdCgpXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGNoYW5uZWxJZCB9KVxuICAgIFxuICAgIC8vIOyhsO2ajCDqsrDqs7zrpbwg7LqQ7Iuc7JeQIOyggOyepVxuICAgIHVzZXJDYWNoZS5zZXQoY2hhbm5lbElkLCB7XG4gICAgICBkYXRhOiB1c2VyLFxuICAgICAgdGltZXN0YW1wOiBub3dcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiB1c2VyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gREIg7KGw7ZqMIOyLpO2MqCDsi5wg66eM66OM65CcIOy6kOyLnOudvOuPhCDsnojsnLzrqbQg7IKs7JqpXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgY29uc29sZS5sb2coJ0RCIOyhsO2ajCDsi6TtjKgsIOunjOujjOuQnCDsupDsi5wg7IKs7JqpOicsIGNoYW5uZWxJZClcbiAgICAgIHJldHVybiBjYWNoZWQuZGF0YVxuICAgIH1cbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ2h6emtQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQ0haWktfQ0xJRU5UX0lEISxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQ0haWktfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBpZDogXCJjaHp6ay1jb29raWVcIixcbiAgICAgIG5hbWU6IFwi7LmY7KeA7KeBIOy/oO2CpCDroZzqt7jsnbhcIixcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGNvb2tpZXM6IHsgXG4gICAgICAgICAgbGFiZWw6IFwi7LmY7KeA7KeBIOy/oO2CpFwiLCBcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogXCJOSURfQVVUPS4uLjsgTklEX1NFUz0uLi5cIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uY29va2llcykgcmV0dXJuIG51bGxcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB7IGNsaWVudCwgdXNlckluZm8gfSA9IGF3YWl0IGNyZWF0ZU1hbnVhbENoenprQ2xpZW50KCdjb29raWUtdXNlcicsIGNyZWRlbnRpYWxzLmNvb2tpZXMpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF1c2VySW5mbyB8fCAhdXNlckluZm8ubG9nZ2VkSW4pIHJldHVybiBudWxsXG4gICAgICAgICAgXG4gICAgICAgICAgbGV0IGNoYW5uZWxJbmZvID0gbnVsbFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoY2xpZW50LmNoYW5uZWwgJiYgdHlwZW9mIGNsaWVudC5jaGFubmVsLmluZm8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgY2hhbm5lbEluZm8gPSBhd2FpdCBjbGllbnQuY2hhbm5lbC5pbmZvKHVzZXJJbmZvLnVzZXJJZEhhc2gpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfssYTrhJAg7KCV67O0IOqwgOyguOyYpOq4sCDsi6TtjKg6JywgZXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IGNoYW5uZWxJbmZvPy5jaGFubmVsSWQgfHwgdXNlckluZm8udXNlcklkSGFzaFxuICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gY2hhbm5lbEluZm8/LmNoYW5uZWxOYW1lIHx8IHVzZXJJbmZvLm5pY2tuYW1lIHx8ICfsuZjsp4Dsp4Eg7IKs7Jqp7J6QJ1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGlzQWRtaW4gPSBpc0FkbWluQ2hhbm5lbChjaGFubmVsSWQpXG4gICAgICAgICAgY29uc3QgYWRtaW5JbmZvID0gZ2V0QWRtaW5JbmZvKGNoYW5uZWxJZClcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBpZDogdXNlckluZm8udXNlcklkSGFzaCxcbiAgICAgICAgICAgIG5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICAgICAgZW1haWw6IG51bGwsXG4gICAgICAgICAgICBpbWFnZTogY2hhbm5lbEluZm8/LmNoYW5uZWxJbWFnZVVybCB8fCBudWxsLFxuICAgICAgICAgICAgbmF2ZXJJZDogbnVsbCxcbiAgICAgICAgICAgIGNoYW5uZWxJZDogY2hhbm5lbElkLFxuICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICAgICAgY2hhbm5lbEltYWdlVXJsOiBjaGFubmVsSW5mbz8uY2hhbm5lbEltYWdlVXJsIHx8IG51bGwsXG4gICAgICAgICAgICBmb2xsb3dlckNvdW50OiBjaGFubmVsSW5mbz8uZm9sbG93ZXJDb3VudCB8fCBudWxsLFxuICAgICAgICAgICAgaXNBZG1pbixcbiAgICAgICAgICAgIGFkbWluUm9sZTogYWRtaW5JbmZvPy5yb2xlIHx8IG51bGwsXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjcmVhdGVPclVwZGF0ZVVzZXIoe1xuICAgICAgICAgICAgICBjaGFubmVsSWQ6IGNoYW5uZWxJZCxcbiAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IGNoYW5uZWxJbmZvPy5jaGFubmVsSW1hZ2VVcmxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign7IKs7Jqp7J6QIERCIOyggOyepSDsmKTrpZg6JywgZGJFcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+y5mOyngOyngSDsv6DtgqQg66Gc6re47J24IOyYpOulmDonLCBlcnJvcilcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgLy8gT0F1dGgg67Cp7IudICjsuZjsp4Dsp4Eg6rO17IudIEFQSSlcbiAgICAgICAgaWYgKGFjY291bnQ/LnByb3ZpZGVyID09PSAnY2h6emsnKSB7XG4gICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gdXNlci5jaGFubmVsSWQgfHwgdXNlci5pZFxuICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gdXNlci5jaGFubmVsTmFtZSB8fCB1c2VyLm5hbWVcbiAgICAgICAgICBjb25zdCByb2xlID0gZ2V0U3RhdGljVXNlclJvbGUoY2hhbm5lbElkKVxuICAgICAgICAgIGNvbnN0IGFkbWluSW5mbyA9IGdldEFkbWluSW5mbyhjaGFubmVsSWQpXG4gICAgICAgICAgXG4gICAgICAgICAgdG9rZW4ubmF2ZXJJZCA9IG51bGxcbiAgICAgICAgICB0b2tlbi5jaGFubmVsSWQgPSBjaGFubmVsSWRcbiAgICAgICAgICB0b2tlbi5jaGFubmVsTmFtZSA9IGNoYW5uZWxOYW1lXG4gICAgICAgICAgdG9rZW4uY2hhbm5lbEltYWdlVXJsID0gdXNlci5jaGFubmVsSW1hZ2VVcmwgfHwgdXNlci5pbWFnZVxuICAgICAgICAgIHRva2VuLmZvbGxvd2VyQ291bnQgPSB1c2VyLmZvbGxvd2VyQ291bnRcbiAgICAgICAgICB0b2tlbi5yb2xlID0gcm9sZVxuICAgICAgICAgIHRva2VuLmlzQWRtaW4gPSByb2xlVG9Jc0FkbWluKHJvbGUpIC8vIO2VmOychCDtmLjtmZjshLFcbiAgICAgICAgICB0b2tlbi5hZG1pblJvbGUgPSBhZG1pbkluZm8/LnJvbGUgfHwgbnVsbFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIOyCrOyaqeyekCDsoJXrs7QgRELsl5Ag7KCA7J6lXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRiVXNlciA9IGF3YWl0IGNyZWF0ZU9yVXBkYXRlVXNlcih7XG4gICAgICAgICAgICAgIGNoYW5uZWxJZDogY2hhbm5lbElkLFxuICAgICAgICAgICAgICBjaGFubmVsTmFtZTogY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICAgIHByb2ZpbGVJbWFnZVVybDogdXNlci5jaGFubmVsSW1hZ2VVcmwgfHwgdXNlci5pbWFnZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRva2VuLnVzZXJJZCA9IGRiVXNlci5faWQudG9TdHJpbmcoKSAvLyBNb25nb0RCIE9iamVjdElk66W8IO2GoO2BsOyXkCDsoIDsnqVcbiAgICAgICAgICB9IGNhdGNoIChkYkVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdPQXV0aCDsgqzsmqnsnpAgREIg7KCA7J6lIOyYpOulmDonLCBkYkVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyDsv6DtgqQg67Cp7IudICjquLDsobQg66Gc7KeBKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCByb2xlID0gZ2V0U3RhdGljVXNlclJvbGUodXNlci5jaGFubmVsSWQpXG4gICAgICAgICAgY29uc3QgYWRtaW5JbmZvID0gZ2V0QWRtaW5JbmZvKHVzZXIuY2hhbm5lbElkKVxuICAgICAgICAgIFxuICAgICAgICAgIHRva2VuLm5hdmVySWQgPSB1c2VyLm5hdmVySWRcbiAgICAgICAgICB0b2tlbi5jaGFubmVsSWQgPSB1c2VyLmNoYW5uZWxJZFxuICAgICAgICAgIHRva2VuLmNoYW5uZWxOYW1lID0gdXNlci5jaGFubmVsTmFtZVxuICAgICAgICAgIHRva2VuLmNoYW5uZWxJbWFnZVVybCA9IHVzZXIuY2hhbm5lbEltYWdlVXJsXG4gICAgICAgICAgdG9rZW4uZm9sbG93ZXJDb3VudCA9IHVzZXIuZm9sbG93ZXJDb3VudFxuICAgICAgICAgIHRva2VuLnJvbGUgPSByb2xlXG4gICAgICAgICAgdG9rZW4uaXNBZG1pbiA9IHJvbGVUb0lzQWRtaW4ocm9sZSkgLy8g7ZWY7JyEIO2YuO2ZmOyEsVxuICAgICAgICAgIHRva2VuLmFkbWluUm9sZSA9IGFkbWluSW5mbz8ucm9sZSB8fCBudWxsXG4gICAgICAgICAgXG4gICAgICAgICAgLy8g7L+g7YKkIOuwqeyLneyXkOyEnOuPhCBEQuyXkCDsgqzsmqnsnpAg7KCV67O0IOyggOyepe2VmOqzoCBPYmplY3RJZCDqsIDsoLjsmKTquLBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgY3JlYXRlT3JVcGRhdGVVc2VyKHtcbiAgICAgICAgICAgICAgY2hhbm5lbElkOiB1c2VyLmNoYW5uZWxJZCxcbiAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IHVzZXIuY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICAgIHByb2ZpbGVJbWFnZVVybDogdXNlci5jaGFubmVsSW1hZ2VVcmxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0b2tlbi51c2VySWQgPSBkYlVzZXIuX2lkLnRvU3RyaW5nKCkgLy8gTW9uZ29EQiBPYmplY3RJZOulvCDthqDtgbDsl5Ag7KCA7J6lXG4gICAgICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign7L+g7YKkIOuwqeyLnSDsgqzsmqnsnpAgREIg7KCA7J6lIOyYpOulmDonLCBkYkVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuXG4gICAgfSxcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgaWYgKHRva2VuICYmIHNlc3Npb24udXNlcikge1xuICAgICAgICAvLyDquLDrs7gg7Yag7YGwIOygleuztCDshKTsoJVcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4udXNlcklkIGFzIHN0cmluZyAvLyBOZXh0QXV0aCDtkZzspIAg7ZWE65OcXG4gICAgICAgIHNlc3Npb24udXNlci5uYXZlcklkID0gdG9rZW4ubmF2ZXJJZCBhcyBzdHJpbmcgfHwgbnVsbFxuICAgICAgICBzZXNzaW9uLnVzZXIuY2hhbm5lbElkID0gdG9rZW4uY2hhbm5lbElkIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIudXNlcklkID0gdG9rZW4udXNlcklkIGFzIHN0cmluZyAvLyBNb25nb0RCIE9iamVjdElkIOy2lOqwgFxuICAgICAgICBzZXNzaW9uLnVzZXIuZm9sbG93ZXJDb3VudCA9IHRva2VuLmZvbGxvd2VyQ291bnQgYXMgbnVtYmVyXG4gICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZSBhcyBzdHJpbmdcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlzQWRtaW4gPSB0b2tlbi5pc0FkbWluIGFzIGJvb2xlYW5cbiAgICAgICAgc2Vzc2lvbi51c2VyLmFkbWluUm9sZSA9IHRva2VuLmFkbWluUm9sZSBhcyBzdHJpbmdcbiAgICAgICAgXG4gICAgICAgIC8vIOq4sOuzuCDshLjshZgg7KCV67O0IOuovOyggCDshKTsoJUgKO2GoO2BsCDquLDrsJgpXG4gICAgICAgIHNlc3Npb24udXNlci5jaGFubmVsTmFtZSA9IHRva2VuLmNoYW5uZWxOYW1lIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIubmFtZSA9IHRva2VuLmNoYW5uZWxOYW1lIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIuY2hhbm5lbEltYWdlVXJsID0gdG9rZW4uY2hhbm5lbEltYWdlVXJsIGFzIHN0cmluZ1xuICAgICAgICBcbiAgICAgICAgLy8g7LqQ7Iuc65CcIOyCrOyaqeyekCDsoJXrs7Qg6rCA7KC47Jik6riwICjshKDtg53soIEg7JeF642w7J207Yq4KVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDYWNoZWRVc2VyKHRva2VuLmNoYW5uZWxJZCBhcyBzdHJpbmcpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIERC7JeQ7IScIOqwgOyguOyYqCDsoJXrs7TroZwg7JeF642w7J207Yq4ICjquLDsobQg7KCV67O0IOuNruyWtOyUgClcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5jaGFubmVsTmFtZSA9IHVzZXIuY2hhbm5lbE5hbWVcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdXNlci5kaXNwbGF5TmFtZSB8fCB1c2VyLmNoYW5uZWxOYW1lXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuaW1hZ2UgPSB1c2VyLnByb2ZpbGVJbWFnZVVybCB8fCBzZXNzaW9uLnVzZXIuY2hhbm5lbEltYWdlVXJsXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuY2hhbm5lbEltYWdlVXJsID0gdXNlci5wcm9maWxlSW1hZ2VVcmwgfHwgc2Vzc2lvbi51c2VyLmNoYW5uZWxJbWFnZVVybFxuICAgICAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB1c2VyLnJvbGUgLy8gRELsl5DshJwg6rCA7KC47JioIOy1nOyLoCDqtoztlZwg7IKs7JqpXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuaXNBZG1pbiA9IHJvbGVUb0lzQWRtaW4odXNlci5yb2xlIGFzIGFueSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g7ISg7YOd65CcIOy5re2YuCDsoJXrs7Qg7LaU6rCAXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRpdGxlID0gZ2V0U2VsZWN0ZWRUaXRsZUluZm8odXNlcilcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5zZWxlY3RlZFRpdGxlID0gc2VsZWN0ZWRUaXRsZVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBEQuyXkCDsgqzsmqnsnpDqsIAg7JeG7Jy866m0IOq4sOuzuCDsoJXrs7Qg6re464yA66GcIOyCrOyaqVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+yEuOyFmCDsvZzrsLHsl5DshJwg7IKs7Jqp7J6QIOygleuztCDsobDtmowg7Jik66WYOicsIGVycm9yKVxuICAgICAgICAgIC8vIERCIOyXsOqysCDsi6TtjKgg7IucIOq4sOuzuCDsoJXrs7Qo7Yag7YGwIOq4sOuwmCkg6re464yA66GcIOyCrOyaqVxuICAgICAgICAgIC8vIOuzhOuPhCDsspjrpqwg67aI7ZWE7JqUIC0g7J2066+4IOychOyXkOyEnCDquLDrs7jqsJIg7ISk7KCV65CoXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uXG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nLFxuICAgIGVycm9yOiAnL2F1dGgvZXJyb3InLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIgYXMgY29uc3QsXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBkZWJ1ZzogZmFsc2UsIC8vIOuUlOuyhOq3uCDrqqjrk5wg67mE7Zmc7ISx7ZmUXG59XG5cbi8vIOykkeuztSDssrTtgazsnbgg67Cp7KeA66W8IOychO2VnCDrqZTrqqjrpqwg7LqQ7IucICh1c2VySWQ6ZGF0ZSAtPiB0aW1lc3RhbXApXG5jb25zdCBjaGVja2luQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG5cbi8qKlxuICog7IS47IWYIOy9nOuwseyXkOyEnCDsnpDrj5nsnLzroZwg7J287J28IOyytO2BrOyduCDsspjrpqxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybURhaWx5Q2hlY2tpbih1c2VyOiBhbnkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdIC8vIFlZWVktTU0tRERcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgXG4gICAgLy8g7Jik64qYIO2ZnOuPmSDquLDroZ3snbQg7J6I64qU7KeAIO2ZleyduCAo7IS47IWY7JeQ7ISc64qUIOyyqyDrsKnrrLgg7IOd7ISx66eMKVxuICAgIGxldCB0b2RheUFjdGl2aXR5ID0gYXdhaXQgVXNlckFjdGl2aXR5LmZpbmRPbmUoe1xuICAgICAgdXNlcklkOiB1c2VyLl9pZCxcbiAgICAgIGRhdGU6IHRvZGF5XG4gICAgfSlcblxuICAgIC8vIOyYpOuKmCDtmZzrj5kg6riw66Gd7J20IOydtOuvuCDsnojsnLzrqbQg7JWE66y06rKD64+EIO2VmOyngCDslYrsnYxcbiAgICBpZiAodG9kYXlBY3Rpdml0eSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8g6riw7KG0IOyCrOyaqeyekOydmCBhY3Rpdml0eVN0YXRz6rCAIOyXhuycvOuptCDstIjquLDtmZRcbiAgICBpZiAoIXVzZXIuYWN0aXZpdHlTdGF0cykge1xuICAgICAgdXNlci5hY3Rpdml0eVN0YXRzID0ge1xuICAgICAgICB0b3RhbExvZ2luRGF5czogMCxcbiAgICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgICAgbG9uZ2VzdFN0cmVhazogMCxcbiAgICAgICAgbGFzdFZpc2l0RGF0ZTogbnVsbCxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDsmKTripgg7LKrIOuwqeusuCAtIOyDiOuhnOyatCDtmZzrj5kg6riw66GdIOyDneyEsVxuICAgIHRvZGF5QWN0aXZpdHkgPSBuZXcgVXNlckFjdGl2aXR5KHtcbiAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICBkYXRlOiB0b2RheSxcbiAgICAgIHZpc2l0Q291bnQ6IDEsXG4gICAgICBmaXJzdFZpc2l0QXQ6IG5vdyxcbiAgICAgIGxhc3RWaXNpdEF0OiBub3dcbiAgICB9KVxuXG4gICAgLy8g7Jew7IaNIOygkeyGjeydvCDqs4TsgrBcbiAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSgpXG4gICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpXG4gICAgY29uc3QgeWVzdGVyZGF5U3RyID0geWVzdGVyZGF5LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuXG4gICAgaWYgKHVzZXIuYWN0aXZpdHlTdGF0cy5sYXN0VmlzaXREYXRlID09PSB5ZXN0ZXJkYXlTdHIpIHtcbiAgICAgIC8vIOyWtOygnCDrsKnrrLjtlojsnLzrqbQg7Jew7IaNIOygkeyGjeydvCDspp3qsIBcbiAgICAgIHVzZXIuYWN0aXZpdHlTdGF0cy5jdXJyZW50U3RyZWFrICs9IDFcbiAgICB9IGVsc2UgaWYgKHVzZXIuYWN0aXZpdHlTdGF0cy5sYXN0VmlzaXREYXRlICE9PSB0b2RheSkge1xuICAgICAgLy8g7Ja07KCcIOuwqeusuCDslYjtlojsnLzrqbQg7Jew7IaNIOygkeyGjeydvCDstIjquLDtmZQgKOyYpOuKmOu2gO2EsCAx7J28KVxuICAgICAgdXNlci5hY3Rpdml0eVN0YXRzLmN1cnJlbnRTdHJlYWsgPSAxXG4gICAgfVxuXG4gICAgLy8g7LWc7J6lIOyXsOyGjSDsoJHsho3snbwg6riw66GdIOyXheuNsOydtO2KuFxuICAgIGlmICh1c2VyLmFjdGl2aXR5U3RhdHMuY3VycmVudFN0cmVhayA+IHVzZXIuYWN0aXZpdHlTdGF0cy5sb25nZXN0U3RyZWFrKSB7XG4gICAgICB1c2VyLmFjdGl2aXR5U3RhdHMubG9uZ2VzdFN0cmVhayA9IHVzZXIuYWN0aXZpdHlTdGF0cy5jdXJyZW50U3RyZWFrXG4gICAgfVxuXG4gICAgLy8g7LSdIOuhnOq3uOyduCDrgqAg7IiYIOymneqwgFxuICAgIHVzZXIuYWN0aXZpdHlTdGF0cy50b3RhbExvZ2luRGF5cyArPSAxXG4gICAgdXNlci5hY3Rpdml0eVN0YXRzLmxhc3RWaXNpdERhdGUgPSB0b2RheVxuXG4gICAgYXdhaXQgdG9kYXlBY3Rpdml0eS5zYXZlKClcbiAgICBhd2FpdCB1c2VyLnNhdmUoKVxuXG4gICAgY29uc29sZS5sb2coYPCfjq8g7LKrIOuwqeusuCDquLDroZ0g7IOd7ISxOiAke3VzZXIuY2hhbm5lbE5hbWV9IC0g7Jew7IaNICR7dXNlci5hY3Rpdml0eVN0YXRzLmN1cnJlbnRTdHJlYWt97J28YClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfsnpDrj5kg7LK07YGs7J24IOyymOumrCDsmKTrpZg6JywgZXJyb3IpXG4gICAgLy8g7JeQ65+s6rCAIOuwnOyDne2VtOuPhCDshLjshZgg7LKY66as64qUIOqzhOyGjSDsp4TtlolcbiAgfVxufSJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiY3JlYXRlTWFudWFsQ2h6emtDbGllbnQiLCJpc0FkbWluQ2hhbm5lbCIsImdldEFkbWluSW5mbyIsImdldFN0YXRpY1VzZXJSb2xlIiwicm9sZVRvSXNBZG1pbiIsImNyZWF0ZU9yVXBkYXRlVXNlciIsImRiQ29ubmVjdCIsIlVzZXIiLCJVc2VyQWN0aXZpdHkiLCJDaHp6a1Byb3ZpZGVyIiwiZ2V0U2VsZWN0ZWRUaXRsZUluZm8iLCJ1c2VyQ2FjaGUiLCJNYXAiLCJDQUNIRV9EVVJBVElPTiIsImdldENhY2hlZFVzZXIiLCJjaGFubmVsSWQiLCJub3ciLCJEYXRlIiwiY2FjaGVkIiwiZ2V0IiwidGltZXN0YW1wIiwiZGF0YSIsInVzZXIiLCJmaW5kT25lIiwic2V0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJDSFpaS19DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJDSFpaS19DTElFTlRfU0VDUkVUIiwiaWQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJjb29raWVzIiwibGFiZWwiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJhdXRob3JpemUiLCJjbGllbnQiLCJ1c2VySW5mbyIsImxvZ2dlZEluIiwiY2hhbm5lbEluZm8iLCJjaGFubmVsIiwiaW5mbyIsInVzZXJJZEhhc2giLCJjaGFubmVsTmFtZSIsIm5pY2tuYW1lIiwiaXNBZG1pbiIsImFkbWluSW5mbyIsInJlc3VsdCIsImVtYWlsIiwiaW1hZ2UiLCJjaGFubmVsSW1hZ2VVcmwiLCJuYXZlcklkIiwiZm9sbG93ZXJDb3VudCIsImFkbWluUm9sZSIsInJvbGUiLCJwcm9maWxlSW1hZ2VVcmwiLCJkYkVycm9yIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJhY2NvdW50IiwicHJvdmlkZXIiLCJkYlVzZXIiLCJ1c2VySWQiLCJfaWQiLCJ0b1N0cmluZyIsInNlc3Npb24iLCJkaXNwbGF5TmFtZSIsInNlbGVjdGVkVGl0bGUiLCJwYWdlcyIsInNpZ25JbiIsInN0cmF0ZWd5Iiwic2VjcmV0IiwiTkVYVEFVVEhfU0VDUkVUIiwiZGVidWciLCJjaGVja2luQ2FjaGUiLCJwZXJmb3JtRGFpbHlDaGVja2luIiwidG9kYXkiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwidG9kYXlBY3Rpdml0eSIsImRhdGUiLCJhY3Rpdml0eVN0YXRzIiwidG90YWxMb2dpbkRheXMiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImxhc3RWaXNpdERhdGUiLCJ2aXNpdENvdW50IiwiZmlyc3RWaXNpdEF0IiwibGFzdFZpc2l0QXQiLCJ5ZXN0ZXJkYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInllc3RlcmRheVN0ciIsInNhdmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authOptions.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/chzzkCookieManual.ts":
/*!**************************************!*\
  !*** ./src/lib/chzzkCookieManual.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addManualChzzkCookie: () => (/* binding */ addManualChzzkCookie),\n/* harmony export */   createManualChzzkClient: () => (/* binding */ createManualChzzkClient),\n/* harmony export */   getManualCookies: () => (/* binding */ getManualCookies),\n/* harmony export */   printCookieGuide: () => (/* binding */ printCookieGuide),\n/* harmony export */   removeManualCookie: () => (/* binding */ removeManualCookie)\n/* harmony export */ });\n/* harmony import */ var chzzk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chzzk */ \"(rsc)/./node_modules/chzzk/dist/index.js\");\n/* harmony import */ var chzzk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(chzzk__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * 수동 쿠키 입력 및 관리 시스템\n * 자동 인증이 실패할 경우를 대비한 수동 방법\n */ \n// 수동으로 설정할 수 있는 치지직 쿠키 저장소\nconst MANUAL_CHZZK_COOKIES = {\n};\n/**\n * 수동 쿠키를 추가하는 함수 (개발자 도구용)\n */ function addManualChzzkCookie(naverId, cookies) {\n    MANUAL_CHZZK_COOKIES[naverId] = cookies;\n    console.log(`수동 쿠키 추가됨: ${naverId}`);\n}\n/**\n * 수동 쿠키를 사용해서 치지직 클라이언트 생성\n */ async function createManualChzzkClient(naverId, providedCookies) {\n    console.log('=== 수동 쿠키로 치지직 클라이언트 생성 ===');\n    // 직접 제공된 쿠키가 있으면 우선 사용\n    const cookies = providedCookies || MANUAL_CHZZK_COOKIES[naverId];\n    if (!cookies) {\n        console.log(`네이버 ID ${naverId}에 대한 수동 쿠키가 없습니다`);\n        return {\n            client: new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient(),\n            userInfo: null\n        };\n    }\n    try {\n        console.log('수동 쿠키로 클라이언트 생성:', cookies.substring(0, 50) + '...');\n        console.log('전체 쿠키 길이:', cookies.length);\n        // 쿠키에서 NID_AUT와 NID_SES 추출\n        const nidAuth = cookies.match(/NID_AUT=([^;]+)/)?.[1];\n        const nidSession = cookies.match(/NID_SES=([^;]+)/)?.[1];\n        console.log('추출된 NID_AUT:', nidAuth ? nidAuth.substring(0, 20) + '...' : 'null');\n        console.log('추출된 NID_SES:', nidSession ? nidSession.substring(0, 20) + '...' : 'null');\n        if (!nidAuth || !nidSession) {\n            console.log('필수 쿠키 (NID_AUT 또는 NID_SES)가 없습니다');\n            return {\n                client: new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient(),\n                userInfo: null\n            };\n        }\n        // 치지직 비공식 API 클라이언트 생성 (올바른 방식)\n        const client = new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient({\n            nidAuth: nidAuth,\n            nidSession: nidSession\n        });\n        console.log('ChzzkClient 생성 완료, 사용자 정보 조회 시도...');\n        // 다양한 API 메서드 시도\n        let userInfo = null;\n        try {\n            console.log('client.user() 메서드 시도...');\n            userInfo = await client.user();\n            console.log('client.user() 결과:', JSON.stringify(userInfo, null, 2));\n        } catch (userError) {\n            console.log('client.user() 실패:', userError);\n            try {\n                console.log('client.me.user() 메서드 시도...');\n                userInfo = await client.me.user();\n                console.log('client.me.user() 결과:', JSON.stringify(userInfo, null, 2));\n            } catch (meError) {\n                console.log('client.me.user() 실패:', meError);\n                try {\n                    console.log('client.me 프로퍼티 확인...');\n                    console.log('client.me:', client.me);\n                    if (client.me && typeof client.me.user === 'function') {\n                        userInfo = await client.me.user();\n                        console.log('client.me.user() 재시도 결과:', JSON.stringify(userInfo, null, 2));\n                    }\n                } catch (me2Error) {\n                    console.log('client.me 재시도 실패:', me2Error);\n                }\n            }\n        }\n        if (userInfo && userInfo.loggedIn) {\n            console.log('수동 쿠키 인증 성공!');\n            return {\n                client,\n                userInfo\n            };\n        } else {\n            console.log('사용자 정보 조회 실패, 하지만 클라이언트는 생성됨');\n            return {\n                client,\n                userInfo: null\n            };\n        }\n    } catch (error) {\n        console.log('수동 쿠키 클라이언트 생성 실패:', error);\n        console.log('error.message:', error instanceof Error ? error.message : 'Unknown error');\n        return {\n            client: new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient(),\n            userInfo: null\n        };\n    }\n}\n/**\n * 쿠키 설정 가이드 출력\n */ function printCookieGuide(naverId) {\n    console.log('=== 치지직 쿠키 수동 설정 가이드 ===');\n    console.log('1. 브라우저에서 https://chzzk.naver.com 에 로그인');\n    console.log('2. 개발자 도구 (F12) → Application/Storage → Cookies');\n    console.log('3. NID_AUT와 NID_SES 쿠키 값을 복사');\n    console.log('4. 다음 코드를 브라우저 콘솔에서 실행:');\n    console.log(``);\n    console.log(`   // 쿠키 값을 여기에 입력`);\n    console.log(`   const cookies = \"NID_AUT=당신의_NID_AUT_값; NID_SES=당신의_NID_SES_값\"`);\n    console.log(`   `);\n    console.log(`   // API 호출`);\n    console.log(`   fetch('/api/admin/set-manual-cookie', {`);\n    console.log(`     method: 'POST',`);\n    console.log(`     headers: { 'Content-Type': 'application/json' },`);\n    console.log(`     body: JSON.stringify({`);\n    console.log(`       naverId: '${naverId}',`);\n    console.log(`       cookies: cookies`);\n    console.log(`     })`);\n    console.log(`   })`);\n    console.log('');\n    console.log('5. 로그아웃 후 다시 로그인하여 테스트');\n}\n/**\n * 현재 등록된 수동 쿠키 목록 조회\n */ function getManualCookies() {\n    return {\n        ...MANUAL_CHZZK_COOKIES\n    };\n}\n/**\n * 수동 쿠키 삭제\n */ function removeManualCookie(naverId) {\n    delete MANUAL_CHZZK_COOKIES[naverId];\n    console.log(`수동 쿠키 삭제됨: ${naverId}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUFHLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQztJQUNyQ0QsUUFBUUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3JCRCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDbkJELFFBQVFDLEdBQUcsQ0FBQztJQUNaRCxRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBOztDQUVDLEdBQ00sU0FBU3NCO0lBQ2QsT0FBTztRQUFFLEdBQUczQixvQkFBb0I7SUFBQztBQUNuQztBQUVBOztDQUVDLEdBQ00sU0FBUzRCLG1CQUFtQjFCLE9BQWU7SUFDaEQsT0FBT0Ysb0JBQW9CLENBQUNFLFFBQVE7SUFDcENFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRUgsU0FBUztBQUNyQyIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9saWIvY2h6emtDb29raWVNYW51YWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDsiJjrj5kg7L+g7YKkIOyeheugpSDrsI8g6rSA66asIOyLnOyKpO2FnFxuICog7J6Q64+ZIOyduOymneydtCDsi6TtjKjtlaAg6rK97Jqw66W8IOuMgOu5hO2VnCDsiJjrj5kg67Cp67KVXG4gKi9cblxuaW1wb3J0IHsgQ2h6emtDbGllbnQgfSBmcm9tICdjaHp6aydcblxuLy8g7IiY64+Z7Jy866GcIOyEpOygle2VoCDsiJgg7J6I64qUIOy5mOyngOyngSDsv6DtgqQg7KCA7J6l7IaMXG5jb25zdCBNQU5VQUxfQ0haWktfQ09PS0lFUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8g64Sk7J2067KEIElEOiDsuZjsp4Dsp4Eg7L+g7YKkIOunpO2VkVxuICAvLyDsmIg6ICdNZTVwN19Gd0ZXMHdoeFNOd2V0WUJTa2dSQ0JoVGt1VndpLTc3bkZpZUNJJzogJ05JRF9BVVQ9Li4uOyBOSURfU0VTPS4uLidcbn1cblxuLyoqXG4gKiDsiJjrj5kg7L+g7YKk66W8IOy2lOqwgO2VmOuKlCDtlajsiJggKOqwnOuwnOyekCDrj4TqtazsmqkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRNYW51YWxDaHp6a0Nvb2tpZShuYXZlcklkOiBzdHJpbmcsIGNvb2tpZXM6IHN0cmluZykge1xuICBNQU5VQUxfQ0haWktfQ09PS0lFU1tuYXZlcklkXSA9IGNvb2tpZXNcbiAgY29uc29sZS5sb2coYOyImOuPmSDsv6DtgqQg7LaU6rCA65CoOiAke25hdmVySWR9YClcbn1cblxuLyoqXG4gKiDsiJjrj5kg7L+g7YKk66W8IOyCrOyaqe2VtOyEnCDsuZjsp4Dsp4Eg7YG065287J207Ja47Yq4IOyDneyEsVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWFudWFsQ2h6emtDbGllbnQobmF2ZXJJZDogc3RyaW5nLCBwcm92aWRlZENvb2tpZXM/OiBzdHJpbmcpIHtcbiAgY29uc29sZS5sb2coJz09PSDsiJjrj5kg7L+g7YKk66GcIOy5mOyngOyngSDtgbTrnbzsnbTslrjtirgg7IOd7ISxID09PScpXG4gIFxuICAvLyDsp4HsoJEg7KCc6rO165CcIOy/oO2CpOqwgCDsnojsnLzrqbQg7Jqw7ISgIOyCrOyaqVxuICBjb25zdCBjb29raWVzID0gcHJvdmlkZWRDb29raWVzIHx8IE1BTlVBTF9DSFpaS19DT09LSUVTW25hdmVySWRdXG4gIFxuICBpZiAoIWNvb2tpZXMpIHtcbiAgICBjb25zb2xlLmxvZyhg64Sk7J2067KEIElEICR7bmF2ZXJJZH3sl5Ag64yA7ZWcIOyImOuPmSDsv6DtgqTqsIAg7JeG7Iq164uI64ukYClcbiAgICByZXR1cm4geyBjbGllbnQ6IG5ldyBDaHp6a0NsaWVudCgpLCB1c2VySW5mbzogbnVsbCB9XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ+yImOuPmSDsv6DtgqTroZwg7YG065287J207Ja47Yq4IOyDneyEsTonLCBjb29raWVzLnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJylcbiAgICBjb25zb2xlLmxvZygn7KCE7LK0IOy/oO2CpCDquLjsnbQ6JywgY29va2llcy5sZW5ndGgpXG4gICAgXG4gICAgLy8g7L+g7YKk7JeQ7IScIE5JRF9BVVTsmYAgTklEX1NFUyDstpTstpxcbiAgICBjb25zdCBuaWRBdXRoID0gY29va2llcy5tYXRjaCgvTklEX0FVVD0oW147XSspLyk/LlsxXVxuICAgIGNvbnN0IG5pZFNlc3Npb24gPSBjb29raWVzLm1hdGNoKC9OSURfU0VTPShbXjtdKykvKT8uWzFdXG4gICAgXG4gICAgY29uc29sZS5sb2coJ+y2lOy2nOuQnCBOSURfQVVUOicsIG5pZEF1dGggPyBuaWRBdXRoLnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJyA6ICdudWxsJylcbiAgICBjb25zb2xlLmxvZygn7LaU7Lac65CcIE5JRF9TRVM6JywgbmlkU2Vzc2lvbiA/IG5pZFNlc3Npb24uc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nIDogJ251bGwnKVxuICAgIFxuICAgIGlmICghbmlkQXV0aCB8fCAhbmlkU2Vzc2lvbikge1xuICAgICAgY29uc29sZS5sb2coJ+2VhOyImCDsv6DtgqQgKE5JRF9BVVQg65iQ64qUIE5JRF9TRVMp6rCAIOyXhuyKteuLiOuLpCcpXG4gICAgICByZXR1cm4geyBjbGllbnQ6IG5ldyBDaHp6a0NsaWVudCgpLCB1c2VySW5mbzogbnVsbCB9XG4gICAgfVxuICAgIFxuICAgIC8vIOy5mOyngOyngSDruYTqs7Xsi50gQVBJIO2BtOudvOydtOyWuO2KuCDsg53shLEgKOyYrOuwlOuluCDrsKnsi50pXG4gICAgY29uc3QgY2xpZW50ID0gbmV3IENoenprQ2xpZW50KHtcbiAgICAgIG5pZEF1dGg6IG5pZEF1dGgsXG4gICAgICBuaWRTZXNzaW9uOiBuaWRTZXNzaW9uXG4gICAgfSlcbiAgICBcbiAgICBjb25zb2xlLmxvZygnQ2h6emtDbGllbnQg7IOd7ISxIOyZhOujjCwg7IKs7Jqp7J6QIOygleuztCDsobDtmowg7Iuc64+ELi4uJylcbiAgICBcbiAgICAvLyDri6TslpHtlZwgQVBJIOuplOyEnOuTnCDsi5zrj4RcbiAgICBsZXQgdXNlckluZm8gPSBudWxsXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdjbGllbnQudXNlcigpIOuplOyEnOuTnCDsi5zrj4QuLi4nKVxuICAgICAgdXNlckluZm8gPSBhd2FpdCBjbGllbnQudXNlcigpXG4gICAgICBjb25zb2xlLmxvZygnY2xpZW50LnVzZXIoKSDqsrDqs7w6JywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8sIG51bGwsIDIpKVxuICAgIH0gY2F0Y2ggKHVzZXJFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2NsaWVudC51c2VyKCkg7Iuk7YyoOicsIHVzZXJFcnJvcilcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudC5tZS51c2VyKCkg66mU7ISc65OcIOyLnOuPhC4uLicpXG4gICAgICAgIHVzZXJJbmZvID0gYXdhaXQgY2xpZW50Lm1lLnVzZXIoKVxuICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lLnVzZXIoKSDqsrDqs7w6JywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8sIG51bGwsIDIpKVxuICAgICAgfSBjYXRjaCAobWVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lLnVzZXIoKSDsi6TtjKg6JywgbWVFcnJvcilcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudC5tZSDtlITroZztjbzti7Ag7ZmV7J24Li4uJylcbiAgICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lOicsIGNsaWVudC5tZSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoY2xpZW50Lm1lICYmIHR5cGVvZiBjbGllbnQubWUudXNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXNlckluZm8gPSBhd2FpdCBjbGllbnQubWUudXNlcigpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lLnVzZXIoKSDsnqzsi5zrj4Qg6rKw6rO8OicsIEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvLCBudWxsLCAyKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKG1lMkVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudC5tZSDsnqzsi5zrj4Qg7Iuk7YyoOicsIG1lMkVycm9yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICh1c2VySW5mbyAmJiB1c2VySW5mby5sb2dnZWRJbikge1xuICAgICAgY29uc29sZS5sb2coJ+yImOuPmSDsv6DtgqQg7J247KadIOyEseqztSEnKVxuICAgICAgcmV0dXJuIHsgY2xpZW50LCB1c2VySW5mbyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfsgqzsmqnsnpAg7KCV67O0IOyhsO2ajCDsi6TtjKgsIO2VmOyngOunjCDtgbTrnbzsnbTslrjtirjripQg7IOd7ISx65CoJylcbiAgICAgIHJldHVybiB7IGNsaWVudCwgdXNlckluZm86IG51bGwgfVxuICAgIH1cbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygn7IiY64+ZIOy/oO2CpCDtgbTrnbzsnbTslrjtirgg7IOd7ISxIOyLpO2MqDonLCBlcnJvcilcbiAgICBjb25zb2xlLmxvZygnZXJyb3IubWVzc2FnZTonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJylcbiAgICByZXR1cm4geyBjbGllbnQ6IG5ldyBDaHp6a0NsaWVudCgpLCB1c2VySW5mbzogbnVsbCB9XG4gIH1cbn1cblxuLyoqXG4gKiDsv6DtgqQg7ISk7KCVIOqwgOydtOuTnCDstpzroKVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaW50Q29va2llR3VpZGUobmF2ZXJJZDogc3RyaW5nKSB7XG4gIGNvbnNvbGUubG9nKCc9PT0g7LmY7KeA7KeBIOy/oO2CpCDsiJjrj5kg7ISk7KCVIOqwgOydtOuTnCA9PT0nKVxuICBjb25zb2xlLmxvZygnMS4g67iM65287Jqw7KCA7JeQ7IScIGh0dHBzOi8vY2h6emsubmF2ZXIuY29tIOyXkCDroZzqt7jsnbgnKVxuICBjb25zb2xlLmxvZygnMi4g6rCc67Cc7J6QIOuPhOq1rCAoRjEyKSDihpIgQXBwbGljYXRpb24vU3RvcmFnZSDihpIgQ29va2llcycpXG4gIGNvbnNvbGUubG9nKCczLiBOSURfQVVU7JmAIE5JRF9TRVMg7L+g7YKkIOqwkuydhCDrs7XsgqwnKVxuICBjb25zb2xlLmxvZygnNC4g64uk7J2MIOy9lOuTnOulvCDruIzrnbzsmrDsoIAg7L2Y7IaU7JeQ7IScIOyLpO2WiTonKVxuICBjb25zb2xlLmxvZyhgYClcbiAgY29uc29sZS5sb2coYCAgIC8vIOy/oO2CpCDqsJLsnYQg7Jes6riw7JeQIOyeheugpWApXG4gIGNvbnNvbGUubG9nKGAgICBjb25zdCBjb29raWVzID0gXCJOSURfQVVUPeuLueyLoOydmF9OSURfQVVUX+qwkjsgTklEX1NFUz3ri7nsi6DsnZhfTklEX1NFU1/qsJJcImApXG4gIGNvbnNvbGUubG9nKGAgICBgKVxuICBjb25zb2xlLmxvZyhgICAgLy8gQVBJIO2YuOy2nGApXG4gIGNvbnNvbGUubG9nKGAgICBmZXRjaCgnL2FwaS9hZG1pbi9zZXQtbWFudWFsLWNvb2tpZScsIHtgKVxuICBjb25zb2xlLmxvZyhgICAgICBtZXRob2Q6ICdQT1NUJyxgKVxuICBjb25zb2xlLmxvZyhgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxgKVxuICBjb25zb2xlLmxvZyhgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YClcbiAgY29uc29sZS5sb2coYCAgICAgICBuYXZlcklkOiAnJHtuYXZlcklkfScsYClcbiAgY29uc29sZS5sb2coYCAgICAgICBjb29raWVzOiBjb29raWVzYClcbiAgY29uc29sZS5sb2coYCAgICAgfSlgKVxuICBjb25zb2xlLmxvZyhgICAgfSlgKVxuICBjb25zb2xlLmxvZygnJylcbiAgY29uc29sZS5sb2coJzUuIOuhnOq3uOyVhOybgyDtm4Qg64uk7IucIOuhnOq3uOyduO2VmOyXrCDthYzsiqTtirgnKVxufVxuXG4vKipcbiAqIO2YhOyerCDrk7HroZ3rkJwg7IiY64+ZIOy/oO2CpCDrqqnroZ0g7KGw7ZqMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYW51YWxDb29raWVzKCkge1xuICByZXR1cm4geyAuLi5NQU5VQUxfQ0haWktfQ09PS0lFUyB9XG59XG5cbi8qKlxuICog7IiY64+ZIOy/oO2CpCDsgq3soJxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1hbnVhbENvb2tpZShuYXZlcklkOiBzdHJpbmcpIHtcbiAgZGVsZXRlIE1BTlVBTF9DSFpaS19DT09LSUVTW25hdmVySWRdXG4gIGNvbnNvbGUubG9nKGDsiJjrj5kg7L+g7YKkIOyCreygnOuQqDogJHtuYXZlcklkfWApXG59Il0sIm5hbWVzIjpbIkNoenprQ2xpZW50IiwiTUFOVUFMX0NIWlpLX0NPT0tJRVMiLCJhZGRNYW51YWxDaHp6a0Nvb2tpZSIsIm5hdmVySWQiLCJjb29raWVzIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZU1hbnVhbENoenprQ2xpZW50IiwicHJvdmlkZWRDb29raWVzIiwiY2xpZW50IiwidXNlckluZm8iLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJuaWRBdXRoIiwibWF0Y2giLCJuaWRTZXNzaW9uIiwidXNlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1c2VyRXJyb3IiLCJtZSIsIm1lRXJyb3IiLCJtZTJFcnJvciIsImxvZ2dlZEluIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJwcmludENvb2tpZUd1aWRlIiwiZ2V0TWFudWFsQ29va2llcyIsInJlbW92ZU1hbnVhbENvb2tpZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/chzzkCookieManual.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/chzzkOAuthProvider.ts":
/*!***************************************!*\
  !*** ./src/lib/chzzkOAuthProvider.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChzzkProvider)\n/* harmony export */ });\n// 토큰을 저장할 임시 변수\nlet currentAccessToken = null;\nfunction ChzzkProvider(options) {\n    return {\n        id: \"chzzk\",\n        name: \"치지직\",\n        type: \"oauth\",\n        authorization: {\n            url: \"https://chzzk.naver.com/account-interlock\",\n            params: {\n                clientId: options.clientId,\n                redirectUri: `${process.env.NEXTAUTH_URL}/api/auth/callback/chzzk`,\n                response_type: \"code\"\n            }\n        },\n        // 디버깅을 위한 로그\n        ... true && {\n            debug: true\n        },\n        token: {\n            url: \"https://chzzk.naver.com/auth/v1/token\",\n            async request (context) {\n                const response = await fetch(\"https://chzzk.naver.com/auth/v1/token\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        grantType: \"authorization_code\",\n                        clientId: options.clientId,\n                        clientSecret: options.clientSecret,\n                        code: context.params.code,\n                        state: context.params.state\n                    })\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    console.error('치지직 토큰 요청 실패:', {\n                        status: response.status,\n                        statusText: response.statusText,\n                        error: errorText,\n                        clientId: options.clientId,\n                        redirectUri: `${process.env.NEXTAUTH_URL}/api/auth/callback/chzzk`\n                    });\n                    // API 승인 관련 오류인지 확인\n                    if (response.status === 401 || response.status === 403) {\n                        throw new Error(`치지직 API 승인이 필요합니다. 클라이언트 ID/SECRET을 확인하거나 API 승인 상태를 확인하세요. (${response.status})`);\n                    }\n                    throw new Error(`Token request failed: ${response.status} - ${errorText}`);\n                }\n                const tokens = await response.json();\n                const result = {\n                    access_token: tokens.content?.accessToken || tokens.accessToken,\n                    refresh_token: tokens.content?.refreshToken || tokens.refreshToken,\n                    token_type: tokens.content?.tokenType || tokens.tokenType || \"Bearer\",\n                    expires_in: tokens.content?.expiresIn || tokens.expiresIn || 86400\n                };\n                // 토큰을 임시 변수에 저장\n                currentAccessToken = result.access_token;\n                return result;\n            }\n        },\n        userinfo: {\n            url: \"https://chzzk.naver.com/open/v1/users/me\",\n            async request (context) {\n                // context에서 토큰을 가져오거나 임시 저장된 토큰 사용\n                const accessToken = context.tokens?.access_token || currentAccessToken;\n                // 액세스 토큰이 없으면 로그인 실패\n                if (!accessToken) {\n                    throw new Error('Access token not found');\n                }\n                // 치지직 공식 사용자 정보 API 호출\n                try {\n                    const response = await fetch(\"https://openapi.chzzk.naver.com/open/v1/users/me\", {\n                        method: \"GET\",\n                        headers: {\n                            Authorization: `Bearer ${accessToken}`,\n                            \"Content-Type\": \"application/json\"\n                        }\n                    });\n                    if (response.ok) {\n                        const userData = await response.json();\n                        const content = userData.content || userData;\n                        if (content.channelId && content.channelName) {\n                            return {\n                                userIdHash: content.channelId,\n                                nickname: content.channelName || content.nickname,\n                                profileImageUrl: content.profileImageUrl || content.channelImageUrl,\n                                channelId: content.channelId,\n                                channelName: content.channelName || content.nickname,\n                                channelImageUrl: content.channelImageUrl,\n                                followerCount: content.followerCount || 0\n                            };\n                        }\n                    } else {\n                        const errorText = await response.text();\n                        console.error('치지직 사용자 정보 API 호출 실패:', {\n                            status: response.status,\n                            statusText: response.statusText,\n                            error: errorText,\n                            accessToken: accessToken ? '토큰 있음' : '토큰 없음'\n                        });\n                        // API 승인 관련 오류인지 확인\n                        if (response.status === 401 || response.status === 403) {\n                            throw new Error(`치지직 API 승인이 필요합니다. 개발자 콘솔에서 API 승인 상태를 확인하세요. (${response.status})`);\n                        }\n                    }\n                // 공식 API 응답이 유효하지 않음\n                } catch (error) {\n                    console.error('치지직 공식 API 호출 실패:', error);\n                    // API 승인 관련 오류라면 더 명확한 메시지 표시\n                    if (error.message && error.message.includes('승인')) {\n                        throw error;\n                    }\n                }\n                // Fallback API들 시도\n                const fallbackUrls = [\n                    'https://api.chzzk.naver.com/open/v1/users/me',\n                    'https://comm-api.game.naver.com/nng_main/v1/user/getUserStatus'\n                ];\n                for (const url of fallbackUrls){\n                    try {\n                        const response = await fetch(url, {\n                            method: \"GET\",\n                            headers: {\n                                Authorization: `Bearer ${accessToken}`,\n                                \"Content-Type\": \"application/json\"\n                            }\n                        });\n                        if (response.ok) {\n                            const responseText = await response.text();\n                            // HTML 응답 건너뛰기\n                            if (responseText.includes('<!doctype html>')) continue;\n                            const userData = JSON.parse(responseText);\n                            const content = userData.content || userData.response || userData;\n                            if (content.channelId && content.channelName) {\n                                return {\n                                    userIdHash: content.channelId,\n                                    nickname: content.channelName,\n                                    profileImageUrl: content.profileImageUrl || content.channelImageUrl,\n                                    channelId: content.channelId,\n                                    channelName: content.channelName,\n                                    channelImageUrl: content.channelImageUrl,\n                                    followerCount: content.followerCount || 0\n                                };\n                            }\n                        }\n                    } catch (error) {\n                        continue;\n                    }\n                }\n                // 모든 API 실패\n                throw new Error('Chzzk user info API failed');\n            }\n        },\n        profile (profile) {\n            return {\n                id: profile.userIdHash,\n                name: profile.channelName || profile.nickname,\n                email: null,\n                image: profile.channelImageUrl || profile.profileImageUrl,\n                channelId: profile.channelId || profile.userIdHash,\n                channelName: profile.channelName || profile.nickname,\n                channelImageUrl: profile.channelImageUrl,\n                followerCount: profile.followerCount\n            };\n        },\n        ...options\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VyxRQUFRVCxRQUFRO2dCQUM3Q1UsT0FBTztnQkFDUEMsT0FBT0YsUUFBUVAsZUFBZSxJQUFJTyxRQUFRUixlQUFlO2dCQUN6REosV0FBV1ksUUFBUVosU0FBUyxJQUFJWSxRQUFRVixVQUFVO2dCQUNsREQsYUFBYVcsUUFBUVgsV0FBVyxJQUFJVyxRQUFRVCxRQUFRO2dCQUNwREUsaUJBQWlCTyxRQUFRUCxlQUFlO2dCQUN4Q0MsZUFBZU0sUUFBUU4sYUFBYTtZQUN0QztRQUNGO1FBQ0EsR0FBR3pELE9BQU87SUFDWjtBQUNGIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi9jaHp6a09BdXRoUHJvdmlkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT0F1dGhDb25maWcsIE9BdXRoVXNlckNvbmZpZyB9IGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL29hdXRoXCJcblxuZXhwb3J0IGludGVyZmFjZSBDaHp6a1Byb2ZpbGUge1xuICB1c2VySWRIYXNoOiBzdHJpbmdcbiAgbmlja25hbWU6IHN0cmluZ1xuICBwcm9maWxlSW1hZ2VVcmw/OiBzdHJpbmdcbiAgY2hhbm5lbElkPzogc3RyaW5nXG4gIGNoYW5uZWxOYW1lPzogc3RyaW5nXG4gIGNoYW5uZWxJbWFnZVVybD86IHN0cmluZ1xuICBmb2xsb3dlckNvdW50PzogbnVtYmVyXG59XG5cbi8vIO2GoO2BsOydhCDsoIDsnqXtlaAg7J6E7IucIOuzgOyImFxubGV0IGN1cnJlbnRBY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGxcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2h6emtQcm92aWRlcihcbiAgb3B0aW9uczogT0F1dGhVc2VyQ29uZmlnPENoenprUHJvZmlsZT5cbik6IE9BdXRoQ29uZmlnPENoenprUHJvZmlsZT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImNoenprXCIsXG4gICAgbmFtZTogXCLsuZjsp4Dsp4FcIixcbiAgICB0eXBlOiBcIm9hdXRoXCIsXG4gICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgdXJsOiBcImh0dHBzOi8vY2h6emsubmF2ZXIuY29tL2FjY291bnQtaW50ZXJsb2NrXCIsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgIHJlZGlyZWN0VXJpOiBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L2FwaS9hdXRoL2NhbGxiYWNrL2NoenprYCxcbiAgICAgICAgcmVzcG9uc2VfdHlwZTogXCJjb2RlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgLy8g65SU67KE6rmF7J2EIOychO2VnCDroZzqt7hcbiAgICAuLi4ocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYge1xuICAgICAgZGVidWc6IHRydWVcbiAgICB9KSxcbiAgICB0b2tlbjoge1xuICAgICAgdXJsOiBcImh0dHBzOi8vY2h6emsubmF2ZXIuY29tL2F1dGgvdjEvdG9rZW5cIixcbiAgICAgIGFzeW5jIHJlcXVlc3QoY29udGV4dCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9jaHp6ay5uYXZlci5jb20vYXV0aC92MS90b2tlblwiLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGdyYW50VHlwZTogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcbiAgICAgICAgICAgIGNvZGU6IGNvbnRleHQucGFyYW1zLmNvZGUsXG4gICAgICAgICAgICBzdGF0ZTogY29udGV4dC5wYXJhbXMuc3RhdGUsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+y5mOyngOyngSDthqDtgbAg7JqU7LKtIOyLpO2MqDonLCB7XG4gICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JUZXh0LFxuICAgICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICByZWRpcmVjdFVyaTogYCR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS9hcGkvYXV0aC9jYWxsYmFjay9jaHp6a2BcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFQSSDsirnsnbgg6rSA66CoIOyYpOulmOyduOyngCDtmZXsnbhcbiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg7LmY7KeA7KeBIEFQSSDsirnsnbjsnbQg7ZWE7JqU7ZWp64uI64ukLiDtgbTrnbzsnbTslrjtirggSUQvU0VDUkVU7J2EIO2ZleyduO2VmOqxsOuCmCBBUEkg7Iq57J24IOyDge2DnOulvCDtmZXsnbjtlZjshLjsmpQuICgke3Jlc3BvbnNlLnN0YXR1c30pYClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiByZXF1ZXN0IGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5zLmNvbnRlbnQ/LmFjY2Vzc1Rva2VuIHx8IHRva2Vucy5hY2Nlc3NUb2tlbixcbiAgICAgICAgICByZWZyZXNoX3Rva2VuOiB0b2tlbnMuY29udGVudD8ucmVmcmVzaFRva2VuIHx8IHRva2Vucy5yZWZyZXNoVG9rZW4sXG4gICAgICAgICAgdG9rZW5fdHlwZTogdG9rZW5zLmNvbnRlbnQ/LnRva2VuVHlwZSB8fCB0b2tlbnMudG9rZW5UeXBlIHx8IFwiQmVhcmVyXCIsXG4gICAgICAgICAgZXhwaXJlc19pbjogdG9rZW5zLmNvbnRlbnQ/LmV4cGlyZXNJbiB8fCB0b2tlbnMuZXhwaXJlc0luIHx8IDg2NDAwLFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDthqDtgbDsnYQg7J6E7IucIOuzgOyImOyXkCDsoIDsnqVcbiAgICAgICAgY3VycmVudEFjY2Vzc1Rva2VuID0gcmVzdWx0LmFjY2Vzc190b2tlblxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfSxcbiAgICB9LFxuICAgIHVzZXJpbmZvOiB7XG4gICAgICB1cmw6IFwiaHR0cHM6Ly9jaHp6ay5uYXZlci5jb20vb3Blbi92MS91c2Vycy9tZVwiLFxuICAgICAgYXN5bmMgcmVxdWVzdChjb250ZXh0KSB7XG4gICAgICAgIC8vIGNvbnRleHTsl5DshJwg7Yag7YGw7J2EIOqwgOyguOyYpOqxsOuCmCDsnoTsi5wg7KCA7J6l65CcIO2GoO2BsCDsgqzsmqlcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBjb250ZXh0LnRva2Vucz8uYWNjZXNzX3Rva2VuIHx8IGN1cnJlbnRBY2Nlc3NUb2tlblxuICAgICAgICBcbiAgICAgICAgLy8g7JWh7IS47IqkIO2GoO2BsOydtCDsl4bsnLzrqbQg66Gc6re47J24IOyLpO2MqFxuICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY2Nlc3MgdG9rZW4gbm90IGZvdW5kJylcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g7LmY7KeA7KeBIOqzteyLnSDsgqzsmqnsnpAg7KCV67O0IEFQSSDtmLjstpxcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9vcGVuYXBpLmNoenprLm5hdmVyLmNvbS9vcGVuL3YxL3VzZXJzL21lXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB1c2VyRGF0YS5jb250ZW50IHx8IHVzZXJEYXRhXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjb250ZW50LmNoYW5uZWxJZCAmJiBjb250ZW50LmNoYW5uZWxOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkSGFzaDogY29udGVudC5jaGFubmVsSWQsXG4gICAgICAgICAgICAgICAgbmlja25hbWU6IGNvbnRlbnQuY2hhbm5lbE5hbWUgfHwgY29udGVudC5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IGNvbnRlbnQucHJvZmlsZUltYWdlVXJsIHx8IGNvbnRlbnQuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxJZDogY29udGVudC5jaGFubmVsSWQsXG4gICAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNvbnRlbnQuY2hhbm5lbE5hbWUgfHwgY29udGVudC5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgICBjaGFubmVsSW1hZ2VVcmw6IGNvbnRlbnQuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGZvbGxvd2VyQ291bnQ6IGNvbnRlbnQuZm9sbG93ZXJDb3VudCB8fCAwLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign7LmY7KeA7KeBIOyCrOyaqeyekCDsoJXrs7QgQVBJIO2YuOy2nCDsi6TtjKg6Jywge1xuICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yVGV4dCxcbiAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VuID8gJ+2GoO2BsCDsnojsnYwnIDogJ+2GoO2BsCDsl4bsnYwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBUEkg7Iq57J24IOq0gOugqCDsmKTrpZjsnbjsp4Ag7ZmV7J24XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDsuZjsp4Dsp4EgQVBJIOyKueyduOydtCDtlYTsmpTtlanri4jri6QuIOqwnOuwnOyekCDsvZjshpTsl5DshJwgQVBJIOyKueyduCDsg4Htg5zrpbwg7ZmV7J247ZWY7IS47JqULiAoJHtyZXNwb25zZS5zdGF0dXN9KWApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIOqzteyLnSBBUEkg7J2R64u17J20IOycoO2aqO2VmOyngCDslYrsnYxcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfsuZjsp4Dsp4Eg6rO17IudIEFQSSDtmLjstpwg7Iuk7YyoOicsIGVycm9yKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFQSSDsirnsnbgg6rSA66CoIOyYpOulmOudvOuptCDrjZQg66qF7ZmV7ZWcIOuplOyLnOyngCDtkZzsi5xcbiAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCfsirnsnbgnKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEZhbGxiYWNrIEFQSeuTpCDsi5zrj4RcbiAgICAgICAgY29uc3QgZmFsbGJhY2tVcmxzID0gW1xuICAgICAgICAgICdodHRwczovL2FwaS5jaHp6ay5uYXZlci5jb20vb3Blbi92MS91c2Vycy9tZScsXG4gICAgICAgICAgJ2h0dHBzOi8vY29tbS1hcGkuZ2FtZS5uYXZlci5jb20vbm5nX21haW4vdjEvdXNlci9nZXRVc2VyU3RhdHVzJ1xuICAgICAgICBdXG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiBmYWxsYmFja1VybHMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBIVE1MIOydkeuLtSDqsbTrhIjrm7DquLBcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlVGV4dC5pbmNsdWRlcygnPCFkb2N0eXBlIGh0bWw+JykpIGNvbnRpbnVlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KVxuICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gdXNlckRhdGEuY29udGVudCB8fCB1c2VyRGF0YS5yZXNwb25zZSB8fCB1c2VyRGF0YVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuY2hhbm5lbElkICYmIGNvbnRlbnQuY2hhbm5lbE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgdXNlcklkSGFzaDogY29udGVudC5jaGFubmVsSWQsXG4gICAgICAgICAgICAgICAgICBuaWNrbmFtZTogY29udGVudC5jaGFubmVsTmFtZSxcbiAgICAgICAgICAgICAgICAgIHByb2ZpbGVJbWFnZVVybDogY29udGVudC5wcm9maWxlSW1hZ2VVcmwgfHwgY29udGVudC5jaGFubmVsSW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgICBjaGFubmVsSWQ6IGNvbnRlbnQuY2hhbm5lbElkLFxuICAgICAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNvbnRlbnQuY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICAgICAgICBjaGFubmVsSW1hZ2VVcmw6IGNvbnRlbnQuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICAgICAgICAgICAgZm9sbG93ZXJDb3VudDogY29udGVudC5mb2xsb3dlckNvdW50IHx8IDAsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIOqwnOuzhCDsi6TtjKjripQg66y07Iuc7ZWY6rOgIOuLpOydjCBVUkwg7Iuc64+EXG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g66qo65OgIEFQSSDsi6TtjKhcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaHp6ayB1c2VyIGluZm8gQVBJIGZhaWxlZCcpXG4gICAgICB9LFxuICAgIH0sXG4gICAgcHJvZmlsZShwcm9maWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcHJvZmlsZS51c2VySWRIYXNoLFxuICAgICAgICBuYW1lOiBwcm9maWxlLmNoYW5uZWxOYW1lIHx8IHByb2ZpbGUubmlja25hbWUsXG4gICAgICAgIGVtYWlsOiBudWxsLFxuICAgICAgICBpbWFnZTogcHJvZmlsZS5jaGFubmVsSW1hZ2VVcmwgfHwgcHJvZmlsZS5wcm9maWxlSW1hZ2VVcmwsXG4gICAgICAgIGNoYW5uZWxJZDogcHJvZmlsZS5jaGFubmVsSWQgfHwgcHJvZmlsZS51c2VySWRIYXNoLFxuICAgICAgICBjaGFubmVsTmFtZTogcHJvZmlsZS5jaGFubmVsTmFtZSB8fCBwcm9maWxlLm5pY2tuYW1lLFxuICAgICAgICBjaGFubmVsSW1hZ2VVcmw6IHByb2ZpbGUuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICBmb2xsb3dlckNvdW50OiBwcm9maWxlLmZvbGxvd2VyQ291bnQsXG4gICAgICB9XG4gICAgfSxcbiAgICAuLi5vcHRpb25zLFxuICB9XG59Il0sIm5hbWVzIjpbImN1cnJlbnRBY2Nlc3NUb2tlbiIsIkNoenprUHJvdmlkZXIiLCJvcHRpb25zIiwiaWQiLCJuYW1lIiwidHlwZSIsImF1dGhvcml6YXRpb24iLCJ1cmwiLCJwYXJhbXMiLCJjbGllbnRJZCIsInJlZGlyZWN0VXJpIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsInJlc3BvbnNlX3R5cGUiLCJkZWJ1ZyIsInRva2VuIiwicmVxdWVzdCIsImNvbnRleHQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZ3JhbnRUeXBlIiwiY2xpZW50U2VjcmV0IiwiY29kZSIsInN0YXRlIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIkVycm9yIiwidG9rZW5zIiwianNvbiIsInJlc3VsdCIsImFjY2Vzc190b2tlbiIsImNvbnRlbnQiLCJhY2Nlc3NUb2tlbiIsInJlZnJlc2hfdG9rZW4iLCJyZWZyZXNoVG9rZW4iLCJ0b2tlbl90eXBlIiwidG9rZW5UeXBlIiwiZXhwaXJlc19pbiIsImV4cGlyZXNJbiIsInVzZXJpbmZvIiwiQXV0aG9yaXphdGlvbiIsInVzZXJEYXRhIiwiY2hhbm5lbElkIiwiY2hhbm5lbE5hbWUiLCJ1c2VySWRIYXNoIiwibmlja25hbWUiLCJwcm9maWxlSW1hZ2VVcmwiLCJjaGFubmVsSW1hZ2VVcmwiLCJmb2xsb3dlckNvdW50IiwibWVzc2FnZSIsImluY2x1ZGVzIiwiZmFsbGJhY2tVcmxzIiwicmVzcG9uc2VUZXh0IiwicGFyc2UiLCJwcm9maWxlIiwiZW1haWwiLCJpbWFnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/chzzkOAuthProvider.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ dbConnect),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        // console.log('🔄 기존 MongoDB 연결 재사용');\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        // console.log('🚀 새로운 MongoDB 연결 시작...');\n        // console.log('📍 MongoDB URI:', MONGODB_URI ? 'URI 설정됨' : 'URI 없음');\n        const opts = {\n            bufferCommands: false,\n            serverSelectionTimeoutMS: 5000,\n            connectTimeoutMS: 5000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            // console.log('✅ MongoDB 연결 성공!');\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        console.error('❌ MongoDB 연결 실패:', e);\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFM0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUcsTUFDUjtBQUVKO0FBV0EsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZix1Q0FBdUM7UUFDdkMsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLDBDQUEwQztRQUMxQyxzRUFBc0U7UUFFdEUsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLDBCQUEwQjtZQUMxQkMsa0JBQWtCO1FBQ3BCO1FBRUFSLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWNTLE1BQU1LLElBQUksQ0FBQyxDQUFDZjtZQUMxRCxtQ0FBbUM7WUFDbkMsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9RLEdBQUc7UUFDVkMsUUFBUUMsS0FBSyxDQUFDLG9CQUFvQkY7UUFDbENYLE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNUTtJQUNSO0lBRUEsT0FBT1gsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDO0FBQ2lCIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi9tb25nb2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG5cbmlmICghTU9OR09EQl9VUkkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCdcbiAgKTtcbn1cblxuaW50ZXJmYWNlIE1vbmdvb3NlQ2FjaGUge1xuICBjb25uOiB0eXBlb2YgbW9uZ29vc2UgfCBudWxsO1xuICBwcm9taXNlOiBQcm9taXNlPHR5cGVvZiBtb25nb29zZT4gfCBudWxsO1xufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIHZhciBtb25nb29zZTogTW9uZ29vc2VDYWNoZTtcbn1cblxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcblxuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRiQ29ubmVjdCgpOiBQcm9taXNlPHR5cGVvZiBtb25nb29zZT4ge1xuICBpZiAoY2FjaGVkLmNvbm4pIHtcbiAgICAvLyBjb25zb2xlLmxvZygn8J+UhCDquLDsobQgTW9uZ29EQiDsl7DqsrAg7J6s7IKs7JqpJyk7XG4gICAgcmV0dXJuIGNhY2hlZC5jb25uO1xuICB9XG5cbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCfwn5qAIOyDiOuhnOyatCBNb25nb0RCIOyXsOqysCDsi5zsnpEuLi4nKTtcbiAgICAvLyBjb25zb2xlLmxvZygn8J+TjSBNb25nb0RCIFVSSTonLCBNT05HT0RCX1VSSSA/ICdVUkkg7ISk7KCV65CoJyA6ICdVUkkg7JeG7J2MJyk7XG4gICAgXG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCwgLy8gNey0iOuhnCDri6jstpVcbiAgICAgIGNvbm5lY3RUaW1lb3V0TVM6IDUwMDAsXG4gICAgfTtcblxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSEsIG9wdHMpLnRoZW4oKG1vbmdvb3NlKSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZygn4pyFIE1vbmdvREIg7Jew6rKwIOyEseqztSEnKTtcbiAgICAgIHJldHVybiBtb25nb29zZTtcbiAgICB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBNb25nb0RCIOyXsOqysCDsi6TtjKg6JywgZSk7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIHRocm93IGU7XG4gIH1cblxuICByZXR1cm4gY2FjaGVkLmNvbm47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDtcbmV4cG9ydCB7IGRiQ29ubmVjdCBhcyBjb25uZWN0VG9EYXRhYmFzZSB9OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJjb25uZWN0VGltZW91dE1TIiwiY29ubmVjdCIsInRoZW4iLCJlIiwiY29uc29sZSIsImVycm9yIiwiY29ubmVjdFRvRGF0YWJhc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/permissions.ts":
/*!********************************!*\
  !*** ./src/lib/permissions.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Permission: () => (/* binding */ Permission),\n/* harmony export */   UserRole: () => (/* binding */ UserRole),\n/* harmony export */   canAccessAdminPanel: () => (/* binding */ canAccessAdminPanel),\n/* harmony export */   canManageSongs: () => (/* binding */ canManageSongs),\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   isSuperAdmin: () => (/* binding */ isSuperAdmin),\n/* harmony export */   roleToIsAdmin: () => (/* binding */ roleToIsAdmin)\n/* harmony export */ });\nvar UserRole = /*#__PURE__*/ function(UserRole) {\n    UserRole[\"SUPER_ADMIN\"] = \"super_admin\";\n    UserRole[\"SONG_ADMIN\"] = \"song_admin\";\n    UserRole[\"AYAUKE_ADMIN\"] = \"ayauke_admin\";\n    UserRole[\"SONG_EDITOR\"] = \"song_editor\";\n    UserRole[\"USER\"] = \"user\";\n    return UserRole;\n}({});\nvar Permission = /*#__PURE__*/ function(Permission) {\n    // 시스템 관리\n    Permission[\"SYSTEM_ADMIN\"] = \"system.admin\";\n    Permission[\"USER_MANAGE\"] = \"users.manage\";\n    // 노래 관리\n    Permission[\"SONGS_VIEW\"] = \"songs.view\";\n    Permission[\"SONGS_CREATE\"] = \"songs.create\";\n    Permission[\"SONGS_EDIT\"] = \"songs.edit\";\n    Permission[\"SONGS_DELETE\"] = \"songs.delete\";\n    Permission[\"SONGS_BULK_EDIT\"] = \"songs.bulk_edit\";\n    Permission[\"SONGS_STATS\"] = \"songs.stats\";\n    return Permission;\n}({});\nconst ROLE_PERMISSIONS = {\n    [\"super_admin\"]: [\n        \"system.admin\",\n        \"users.manage\",\n        \"songs.view\",\n        \"songs.create\",\n        \"songs.edit\",\n        \"songs.delete\",\n        \"songs.bulk_edit\",\n        \"songs.stats\"\n    ],\n    [\"song_admin\"]: [\n        \"songs.view\",\n        \"songs.create\",\n        \"songs.edit\",\n        \"songs.delete\",\n        \"songs.bulk_edit\",\n        \"songs.stats\"\n    ],\n    [\"ayauke_admin\"]: [\n        \"songs.view\",\n        \"songs.create\",\n        \"songs.edit\",\n        \"songs.delete\",\n        \"songs.bulk_edit\",\n        \"songs.stats\"\n    ],\n    [\"song_editor\"]: [\n        \"songs.view\",\n        \"songs.edit\",\n        \"songs.stats\"\n    ],\n    [\"user\"]: []\n};\nfunction hasPermission(userRole, permission) {\n    const permissions = ROLE_PERMISSIONS[userRole] || [];\n    return permissions.includes(permission);\n}\nfunction canAccessAdminPanel(role) {\n    return role !== \"user\";\n}\nfunction isSuperAdmin(role) {\n    return role === \"super_admin\";\n}\nfunction canManageSongs(role) {\n    return hasPermission(role, \"songs.view\");\n}\n// 하위 호환성을 위한 임시 함수 (나중에 제거)\nfunction roleToIsAdmin(role) {\n    return role !== \"user\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Blcm1pc3Npb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBTyxzQ0FBS0E7Ozs7OztXQUFBQTtNQU1YO0FBRU0sd0NBQUtDO0lBQ1YsU0FBUzs7O0lBSVQsUUFBUTs7Ozs7OztXQUxFQTtNQVlYO0FBRUQsTUFBTUMsbUJBQW1CO0lBQ3ZCLGVBQXNCLEVBQUU7Ozs7Ozs7OztLQVN2QjtJQUNELGNBQXFCLEVBQUU7Ozs7Ozs7S0FPdEI7SUFDRCxnQkFBdUIsRUFBRTs7Ozs7OztLQU94QjtJQUNELGVBQXNCLEVBQUU7Ozs7S0FJdkI7SUFDRCxRQUFlLEVBQUUsRUFBRTtBQUNyQjtBQUVPLFNBQVNDLGNBQWNDLFFBQWtCLEVBQUVDLFVBQXNCO0lBQ3RFLE1BQU1DLGNBQWNKLGdCQUFnQixDQUFDRSxTQUFTLElBQUksRUFBRTtJQUNwRCxPQUFPRSxZQUFZQyxRQUFRLENBQUNGO0FBQzlCO0FBRU8sU0FBU0csb0JBQW9CQyxJQUFjO0lBQ2hELE9BQU9BO0FBQ1Q7QUFFTyxTQUFTQyxhQUFhRCxJQUFjO0lBQ3pDLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTRSxlQUFlRixJQUFjO0lBQzNDLE9BQU9OLGNBQWNNO0FBQ3ZCO0FBRUEsNEJBQTRCO0FBQ3JCLFNBQVNHLGNBQWNILElBQWM7SUFDMUMsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9saWIvcGVybWlzc2lvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gVXNlclJvbGUge1xuICBTVVBFUl9BRE1JTiA9ICdzdXBlcl9hZG1pbicsXG4gIFNPTkdfQURNSU4gPSAnc29uZ19hZG1pbicsIFxuICBBWUFVS0VfQURNSU4gPSAnYXlhdWtlX2FkbWluJywgLy8g7JWE7JW87Jqw7LyAIOq0gOumrOyekCAoU09OR19BRE1JTuqzvCDrj5nsnbztlZwg6raM7ZWcKVxuICBTT05HX0VESVRPUiA9ICdzb25nX2VkaXRvcicsXG4gIFVTRVIgPSAndXNlcidcbn1cblxuZXhwb3J0IGVudW0gUGVybWlzc2lvbiB7XG4gIC8vIOyLnOyKpO2FnCDqtIDrpqxcbiAgU1lTVEVNX0FETUlOID0gJ3N5c3RlbS5hZG1pbicsXG4gIFVTRVJfTUFOQUdFID0gJ3VzZXJzLm1hbmFnZScsXG4gIFxuICAvLyDrhbjrnpgg6rSA66asXG4gIFNPTkdTX1ZJRVcgPSAnc29uZ3MudmlldycsXG4gIFNPTkdTX0NSRUFURSA9ICdzb25ncy5jcmVhdGUnLFxuICBTT05HU19FRElUID0gJ3NvbmdzLmVkaXQnLFxuICBTT05HU19ERUxFVEUgPSAnc29uZ3MuZGVsZXRlJyxcbiAgU09OR1NfQlVMS19FRElUID0gJ3NvbmdzLmJ1bGtfZWRpdCcsXG4gIFNPTkdTX1NUQVRTID0gJ3NvbmdzLnN0YXRzJyxcbn1cblxuY29uc3QgUk9MRV9QRVJNSVNTSU9OUyA9IHtcbiAgW1VzZXJSb2xlLlNVUEVSX0FETUlOXTogW1xuICAgIFBlcm1pc3Npb24uU1lTVEVNX0FETUlOLFxuICAgIFBlcm1pc3Npb24uVVNFUl9NQU5BR0UsXG4gICAgUGVybWlzc2lvbi5TT05HU19WSUVXLFxuICAgIFBlcm1pc3Npb24uU09OR1NfQ1JFQVRFLFxuICAgIFBlcm1pc3Npb24uU09OR1NfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0RFTEVURSxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0JVTEtfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1NUQVRTLFxuICBdLFxuICBbVXNlclJvbGUuU09OR19BRE1JTl06IFtcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1ZJRVcsXG4gICAgUGVybWlzc2lvbi5TT05HU19DUkVBVEUsXG4gICAgUGVybWlzc2lvbi5TT05HU19FRElULFxuICAgIFBlcm1pc3Npb24uU09OR1NfREVMRVRFLFxuICAgIFBlcm1pc3Npb24uU09OR1NfQlVMS19FRElULFxuICAgIFBlcm1pc3Npb24uU09OR1NfU1RBVFMsXG4gIF0sXG4gIFtVc2VyUm9sZS5BWUFVS0VfQURNSU5dOiBbXG4gICAgUGVybWlzc2lvbi5TT05HU19WSUVXLFxuICAgIFBlcm1pc3Npb24uU09OR1NfQ1JFQVRFLFxuICAgIFBlcm1pc3Npb24uU09OR1NfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0RFTEVURSxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0JVTEtfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1NUQVRTLFxuICBdLFxuICBbVXNlclJvbGUuU09OR19FRElUT1JdOiBbXG4gICAgUGVybWlzc2lvbi5TT05HU19WSUVXLFxuICAgIFBlcm1pc3Npb24uU09OR1NfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1NUQVRTLFxuICBdLFxuICBbVXNlclJvbGUuVVNFUl06IFtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHVzZXJSb2xlOiBVc2VyUm9sZSwgcGVybWlzc2lvbjogUGVybWlzc2lvbik6IGJvb2xlYW4ge1xuICBjb25zdCBwZXJtaXNzaW9ucyA9IFJPTEVfUEVSTUlTU0lPTlNbdXNlclJvbGVdIHx8IFtdXG4gIHJldHVybiBwZXJtaXNzaW9ucy5pbmNsdWRlcyhwZXJtaXNzaW9uKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuQWNjZXNzQWRtaW5QYW5lbChyb2xlOiBVc2VyUm9sZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gcm9sZSAhPT0gVXNlclJvbGUuVVNFUlxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBlckFkbWluKHJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XG4gIHJldHVybiByb2xlID09PSBVc2VyUm9sZS5TVVBFUl9BRE1JTlxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuTWFuYWdlU29uZ3Mocm9sZTogVXNlclJvbGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIGhhc1Blcm1pc3Npb24ocm9sZSwgUGVybWlzc2lvbi5TT05HU19WSUVXKVxufVxuXG4vLyDtlZjsnIQg7Zi47ZmY7ISx7J2EIOychO2VnCDsnoTsi5wg7ZWo7IiYICjrgpjspJHsl5Ag7KCc6rGwKVxuZXhwb3J0IGZ1bmN0aW9uIHJvbGVUb0lzQWRtaW4ocm9sZTogVXNlclJvbGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIHJvbGUgIT09IFVzZXJSb2xlLlVTRVJcbn0iXSwibmFtZXMiOlsiVXNlclJvbGUiLCJQZXJtaXNzaW9uIiwiUk9MRV9QRVJNSVNTSU9OUyIsImhhc1Blcm1pc3Npb24iLCJ1c2VyUm9sZSIsInBlcm1pc3Npb24iLCJwZXJtaXNzaW9ucyIsImluY2x1ZGVzIiwiY2FuQWNjZXNzQWRtaW5QYW5lbCIsInJvbGUiLCJpc1N1cGVyQWRtaW4iLCJjYW5NYW5hZ2VTb25ncyIsInJvbGVUb0lzQWRtaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/permissions.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/titleSystem.ts":
/*!********************************!*\
  !*** ./src/lib/titleSystem.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TITLE_DEFINITIONS: () => (/* binding */ TITLE_DEFINITIONS),\n/* harmony export */   checkForNewTitles: () => (/* binding */ checkForNewTitles),\n/* harmony export */   getSelectedTitleInfo: () => (/* binding */ getSelectedTitleInfo),\n/* harmony export */   getTitleDefinition: () => (/* binding */ getTitleDefinition),\n/* harmony export */   getTitleRarityColor: () => (/* binding */ getTitleRarityColor),\n/* harmony export */   grantTitle: () => (/* binding */ grantTitle)\n/* harmony export */ });\n// 칭호 정의들\nconst TITLE_DEFINITIONS = [\n    // 관리자 칭호 (기존 role 기반)\n    {\n        id: \"super_admin\",\n        name: \"최고 관리자\",\n        description: \"사이트의 모든 권한을 가진 최고 관리자입니다\",\n        condition: \"사이트 관리자 권한 보유\",\n        rarity: \"legendary\",\n        checkCondition: (user)=>user.role === \"super_admin\",\n        autoGrant: true\n    },\n    {\n        id: \"ayauke_admin\",\n        name: \"아야냥이\",\n        description: \"스트리머 아야에게 부여되는 특별한 칭호입니다\",\n        condition: \"사이트를 선물받은 스트리머\",\n        rarity: \"epic\",\n        checkCondition: (user)=>user.role === \"ayauke_admin\",\n        autoGrant: true\n    },\n    {\n        id: \"honeyz\",\n        name: \"HONEYZ\",\n        description: \"허니즈에게 부여되는 칭호입니다\",\n        condition: \"허니즈 소속 스트리머\",\n        rarity: \"epic\",\n        checkCondition: (user)=>{\n            const honeyzChannelIds = [\n                \"abe8aa82baf3d3ef54ad8468ee73e7fc\",\n                \"798e100206987b59805cfb75f927e965\",\n                \"b82e8bc2505e37156b2d1140ba1fc05c\",\n                \"c0d9723cbb75dc223c6aa8a9d4f56002\",\n                \"bd07973b6021d72512240c01a386d5c9\",\n                \"65a53076fe1a39636082dd6dba8b8a4b\",\n                \"d6017f757614569add71b0bc83a81382\"\n            ];\n            return honeyzChannelIds.includes(user.channelId);\n        },\n        autoGrant: true\n    },\n    {\n        id: \"song_admin\",\n        name: \"노래 관리자\",\n        description: \"노래 정보를 관리하는 관리자입니다\",\n        condition: \"노래 관리자 권한 보유\",\n        rarity: \"epic\",\n        checkCondition: (user)=>user.role === \"song_admin\",\n        autoGrant: true\n    },\n    {\n        id: \"song_editor\",\n        name: \"편집자\",\n        description: \"노래 정보를 편집할 수 있는 편집자입니다\",\n        condition: \"편집자 권한 보유\",\n        rarity: \"rare\",\n        checkCondition: (user)=>user.role === \"song_editor\",\n        autoGrant: true\n    },\n    // 활동 기반 칭호\n    {\n        id: \"chzzk_user\",\n        name: \"치지직 사용자\",\n        description: \"아야의 팬사이트에 오신 것을 환영합니다!\",\n        condition: \"회원가입 시 자동 부여\",\n        rarity: \"common\",\n        checkCondition: ()=>true,\n        autoGrant: true\n    },\n    {\n        id: \"regular_visitor\",\n        name: \"단골손님\",\n        description: \"자주 방문해주시는 소중한 단골손님입니다\",\n        condition: \"로그인 10회 이상\",\n        rarity: \"common\",\n        checkCondition: (user, stats)=>(stats?.loginCount || 0) >= 10,\n        autoGrant: true\n    },\n    {\n        id: \"music_lover\",\n        name: \"노래 매니아\",\n        description: \"음악을 사랑하는 진정한 매니아입니다\",\n        condition: \"좋아요 50개 이상\",\n        rarity: \"rare\",\n        checkCondition: (user, stats)=>(stats?.likeCount || 0) >= 50,\n        autoGrant: true\n    },\n    {\n        id: \"playlist_curator\",\n        name: \"플레이리스트 큐레이터\",\n        description: \"음악 취향이 뛰어난 플레이리스트 전문가입니다\",\n        condition: \"플레이리스트 5개 이상 생성\",\n        rarity: \"rare\",\n        checkCondition: (user, stats)=>(stats?.playlistCount || 0) >= 5,\n        autoGrant: true\n    },\n    {\n        id: \"loyal_fan\",\n        name: \"충성스러운 팬\",\n        description: \"아야를 꾸준히 응원해주시는 충성스러운 팬입니다\",\n        condition: \"30일 연속 접속\",\n        rarity: \"epic\",\n        checkCondition: (user, stats)=>(stats?.consecutiveDays || 0) >= 30,\n        autoGrant: true\n    },\n    // 특별 칭호 (수동 부여)\n    {\n        id: \"developer_friend\",\n        name: \"개발자의 친구\",\n        description: \"개발자와 특별한 인연이 있는 소중한 친구입니다\",\n        condition: \"개발자가 직접 부여\",\n        rarity: \"legendary\",\n        checkCondition: ()=>false,\n        autoGrant: false\n    },\n    {\n        id: \"beta_tester\",\n        name: \"베타 테스터\",\n        description: \"사이트 초기부터 함께해주신 베타 테스터입니다\",\n        condition: \"특정 기간 가입자\",\n        rarity: \"epic\",\n        checkCondition: ()=>false,\n        autoGrant: false\n    }\n];\n// 칭호 ID로 정의 찾기\nfunction getTitleDefinition(titleId) {\n    return TITLE_DEFINITIONS.find((title)=>title.id === titleId);\n}\n// 희귀도별 색상 반환\nfunction getTitleRarityColor(rarity) {\n    switch(rarity){\n        case \"common\":\n            return \"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-800 dark:border-gray-700\";\n        case \"rare\":\n            return \"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 border border-blue-800 dark:border-blue-700\";\n        case \"epic\":\n            return \"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 border border-purple-800 dark:border-purple-700\";\n        case \"legendary\":\n            return \"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 border border-yellow-800 dark:border-yellow-700\";\n        default:\n            return \"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-800 dark:border-gray-700\";\n    }\n}\n// 사용자가 획득할 수 있는 새로운 칭호 확인\nfunction checkForNewTitles(user, stats) {\n    const currentTitleIds = user.titles.map((title)=>title.id);\n    const newTitles = [];\n    for (const titleDef of TITLE_DEFINITIONS){\n        // 이미 보유한 칭호는 건너뛰기\n        if (currentTitleIds.includes(titleDef.id)) continue;\n        // 자동 부여 칭호만 체크\n        if (!titleDef.autoGrant) continue;\n        // 조건 확인\n        if (titleDef.checkCondition(user, stats)) {\n            newTitles.push(titleDef);\n        }\n    }\n    return newTitles;\n}\n// 사용자에게 칭호 부여\nfunction grantTitle(user, titleDef) {\n    console.log(\"🏆 칭호 부여 시도:\", {\n        titleId: titleDef.id,\n        titleName: titleDef.name\n    });\n    // 이미 보유한 칭호인지 확인\n    const alreadyHas = user.titles.some((title)=>title.id === titleDef.id);\n    if (alreadyHas) {\n        console.log(\"🏆 이미 보유한 칭호:\", titleDef.name);\n        return false;\n    }\n    // 칭호 추가\n    const newTitle = {\n        id: titleDef.id,\n        name: titleDef.name,\n        description: titleDef.description,\n        earnedAt: new Date(),\n        condition: titleDef.condition,\n        rarity: titleDef.rarity\n    };\n    console.log(\"🏆 칭호 추가 전 titles.length:\", user.titles.length);\n    user.titles.push(newTitle);\n    console.log(\"🏆 칭호 추가 후 titles.length:\", user.titles.length);\n    console.log(\"🏆 추가된 칭호:\", newTitle);\n    // 첫 번째 칭호라면 자동으로 선택\n    if (!user.selectedTitle) {\n        user.selectedTitle = titleDef.id;\n        console.log(\"🏆 첫 번째 칭호로 선택됨:\", titleDef.id);\n    }\n    return true;\n}\n// 선택된 칭호 정보 가져오기\nfunction getSelectedTitleInfo(user) {\n    if (!user.selectedTitle) return null;\n    const selectedTitle = user.titles.find((title)=>title.id === user.selectedTitle);\n    if (!selectedTitle) return null;\n    // Mongoose 객체를 순수한 JavaScript 객체로 변환\n    const titleObj = typeof selectedTitle.toObject === \"function\" ? selectedTitle.toObject() : JSON.parse(JSON.stringify(selectedTitle));\n    return {\n        id: titleObj.id,\n        name: titleObj.name,\n        description: titleObj.description,\n        rarity: titleObj.rarity,\n        colorClass: getTitleRarityColor(titleObj.rarity)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi90aXRsZVN5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJVXNlciB9IGZyb20gXCJAL21vZGVscy9Vc2VyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGl0bGVEZWZpbml0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb25kaXRpb246IHN0cmluZztcbiAgcmFyaXR5OiBcImNvbW1vblwiIHwgXCJyYXJlXCIgfCBcImVwaWNcIiB8IFwibGVnZW5kYXJ5XCI7XG4gIGNoZWNrQ29uZGl0aW9uOiAodXNlcjogSVVzZXIsIHN0YXRzPzogYW55KSA9PiBib29sZWFuO1xuICBhdXRvR3JhbnQ6IGJvb2xlYW47IC8vIOyekOuPmSDrtoDsl6wg7Jes67aAXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclN0YXRzIHtcbiAgbGlrZUNvdW50OiBudW1iZXI7XG4gIHBsYXlsaXN0Q291bnQ6IG51bWJlcjtcbiAgbG9naW5Db3VudDogbnVtYmVyO1xuICBjb25zZWN1dGl2ZURheXM6IG51bWJlcjtcbn1cblxuLy8g7Lmt7Zi4IOygleydmOuTpFxuZXhwb3J0IGNvbnN0IFRJVExFX0RFRklOSVRJT05TOiBUaXRsZURlZmluaXRpb25bXSA9IFtcbiAgLy8g6rSA66as7J6QIOy5re2YuCAo6riw7KG0IHJvbGUg6riw67CYKVxuICB7XG4gICAgaWQ6IFwic3VwZXJfYWRtaW5cIixcbiAgICBuYW1lOiBcIuy1nOqzoCDqtIDrpqzsnpBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLsgqzsnbTtirjsnZgg66qo65OgIOq2jO2VnOydhCDqsIDsp4Qg7LWc6rOgIOq0gOumrOyekOyeheuLiOuLpFwiLFxuICAgIGNvbmRpdGlvbjogXCLsgqzsnbTtirgg6rSA66as7J6QIOq2jO2VnCDrs7TsnKBcIixcbiAgICByYXJpdHk6IFwibGVnZW5kYXJ5XCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwic3VwZXJfYWRtaW5cIixcbiAgICBhdXRvR3JhbnQ6IHRydWUsXG4gIH0sXG4gIHtcbiAgICBpZDogXCJheWF1a2VfYWRtaW5cIixcbiAgICBuYW1lOiBcIuyVhOyVvOuDpeydtFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIuyKpO2KuOumrOuouCDslYTslbzsl5Dqsowg67aA7Jes65CY64qUIO2KueuzhO2VnCDsua3tmLjsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwi7IKs7J207Yq466W8IOyEoOusvOuwm+ydgCDsiqTtirjrpqzrqLhcIixcbiAgICByYXJpdHk6IFwiZXBpY1wiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlcikgPT4gdXNlci5yb2xlID09PSBcImF5YXVrZV9hZG1pblwiLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImhvbmV5elwiLFxuICAgIG5hbWU6IFwiSE9ORVlaXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7ZeI64uI7KaI7JeQ6rKMIOu2gOyXrOuQmOuKlCDsua3tmLjsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwi7ZeI64uI7KaIIOyGjOyGjSDsiqTtirjrpqzrqLhcIixcbiAgICByYXJpdHk6IFwiZXBpY1wiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlcikgPT4ge1xuICAgICAgY29uc3QgaG9uZXl6Q2hhbm5lbElkcyA9IFtcbiAgICAgICAgXCJhYmU4YWE4MmJhZjNkM2VmNTRhZDg0NjhlZTczZTdmY1wiLCAvLyDslYTslbxcbiAgICAgICAgXCI3OThlMTAwMjA2OTg3YjU5ODA1Y2ZiNzVmOTI3ZTk2NVwiLCAvLyDrlJTrlJTrlJTsmqlcbiAgICAgICAgXCJiODJlOGJjMjUwNWUzNzE1NmIyZDExNDBiYTFmYzA1Y1wiLCAvLyDri7TsnKDsnbRcbiAgICAgICAgXCJjMGQ5NzIzY2JiNzVkYzIyM2M2YWE4YTlkNGY1NjAwMlwiLCAvLyDtl4jri4jsuITrn6zsiqRcbiAgICAgICAgXCJiZDA3OTczYjYwMjFkNzI1MTIyNDBjMDFhMzg2ZDVjOVwiLCAvLyDrp53rgrRcbiAgICAgICAgXCI2NWE1MzA3NmZlMWEzOTYzNjA4MmRkNmRiYThiOGE0YlwiLCAvLyDsmKTtmZTsmpRcbiAgICAgICAgXCJkNjAxN2Y3NTc2MTQ1NjlhZGQ3MWIwYmM4M2E4MTM4MlwiLCAvLyDthYzsiqTtirhcbiAgICAgIF07XG4gICAgICByZXR1cm4gaG9uZXl6Q2hhbm5lbElkcy5pbmNsdWRlcyh1c2VyLmNoYW5uZWxJZCk7XG4gICAgfSxcbiAgICBhdXRvR3JhbnQ6IHRydWUsXG4gIH0sXG4gIHtcbiAgICBpZDogXCJzb25nX2FkbWluXCIsXG4gICAgbmFtZTogXCLrhbjrnpgg6rSA66as7J6QXCIsXG4gICAgZGVzY3JpcHRpb246IFwi64W4656YIOygleuztOulvCDqtIDrpqztlZjripQg6rSA66as7J6Q7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIuuFuOuemCDqtIDrpqzsnpAg6raM7ZWcIOuztOycoFwiLFxuICAgIHJhcml0eTogXCJlcGljXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwic29uZ19hZG1pblwiLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInNvbmdfZWRpdG9yXCIsXG4gICAgbmFtZTogXCLtjrjsp5HsnpBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLrhbjrnpgg7KCV67O066W8IO2OuOynke2VoCDsiJgg7J6I64qUIO2OuOynkeyekOyeheuLiOuLpFwiLFxuICAgIGNvbmRpdGlvbjogXCLtjrjsp5HsnpAg6raM7ZWcIOuztOycoFwiLFxuICAgIHJhcml0eTogXCJyYXJlXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwic29uZ19lZGl0b3JcIixcbiAgICBhdXRvR3JhbnQ6IHRydWUsXG4gIH0sXG5cbiAgLy8g7Zmc64+ZIOq4sOuwmCDsua3tmLhcbiAge1xuICAgIGlkOiBcImNoenprX3VzZXJcIixcbiAgICBuYW1lOiBcIuy5mOyngOyngSDsgqzsmqnsnpBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLslYTslbzsnZgg7Yys7IKs7J207Yq47JeQIOyYpOyLoCDqsoPsnYQg7ZmY7JiB7ZWp64uI64ukIVwiLFxuICAgIGNvbmRpdGlvbjogXCLtmozsm5DqsIDsnoUg7IucIOyekOuPmSDrtoDsl6xcIixcbiAgICByYXJpdHk6IFwiY29tbW9uXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICgpID0+IHRydWUsIC8vIOuqqOuToCDsi6Dqt5wg7IKs7Jqp7J6Q7JeQ6rKMIOu2gOyXrFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInJlZ3VsYXJfdmlzaXRvclwiLFxuICAgIG5hbWU6IFwi64uo6rOo7IaQ64uYXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7J6Q7KO8IOuwqeusuO2VtOyjvOyLnOuKlCDshozspJHtlZwg64uo6rOo7IaQ64uY7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIuuhnOq3uOyduCAxMO2ajCDsnbTsg4FcIixcbiAgICByYXJpdHk6IFwiY29tbW9uXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyLCBzdGF0cykgPT4gKHN0YXRzPy5sb2dpbkNvdW50IHx8IDApID49IDEwLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcIm11c2ljX2xvdmVyXCIsXG4gICAgbmFtZTogXCLrhbjrnpgg66ek64uI7JWEXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7J2M7JWF7J2EIOyCrOueke2VmOuKlCDsp4TsoJXtlZwg66ek64uI7JWE7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIuyii+yVhOyalCA1MOqwnCDsnbTsg4FcIixcbiAgICByYXJpdHk6IFwicmFyZVwiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlciwgc3RhdHMpID0+IChzdGF0cz8ubGlrZUNvdW50IHx8IDApID49IDUwLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInBsYXlsaXN0X2N1cmF0b3JcIixcbiAgICBuYW1lOiBcIu2UjOugiOydtOumrOyKpO2KuCDtgZDroIjsnbTthLBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLsnYzslYUg7Leo7Zal7J20IOubsOyWtOuCnCDtlIzroIjsnbTrpqzsiqTtirgg7KCE66y46rCA7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIu2UjOugiOydtOumrOyKpO2KuCA16rCcIOydtOyDgSDsg53shLFcIixcbiAgICByYXJpdHk6IFwicmFyZVwiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlciwgc3RhdHMpID0+IChzdGF0cz8ucGxheWxpc3RDb3VudCB8fCAwKSA+PSA1LFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImxveWFsX2ZhblwiLFxuICAgIG5hbWU6IFwi7Lap7ISx7Iqk65+s7Jq0IO2MrFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIuyVhOyVvOulvCDqvrjspIDtnogg7J2R7JuQ7ZW07KO87Iuc64qUIOy2qeyEseyKpOufrOyatCDtjKzsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwiMzDsnbwg7Jew7IaNIOygkeyGjVwiLFxuICAgIHJhcml0eTogXCJlcGljXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyLCBzdGF0cykgPT4gKHN0YXRzPy5jb25zZWN1dGl2ZURheXMgfHwgMCkgPj0gMzAsXG4gICAgYXV0b0dyYW50OiB0cnVlLFxuICB9LFxuXG4gIC8vIO2KueuzhCDsua3tmLggKOyImOuPmSDrtoDsl6wpXG4gIHtcbiAgICBpZDogXCJkZXZlbG9wZXJfZnJpZW5kXCIsXG4gICAgbmFtZTogXCLqsJzrsJzsnpDsnZgg7Lmc6rWsXCIsXG4gICAgZGVzY3JpcHRpb246IFwi6rCc67Cc7J6Q7JmAIO2KueuzhO2VnCDsnbjsl7DsnbQg7J6I64qUIOyGjOykke2VnCDsuZzqtazsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwi6rCc67Cc7J6Q6rCAIOyngeygkSDrtoDsl6xcIixcbiAgICByYXJpdHk6IFwibGVnZW5kYXJ5XCIsXG4gICAgY2hlY2tDb25kaXRpb246ICgpID0+IGZhbHNlLCAvLyDsiJjrj5kg67aA7Jes66eMXG4gICAgYXV0b0dyYW50OiBmYWxzZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImJldGFfdGVzdGVyXCIsXG4gICAgbmFtZTogXCLrsqDtg4Ag7YWM7Iqk7YSwXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7IKs7J207Yq4IOy0iOq4sOu2gO2EsCDtlajqu5jtlbTso7zsi6Ag67Kg7YOAIO2FjOyKpO2EsOyeheuLiOuLpFwiLFxuICAgIGNvbmRpdGlvbjogXCLtirnsoJUg6riw6rCEIOqwgOyeheyekFwiLFxuICAgIHJhcml0eTogXCJlcGljXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICgpID0+IGZhbHNlLCAvLyDsiJjrj5kg67aA7Jes66eMXG4gICAgYXV0b0dyYW50OiBmYWxzZSxcbiAgfSxcbl07XG5cbi8vIOy5re2YuCBJROuhnCDsoJXsnZgg7LC+6riwXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGl0bGVEZWZpbml0aW9uKFxuICB0aXRsZUlkOiBzdHJpbmdcbik6IFRpdGxlRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBUSVRMRV9ERUZJTklUSU9OUy5maW5kKCh0aXRsZSkgPT4gdGl0bGUuaWQgPT09IHRpdGxlSWQpO1xufVxuXG4vLyDtnazqt4Drj4Trs4Qg7IOJ7IOBIOuwmO2ZmFxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpdGxlUmFyaXR5Q29sb3IocmFyaXR5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHJhcml0eSkge1xuICAgIGNhc2UgXCJjb21tb25cIjpcbiAgICAgIHJldHVybiBcImJnLWdyYXktMTAwIGRhcms6YmctZ3JheS04MDAgdGV4dC1ncmF5LTgwMCBkYXJrOnRleHQtZ3JheS0yMDAgYm9yZGVyIGJvcmRlci1ncmF5LTgwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiO1xuICAgIGNhc2UgXCJyYXJlXCI6XG4gICAgICByZXR1cm4gXCJiZy1ibHVlLTEwMCBkYXJrOmJnLWJsdWUtOTAwIHRleHQtYmx1ZS04MDAgZGFyazp0ZXh0LWJsdWUtMjAwIGJvcmRlciBib3JkZXItYmx1ZS04MDAgZGFyazpib3JkZXItYmx1ZS03MDBcIjtcbiAgICBjYXNlIFwiZXBpY1wiOlxuICAgICAgcmV0dXJuIFwiYmctcHVycGxlLTEwMCBkYXJrOmJnLXB1cnBsZS05MDAgdGV4dC1wdXJwbGUtODAwIGRhcms6dGV4dC1wdXJwbGUtMjAwIGJvcmRlciBib3JkZXItcHVycGxlLTgwMCBkYXJrOmJvcmRlci1wdXJwbGUtNzAwXCI7XG4gICAgY2FzZSBcImxlZ2VuZGFyeVwiOlxuICAgICAgcmV0dXJuIFwiYmcteWVsbG93LTEwMCBkYXJrOmJnLXllbGxvdy05MDAgdGV4dC15ZWxsb3ctODAwIGRhcms6dGV4dC15ZWxsb3ctMjAwIGJvcmRlciBib3JkZXIteWVsbG93LTgwMCBkYXJrOmJvcmRlci15ZWxsb3ctNzAwXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcImJnLWdyYXktMTAwIGRhcms6YmctZ3JheS04MDAgdGV4dC1ncmF5LTgwMCBkYXJrOnRleHQtZ3JheS0yMDAgYm9yZGVyIGJvcmRlci1ncmF5LTgwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiO1xuICB9XG59XG5cbi8vIOyCrOyaqeyekOqwgCDtmo3rk53tlaAg7IiYIOyeiOuKlCDsg4jroZzsmrQg7Lmt7Zi4IO2ZleyduFxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9yTmV3VGl0bGVzKFxuICB1c2VyOiBJVXNlcixcbiAgc3RhdHM/OiBVc2VyU3RhdHNcbik6IFRpdGxlRGVmaW5pdGlvbltdIHtcbiAgY29uc3QgY3VycmVudFRpdGxlSWRzID0gdXNlci50aXRsZXMubWFwKCh0aXRsZSkgPT4gdGl0bGUuaWQpO1xuICBjb25zdCBuZXdUaXRsZXM6IFRpdGxlRGVmaW5pdGlvbltdID0gW107XG5cbiAgZm9yIChjb25zdCB0aXRsZURlZiBvZiBUSVRMRV9ERUZJTklUSU9OUykge1xuICAgIC8vIOydtOuvuCDrs7TsnKDtlZwg7Lmt7Zi464qUIOqxtOuEiOubsOq4sFxuICAgIGlmIChjdXJyZW50VGl0bGVJZHMuaW5jbHVkZXModGl0bGVEZWYuaWQpKSBjb250aW51ZTtcblxuICAgIC8vIOyekOuPmSDrtoDsl6wg7Lmt7Zi466eMIOyytO2BrFxuICAgIGlmICghdGl0bGVEZWYuYXV0b0dyYW50KSBjb250aW51ZTtcblxuICAgIC8vIOyhsOqxtCDtmZXsnbhcbiAgICBpZiAodGl0bGVEZWYuY2hlY2tDb25kaXRpb24odXNlciwgc3RhdHMpKSB7XG4gICAgICBuZXdUaXRsZXMucHVzaCh0aXRsZURlZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld1RpdGxlcztcbn1cblxuLy8g7IKs7Jqp7J6Q7JeQ6rKMIOy5re2YuCDrtoDsl6xcbmV4cG9ydCBmdW5jdGlvbiBncmFudFRpdGxlKHVzZXI6IElVc2VyLCB0aXRsZURlZjogVGl0bGVEZWZpbml0aW9uKTogYm9vbGVhbiB7XG4gIGNvbnNvbGUubG9nKFwi8J+PhiDsua3tmLgg67aA7JesIOyLnOuPhDpcIiwge1xuICAgIHRpdGxlSWQ6IHRpdGxlRGVmLmlkLFxuICAgIHRpdGxlTmFtZTogdGl0bGVEZWYubmFtZSxcbiAgfSk7XG5cbiAgLy8g7J2066+4IOuztOycoO2VnCDsua3tmLjsnbjsp4Ag7ZmV7J24XG4gIGNvbnN0IGFscmVhZHlIYXMgPSB1c2VyLnRpdGxlcy5zb21lKCh0aXRsZSkgPT4gdGl0bGUuaWQgPT09IHRpdGxlRGVmLmlkKTtcbiAgaWYgKGFscmVhZHlIYXMpIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfj4Yg7J2066+4IOuztOycoO2VnCDsua3tmLg6XCIsIHRpdGxlRGVmLm5hbWUpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIOy5re2YuCDstpTqsIBcbiAgY29uc3QgbmV3VGl0bGUgPSB7XG4gICAgaWQ6IHRpdGxlRGVmLmlkLFxuICAgIG5hbWU6IHRpdGxlRGVmLm5hbWUsXG4gICAgZGVzY3JpcHRpb246IHRpdGxlRGVmLmRlc2NyaXB0aW9uLFxuICAgIGVhcm5lZEF0OiBuZXcgRGF0ZSgpLFxuICAgIGNvbmRpdGlvbjogdGl0bGVEZWYuY29uZGl0aW9uLFxuICAgIHJhcml0eTogdGl0bGVEZWYucmFyaXR5LFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKFwi8J+PhiDsua3tmLgg7LaU6rCAIOyghCB0aXRsZXMubGVuZ3RoOlwiLCB1c2VyLnRpdGxlcy5sZW5ndGgpO1xuICB1c2VyLnRpdGxlcy5wdXNoKG5ld1RpdGxlKTtcbiAgY29uc29sZS5sb2coXCLwn4+GIOy5re2YuCDstpTqsIAg7ZuEIHRpdGxlcy5sZW5ndGg6XCIsIHVzZXIudGl0bGVzLmxlbmd0aCk7XG4gIGNvbnNvbGUubG9nKFwi8J+PhiDstpTqsIDrkJwg7Lmt7Zi4OlwiLCBuZXdUaXRsZSk7XG5cbiAgLy8g7LKrIOuyiOynuCDsua3tmLjrnbzrqbQg7J6Q64+Z7Jy866GcIOyEoO2DnVxuICBpZiAoIXVzZXIuc2VsZWN0ZWRUaXRsZSkge1xuICAgIHVzZXIuc2VsZWN0ZWRUaXRsZSA9IHRpdGxlRGVmLmlkO1xuICAgIGNvbnNvbGUubG9nKFwi8J+PhiDssqsg67KI7Ke4IOy5re2YuOuhnCDshKDtg53rkKg6XCIsIHRpdGxlRGVmLmlkKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyDshKDtg53rkJwg7Lmt7Zi4IOygleuztCDqsIDsoLjsmKTquLBcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWxlY3RlZFRpdGxlSW5mbyh1c2VyOiBJVXNlcikge1xuICBpZiAoIXVzZXIuc2VsZWN0ZWRUaXRsZSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3Qgc2VsZWN0ZWRUaXRsZSA9IHVzZXIudGl0bGVzLmZpbmQoXG4gICAgKHRpdGxlKSA9PiB0aXRsZS5pZCA9PT0gdXNlci5zZWxlY3RlZFRpdGxlXG4gICk7XG4gIGlmICghc2VsZWN0ZWRUaXRsZSkgcmV0dXJuIG51bGw7XG5cbiAgLy8gTW9uZ29vc2Ug6rCd7LK066W8IOyInOyImO2VnCBKYXZhU2NyaXB0IOqwneyytOuhnCDrs4DtmZhcbiAgY29uc3QgdGl0bGVPYmogPVxuICAgIHR5cGVvZiBzZWxlY3RlZFRpdGxlLnRvT2JqZWN0ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gc2VsZWN0ZWRUaXRsZS50b09iamVjdCgpXG4gICAgICA6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRUaXRsZSkpO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IHRpdGxlT2JqLmlkLFxuICAgIG5hbWU6IHRpdGxlT2JqLm5hbWUsXG4gICAgZGVzY3JpcHRpb246IHRpdGxlT2JqLmRlc2NyaXB0aW9uLFxuICAgIHJhcml0eTogdGl0bGVPYmoucmFyaXR5LFxuICAgIGNvbG9yQ2xhc3M6IGdldFRpdGxlUmFyaXR5Q29sb3IodGl0bGVPYmoucmFyaXR5KSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJUSVRMRV9ERUZJTklUSU9OUyIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY29uZGl0aW9uIiwicmFyaXR5IiwiY2hlY2tDb25kaXRpb24iLCJ1c2VyIiwicm9sZSIsImF1dG9HcmFudCIsImhvbmV5ekNoYW5uZWxJZHMiLCJpbmNsdWRlcyIsImNoYW5uZWxJZCIsInN0YXRzIiwibG9naW5Db3VudCIsImxpa2VDb3VudCIsInBsYXlsaXN0Q291bnQiLCJjb25zZWN1dGl2ZURheXMiLCJnZXRUaXRsZURlZmluaXRpb24iLCJ0aXRsZUlkIiwiZmluZCIsInRpdGxlIiwiZ2V0VGl0bGVSYXJpdHlDb2xvciIsImNoZWNrRm9yTmV3VGl0bGVzIiwiY3VycmVudFRpdGxlSWRzIiwidGl0bGVzIiwibWFwIiwibmV3VGl0bGVzIiwidGl0bGVEZWYiLCJwdXNoIiwiZ3JhbnRUaXRsZSIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZU5hbWUiLCJhbHJlYWR5SGFzIiwic29tZSIsIm5ld1RpdGxlIiwiZWFybmVkQXQiLCJEYXRlIiwibGVuZ3RoIiwic2VsZWN0ZWRUaXRsZSIsImdldFNlbGVjdGVkVGl0bGVJbmZvIiwidGl0bGVPYmoiLCJ0b09iamVjdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImNvbG9yQ2xhc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/titleSystem.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/userService.ts":
/*!********************************!*\
  !*** ./src/lib/userService.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOrUpdateUser: () => (/* binding */ createOrUpdateUser),\n/* harmony export */   getAdminUsers: () => (/* binding */ getAdminUsers),\n/* harmony export */   getUserByChannelId: () => (/* binding */ getUserByChannelId),\n/* harmony export */   getUserStats: () => (/* binding */ getUserStats),\n/* harmony export */   updateUserPreferences: () => (/* binding */ updateUserPreferences)\n/* harmony export */ });\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./src/models/User.ts\");\n/* harmony import */ var _lib_adminChannels__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/adminChannels */ \"(rsc)/./src/lib/adminChannels.ts\");\n/* harmony import */ var _lib_titleSystem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/titleSystem */ \"(rsc)/./src/lib/titleSystem.ts\");\n\n\n\n/**\n * 사용자 생성 또는 업데이트 (로그인 시 호출)\n */ async function createOrUpdateUser(userData) {\n    try {\n        const staticRole = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_1__.getStaticUserRole)(userData.channelId);\n        // 기존 사용자 찾기\n        let user = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n            channelId: userData.channelId\n        });\n        if (user) {\n            // 기존 사용자 업데이트\n            const oldChannelName = user.channelName;\n            const newChannelName = userData.channelName;\n            // channelName 변경 감지 및 이력 추가\n            if (oldChannelName !== newChannelName) {\n                user.channelNameHistory.push({\n                    channelName: newChannelName,\n                    changedAt: new Date(),\n                    source: \"login\"\n                });\n                console.log(`치지직 채널명 변경 감지: ${oldChannelName} → ${newChannelName}`);\n            }\n            user.channelName = newChannelName;\n            // displayName이 없으면 channelName으로 설정하지 않음 (프로필 수정 시에만 생성)\n            user.profileImageUrl = userData.profileImageUrl || user.profileImageUrl;\n            // 정적 권한이 현재 권한보다 높으면 업데이트\n            // if (staticRole !== 'user' && (user.role === 'user' || staticRole === 'super_admin')) {\n            //   user.role = staticRole\n            //   console.log(`사용자 권한 업데이트: ${userData.channelName} → ${staticRole}`)\n            // }\n            user.lastLoginAt = new Date();\n            // 기존 사용자의 칭호 필드가 없으면 초기화\n            if (!user.titles) {\n                user.titles = [];\n            }\n            if (user.selectedTitle === undefined) {\n                user.selectedTitle = null;\n            }\n            // 칭호 체크 및 부여\n            await checkAndGrantTitles(user);\n            const savedUser = await user.save();\n            console.log(`기존 사용자 업데이트: ${userData.channelName} (${userData.channelId})`);\n            // 저장 후 실제 DB 상태 확인\n            console.log(\"🏆 저장 후 DB 상태:\", {\n                titlesCount: savedUser.titles?.length || 0,\n                selectedTitle: savedUser.selectedTitle,\n                titles: savedUser.titles?.map((t)=>t.name) || []\n            });\n            // DB에서 다시 조회해서 실제 저장 확인\n            const reloadedUser = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n                channelId: userData.channelId\n            });\n            console.log(\"🏆 DB 재조회 결과:\", {\n                titlesCount: reloadedUser?.titles?.length || 0,\n                selectedTitle: reloadedUser?.selectedTitle,\n                titles: reloadedUser?.titles?.map((t)=>t.name) || []\n            });\n        } else {\n            // 새 사용자 생성\n            user = new _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                channelId: userData.channelId,\n                channelName: userData.channelName,\n                displayName: userData.channelName,\n                profileImageUrl: userData.profileImageUrl,\n                role: staticRole,\n                lastLoginAt: new Date(),\n                channelNameHistory: [\n                    {\n                        channelName: userData.channelName,\n                        changedAt: new Date(),\n                        source: \"initial\"\n                    }\n                ],\n                titles: [],\n                selectedTitle: null,\n                preferences: {\n                    theme: \"system\",\n                    defaultPlaylistView: \"grid\"\n                }\n            });\n            // 신규 사용자 칭호 체크 및 부여\n            await checkAndGrantTitles(user);\n            await user.save();\n            console.log(`새 사용자 생성: ${userData.channelName} (${userData.channelId}) - 권한: ${staticRole}`);\n        }\n        return user;\n    } catch (error) {\n        console.error(\"사용자 생성/업데이트 오류:\", error);\n        throw error;\n    }\n}\n/**\n * 사용자 정보 조회\n */ async function getUserByChannelId(channelId) {\n    try {\n        return await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n            channelId\n        });\n    } catch (error) {\n        console.error(\"사용자 조회 오류:\", error);\n        return null;\n    }\n}\n/**\n * 사용자 환경설정 업데이트\n */ async function updateUserPreferences(channelId, preferences) {\n    try {\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n            channelId\n        });\n        if (!user) return null;\n        user.preferences = {\n            ...user.preferences,\n            ...preferences\n        };\n        await user.save();\n        return user;\n    } catch (error) {\n        console.error(\"사용자 환경설정 업데이트 오류:\", error);\n        return null;\n    }\n}\n/**\n * 관리자 목록 조회\n */ async function getAdminUsers() {\n    try {\n        return await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({\n            role: {\n                $ne: \"user\"\n            }\n        }).sort({\n            lastLoginAt: -1\n        });\n    } catch (error) {\n        console.error(\"관리자 목록 조회 오류:\", error);\n        return [];\n    }\n}\n/**\n * 활성 사용자 통계\n */ async function getUserStats() {\n    try {\n        const totalUsers = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].countDocuments();\n        const activeUsers = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].countDocuments({\n            lastLoginAt: {\n                $gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n            }\n        });\n        const adminUsers = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].countDocuments({\n            role: {\n                $ne: \"user\"\n            }\n        });\n        return {\n            totalUsers,\n            activeUsers,\n            adminUsers\n        };\n    } catch (error) {\n        console.error(\"사용자 통계 조회 오류:\", error);\n        return {\n            totalUsers: 0,\n            activeUsers: 0,\n            adminUsers: 0\n        };\n    }\n}\n/**\n * 사용자 통계 수집\n */ async function getUserStatsForTitles(user) {\n    try {\n        // Like 모델에서 해당 사용자의 좋아요 수 조회\n        const Like = (await __webpack_require__.e(/*! import() */ \"_rsc_src_models_Like_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/models/Like */ \"(rsc)/./src/models/Like.ts\"))).default;\n        const likeCount = await Like.countDocuments({\n            userId: user._id\n        });\n        // Playlist 모델에서 해당 사용자의 플레이리스트 수 조회\n        const Playlist = (await __webpack_require__.e(/*! import() */ \"_rsc_src_models_Playlist_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/models/Playlist */ \"(rsc)/./src/models/Playlist.ts\"))).default;\n        const playlistCount = await Playlist.countDocuments({\n            userId: user._id\n        });\n        // 실제 활동 통계 사용 (activityStats가 없으면 기본값)\n        const activityStats = user.activityStats || {\n            totalLoginDays: 1,\n            currentStreak: 1,\n            longestStreak: 1,\n            lastVisitDate: null\n        };\n        return {\n            likeCount,\n            playlistCount,\n            loginCount: activityStats.totalLoginDays,\n            consecutiveDays: activityStats.currentStreak\n        };\n    } catch (error) {\n        console.error(\"사용자 통계 수집 오류:\", error);\n        return {\n            likeCount: 0,\n            playlistCount: 0,\n            loginCount: 1,\n            consecutiveDays: 1\n        };\n    }\n}\n/**\n * 사용자 칭호 체크 및 부여\n */ async function checkAndGrantTitles(user) {\n    try {\n        // 기존 칭호가 없으면 빈 배열로 초기화\n        if (!user.titles) {\n            user.titles = [];\n        }\n        if (user.selectedTitle === undefined) {\n            user.selectedTitle = null;\n        }\n        // 사용자 통계 수집\n        const stats = await getUserStatsForTitles(user);\n        // 새로 획득할 수 있는 칭호 확인\n        const newTitleDefs = (0,_lib_titleSystem__WEBPACK_IMPORTED_MODULE_2__.checkForNewTitles)(user, stats);\n        // 새 칭호 부여\n        let grantedCount = 0;\n        for (const titleDef of newTitleDefs){\n            if ((0,_lib_titleSystem__WEBPACK_IMPORTED_MODULE_2__.grantTitle)(user, titleDef)) {\n                grantedCount++;\n                console.log(`칭호 부여: ${user.channelName} → ${titleDef.name}`);\n                // Mongoose가 배열 변경을 감지하도록 명시적으로 표시\n                user.markModified(\"titles\");\n                user.markModified(\"selectedTitle\");\n            }\n        }\n        if (grantedCount > 0) {\n            console.log(`총 ${grantedCount}개의 새로운 칭호를 부여했습니다`);\n            console.log(\"🏆 현재 사용자 칭호 상태:\", {\n                titlesCount: user.titles.length,\n                selectedTitle: user.selectedTitle,\n                titles: user.titles.map((t)=>t.name)\n            });\n        }\n    } catch (error) {\n        console.error(\"칭호 체크 및 부여 오류:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS2MsTUFBTSxDQUFDTyxNQUFNO2dCQUMvQk4sZUFBZWYsS0FBS2UsYUFBYTtnQkFDakNELFFBQVFkLEtBQUtjLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVDLElBQUk7WUFDdkM7UUFDRjtJQUNGLEVBQUUsT0FBT08sT0FBTztRQUNkckIsUUFBUXFCLEtBQUssQ0FBQyxrQkFBa0JBO0lBQ2xDO0FBQ0YiLCJzb3VyY2VzIjpbIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvbGliL3VzZXJTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBVc2VyLCB7IElVc2VyIH0gZnJvbSBcIkAvbW9kZWxzL1VzZXJcIjtcbmltcG9ydCB7IGdldFN0YXRpY1VzZXJSb2xlIH0gZnJvbSBcIkAvbGliL2FkbWluQ2hhbm5lbHNcIjtcbmltcG9ydCB7IGNoZWNrRm9yTmV3VGl0bGVzLCBncmFudFRpdGxlLCBVc2VyU3RhdHMgfSBmcm9tIFwiQC9saWIvdGl0bGVTeXN0ZW1cIjtcblxuLyoqXG4gKiDsgqzsmqnsnpAg7IOd7ISxIOuYkOuKlCDsl4XrjbDsnbTtirggKOuhnOq3uOyduCDsi5wg7Zi47LacKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVVc2VyKHVzZXJEYXRhOiB7XG4gIGNoYW5uZWxJZDogc3RyaW5nO1xuICBjaGFubmVsTmFtZTogc3RyaW5nO1xuICBwcm9maWxlSW1hZ2VVcmw/OiBzdHJpbmc7XG59KTogUHJvbWlzZTxJVXNlcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHN0YXRpY1JvbGUgPSBnZXRTdGF0aWNVc2VyUm9sZSh1c2VyRGF0YS5jaGFubmVsSWQpO1xuXG4gICAgLy8g6riw7KG0IOyCrOyaqeyekCDssL7quLBcbiAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGNoYW5uZWxJZDogdXNlckRhdGEuY2hhbm5lbElkIH0pO1xuXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIC8vIOq4sOyhtCDsgqzsmqnsnpAg7JeF642w7J207Yq4XG4gICAgICBjb25zdCBvbGRDaGFubmVsTmFtZSA9IHVzZXIuY2hhbm5lbE5hbWU7XG4gICAgICBjb25zdCBuZXdDaGFubmVsTmFtZSA9IHVzZXJEYXRhLmNoYW5uZWxOYW1lO1xuXG4gICAgICAvLyBjaGFubmVsTmFtZSDrs4Dqsr0g6rCQ7KeAIOuwjyDsnbTroKUg7LaU6rCAXG4gICAgICBpZiAob2xkQ2hhbm5lbE5hbWUgIT09IG5ld0NoYW5uZWxOYW1lKSB7XG4gICAgICAgIHVzZXIuY2hhbm5lbE5hbWVIaXN0b3J5LnB1c2goe1xuICAgICAgICAgIGNoYW5uZWxOYW1lOiBuZXdDaGFubmVsTmFtZSxcbiAgICAgICAgICBjaGFuZ2VkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgc291cmNlOiBcImxvZ2luXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBg7LmY7KeA7KeBIOyxhOuEkOuqhSDrs4Dqsr0g6rCQ7KeAOiAke29sZENoYW5uZWxOYW1lfSDihpIgJHtuZXdDaGFubmVsTmFtZX1gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHVzZXIuY2hhbm5lbE5hbWUgPSBuZXdDaGFubmVsTmFtZTtcbiAgICAgIC8vIGRpc3BsYXlOYW1l7J20IOyXhuycvOuptCBjaGFubmVsTmFtZeycvOuhnCDshKTsoJXtlZjsp4Ag7JWK7J2MICjtlITroZztlYQg7IiY7KCVIOyLnOyXkOunjCDsg53shLEpXG4gICAgICB1c2VyLnByb2ZpbGVJbWFnZVVybCA9IHVzZXJEYXRhLnByb2ZpbGVJbWFnZVVybCB8fCB1c2VyLnByb2ZpbGVJbWFnZVVybDtcblxuICAgICAgLy8g7KCV7KCBIOq2jO2VnOydtCDtmITsnqwg6raM7ZWc67O064ukIOuGkuycvOuptCDsl4XrjbDsnbTtirhcbiAgICAgIC8vIGlmIChzdGF0aWNSb2xlICE9PSAndXNlcicgJiYgKHVzZXIucm9sZSA9PT0gJ3VzZXInIHx8IHN0YXRpY1JvbGUgPT09ICdzdXBlcl9hZG1pbicpKSB7XG4gICAgICAvLyAgIHVzZXIucm9sZSA9IHN0YXRpY1JvbGVcbiAgICAgIC8vICAgY29uc29sZS5sb2coYOyCrOyaqeyekCDqtoztlZwg7JeF642w7J207Yq4OiAke3VzZXJEYXRhLmNoYW5uZWxOYW1lfSDihpIgJHtzdGF0aWNSb2xlfWApXG4gICAgICAvLyB9XG5cbiAgICAgIHVzZXIubGFzdExvZ2luQXQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAvLyDquLDsobQg7IKs7Jqp7J6Q7J2YIOy5re2YuCDtlYTrk5zqsIAg7JeG7Jy866m0IOy0iOq4sO2ZlFxuICAgICAgaWYgKCF1c2VyLnRpdGxlcykge1xuICAgICAgICB1c2VyLnRpdGxlcyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIuc2VsZWN0ZWRUaXRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVzZXIuc2VsZWN0ZWRUaXRsZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIOy5re2YuCDssrTtgawg67CPIOu2gOyXrFxuICAgICAgYXdhaXQgY2hlY2tBbmRHcmFudFRpdGxlcyh1c2VyKTtcblxuICAgICAgY29uc3Qgc2F2ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYOq4sOyhtCDsgqzsmqnsnpAg7JeF642w7J207Yq4OiAke3VzZXJEYXRhLmNoYW5uZWxOYW1lfSAoJHt1c2VyRGF0YS5jaGFubmVsSWR9KWBcbiAgICAgICk7XG5cbiAgICAgIC8vIOyggOyepSDtm4Qg7Iuk7KCcIERCIOyDge2DnCDtmZXsnbhcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+PhiDsoIDsnqUg7ZuEIERCIOyDge2DnDpcIiwge1xuICAgICAgICB0aXRsZXNDb3VudDogc2F2ZWRVc2VyLnRpdGxlcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGVkVGl0bGU6IHNhdmVkVXNlci5zZWxlY3RlZFRpdGxlLFxuICAgICAgICB0aXRsZXM6IHNhdmVkVXNlci50aXRsZXM/Lm1hcCgodDogYW55KSA9PiB0Lm5hbWUpIHx8IFtdLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIERC7JeQ7IScIOuLpOyLnCDsobDtmoztlbTshJwg7Iuk7KCcIOyggOyepSDtmZXsnbhcbiAgICAgIGNvbnN0IHJlbG9hZGVkVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIGNoYW5uZWxJZDogdXNlckRhdGEuY2hhbm5lbElkLFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfj4YgREIg7J6s7KGw7ZqMIOqysOqzvDpcIiwge1xuICAgICAgICB0aXRsZXNDb3VudDogcmVsb2FkZWRVc2VyPy50aXRsZXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3RlZFRpdGxlOiByZWxvYWRlZFVzZXI/LnNlbGVjdGVkVGl0bGUsXG4gICAgICAgIHRpdGxlczogcmVsb2FkZWRVc2VyPy50aXRsZXM/Lm1hcCgodDogYW55KSA9PiB0Lm5hbWUpIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOyDiCDsgqzsmqnsnpAg7IOd7ISxXG4gICAgICB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICBjaGFubmVsSWQ6IHVzZXJEYXRhLmNoYW5uZWxJZCxcbiAgICAgICAgY2hhbm5lbE5hbWU6IHVzZXJEYXRhLmNoYW5uZWxOYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogdXNlckRhdGEuY2hhbm5lbE5hbWUsIC8vIOqwgOyeheyLnCBjaGFubmVsTmFtZeydhCBkaXNwbGF5TmFtZeycvOuhnCDshKTsoJVcbiAgICAgICAgcHJvZmlsZUltYWdlVXJsOiB1c2VyRGF0YS5wcm9maWxlSW1hZ2VVcmwsXG4gICAgICAgIHJvbGU6IHN0YXRpY1JvbGUsXG4gICAgICAgIGxhc3RMb2dpbkF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjaGFubmVsTmFtZUhpc3Rvcnk6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjaGFubmVsTmFtZTogdXNlckRhdGEuY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICBjaGFuZ2VkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBzb3VyY2U6IFwiaW5pdGlhbFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRpdGxlczogW10sIC8vIOu5iCDsua3tmLgg67Cw7Je066GcIOy0iOq4sO2ZlFxuICAgICAgICBzZWxlY3RlZFRpdGxlOiBudWxsLFxuICAgICAgICBwcmVmZXJlbmNlczoge1xuICAgICAgICAgIHRoZW1lOiBcInN5c3RlbVwiLFxuICAgICAgICAgIGRlZmF1bHRQbGF5bGlzdFZpZXc6IFwiZ3JpZFwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIOyLoOq3nCDsgqzsmqnsnpAg7Lmt7Zi4IOyytO2BrCDrsI8g67aA7JesXG4gICAgICBhd2FpdCBjaGVja0FuZEdyYW50VGl0bGVzKHVzZXIpO1xuXG4gICAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg7IOIIOyCrOyaqeyekCDsg53shLE6ICR7dXNlckRhdGEuY2hhbm5lbE5hbWV9ICgke3VzZXJEYXRhLmNoYW5uZWxJZH0pIC0g6raM7ZWcOiAke3N0YXRpY1JvbGV9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi7IKs7Jqp7J6QIOyDneyEsS/sl4XrjbDsnbTtirgg7Jik66WYOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiDsgqzsmqnsnpAg7KCV67O0IOyhsO2ajFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5Q2hhbm5lbElkKFxuICBjaGFubmVsSWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxJVXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgVXNlci5maW5kT25lKHsgY2hhbm5lbElkIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLsgqzsmqnsnpAg7KGw7ZqMIOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICog7IKs7Jqp7J6QIO2ZmOqyveyEpOyglSDsl4XrjbDsnbTtirhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcmVmZXJlbmNlcyhcbiAgY2hhbm5lbElkOiBzdHJpbmcsXG4gIHByZWZlcmVuY2VzOiBQYXJ0aWFsPElVc2VyW1wicHJlZmVyZW5jZXNcIl0+XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgY2hhbm5lbElkIH0pO1xuICAgIGlmICghdXNlcikgcmV0dXJuIG51bGw7XG5cbiAgICB1c2VyLnByZWZlcmVuY2VzID0geyAuLi51c2VyLnByZWZlcmVuY2VzLCAuLi5wcmVmZXJlbmNlcyB9O1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgcmV0dXJuIHVzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuyCrOyaqeyekCDtmZjqsr3shKTsoJUg7JeF642w7J207Yq4IOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICog6rSA66as7J6QIOuqqeuhnSDsobDtmoxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWluVXNlcnMoKTogUHJvbWlzZTxJVXNlcltdPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IFVzZXIuZmluZCh7IHJvbGU6IHsgJG5lOiBcInVzZXJcIiB9IH0pLnNvcnQoeyBsYXN0TG9naW5BdDogLTEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuq0gOumrOyekCDrqqnroZ0g7KGw7ZqMIOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIO2ZnOyEsSDsgqzsmqnsnpAg7Ya16rOEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyU3RhdHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG90YWxVc2VycyA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoKTtcbiAgICBjb25zdCBhY3RpdmVVc2VycyA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoe1xuICAgICAgbGFzdExvZ2luQXQ6IHsgJGd0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkgfSwgLy8gMzDsnbwg64K0XG4gICAgfSk7XG4gICAgY29uc3QgYWRtaW5Vc2VycyA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoeyByb2xlOiB7ICRuZTogXCJ1c2VyXCIgfSB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFVzZXJzLFxuICAgICAgYWN0aXZlVXNlcnMsXG4gICAgICBhZG1pblVzZXJzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuyCrOyaqeyekCDthrXqs4Qg7KGw7ZqMIOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFVzZXJzOiAwLFxuICAgICAgYWN0aXZlVXNlcnM6IDAsXG4gICAgICBhZG1pblVzZXJzOiAwLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiDsgqzsmqnsnpAg7Ya16rOEIOyImOynkVxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyU3RhdHNGb3JUaXRsZXModXNlcjogSVVzZXIpOiBQcm9taXNlPFVzZXJTdGF0cz4ge1xuICB0cnkge1xuICAgIC8vIExpa2Ug66qo64247JeQ7IScIO2VtOuLuSDsgqzsmqnsnpDsnZgg7KKL7JWE7JqUIOyImCDsobDtmoxcbiAgICBjb25zdCBMaWtlID0gKGF3YWl0IGltcG9ydChcIkAvbW9kZWxzL0xpa2VcIikpLmRlZmF1bHQ7XG4gICAgY29uc3QgbGlrZUNvdW50ID0gYXdhaXQgTGlrZS5jb3VudERvY3VtZW50cyh7IHVzZXJJZDogdXNlci5faWQgfSk7XG5cbiAgICAvLyBQbGF5bGlzdCDrqqjrjbjsl5DshJwg7ZW064u5IOyCrOyaqeyekOydmCDtlIzroIjsnbTrpqzsiqTtirgg7IiYIOyhsO2ajFxuICAgIGNvbnN0IFBsYXlsaXN0ID0gKGF3YWl0IGltcG9ydChcIkAvbW9kZWxzL1BsYXlsaXN0XCIpKS5kZWZhdWx0O1xuICAgIGNvbnN0IHBsYXlsaXN0Q291bnQgPSBhd2FpdCBQbGF5bGlzdC5jb3VudERvY3VtZW50cyh7IHVzZXJJZDogdXNlci5faWQgfSk7XG5cbiAgICAvLyDsi6TsoJwg7Zmc64+ZIO2GteqzhCDsgqzsmqkgKGFjdGl2aXR5U3RhdHPqsIAg7JeG7Jy866m0IOq4sOuzuOqwkilcbiAgICBjb25zdCBhY3Rpdml0eVN0YXRzID0gdXNlci5hY3Rpdml0eVN0YXRzIHx8IHtcbiAgICAgIHRvdGFsTG9naW5EYXlzOiAxLFxuICAgICAgY3VycmVudFN0cmVhazogMSxcbiAgICAgIGxvbmdlc3RTdHJlYWs6IDEsXG4gICAgICBsYXN0VmlzaXREYXRlOiBudWxsLFxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGlrZUNvdW50LFxuICAgICAgcGxheWxpc3RDb3VudCxcbiAgICAgIGxvZ2luQ291bnQ6IGFjdGl2aXR5U3RhdHMudG90YWxMb2dpbkRheXMsXG4gICAgICBjb25zZWN1dGl2ZURheXM6IGFjdGl2aXR5U3RhdHMuY3VycmVudFN0cmVhayxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLsgqzsmqnsnpAg7Ya16rOEIOyImOynkSDsmKTrpZg6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGlrZUNvdW50OiAwLFxuICAgICAgcGxheWxpc3RDb3VudDogMCxcbiAgICAgIGxvZ2luQ291bnQ6IDEsXG4gICAgICBjb25zZWN1dGl2ZURheXM6IDEsXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIOyCrOyaqeyekCDsua3tmLgg7LK07YGsIOuwjyDrtoDsl6xcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tBbmRHcmFudFRpdGxlcyh1c2VyOiBJVXNlcik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIC8vIOq4sOyhtCDsua3tmLjqsIAg7JeG7Jy866m0IOu5iCDrsLDsl7TroZwg7LSI6riw7ZmUXG4gICAgaWYgKCF1c2VyLnRpdGxlcykge1xuICAgICAgdXNlci50aXRsZXMgPSBbXTtcbiAgICB9XG4gICAgaWYgKHVzZXIuc2VsZWN0ZWRUaXRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB1c2VyLnNlbGVjdGVkVGl0bGUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIOyCrOyaqeyekCDthrXqs4Qg7IiY7KeRXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBnZXRVc2VyU3RhdHNGb3JUaXRsZXModXNlcik7XG5cbiAgICAvLyDsg4jroZwg7ZqN65Od7ZWgIOyImCDsnojripQg7Lmt7Zi4IO2ZleyduFxuICAgIGNvbnN0IG5ld1RpdGxlRGVmcyA9IGNoZWNrRm9yTmV3VGl0bGVzKHVzZXIsIHN0YXRzKTtcblxuICAgIC8vIOyDiCDsua3tmLgg67aA7JesXG4gICAgbGV0IGdyYW50ZWRDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCB0aXRsZURlZiBvZiBuZXdUaXRsZURlZnMpIHtcbiAgICAgIGlmIChncmFudFRpdGxlKHVzZXIsIHRpdGxlRGVmKSkge1xuICAgICAgICBncmFudGVkQ291bnQrKztcbiAgICAgICAgY29uc29sZS5sb2coYOy5re2YuCDrtoDsl6w6ICR7dXNlci5jaGFubmVsTmFtZX0g4oaSICR7dGl0bGVEZWYubmFtZX1gKTtcbiAgICAgICAgLy8gTW9uZ29vc2XqsIAg67Cw7Je0IOuzgOqyveydhCDqsJDsp4DtlZjrj4TroZ0g66qF7Iuc7KCB7Jy866GcIO2RnOyLnFxuICAgICAgICB1c2VyLm1hcmtNb2RpZmllZChcInRpdGxlc1wiKTtcbiAgICAgICAgdXNlci5tYXJrTW9kaWZpZWQoXCJzZWxlY3RlZFRpdGxlXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChncmFudGVkQ291bnQgPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg7LSdICR7Z3JhbnRlZENvdW50feqwnOydmCDsg4jroZzsmrQg7Lmt7Zi466W8IOu2gOyXrO2WiOyKteuLiOuLpGApO1xuICAgICAgY29uc29sZS5sb2coXCLwn4+GIO2YhOyerCDsgqzsmqnsnpAg7Lmt7Zi4IOyDge2DnDpcIiwge1xuICAgICAgICB0aXRsZXNDb3VudDogdXNlci50aXRsZXMubGVuZ3RoLFxuICAgICAgICBzZWxlY3RlZFRpdGxlOiB1c2VyLnNlbGVjdGVkVGl0bGUsXG4gICAgICAgIHRpdGxlczogdXNlci50aXRsZXMubWFwKCh0KSA9PiB0Lm5hbWUpLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLsua3tmLgg7LK07YGsIOuwjyDrtoDsl6wg7Jik66WYOlwiLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJVc2VyIiwiZ2V0U3RhdGljVXNlclJvbGUiLCJjaGVja0Zvck5ld1RpdGxlcyIsImdyYW50VGl0bGUiLCJjcmVhdGVPclVwZGF0ZVVzZXIiLCJ1c2VyRGF0YSIsInN0YXRpY1JvbGUiLCJjaGFubmVsSWQiLCJ1c2VyIiwiZmluZE9uZSIsIm9sZENoYW5uZWxOYW1lIiwiY2hhbm5lbE5hbWUiLCJuZXdDaGFubmVsTmFtZSIsImNoYW5uZWxOYW1lSGlzdG9yeSIsInB1c2giLCJjaGFuZ2VkQXQiLCJEYXRlIiwic291cmNlIiwiY29uc29sZSIsImxvZyIsInByb2ZpbGVJbWFnZVVybCIsImxhc3RMb2dpbkF0IiwidGl0bGVzIiwic2VsZWN0ZWRUaXRsZSIsInVuZGVmaW5lZCIsImNoZWNrQW5kR3JhbnRUaXRsZXMiLCJzYXZlZFVzZXIiLCJzYXZlIiwidGl0bGVzQ291bnQiLCJsZW5ndGgiLCJtYXAiLCJ0IiwibmFtZSIsInJlbG9hZGVkVXNlciIsImRpc3BsYXlOYW1lIiwicm9sZSIsInByZWZlcmVuY2VzIiwidGhlbWUiLCJkZWZhdWx0UGxheWxpc3RWaWV3IiwiZXJyb3IiLCJnZXRVc2VyQnlDaGFubmVsSWQiLCJ1cGRhdGVVc2VyUHJlZmVyZW5jZXMiLCJnZXRBZG1pblVzZXJzIiwiZmluZCIsIiRuZSIsInNvcnQiLCJnZXRVc2VyU3RhdHMiLCJ0b3RhbFVzZXJzIiwiY291bnREb2N1bWVudHMiLCJhY3RpdmVVc2VycyIsIiRndGUiLCJub3ciLCJhZG1pblVzZXJzIiwiZ2V0VXNlclN0YXRzRm9yVGl0bGVzIiwiTGlrZSIsImRlZmF1bHQiLCJsaWtlQ291bnQiLCJ1c2VySWQiLCJfaWQiLCJQbGF5bGlzdCIsInBsYXlsaXN0Q291bnQiLCJhY3Rpdml0eVN0YXRzIiwidG90YWxMb2dpbkRheXMiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImxhc3RWaXNpdERhdGUiLCJsb2dpbkNvdW50IiwiY29uc2VjdXRpdmVEYXlzIiwic3RhdHMiLCJuZXdUaXRsZURlZnMiLCJncmFudGVkQ291bnQiLCJ0aXRsZURlZiIsIm1hcmtNb2RpZmllZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/userService.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/User.ts":
/*!****************************!*\
  !*** ./src/models/User.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    channelId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    channelName: {\n        type: String,\n        required: true\n    },\n    displayName: {\n        type: String,\n        required: false\n    },\n    profileImageUrl: {\n        type: String,\n        default: null\n    },\n    role: {\n        type: String,\n        enum: [\n            \"super_admin\",\n            \"song_admin\",\n            \"song_editor\",\n            \"user\"\n        ],\n        default: \"user\"\n    },\n    grantedBy: {\n        type: String,\n        default: null\n    },\n    grantedAt: {\n        type: Date,\n        default: null\n    },\n    lastLoginAt: {\n        type: Date,\n        default: Date.now\n    },\n    channelNameHistory: [\n        {\n            channelName: {\n                type: String,\n                required: true\n            },\n            changedAt: {\n                type: Date,\n                default: Date.now\n            },\n            source: {\n                type: String,\n                enum: [\n                    \"login\",\n                    \"initial\"\n                ],\n                required: true\n            }\n        }\n    ],\n    titles: [\n        {\n            id: {\n                type: String,\n                required: true\n            },\n            name: {\n                type: String,\n                required: true\n            },\n            description: {\n                type: String,\n                required: true\n            },\n            earnedAt: {\n                type: Date,\n                default: Date.now\n            },\n            condition: {\n                type: String,\n                required: true\n            },\n            rarity: {\n                type: String,\n                enum: [\n                    \"common\",\n                    \"rare\",\n                    \"epic\",\n                    \"legendary\"\n                ],\n                required: true\n            }\n        }\n    ],\n    selectedTitle: {\n        type: String,\n        default: null\n    },\n    preferences: {\n        theme: {\n            type: String,\n            enum: [\n                \"light\",\n                \"dark\",\n                \"system\"\n            ],\n            default: \"system\"\n        },\n        defaultPlaylistView: {\n            type: String,\n            enum: [\n                \"grid\",\n                \"list\"\n            ],\n            default: \"grid\"\n        }\n    },\n    activityStats: {\n        totalLoginDays: {\n            type: Number,\n            default: 0\n        },\n        currentStreak: {\n            type: Number,\n            default: 0\n        },\n        longestStreak: {\n            type: Number,\n            default: 0\n        },\n        lastVisitDate: {\n            type: String,\n            default: null\n        }\n    }\n}, {\n    timestamps: true\n});\n// 인덱스 추가 (channelId는 unique: true로 자동 인덱스 생성됨)\nuserSchema.index({\n    role: 1\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBdUNoQyxNQUFNQyxhQUFhLElBQUlELHdEQUFlLENBQ3BDO0lBQ0VHLFdBQVc7UUFDVEMsTUFBTUM7UUFDTkMsVUFBVTtRQUNWQyxRQUFRO0lBQ1Y7SUFDQUMsYUFBYTtRQUNYSixNQUFNQztRQUNOQyxVQUFVO0lBQ1o7SUFDQUcsYUFBYTtRQUNYTCxNQUFNQztRQUNOQyxVQUFVO0lBQ1o7SUFDQUksaUJBQWlCO1FBQ2ZOLE1BQU1DO1FBQ05NLFNBQVM7SUFDWDtJQUNBQyxNQUFNO1FBQ0pSLE1BQU1DO1FBQ05RLE1BQU07WUFBQztZQUFlO1lBQWM7WUFBZTtTQUFPO1FBQzFERixTQUFTO0lBQ1g7SUFDQUcsV0FBVztRQUNUVixNQUFNQztRQUNOTSxTQUFTO0lBQ1g7SUFDQUksV0FBVztRQUNUWCxNQUFNWTtRQUNOTCxTQUFTO0lBQ1g7SUFDQU0sYUFBYTtRQUNYYixNQUFNWTtRQUNOTCxTQUFTSyxLQUFLRSxHQUFHO0lBQ25CO0lBQ0FDLG9CQUFvQjtRQUNsQjtZQUNFWCxhQUFhO2dCQUNYSixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FjLFdBQVc7Z0JBQ1RoQixNQUFNWTtnQkFDTkwsU0FBU0ssS0FBS0UsR0FBRztZQUNuQjtZQUNBRyxRQUFRO2dCQUNOakIsTUFBTUM7Z0JBQ05RLE1BQU07b0JBQUM7b0JBQVM7aUJBQVU7Z0JBQzFCUCxVQUFVO1lBQ1o7UUFDRjtLQUNEO0lBQ0RnQixRQUFRO1FBQ047WUFDRUMsSUFBSTtnQkFDRm5CLE1BQU1DO2dCQUNOQyxVQUFVO1lBQ1o7WUFDQWtCLE1BQU07Z0JBQ0pwQixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FtQixhQUFhO2dCQUNYckIsTUFBTUM7Z0JBQ05DLFVBQVU7WUFDWjtZQUNBb0IsVUFBVTtnQkFDUnRCLE1BQU1ZO2dCQUNOTCxTQUFTSyxLQUFLRSxHQUFHO1lBQ25CO1lBQ0FTLFdBQVc7Z0JBQ1R2QixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FzQixRQUFRO2dCQUNOeEIsTUFBTUM7Z0JBQ05RLE1BQU07b0JBQUM7b0JBQVU7b0JBQVE7b0JBQVE7aUJBQVk7Z0JBQzdDUCxVQUFVO1lBQ1o7UUFDRjtLQUNEO0lBQ0R1QixlQUFlO1FBQ2J6QixNQUFNQztRQUNOTSxTQUFTO0lBQ1g7SUFDQW1CLGFBQWE7UUFDWEMsT0FBTztZQUNMM0IsTUFBTUM7WUFDTlEsTUFBTTtnQkFBQztnQkFBUztnQkFBUTthQUFTO1lBQ2pDRixTQUFTO1FBQ1g7UUFDQXFCLHFCQUFxQjtZQUNuQjVCLE1BQU1DO1lBQ05RLE1BQU07Z0JBQUM7Z0JBQVE7YUFBTztZQUN0QkYsU0FBUztRQUNYO0lBQ0Y7SUFDQXNCLGVBQWU7UUFDYkMsZ0JBQWdCO1lBQ2Q5QixNQUFNK0I7WUFDTnhCLFNBQVM7UUFDWDtRQUNBeUIsZUFBZTtZQUNiaEMsTUFBTStCO1lBQ054QixTQUFTO1FBQ1g7UUFDQTBCLGVBQWU7WUFDYmpDLE1BQU0rQjtZQUNOeEIsU0FBUztRQUNYO1FBQ0EyQixlQUFlO1lBQ2JsQyxNQUFNQztZQUNOTSxTQUFTO1FBQ1g7SUFDRjtBQUNGLEdBQ0E7SUFDRTRCLFlBQVk7QUFDZDtBQUdGLCtDQUErQztBQUMvQ3RDLFdBQVd1QyxLQUFLLENBQUM7SUFBRTVCLE1BQU07QUFBRTtBQUUzQixpRUFBZVosd0RBQWUsQ0FBQzBDLElBQUksSUFDakMxQyxxREFBYyxDQUFRLFFBQVFDLFdBQVdBLEVBQUMiLCJzb3VyY2VzIjpbIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvbW9kZWxzL1VzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyIGV4dGVuZHMgbW9uZ29vc2UuRG9jdW1lbnQge1xuICBjaGFubmVsSWQ6IHN0cmluZztcbiAgY2hhbm5lbE5hbWU6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgcHJvZmlsZUltYWdlVXJsPzogc3RyaW5nO1xuICByb2xlOiBcInN1cGVyX2FkbWluXCIgfCBcImF5YXVrZV9hZG1pblwiIHwgXCJzb25nX2FkbWluXCIgfCBcInNvbmdfZWRpdG9yXCIgfCBcInVzZXJcIjtcbiAgZ3JhbnRlZEJ5Pzogc3RyaW5nO1xuICBncmFudGVkQXQ/OiBEYXRlO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIGxhc3RMb2dpbkF0OiBEYXRlO1xuICBjaGFubmVsTmFtZUhpc3Rvcnk6IEFycmF5PHtcbiAgICBjaGFubmVsTmFtZTogc3RyaW5nO1xuICAgIGNoYW5nZWRBdDogRGF0ZTtcbiAgICBzb3VyY2U6IFwibG9naW5cIiB8IFwiaW5pdGlhbFwiO1xuICB9PjtcbiAgdGl0bGVzOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBlYXJuZWRBdDogRGF0ZTtcbiAgICBjb25kaXRpb246IHN0cmluZztcbiAgICByYXJpdHk6IFwiY29tbW9uXCIgfCBcInJhcmVcIiB8IFwiZXBpY1wiIHwgXCJsZWdlbmRhcnlcIjtcbiAgfT47XG4gIHNlbGVjdGVkVGl0bGU6IHN0cmluZyB8IG51bGw7XG4gIHByZWZlcmVuY2VzOiB7XG4gICAgdGhlbWU6IFwibGlnaHRcIiB8IFwiZGFya1wiIHwgXCJzeXN0ZW1cIjtcbiAgICBkZWZhdWx0UGxheWxpc3RWaWV3OiBcImdyaWRcIiB8IFwibGlzdFwiO1xuICB9O1xuICAvLyDtmZzrj5kg7Ya16rOEICjsmpTslb0g642w7J207YSw66eMIOyggOyepSlcbiAgYWN0aXZpdHlTdGF0czoge1xuICAgIHRvdGFsTG9naW5EYXlzOiBudW1iZXI7IC8vIOy0nSDroZzqt7jsnbjtlZwg64KgIOyImFxuICAgIGN1cnJlbnRTdHJlYWs6IG51bWJlcjsgLy8g7ZiE7J6sIOyXsOyGjSDsoJHsho3snbxcbiAgICBsb25nZXN0U3RyZWFrOiBudW1iZXI7IC8vIOy1nOyepSDsl7Dsho0g7KCR7IaN7J28IOq4sOuhnVxuICAgIGxhc3RWaXNpdERhdGU6IHN0cmluZzsgLy8g66eI7KeA66eJIOuwqeusuCDrgqDsp5wgKFlZWVktTU0tREQpXG4gIH07XG59XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hPElVc2VyPihcbiAge1xuICAgIGNoYW5uZWxJZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgfSxcbiAgICBjaGFubmVsTmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBkaXNwbGF5TmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0sXG4gICAgcHJvZmlsZUltYWdlVXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgcm9sZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZW51bTogW1wic3VwZXJfYWRtaW5cIiwgXCJzb25nX2FkbWluXCIsIFwic29uZ19lZGl0b3JcIiwgXCJ1c2VyXCJdLFxuICAgICAgZGVmYXVsdDogXCJ1c2VyXCIsXG4gICAgfSxcbiAgICBncmFudGVkQnk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBncmFudGVkQXQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgbGFzdExvZ2luQXQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgICB9LFxuICAgIGNoYW5uZWxOYW1lSGlzdG9yeTogW1xuICAgICAge1xuICAgICAgICBjaGFubmVsTmFtZToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2hhbmdlZEF0OiB7XG4gICAgICAgICAgdHlwZTogRGF0ZSxcbiAgICAgICAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgICAgICAgfSxcbiAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGVudW06IFtcImxvZ2luXCIsIFwiaW5pdGlhbFwiXSxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICB0aXRsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBlYXJuZWRBdDoge1xuICAgICAgICAgIHR5cGU6IERhdGUsXG4gICAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gICAgICAgIH0sXG4gICAgICAgIGNvbmRpdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmFyaXR5OiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGVudW06IFtcImNvbW1vblwiLCBcInJhcmVcIiwgXCJlcGljXCIsIFwibGVnZW5kYXJ5XCJdLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICAgIHNlbGVjdGVkVGl0bGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBwcmVmZXJlbmNlczoge1xuICAgICAgdGhlbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBlbnVtOiBbXCJsaWdodFwiLCBcImRhcmtcIiwgXCJzeXN0ZW1cIl0sXG4gICAgICAgIGRlZmF1bHQ6IFwic3lzdGVtXCIsXG4gICAgICB9LFxuICAgICAgZGVmYXVsdFBsYXlsaXN0Vmlldzoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IFtcImdyaWRcIiwgXCJsaXN0XCJdLFxuICAgICAgICBkZWZhdWx0OiBcImdyaWRcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhY3Rpdml0eVN0YXRzOiB7XG4gICAgICB0b3RhbExvZ2luRGF5czoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgY3VycmVudFN0cmVhazoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgbG9uZ2VzdFN0cmVhazoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgbGFzdFZpc2l0RGF0ZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICB9XG4pO1xuXG4vLyDsnbjrjbHsiqQg7LaU6rCAIChjaGFubmVsSWTripQgdW5pcXVlOiB0cnVl66GcIOyekOuPmSDsnbjrjbHsiqQg7IOd7ISx65CoKVxudXNlclNjaGVtYS5pbmRleCh7IHJvbGU6IDEgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8XG4gIG1vbmdvb3NlLm1vZGVsPElVc2VyPihcIlVzZXJcIiwgdXNlclNjaGVtYSk7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiY2hhbm5lbElkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwiY2hhbm5lbE5hbWUiLCJkaXNwbGF5TmFtZSIsInByb2ZpbGVJbWFnZVVybCIsImRlZmF1bHQiLCJyb2xlIiwiZW51bSIsImdyYW50ZWRCeSIsImdyYW50ZWRBdCIsIkRhdGUiLCJsYXN0TG9naW5BdCIsIm5vdyIsImNoYW5uZWxOYW1lSGlzdG9yeSIsImNoYW5nZWRBdCIsInNvdXJjZSIsInRpdGxlcyIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiZWFybmVkQXQiLCJjb25kaXRpb24iLCJyYXJpdHkiLCJzZWxlY3RlZFRpdGxlIiwicHJlZmVyZW5jZXMiLCJ0aGVtZSIsImRlZmF1bHRQbGF5bGlzdFZpZXciLCJhY3Rpdml0eVN0YXRzIiwidG90YWxMb2dpbkRheXMiLCJOdW1iZXIiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImxhc3RWaXNpdERhdGUiLCJ0aW1lc3RhbXBzIiwiaW5kZXgiLCJtb2RlbHMiLCJVc2VyIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/User.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/UserActivity.ts":
/*!************************************!*\
  !*** ./src/models/UserActivity.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserActivity: () => (/* binding */ UserActivity),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserActivitySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true,\n        index: true\n    },\n    date: {\n        type: String,\n        required: true\n    },\n    visitCount: {\n        type: Number,\n        default: 1\n    },\n    firstVisitAt: {\n        type: Date,\n        required: true\n    },\n    lastVisitAt: {\n        type: Date,\n        required: true\n    }\n}, {\n    timestamps: true\n});\n// 복합 인덱스: 사용자별 날짜 조회 최적화\nUserActivitySchema.index({\n    userId: 1,\n    date: 1\n}, {\n    unique: true\n});\n// 날짜별 인덱스: 오래된 데이터 정리 시 사용\nUserActivitySchema.index({\n    date: 1\n});\nconst UserActivity = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).UserActivity || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('UserActivity', UserActivitySchema);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserActivity);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXJBY3Rpdml0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFEO0FBWXJELE1BQU1FLHFCQUFxQixJQUFJRCw0Q0FBTUEsQ0FBZ0I7SUFDbkRFLFFBQVE7UUFDTkMsTUFBTUgsNENBQU1BLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtRQUMzQkMsS0FBSztRQUNMQyxVQUFVO1FBQ1ZDLE9BQU87SUFDVDtJQUNBQyxNQUFNO1FBQ0pOLE1BQU1PO1FBQ05ILFVBQVU7SUFDWjtJQUNBSSxZQUFZO1FBQ1ZSLE1BQU1TO1FBQ05DLFNBQVM7SUFDWDtJQUNBQyxjQUFjO1FBQ1pYLE1BQU1ZO1FBQ05SLFVBQVU7SUFDWjtJQUNBUyxhQUFhO1FBQ1hiLE1BQU1ZO1FBQ05SLFVBQVU7SUFDWjtBQUNGLEdBQUc7SUFDRFUsWUFBWTtBQUNkO0FBRUEseUJBQXlCO0FBQ3pCaEIsbUJBQW1CTyxLQUFLLENBQUM7SUFBRU4sUUFBUTtJQUFHTyxNQUFNO0FBQUUsR0FBRztJQUFFUyxRQUFRO0FBQUs7QUFFaEUsMkJBQTJCO0FBQzNCakIsbUJBQW1CTyxLQUFLLENBQUM7SUFBRUMsTUFBTTtBQUFFO0FBRW5DLE1BQU1VLGVBQWVwQix3REFBZSxDQUFDb0IsWUFBWSxJQUFJcEIscURBQWMsQ0FBZ0IsZ0JBQWdCRTtBQUU1RTtBQUN2QixpRUFBZWtCLFlBQVlBLEVBQUEiLCJzb3VyY2VzIjpbIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvbW9kZWxzL1VzZXJBY3Rpdml0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyQWN0aXZpdHkgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHVzZXJJZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWRcbiAgZGF0ZTogc3RyaW5nIC8vICdZWVlZLU1NLUREJyDtmJXsi51cbiAgdmlzaXRDb3VudDogbnVtYmVyXG4gIGZpcnN0VmlzaXRBdDogRGF0ZVxuICBsYXN0VmlzaXRBdDogRGF0ZVxuICBjcmVhdGVkQXQ6IERhdGVcbiAgdXBkYXRlZEF0OiBEYXRlXG59XG5cbmNvbnN0IFVzZXJBY3Rpdml0eVNjaGVtYSA9IG5ldyBTY2hlbWE8SVVzZXJBY3Rpdml0eT4oe1xuICB1c2VySWQ6IHtcbiAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgcmVmOiAnVXNlcicsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgaW5kZXg6IHRydWVcbiAgfSxcbiAgZGF0ZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICB2aXNpdENvdW50OiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDFcbiAgfSxcbiAgZmlyc3RWaXNpdEF0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICBsYXN0VmlzaXRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfVxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlXG59KVxuXG4vLyDrs7Xtlakg7J24642x7IqkOiDsgqzsmqnsnpDrs4Qg64Kg7KecIOyhsO2ajCDstZzsoIHtmZRcblVzZXJBY3Rpdml0eVNjaGVtYS5pbmRleCh7IHVzZXJJZDogMSwgZGF0ZTogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KVxuXG4vLyDrgqDsp5zrs4Qg7J24642x7IqkOiDsmKTrnpjrkJwg642w7J207YSwIOygleumrCDsi5wg7IKs7JqpXG5Vc2VyQWN0aXZpdHlTY2hlbWEuaW5kZXgoeyBkYXRlOiAxIH0pXG5cbmNvbnN0IFVzZXJBY3Rpdml0eSA9IG1vbmdvb3NlLm1vZGVscy5Vc2VyQWN0aXZpdHkgfHwgbW9uZ29vc2UubW9kZWw8SVVzZXJBY3Rpdml0eT4oJ1VzZXJBY3Rpdml0eScsIFVzZXJBY3Rpdml0eVNjaGVtYSlcblxuZXhwb3J0IHsgVXNlckFjdGl2aXR5IH1cbmV4cG9ydCBkZWZhdWx0IFVzZXJBY3Rpdml0eSJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIlVzZXJBY3Rpdml0eVNjaGVtYSIsInVzZXJJZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJpbmRleCIsImRhdGUiLCJTdHJpbmciLCJ2aXNpdENvdW50IiwiTnVtYmVyIiwiZGVmYXVsdCIsImZpcnN0VmlzaXRBdCIsIkRhdGUiLCJsYXN0VmlzaXRBdCIsInRpbWVzdGFtcHMiLCJ1bmlxdWUiLCJVc2VyQWN0aXZpdHkiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/UserActivity.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/YouTubeComment.ts":
/*!**************************************!*\
  !*** ./src/models/YouTubeComment.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   YouTubeChannel: () => (/* binding */ YouTubeChannel),\n/* harmony export */   YouTubeComment: () => (/* binding */ YouTubeComment),\n/* harmony export */   YouTubeVideo: () => (/* binding */ YouTubeVideo)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ChannelSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    channelId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    channelName: {\n        type: String,\n        required: true\n    },\n    channelUrl: {\n        type: String,\n        required: true\n    },\n    lastSyncDate: {\n        type: Date,\n        default: Date.now\n    },\n    totalVideos: {\n        type: Number,\n        default: 0\n    },\n    totalComments: {\n        type: Number,\n        default: 0\n    },\n    timelineComments: {\n        type: Number,\n        default: 0\n    }\n}, {\n    timestamps: true\n});\nconst VideoSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    videoId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    channelId: {\n        type: String,\n        required: true\n    },\n    title: {\n        type: String,\n        required: true\n    },\n    publishedAt: {\n        type: Date,\n        required: true\n    },\n    duration: {\n        type: String,\n        default: ''\n    },\n    viewCount: {\n        type: Number,\n        default: 0\n    },\n    totalComments: {\n        type: Number,\n        default: 0\n    },\n    timelineComments: {\n        type: Number,\n        default: 0\n    },\n    lastCommentSync: {\n        type: Date,\n        default: Date.now\n    },\n    thumbnailUrl: {\n        type: String,\n        default: ''\n    }\n}, {\n    timestamps: true\n});\nconst CommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    commentId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    videoId: {\n        type: String,\n        required: true\n    },\n    authorName: {\n        type: String,\n        required: true\n    },\n    textContent: {\n        type: String,\n        required: true\n    },\n    publishedAt: {\n        type: Date,\n        required: true\n    },\n    likeCount: {\n        type: Number,\n        default: 0\n    },\n    isTimeline: {\n        type: Boolean,\n        default: false\n    },\n    extractedTimestamps: [\n        {\n            type: String\n        }\n    ],\n    isProcessed: {\n        type: Boolean,\n        default: false\n    },\n    processedBy: {\n        type: String\n    },\n    processedAt: {\n        type: Date\n    },\n    manuallyMarked: {\n        type: Boolean,\n        default: false\n    }\n}, {\n    timestamps: true\n});\n// 인덱스 설정\nVideoSchema.index({\n    channelId: 1,\n    publishedAt: -1\n});\nCommentSchema.index({\n    videoId: 1,\n    isTimeline: 1\n});\nCommentSchema.index({\n    isProcessed: 1,\n    isTimeline: 1\n});\nconst YouTubeChannel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).YouTubeChannel || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('YouTubeChannel', ChannelSchema);\nconst YouTubeVideo = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).YouTubeVideo || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('YouTubeVideo', VideoSchema);\nconst YouTubeComment = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).YouTubeComment || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('YouTubeComment', CommentSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0MscURBQWMsQ0FBWSxnQkFBZ0JtQixhQUFhO0FBQzVHLE1BQU15QixpQkFBaUI1Qyx3REFBZSxDQUFDNEMsY0FBYyxJQUFJNUMscURBQWMsQ0FBYyxrQkFBa0IyQixlQUFlIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL21vZGVscy9Zb3VUdWJlQ29tbWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJztcblxuLy8gWW91VHViZSDssYTrhJAg642w7J207YSwXG5leHBvcnQgaW50ZXJmYWNlIENoYW5uZWxEYXRhIGV4dGVuZHMgRG9jdW1lbnQge1xuICBjaGFubmVsSWQ6IHN0cmluZztcbiAgY2hhbm5lbE5hbWU6IHN0cmluZztcbiAgY2hhbm5lbFVybDogc3RyaW5nO1xuICBsYXN0U3luY0RhdGU6IERhdGU7XG4gIHRvdGFsVmlkZW9zOiBudW1iZXI7XG4gIHRvdGFsQ29tbWVudHM6IG51bWJlcjtcbiAgdGltZWxpbmVDb21tZW50czogbnVtYmVyO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuY29uc3QgQ2hhbm5lbFNjaGVtYSA9IG5ldyBTY2hlbWE8Q2hhbm5lbERhdGE+KHtcbiAgY2hhbm5lbElkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBjaGFubmVsTmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGNoYW5uZWxVcmw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBsYXN0U3luY0RhdGU6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgdG90YWxWaWRlb3M6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRvdGFsQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRpbWVsaW5lQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIFlvdVR1YmUg67mE65SU7JikIOuNsOydtO2EsFxuZXhwb3J0IGludGVyZmFjZSBWaWRlb0RhdGEgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHZpZGVvSWQ6IHN0cmluZztcbiAgY2hhbm5lbElkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHB1Ymxpc2hlZEF0OiBEYXRlO1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICB2aWV3Q291bnQ6IG51bWJlcjtcbiAgdG90YWxDb21tZW50czogbnVtYmVyO1xuICB0aW1lbGluZUNvbW1lbnRzOiBudW1iZXI7XG4gIGxhc3RDb21tZW50U3luYzogRGF0ZTtcbiAgdGh1bWJuYWlsVXJsOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5jb25zdCBWaWRlb1NjaGVtYSA9IG5ldyBTY2hlbWE8VmlkZW9EYXRhPih7XG4gIHZpZGVvSWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXG4gIGNoYW5uZWxJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgcHVibGlzaGVkQXQ6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZHVyYXRpb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICB2aWV3Q291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRvdGFsQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRpbWVsaW5lQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIGxhc3RDb21tZW50U3luYzogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxuICB0aHVtYm5haWxVcmw6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9XG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWVcbn0pO1xuXG4vLyBZb3VUdWJlIOuMk+q4gCDrjbDsnbTthLBcbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWVudERhdGEgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIGNvbW1lbnRJZDogc3RyaW5nO1xuICB2aWRlb0lkOiBzdHJpbmc7XG4gIGF1dGhvck5hbWU6IHN0cmluZztcbiAgdGV4dENvbnRlbnQ6IHN0cmluZztcbiAgcHVibGlzaGVkQXQ6IERhdGU7XG4gIGxpa2VDb3VudDogbnVtYmVyO1xuICBpc1RpbWVsaW5lOiBib29sZWFuO1xuICBleHRyYWN0ZWRUaW1lc3RhbXBzOiBzdHJpbmdbXTtcbiAgaXNQcm9jZXNzZWQ6IGJvb2xlYW47XG4gIHByb2Nlc3NlZEJ5Pzogc3RyaW5nO1xuICBwcm9jZXNzZWRBdD86IERhdGU7XG4gIG1hbnVhbGx5TWFya2VkPzogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmNvbnN0IENvbW1lbnRTY2hlbWEgPSBuZXcgU2NoZW1hPENvbW1lbnREYXRhPih7XG4gIGNvbW1lbnRJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcbiAgdmlkZW9JZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGF1dGhvck5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB0ZXh0Q29udGVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHB1Ymxpc2hlZEF0OiB7IHR5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGxpa2VDb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgaXNUaW1lbGluZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICBleHRyYWN0ZWRUaW1lc3RhbXBzOiBbeyB0eXBlOiBTdHJpbmcgfV0sXG4gIGlzUHJvY2Vzc2VkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gIHByb2Nlc3NlZEJ5OiB7IHR5cGU6IFN0cmluZyB9LFxuICBwcm9jZXNzZWRBdDogeyB0eXBlOiBEYXRlIH0sXG4gIG1hbnVhbGx5TWFya2VkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIOyduOuNseyKpCDshKTsoJVcblZpZGVvU2NoZW1hLmluZGV4KHsgY2hhbm5lbElkOiAxLCBwdWJsaXNoZWRBdDogLTEgfSk7XG5Db21tZW50U2NoZW1hLmluZGV4KHsgdmlkZW9JZDogMSwgaXNUaW1lbGluZTogMSB9KTtcbkNvbW1lbnRTY2hlbWEuaW5kZXgoeyBpc1Byb2Nlc3NlZDogMSwgaXNUaW1lbGluZTogMSB9KTtcblxuZXhwb3J0IGNvbnN0IFlvdVR1YmVDaGFubmVsID0gbW9uZ29vc2UubW9kZWxzLllvdVR1YmVDaGFubmVsIHx8IG1vbmdvb3NlLm1vZGVsPENoYW5uZWxEYXRhPignWW91VHViZUNoYW5uZWwnLCBDaGFubmVsU2NoZW1hKTtcbmV4cG9ydCBjb25zdCBZb3VUdWJlVmlkZW8gPSBtb25nb29zZS5tb2RlbHMuWW91VHViZVZpZGVvIHx8IG1vbmdvb3NlLm1vZGVsPFZpZGVvRGF0YT4oJ1lvdVR1YmVWaWRlbycsIFZpZGVvU2NoZW1hKTtcbmV4cG9ydCBjb25zdCBZb3VUdWJlQ29tbWVudCA9IG1vbmdvb3NlLm1vZGVscy5Zb3VUdWJlQ29tbWVudCB8fCBtb25nb29zZS5tb2RlbDxDb21tZW50RGF0YT4oJ1lvdVR1YmVDb21tZW50JywgQ29tbWVudFNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiQ2hhbm5lbFNjaGVtYSIsImNoYW5uZWxJZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsImNoYW5uZWxOYW1lIiwiY2hhbm5lbFVybCIsImxhc3RTeW5jRGF0ZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidG90YWxWaWRlb3MiLCJOdW1iZXIiLCJ0b3RhbENvbW1lbnRzIiwidGltZWxpbmVDb21tZW50cyIsInRpbWVzdGFtcHMiLCJWaWRlb1NjaGVtYSIsInZpZGVvSWQiLCJ0aXRsZSIsInB1Ymxpc2hlZEF0IiwiZHVyYXRpb24iLCJ2aWV3Q291bnQiLCJsYXN0Q29tbWVudFN5bmMiLCJ0aHVtYm5haWxVcmwiLCJDb21tZW50U2NoZW1hIiwiY29tbWVudElkIiwiYXV0aG9yTmFtZSIsInRleHRDb250ZW50IiwibGlrZUNvdW50IiwiaXNUaW1lbGluZSIsIkJvb2xlYW4iLCJleHRyYWN0ZWRUaW1lc3RhbXBzIiwiaXNQcm9jZXNzZWQiLCJwcm9jZXNzZWRCeSIsInByb2Nlc3NlZEF0IiwibWFudWFsbHlNYXJrZWQiLCJpbmRleCIsIllvdVR1YmVDaGFubmVsIiwibW9kZWxzIiwibW9kZWwiLCJZb3VUdWJlVmlkZW8iLCJZb3VUdWJlQ29tbWVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/YouTubeComment.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/ws","vendor-chunks/chzzk","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/isomorphic-ws"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fyoutube-comments%2Froute&page=%2Fapi%2Fyoutube-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fyoutube-comments%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();