/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/timeline-parser/route";
exports.ids = ["app/api/timeline-parser/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftimeline-parser%2Froute&page=%2Fapi%2Ftimeline-parser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimeline-parser%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftimeline-parser%2Froute&page=%2Fapi%2Ftimeline-parser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimeline-parser%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _mnt_f_data_git_claude_code_ayauke_page_ayauke_page_src_app_api_timeline_parser_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/timeline-parser/route.ts */ \"(rsc)/./src/app/api/timeline-parser/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/timeline-parser/route\",\n        pathname: \"/api/timeline-parser\",\n        filename: \"route\",\n        bundlePath: \"app/api/timeline-parser/route\"\n    },\n    resolvedPagePath: \"/mnt/f/data/git/claude-code/ayauke-page/ayauke-page/src/app/api/timeline-parser/route.ts\",\n    nextConfigOutput,\n    userland: _mnt_f_data_git_claude_code_ayauke_page_ayauke_page_src_app_api_timeline_parser_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ0aW1lbGluZS1wYXJzZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRpbWVsaW5lLXBhcnNlciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRpbWVsaW5lLXBhcnNlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZtbnQlMkZmJTJGZGF0YSUyRmdpdCUyRmNsYXVkZS1jb2RlJTJGYXlhdWtlLXBhZ2UlMkZheWF1a2UtcGFnZSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGbW50JTJGZiUyRmRhdGElMkZnaXQlMkZjbGF1ZGUtY29kZSUyRmF5YXVrZS1wYWdlJTJGYXlhdWtlLXBhZ2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3dDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2FwcC9hcGkvdGltZWxpbmUtcGFyc2VyL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90aW1lbGluZS1wYXJzZXIvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90aW1lbGluZS1wYXJzZXJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RpbWVsaW5lLXBhcnNlci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvYXBwL2FwaS90aW1lbGluZS1wYXJzZXIvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftimeline-parser%2Froute&page=%2Fapi%2Ftimeline-parser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimeline-parser%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/timeline-parser/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/timeline-parser/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_authOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authOptions */ \"(rsc)/./src/lib/authOptions.ts\");\n/* harmony import */ var _lib_permissions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/permissions */ \"(rsc)/./src/lib/permissions.ts\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/models/YouTubeComment */ \"(rsc)/./src/models/YouTubeComment.ts\");\n/* harmony import */ var _models_SongDetail__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/SongDetail */ \"(rsc)/./src/models/SongDetail.ts\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n// 파싱된 타임라인 데이터를 위한 MongoDB 스키마\nconst ParsedTimelineSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_7___default().Schema)({\n    id: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    videoId: {\n        type: String,\n        required: true\n    },\n    videoTitle: {\n        type: String,\n        required: true\n    },\n    uploadedDate: {\n        type: Date,\n        required: true\n    },\n    originalDateString: {\n        type: String\n    },\n    artist: {\n        type: String,\n        required: true\n    },\n    songTitle: {\n        type: String,\n        required: true\n    },\n    videoUrl: {\n        type: String,\n        required: true\n    },\n    startTimeSeconds: {\n        type: Number,\n        required: true\n    },\n    endTimeSeconds: {\n        type: Number\n    },\n    duration: {\n        type: Number\n    },\n    isRelevant: {\n        type: Boolean,\n        default: true\n    },\n    isExcluded: {\n        type: Boolean,\n        default: false\n    },\n    matchedSong: {\n        songId: {\n            type: String\n        },\n        title: {\n            type: String\n        },\n        artist: {\n            type: String\n        },\n        confidence: {\n            type: Number\n        }\n    },\n    originalComment: {\n        type: String,\n        required: true\n    },\n    commentAuthor: {\n        type: String,\n        required: true\n    },\n    commentId: {\n        type: String,\n        required: true\n    },\n    commentPublishedAt: {\n        type: Date\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    updatedAt: {\n        type: Date,\n        default: Date.now\n    }\n});\nconst ParsedTimeline = (mongoose__WEBPACK_IMPORTED_MODULE_7___default().models).ParsedTimeline || mongoose__WEBPACK_IMPORTED_MODULE_7___default().model('ParsedTimeline', ParsedTimelineSchema);\n// 텍스트 정규화 함수 (공백/특수문자 제거, 소문자 변환)\nfunction normalizeText(text) {\n    return text.toLowerCase().trim().replace(/\\s+/g, '') // 모든 공백 제거\n    .replace(/[-_.,!?()[\\]{}]/g, '') // 기본 구두점만 제거\n    .replace(/[^\\w가-힣]/g, ''); // 한글, 영문, 숫자만 유지\n}\n// Levenshtein distance 계산\nfunction levenshteinDistance(str1, str2) {\n    const matrix = [];\n    for(let i = 0; i <= str2.length; i++){\n        matrix[i] = [\n            i\n        ];\n    }\n    for(let j = 0; j <= str1.length; j++){\n        matrix[0][j] = j;\n    }\n    for(let i = 1; i <= str2.length; i++){\n        for(let j = 1; j <= str1.length; j++){\n            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {\n                matrix[i][j] = matrix[i - 1][j - 1];\n            } else {\n                matrix[i][j] = Math.min(matrix[i - 1][j - 1] + 1, matrix[i][j - 1] + 1, matrix[i - 1][j] + 1 // deletion\n                );\n            }\n        }\n    }\n    return matrix[str2.length][str1.length];\n}\n// 개선된 문자열 유사도 계산\nfunction calculateSimilarity(str1, str2) {\n    if (!str1 || !str2) return 0;\n    const s1 = str1.toLowerCase().trim();\n    const s2 = str2.toLowerCase().trim();\n    if (s1 === s2) return 1;\n    // 1. 포함 관계 체크 (높은 점수)\n    if (s1.includes(s2) || s2.includes(s1)) {\n        const longer = s1.length > s2.length ? s1 : s2;\n        const shorter = s1.length > s2.length ? s2 : s1;\n        return 0.8 + shorter.length / longer.length * 0.2; // 0.8~1.0\n    }\n    // 2. 공통 부분 문자열 찾기\n    let commonLength = 0;\n    const minLen = Math.min(s1.length, s2.length);\n    // 시작 부분 공통 문자열\n    for(let i = 0; i < minLen; i++){\n        if (s1[i] === s2[i]) {\n            commonLength++;\n        } else {\n            break;\n        }\n    }\n    // 끝 부분 공통 문자열\n    for(let i = 1; i <= minLen - commonLength; i++){\n        if (s1[s1.length - i] === s2[s2.length - i]) {\n            commonLength++;\n        } else {\n            break;\n        }\n    }\n    if (commonLength > 0) {\n        const maxLen = Math.max(s1.length, s2.length);\n        const similarity = commonLength / maxLen;\n        if (similarity >= 0.3) return similarity;\n    }\n    // 3. Levenshtein distance 기반 계산\n    const maxLen = Math.max(s1.length, s2.length);\n    if (maxLen === 0) return 1;\n    const distance = levenshteinDistance(s1, s2);\n    return Math.max(0, (maxLen - distance) / maxLen);\n}\n// 아티스트 검색 (아티스트, artistAlias, searchTags)\nfunction searchInArtistFields(song, normalizedQuery) {\n    const fields = [\n        song.artist,\n        song.artistAlias,\n        ...song.searchTags || []\n    ].filter(Boolean);\n    let maxSimilarity = 0;\n    let exactMatch = false;\n    for (const field of fields){\n        const normalizedField = normalizeText(field);\n        // 1. 완전 일치 체크\n        if (normalizedField === normalizedQuery) {\n            exactMatch = true;\n            maxSimilarity = 1.0;\n            break;\n        }\n        // 2. 포함 관계 체크 (양방향)\n        if (normalizedField.includes(normalizedQuery) || normalizedQuery.includes(normalizedField)) {\n            maxSimilarity = Math.max(maxSimilarity, 0.8);\n        }\n        // 3. 유사도 계산\n        const similarity = calculateSimilarity(normalizedQuery, normalizedField);\n        maxSimilarity = Math.max(maxSimilarity, similarity);\n        // 4. 짧은 문자열 특별 처리 (3글자 이하)\n        if (normalizedQuery.length <= 3 || normalizedField.length <= 3) {\n            if (normalizedField.includes(normalizedQuery) || normalizedQuery.includes(normalizedField)) {\n                maxSimilarity = Math.max(maxSimilarity, 0.7);\n            }\n        }\n    }\n    return maxSimilarity;\n}\n// 제목 검색 (title, titleAlias, searchTags)\nfunction searchInTitleFields(song, normalizedQuery) {\n    const fields = [\n        song.title,\n        song.titleAlias,\n        ...song.searchTags || []\n    ].filter(Boolean);\n    let maxSimilarity = 0;\n    let exactMatch = false;\n    for (const field of fields){\n        const normalizedField = normalizeText(field);\n        // 1. 완전 일치 체크\n        if (normalizedField === normalizedQuery) {\n            exactMatch = true;\n            maxSimilarity = 1.0;\n            break;\n        }\n        // 2. 포함 관계 체크 (양방향)\n        if (normalizedField.includes(normalizedQuery) || normalizedQuery.includes(normalizedField)) {\n            maxSimilarity = Math.max(maxSimilarity, 0.8);\n        }\n        // 3. 유사도 계산\n        const similarity = calculateSimilarity(normalizedQuery, normalizedField);\n        maxSimilarity = Math.max(maxSimilarity, similarity);\n        // 4. 짧은 문자열 특별 처리 (3글자 이하)\n        if (normalizedQuery.length <= 3 || normalizedField.length <= 3) {\n            if (normalizedField.includes(normalizedQuery) || normalizedQuery.includes(normalizedField)) {\n                maxSimilarity = Math.max(maxSimilarity, 0.7);\n            }\n        }\n    }\n    return maxSimilarity;\n}\n// 타임라인 데이터와 노래 DB 매칭\nasync function matchTimelineWithSongs(artist, title) {\n    await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n    const normalizedArtist = normalizeText(artist);\n    const normalizedTitle = normalizeText(title);\n    // 기본 로그만 유지\n    console.log(`🔍 검색 시작: \"${artist}\" - \"${title}\"`);\n    // 모든 곡 또는 활성+상태없는 곡 가져오기\n    let allSongs = await _models_SongDetail__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find({\n        $or: [\n            {\n                status: 'active'\n            },\n            {\n                status: {\n                    $exists: false\n                }\n            },\n            {\n                status: null\n            }\n        ]\n    }).lean();\n    // 검색 대상이 적다면 모든 곡을 대상으로 검색\n    if (allSongs.length < 100) {\n        allSongs = await _models_SongDetail__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find({}).lean();\n    }\n    console.log(`🔍 검색 대상 곡 수: ${allSongs.length}개`);\n    const candidates = [];\n    let processedCount = 0;\n    for (const song of allSongs){\n        const artistSimilarity = searchInArtistFields(song, normalizedArtist);\n        const titleSimilarity = searchInTitleFields(song, normalizedTitle);\n        // 전체 일치율 = (아티스트 유사도 + 제목 유사도) / 2\n        const overallSimilarity = (artistSimilarity + titleSimilarity) / 2;\n        // 높은 유사도 결과만 로그\n        if (overallSimilarity > 0.3) {\n            console.log(`🎯 매치: \"${song.artist}\" - \"${song.title}\" (${(overallSimilarity * 100).toFixed(1)}%)`);\n        }\n        // 최소 임계값 이상인 경우만 후보로 추가 (임계값 낮춤)\n        if (overallSimilarity > 0.1) {\n            candidates.push({\n                song,\n                artistSimilarity,\n                titleSimilarity,\n                overallSimilarity,\n                isExactMatch: overallSimilarity >= 0.95\n            });\n        }\n        processedCount++;\n    }\n    console.log(`✅ 검색 완료: ${candidates.length}개 후보 발견`);\n    // 일치율 순으로 정렬\n    candidates.sort((a, b)=>b.overallSimilarity - a.overallSimilarity);\n    return candidates.slice(0, 10); // 상위 10개만 반환\n}\n// 시간 파라미터를 초로 변환하는 함수 (콜론 형태 우선 처리)\nfunction parseTimeToSeconds(timeParam) {\n    // 콜론 형태 처리 (최우선)\n    // h:m:s 형식 (예: 1:23:45)\n    const colonHmsMatch = timeParam.match(/^(\\d{1,2}):(\\d{2}):(\\d{2})$/);\n    if (colonHmsMatch) {\n        const hours = parseInt(colonHmsMatch[1]);\n        const minutes = parseInt(colonHmsMatch[2]);\n        const seconds = parseInt(colonHmsMatch[3]);\n        return hours * 3600 + minutes * 60 + seconds;\n    }\n    // m:s 형식 (예: 23:45)\n    const colonMsMatch = timeParam.match(/^(\\d{1,2}):(\\d{2})$/);\n    if (colonMsMatch) {\n        const minutes = parseInt(colonMsMatch[1]);\n        const seconds = parseInt(colonMsMatch[2]);\n        return minutes * 60 + seconds;\n    }\n    // 숫자만 있는 경우 (초)\n    if (/^\\d+$/.test(timeParam)) {\n        return parseInt(timeParam);\n    }\n    // h:m:s 형식 (예: 1h23m45s)\n    const hmsMatch = timeParam.match(/(\\d+)h(\\d+)m(\\d+)s/);\n    if (hmsMatch) {\n        const hours = parseInt(hmsMatch[1]);\n        const minutes = parseInt(hmsMatch[2]);\n        const seconds = parseInt(hmsMatch[3]);\n        return hours * 3600 + minutes * 60 + seconds;\n    }\n    // m:s 형식 (예: 23m45s)\n    const msMatch = timeParam.match(/(\\d+)m(\\d+)s/);\n    if (msMatch) {\n        const minutes = parseInt(msMatch[1]);\n        const seconds = parseInt(msMatch[2]);\n        return minutes * 60 + seconds;\n    }\n    // h:m 형식 (예: 1h23m)\n    const hmMatch = timeParam.match(/(\\d+)h(\\d+)m/);\n    if (hmMatch) {\n        const hours = parseInt(hmMatch[1]);\n        const minutes = parseInt(hmMatch[2]);\n        return hours * 3600 + minutes * 60;\n    }\n    // m 형식 (예: 23m)\n    const mMatch = timeParam.match(/(\\d+)m/);\n    if (mMatch) {\n        const minutes = parseInt(mMatch[1]);\n        return minutes * 60;\n    }\n    // s 형식 (예: 45s)\n    const sMatch = timeParam.match(/(\\d+)s/);\n    if (sMatch) {\n        return parseInt(sMatch[1]);\n    }\n    return 0;\n}\n// 개선된 HTML 엔티티 디코딩 함수\nfunction decodeHtmlEntities(text) {\n    // 기본 HTML 엔티티 매핑\n    const namedEntities = {\n        '&amp;': '&',\n        '&lt;': '<',\n        '&gt;': '>',\n        '&quot;': '\"',\n        '&apos;': \"'\",\n        '&nbsp;': ' ',\n        '&copy;': '©',\n        '&reg;': '®',\n        '&trade;': '™'\n    };\n    return text// 1. 숫자 형태의 HTML 엔티티 디코딩 (&#39; → ')\n    .replace(/&#(\\d+);/g, (match, code)=>{\n        try {\n            return String.fromCharCode(parseInt(code, 10));\n        } catch (e) {\n            return match; // 변환 실패 시 원본 반환\n        }\n    })// 2. 16진수 형태의 HTML 엔티티 디코딩 (&#x27; → ')\n    .replace(/&#x([0-9a-fA-F]+);/g, (match, code)=>{\n        try {\n            return String.fromCharCode(parseInt(code, 16));\n        } catch (e) {\n            return match; // 변환 실패 시 원본 반환\n        }\n    })// 3. 이름 기반 HTML 엔티티 디코딩\n    .replace(/&[a-zA-Z][a-zA-Z0-9]*;/g, (entity)=>{\n        return namedEntities[entity] || entity;\n    });\n}\n// 음악 컨텐츠 여부 판단 함수 (모든 것 포함)\nfunction isMusicContent(text) {\n    // 완전히 빈 텍스트나 의미없는 기호만 제외\n    if (!text || text.trim() === '' || /^[?!.~\\s]*$/.test(text)) {\n        return false;\n    }\n    // 그 외 모든 내용 포함\n    return true;\n}\n// 범용 타임라인 파싱 함수 - 모든 타임스탬프 패턴을 캐치\nfunction splitCommentByTimestamps(decodedHtml) {\n    console.log('🔍 범용 타임라인 파싱 시작...');\n    const results = [];\n    let baseVideoUrl = '';\n    // 첫 번째 유튜브 링크에서 기본 URL 추출\n    const linkMatch = decodedHtml.match(/<a[^>]*href=\"([^\"]*youtube[^\"]*)\"[^>]*>/);\n    if (linkMatch) {\n        baseVideoUrl = linkMatch[1].replace(/[?&]t=\\d+/, '').replace(/[?&]$/, '');\n    }\n    // 1단계: 모든 타임스탬프 링크를 찾고 주변 텍스트 추출\n    const allTimestampPattern = /<a[^>]*>(\\d{1,2}:\\d{2}(?::\\d{2})?)<\\/a>/g;\n    let match;\n    const timestampPositions = [];\n    while((match = allTimestampPattern.exec(decodedHtml)) !== null){\n        timestampPositions.push({\n            timeText: match[1],\n            timeSeconds: parseTimeToSeconds(match[1]),\n            startPos: match.index,\n            endPos: match.index + match[0].length,\n            fullMatch: match[0]\n        });\n    }\n    console.log(`🕐 총 ${timestampPositions.length}개 타임스탬프 발견`);\n    // 2단계: 각 타임스탬프 주변의 컨텍스트 추출\n    timestampPositions.forEach((timestamp, index)=>{\n        // 현재 타임스탬프 이후부터 다음 타임스탬프 전까지의 텍스트\n        const nextStartPos = index < timestampPositions.length - 1 ? timestampPositions[index + 1].startPos : decodedHtml.length;\n        const contextText = decodedHtml.substring(timestamp.endPos, nextStartPos);\n        // 텍스트 정리 및 추출\n        let cleanText = contextText.replace(/<br\\s*\\/?>/gi, ' ') // <br> 태그를 공백으로\n        .replace(/<[^>]*>/g, ' ') // 모든 HTML 태그 제거\n        .replace(/\\s+/g, ' ') // 연속 공백을 하나로\n        .trim();\n        // 특수 마커나 브래킷 정보 제거\n        cleanText = cleanText.replace(/^[🎵🪻]\\s*/, '') // 이모지 마커 제거\n        .replace(/^\\[.*?\\]\\s*/, '') // 브래킷 정보 제거 ([저챗], [노래타임] 등)\n        .replace(/^\\s*-\\s*/, '') // 시작 대시 제거\n        .replace(/^\\s*~\\s*/, '') // 시작 틸드 제거\n        .trim();\n        // VS 패턴 처리 - \"곡1 VS 시간 곡2\" 형태를 분리\n        const vsMatch = cleanText.match(/^(.*?)\\s+VS\\s+(\\d{1,2}:\\d{2}(?::\\d{2})?)\\s+(.*?)$/);\n        if (vsMatch) {\n            // VS 앞부분만 현재 타임스탬프에 연결\n            cleanText = vsMatch[1].trim();\n        }\n        // 빈 텍스트나 너무 짧은 텍스트 스킵\n        if (!cleanText || cleanText.length < 2) {\n            return;\n        }\n        // 음악 관련 여부 판단\n        const isLikelyMusic = isMusicContent(cleanText);\n        if (isLikelyMusic) {\n            results.push({\n                timeText: timestamp.timeText,\n                timeSeconds: timestamp.timeSeconds,\n                content: cleanText,\n                baseVideoUrl,\n                source: 'general'\n            });\n            console.log(`🎶 발견: ${timestamp.timeText} → \"${cleanText}\"`);\n        } else {\n            console.log(`❌ 제외: ${timestamp.timeText} → \"${cleanText.substring(0, 50)}...\"`);\n        }\n    });\n    // 시간순 정렬\n    results.sort((a, b)=>a.timeSeconds - b.timeSeconds);\n    console.log(`📍 총 ${results.length}개 음악 항목 발견`);\n    return results;\n}\n// 기본 비디오 URL 추출\nfunction extractBaseVideoUrl(timelines) {\n    const linkTimeline = timelines.find((t)=>t.type === 'link' && t.url);\n    if (linkTimeline) {\n        return linkTimeline.url.replace(/[?&]t=\\d+/, '').replace(/[?&]$/, '');\n    }\n    return '';\n}\n// 완전히 새로운 타임라인 파싱 함수\nfunction parseTimelineComment(htmlText, videoTitle) {\n    console.log(`🔍 원본 댓글 파싱 시작...`);\n    // HTML 엔티티 디코딩\n    const decodedHtml = decodeHtmlEntities(htmlText);\n    // 1단계: 타임스탬프 기준으로 댓글을 완전히 분할\n    const sections = splitCommentByTimestamps(decodedHtml);\n    if (sections.length === 0) {\n        console.log(`❌ 타임스탬프가 발견되지 않음`);\n        return [];\n    }\n    console.log(`📊 총 ${sections.length}개 구간으로 분할됨`);\n    // 2단계: 각 분할된 구간을 개별적으로 파싱 (원본 댓글은 더 이상 보지 않음)\n    const rawMatches = [];\n    for(let i = 0; i < sections.length; i++){\n        const section = sections[i];\n        console.log(`\\n🔄 구간 ${i + 1} 개별 파싱: ${section.timeText}`);\n        console.log(`📝 구간 내용: \"${section.content}\"`);\n        // 3단계: 분할된 구간만 사용하여 곡 정보 파싱\n        const songInfo = parseSongInfo(section.content);\n        const isRelevant = songInfo.artist !== '알 수 없음';\n        rawMatches.push({\n            url: section.baseVideoUrl || '',\n            timeSeconds: section.timeSeconds,\n            timeText: section.timeText,\n            sectionText: section.content,\n            artist: songInfo.artist,\n            songTitle: songInfo.songTitle,\n            isRelevant: isRelevant\n        });\n        console.log(`${isRelevant ? '✅' : '⚠️'} 구간 파싱 완료: ${section.timeText} - ${songInfo.artist} - ${songInfo.songTitle}`);\n    }\n    console.log(`📊 총 ${rawMatches.length}개 유효한 곡 발견`);\n    // 시간순 정렬\n    rawMatches.sort((a, b)=>a.timeSeconds - b.timeSeconds);\n    // 기본 비디오 URL 추출 (t 파라미터 제거)\n    const baseVideoUrl = rawMatches.length > 0 ? rawMatches[0].url.replace(/[?&]t=\\d+/, '').replace(/[?&]$/, '') : '';\n    // 날짜 추출\n    const dateInfo = extractDateFromTitle(videoTitle);\n    // 결과 배열 초기화\n    const songEntries = [];\n    // 각 곡 정보와 시작/종료 시간 계산\n    for(let i = 0; i < rawMatches.length; i++){\n        const current = rawMatches[i];\n        const next = rawMatches[i + 1];\n        const liveClip = {\n            videoUrl: baseVideoUrl,\n            artist: current.artist,\n            songTitle: current.songTitle,\n            startTimeSeconds: current.timeSeconds,\n            endTimeSeconds: next ? next.timeSeconds : null,\n            duration: next ? next.timeSeconds - current.timeSeconds : null,\n            uploadedDate: dateInfo.date,\n            originalDateString: dateInfo.originalString,\n            isRelevant: current.isRelevant\n        };\n        songEntries.push(liveClip);\n    }\n    return songEntries;\n}\n// 곡 정보 파싱 함수 (아티스트와 곡명 분리)\nfunction parseSongInfo(songText) {\n    const cleanText = songText.trim();\n    // 다양한 구분자로 분리 시도\n    const separators = [\n        ' - ',\n        ' – ',\n        ' — ',\n        ' | ',\n        ' / '\n    ];\n    for (const separator of separators){\n        if (cleanText.includes(separator)) {\n            const parts = cleanText.split(separator);\n            if (parts.length >= 2 && parts[0].trim() && parts[1].trim()) {\n                return {\n                    artist: parts[0].trim(),\n                    songTitle: parts.slice(1).join(separator).trim()\n                };\n            }\n        }\n    }\n    // 구분자가 없는 경우, 전체를 곡명으로 처리\n    return {\n        artist: '알 수 없음',\n        songTitle: cleanText\n    };\n}\n// 초를 HH:MM:SS 또는 MM:SS 형식으로 변환\nfunction formatSeconds(seconds) {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const secs = seconds % 60;\n    if (hours > 0) {\n        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    } else {\n        return `${minutes}:${secs.toString().padStart(2, '0')}`;\n    }\n}\n// 노래 데이터베이스에서 매칭 찾기\nasync function findSongMatches(artist, songTitle) {\n    try {\n        // 활성 상태인 곡들만 검색\n        const songs = await _models_SongDetail__WEBPACK_IMPORTED_MODULE_6__[\"default\"].find({\n            status: {\n                $in: [\n                    'active',\n                    'pending'\n                ]\n            }\n        }).lean();\n        const normalizedInputArtist = normalizeText(artist);\n        const normalizedInputTitle = normalizeText(songTitle);\n        const matches = [];\n        for (const song of songs){\n            // 기본 아티스트/제목 매칭\n            const artistSimilarity = calculateSimilarity(normalizedInputArtist, normalizeText(song.artist));\n            const titleSimilarity = calculateSimilarity(normalizedInputTitle, normalizeText(song.title));\n            // 별칭이 있는 경우 별칭도 확인\n            let bestArtistSimilarity = artistSimilarity;\n            let bestTitleSimilarity = titleSimilarity;\n            if (song.artistAlias) {\n                const aliasSimilarity = calculateSimilarity(normalizedInputArtist, normalizeText(song.artistAlias));\n                bestArtistSimilarity = Math.max(bestArtistSimilarity, aliasSimilarity);\n            }\n            if (song.titleAlias) {\n                const aliasSimilarity = calculateSimilarity(normalizedInputTitle, normalizeText(song.titleAlias));\n                bestTitleSimilarity = Math.max(bestTitleSimilarity, aliasSimilarity);\n            }\n            // 검색 태그도 확인\n            if (song.searchTags && song.searchTags.length > 0) {\n                for (const tag of song.searchTags){\n                    const tagArtistSimilarity = calculateSimilarity(normalizedInputArtist, normalizeText(tag));\n                    const tagTitleSimilarity = calculateSimilarity(normalizedInputTitle, normalizeText(tag));\n                    bestArtistSimilarity = Math.max(bestArtistSimilarity, tagArtistSimilarity);\n                    bestTitleSimilarity = Math.max(bestTitleSimilarity, tagTitleSimilarity);\n                }\n            }\n            // 종합 점수 계산 (아티스트 40%, 제목 60%)\n            const overallConfidence = bestArtistSimilarity * 0.4 + bestTitleSimilarity * 0.6;\n            // 최소 신뢰도 기준 (0.6 이상만 후보로 선정)\n            if (overallConfidence >= 0.6) {\n                matches.push({\n                    songId: song._id.toString(),\n                    title: song.title,\n                    artist: song.artist,\n                    confidence: overallConfidence,\n                    artistSimilarity: bestArtistSimilarity,\n                    titleSimilarity: bestTitleSimilarity,\n                    matchedField: bestArtistSimilarity > artistSimilarity || bestTitleSimilarity > titleSimilarity ? 'alias' : 'main'\n                });\n            }\n        }\n        // 신뢰도 순으로 정렬하고 상위 5개만 반환\n        return matches.sort((a, b)=>b.confidence - a.confidence).slice(0, 5);\n    } catch (error) {\n        console.error('노래 매칭 중 오류:', error);\n        return [];\n    }\n}\n// 최적 매칭 선택 (가장 높은 신뢰도)\nasync function getBestSongMatch(artist, songTitle) {\n    const matches = await findSongMatches(artist, songTitle);\n    if (matches.length === 0) return null;\n    const bestMatch = matches[0];\n    // 신뢰도가 0.8 이상일 때만 자동 매칭으로 처리\n    if (bestMatch.confidence >= 0.8) {\n        return {\n            songId: bestMatch.songId,\n            title: bestMatch.title,\n            artist: bestMatch.artist,\n            confidence: bestMatch.confidence\n        };\n    }\n    return null;\n}\n// 비디오 제목에서 날짜 추출 (개선된 버전)\nfunction extractDateFromTitle(title) {\n    // 25.06.01 형식 패턴 (YY.MM.DD)\n    const shortYearPattern = /(\\d{2})\\.(\\d{1,2})\\.(\\d{1,2})/;\n    const shortYearMatch = title.match(shortYearPattern);\n    if (shortYearMatch) {\n        const year = parseInt(shortYearMatch[1]);\n        const month = parseInt(shortYearMatch[2]);\n        const day = parseInt(shortYearMatch[3]);\n        // 2000년대로 가정 (25 -> 2025)\n        const fullYear = year < 50 ? 2000 + year : 1900 + year;\n        try {\n            const date = new Date(fullYear, month - 1, day);\n            return {\n                date: date,\n                originalString: shortYearMatch[0]\n            };\n        } catch (error) {\n            console.error('날짜 파싱 오류:', error);\n        }\n    }\n    // 다른 날짜 형식들\n    const datePatterns = [\n        {\n            pattern: /(\\d{4})[\\.\\-\\/](\\d{1,2})[\\.\\-\\/](\\d{1,2})/,\n            parser: (match)=>new Date(parseInt(match[1]), parseInt(match[2]) - 1, parseInt(match[3]))\n        },\n        {\n            pattern: /(\\d{1,2})[\\.\\-\\/](\\d{1,2})[\\.\\-\\/](\\d{4})/,\n            parser: (match)=>new Date(parseInt(match[3]), parseInt(match[1]) - 1, parseInt(match[2]))\n        },\n        {\n            pattern: /(\\d{4})년\\s*(\\d{1,2})월\\s*(\\d{1,2})일/,\n            parser: (match)=>new Date(parseInt(match[1]), parseInt(match[2]) - 1, parseInt(match[3]))\n        }\n    ];\n    for (const { pattern, parser } of datePatterns){\n        const match = title.match(pattern);\n        if (match) {\n            try {\n                const date = parser(match);\n                return {\n                    date: date,\n                    originalString: match[0]\n                };\n            } catch (error) {\n                console.error('날짜 파싱 오류:', error);\n            }\n        }\n    }\n    return {\n        date: null,\n        originalString: null\n    };\n}\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !(0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.hasPermission)(session.user.role, _lib_permissions__WEBPACK_IMPORTED_MODULE_3__.Permission.SONGS_EDIT)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '편집 권한이 필요합니다.'\n            }, {\n                status: 403\n            });\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const body = await request.json();\n        const { action, itemId, isRelevant, isExcluded } = body;\n        switch(action){\n            case 'reprocess-timeline-comments':\n                // 기존 데이터를 개선된 멀티라인 파싱 방식으로 업데이트\n                console.log('🔄 기존 파싱된 타임라인 데이터를 개선된 방식으로 업데이트 시작...');\n                // 모든 타임라인 댓글 조회 (처리완료 여부 무관)\n                const allTimelineComments = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.find({\n                    isTimeline: true\n                });\n                console.log(`📝 총 ${allTimelineComments.length}개 타임라인 댓글 발견`);\n                let reprocessedCount = 0;\n                let dataUpdatedCount = 0;\n                let newItemsCount = 0;\n                for (const comment of allTimelineComments){\n                    try {\n                        // 비디오 정보 조회\n                        const video = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.findOne({\n                            videoId: comment.videoId\n                        });\n                        if (!video) continue;\n                        console.log(`🔍 재처리 중: ${comment.commentId}`);\n                        const hasHtmlLinks = comment.textContent.includes('<a ');\n                        if (hasHtmlLinks) {\n                            // 개선된 멀티라인 타임라인 댓글 파싱\n                            const liveClips = parseTimelineComment(comment.textContent, video.title);\n                            if (liveClips.length > 0) {\n                                // 이 댓글에서 기존에 파싱된 타임라인들 조회\n                                const existingTimelines = await ParsedTimeline.find({\n                                    commentId: comment.commentId\n                                });\n                                // 기존 파싱 결과와 새 파싱 결과 비교\n                                console.log(`🔍 새로 파싱된 클립 개수: ${liveClips.length}개`);\n                                console.log(`🔍 기존 타임라인 개수: ${existingTimelines.length}개`);\n                                for (const clipData of liveClips){\n                                    console.log(`🔍 새 클립 - 시작시간: ${clipData.startTimeSeconds}초, 아티스트: ${clipData.artist}, 곡명: ${clipData.songTitle}`);\n                                    // 먼저 startTimeSeconds로 매칭 시도\n                                    let existingClip = existingTimelines.find((timeline)=>timeline.startTimeSeconds === clipData.startTimeSeconds);\n                                    // startTimeSeconds로 매칭되지 않는 경우, 아티스트-곡명으로 매칭 시도\n                                    if (!existingClip) {\n                                        existingClip = existingTimelines.find((timeline)=>timeline.artist === clipData.artist && timeline.songTitle === clipData.songTitle);\n                                        if (existingClip) {\n                                            console.log(`🔄 아티스트-곡명으로 매칭됨: ${existingClip.artist} - ${existingClip.songTitle} (기존 시간: ${existingClip.startTimeSeconds}초 → 새 시간: ${clipData.startTimeSeconds}초)`);\n                                        }\n                                    } else {\n                                        console.log(`✅ 시작시간으로 매칭됨: ${clipData.startTimeSeconds}초`);\n                                    }\n                                    if (existingClip) {\n                                        // 기존 데이터를 새로운 파싱 결과로 업데이트\n                                        const updateData = {\n                                            artist: clipData.artist,\n                                            songTitle: clipData.songTitle,\n                                            startTimeSeconds: clipData.startTimeSeconds,\n                                            endTimeSeconds: clipData.endTimeSeconds,\n                                            duration: clipData.duration,\n                                            isRelevant: clipData.isRelevant,\n                                            originalComment: comment.textContent,\n                                            updatedAt: new Date()\n                                        };\n                                        // 댓글 작성자 정보가 없는 경우에만 추가\n                                        if (!existingClip.commentAuthor) {\n                                            updateData.commentAuthor = comment.authorName;\n                                            updateData.commentId = comment.commentId;\n                                            updateData.commentPublishedAt = comment.publishedAt;\n                                        }\n                                        await ParsedTimeline.updateOne({\n                                            _id: existingClip._id\n                                        }, updateData);\n                                        dataUpdatedCount++;\n                                        console.log(`🔄 업데이트됨: ${clipData.startTimeSeconds}초 - ${clipData.artist} - ${clipData.songTitle}`);\n                                    } else {\n                                        // 새로운 데이터는 생성하지 않음 (기존 데이터 업데이트만)\n                                        console.log(`⏭️ 새로운 타임라인 발견했지만 생성하지 않음: ${clipData.startTimeSeconds}초 - ${clipData.artist} - ${clipData.songTitle}`);\n                                    }\n                                }\n                            }\n                            reprocessedCount++;\n                        }\n                    } catch (error) {\n                        console.error(`댓글 재처리 오류 (${comment.commentId}):`, error);\n                    }\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: `기존 데이터 업데이트 완료: ${reprocessedCount}개 댓글 처리, ${dataUpdatedCount}개 기존 데이터 업데이트 (새로운 데이터 생성 없음)`,\n                    data: {\n                        reprocessedCount,\n                        dataUpdatedCount,\n                        newItemsSkipped: newItemsCount\n                    }\n                });\n            case 'parse-timeline-comments':\n                console.log('🔄 타임라인 댓글 파싱 시작...');\n                // 모든 타임라인 댓글 조회 (처리완료 여부 무관)\n                const timelineComments = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.find({\n                    isTimeline: true\n                });\n                console.log(`📝 총 ${timelineComments.length}개 타임라인 댓글 발견`);\n                // 이미 파싱된 commentId 목록 조회\n                const existingCommentIds = await ParsedTimeline.distinct('commentId');\n                console.log(`📊 기존에 파싱된 댓글: ${existingCommentIds.length}개`);\n                // 새로운 댓글만 필터링\n                const newTimelineComments = timelineComments.filter((comment)=>!existingCommentIds.includes(comment.commentId));\n                console.log(`📝 새로 처리할 댓글: ${newTimelineComments.length}개`);\n                if (newTimelineComments.length === 0) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        message: '새로 파싱할 타임라인 댓글이 없습니다.',\n                        data: {\n                            newComments: 0,\n                            totalComments: timelineComments.length\n                        }\n                    });\n                }\n                // 처음 몇 개 댓글의 샘플 출력\n                console.log('\\n📋 첫 3개 댓글 샘플:');\n                for(let i = 0; i < Math.min(3, newTimelineComments.length); i++){\n                    const sample = newTimelineComments[i];\n                    console.log(`\\n샘플 ${i + 1} (${sample.commentId}):`);\n                    console.log(`내용: ${sample.textContent.substring(0, 300)}`);\n                    console.log(`HTML 링크 포함: ${sample.textContent.includes('<a ')}`);\n                    console.log(`YouTube 링크 포함: ${sample.textContent.includes('youtube.com')}`);\n                }\n                let processedCount = 0;\n                let totalLiveClips = 0;\n                for (const comment of newTimelineComments){\n                    try {\n                        // 비디오 정보 조회\n                        const video = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.findOne({\n                            videoId: comment.videoId\n                        });\n                        if (!video) continue;\n                        // 디버그: 댓글 내용 확인\n                        console.log(`\\n🔍 댓글 내용 (${comment.commentId}):`);\n                        console.log(comment.textContent.substring(0, 200) + '...');\n                        // HTML 링크가 있는지 확인\n                        const hasHtmlLinks = comment.textContent.includes('<a ');\n                        console.log(`HTML 링크 포함: ${hasHtmlLinks}`);\n                        if (hasHtmlLinks) {\n                            // 타임라인 댓글 파싱\n                            const liveClips = parseTimelineComment(comment.textContent, video.title);\n                            console.log(`파싱 결과: ${liveClips.length}개 클립`);\n                            if (liveClips.length > 0) {\n                                console.log(`🎵 ${video.title}에서 ${liveClips.length}개 곡 발견`);\n                                for (const clipData of liveClips){\n                                    const clipId = `${comment.commentId}_${clipData.startTimeSeconds}`;\n                                    // 기존 파싱된 타임라인이 있는지 확인\n                                    const existingClip = await ParsedTimeline.findOne({\n                                        videoId: comment.videoId,\n                                        startTimeSeconds: clipData.startTimeSeconds\n                                    });\n                                    if (!existingClip) {\n                                        const parsedTimeline = new ParsedTimeline({\n                                            id: clipId,\n                                            videoId: comment.videoId,\n                                            videoTitle: video.title,\n                                            uploadedDate: clipData.uploadedDate || video.publishedAt,\n                                            originalDateString: clipData.originalDateString,\n                                            artist: clipData.artist,\n                                            songTitle: clipData.songTitle,\n                                            videoUrl: clipData.videoUrl,\n                                            startTimeSeconds: clipData.startTimeSeconds,\n                                            endTimeSeconds: clipData.endTimeSeconds,\n                                            duration: clipData.duration,\n                                            originalComment: comment.textContent,\n                                            commentAuthor: comment.authorName,\n                                            commentId: comment.commentId,\n                                            commentPublishedAt: comment.publishedAt,\n                                            isRelevant: clipData.isRelevant,\n                                            isExcluded: false\n                                        });\n                                        await parsedTimeline.save();\n                                        totalLiveClips++;\n                                        console.log(`💾 저장: ${clipData.artist} - ${clipData.songTitle} (${formatSeconds(clipData.startTimeSeconds)}${clipData.endTimeSeconds ? ` ~ ${formatSeconds(clipData.endTimeSeconds)}` : ''}) ${clipData.isRelevant ? '[관련성 있음]' : '[관련성 없음]'}`);\n                                    }\n                                }\n                            }\n                            // 댓글을 처리완료로 표시\n                            await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.updateOne({\n                                commentId: comment.commentId\n                            }, {\n                                isProcessed: true,\n                                processedAt: new Date(),\n                                processedBy: 'timeline-parser'\n                            });\n                            processedCount++;\n                        } else {\n                            console.log(`❌ HTML 링크 없음, 건너뜀`);\n                        }\n                    } catch (error) {\n                        console.error(`댓글 파싱 오류 (${comment.commentId}):`, error);\n                    }\n                }\n                // 통계 계산\n                const totalVideos = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeVideo.countDocuments();\n                const totalTimelineComments = await _models_YouTubeComment__WEBPACK_IMPORTED_MODULE_5__.YouTubeComment.countDocuments({\n                    isTimeline: true\n                });\n                const allParsedTimelines = await ParsedTimeline.find().sort({\n                    uploadedDate: -1,\n                    startTimeSeconds: 1\n                });\n                const relevantClips = allParsedTimelines.filter((clip)=>clip.isRelevant && !clip.isExcluded).length;\n                const matchedClips = allParsedTimelines.filter((clip)=>clip.matchedSong).length;\n                // 고유 곡 수 계산\n                const uniqueSongsSet = new Set();\n                allParsedTimelines.forEach((clip)=>{\n                    uniqueSongsSet.add(`${clip.artist}_${clip.songTitle}`);\n                });\n                const stats = {\n                    totalVideos,\n                    totalTimelineComments,\n                    parsedItems: allParsedTimelines.length,\n                    relevantItems: relevantClips,\n                    matchedSongs: matchedClips,\n                    uniqueSongs: uniqueSongsSet.size\n                };\n                console.log(`✅ 타임라인 파싱 완료: ${processedCount}개 댓글에서 ${totalLiveClips}개 파싱된 타임라인 생성`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        items: allParsedTimelines,\n                        stats\n                    },\n                    message: `타임라인 파싱 완료: ${totalLiveClips}개 파싱된 타임라인 생성`\n                });\n            case 'update-item-relevance':\n                if (!itemId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'itemId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                await ParsedTimeline.updateOne({\n                    id: itemId\n                }, {\n                    isRelevant: isRelevant,\n                    updatedAt: new Date()\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: '관련성 상태가 업데이트되었습니다.'\n                });\n            case 'update-item-exclusion':\n                if (!itemId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'itemId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                await ParsedTimeline.updateOne({\n                    id: itemId\n                }, {\n                    isExcluded: isExcluded,\n                    updatedAt: new Date()\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: '제외 상태가 업데이트되었습니다.'\n                });\n            case 'find-song-matches':\n                if (!itemId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'itemId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                const parsedTimeline = await ParsedTimeline.findOne({\n                    id: itemId\n                });\n                if (!parsedTimeline) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: '파싱된 타임라인을 찾을 수 없습니다.'\n                    }, {\n                        status: 404\n                    });\n                }\n                const songMatches = await findSongMatches(parsedTimeline.artist, parsedTimeline.songTitle);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        parsedTimeline: {\n                            id: parsedTimeline.id,\n                            artist: parsedTimeline.artist,\n                            songTitle: parsedTimeline.songTitle\n                        },\n                        matches: songMatches\n                    }\n                });\n            case 'assign-song-match':\n                const { songId, confidence } = body;\n                if (!itemId || !songId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'itemId와 songId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                // 선택된 곡 정보 조회\n                const selectedSong = await _models_SongDetail__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(songId);\n                if (!selectedSong) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: '선택된 곡을 찾을 수 없습니다.'\n                    }, {\n                        status: 404\n                    });\n                }\n                await ParsedTimeline.updateOne({\n                    id: itemId\n                }, {\n                    matchedSong: {\n                        songId: selectedSong._id.toString(),\n                        title: selectedSong.title,\n                        artist: selectedSong.artist,\n                        confidence: confidence || 1.0 // 수동 매칭은 기본적으로 100% 신뢰도\n                    },\n                    updatedAt: new Date()\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: '곡 매칭이 완료되었습니다.'\n                });\n            case 'remove-song-match':\n                if (!itemId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'itemId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                await ParsedTimeline.updateOne({\n                    id: itemId\n                }, {\n                    $unset: {\n                        matchedSong: \"\"\n                    },\n                    updatedAt: new Date()\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: '곡 매칭이 해제되었습니다.'\n                });\n            case 'update-live-clip':\n                const { artist, songTitle, startTimeSeconds, endTimeSeconds } = body;\n                if (!itemId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'itemId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                const updateFields = {\n                    updatedAt: new Date()\n                };\n                if (artist !== undefined) updateFields.artist = artist.trim();\n                if (songTitle !== undefined) updateFields.songTitle = songTitle.trim();\n                if (startTimeSeconds !== undefined) updateFields.startTimeSeconds = startTimeSeconds;\n                if (endTimeSeconds !== undefined) updateFields.endTimeSeconds = endTimeSeconds;\n                // 지속 시간 재계산 (종료 시간이 있는 경우)\n                if (endTimeSeconds !== undefined && startTimeSeconds !== undefined) {\n                    updateFields.duration = endTimeSeconds > startTimeSeconds ? endTimeSeconds - startTimeSeconds : null;\n                }\n                await ParsedTimeline.updateOne({\n                    id: itemId\n                }, updateFields);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: '파싱된 타임라인 정보가 업데이트되었습니다.'\n                });\n            case 'search-song-matches':\n                const { searchArtist, searchTitle } = body;\n                if (!searchArtist || !searchTitle) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'searchArtist와 searchTitle이 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                try {\n                    const candidates = await matchTimelineWithSongs(searchArtist, searchTitle);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        data: {\n                            query: {\n                                artist: searchArtist,\n                                title: searchTitle\n                            },\n                            candidates: candidates || []\n                        }\n                    });\n                } catch (error) {\n                    console.error('곡 검색 오류:', error);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: '곡 검색 중 오류가 발생했습니다.'\n                    }, {\n                        status: 500\n                    });\n                }\n            case 'match-timeline-song':\n                const { timelineId, songId: matchSongId, confidence: matchConfidence } = body;\n                if (!timelineId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: 'timelineId가 필요합니다.'\n                    }, {\n                        status: 400\n                    });\n                }\n                try {\n                    const updateData = {\n                        updatedAt: new Date()\n                    };\n                    if (matchSongId) {\n                        // 곡 매칭\n                        const matchedSong = await _models_SongDetail__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findById(matchSongId);\n                        if (!matchedSong) {\n                            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                                success: false,\n                                error: '해당 곡을 찾을 수 없습니다.'\n                            }, {\n                                status: 404\n                            });\n                        }\n                        updateData.matchedSong = {\n                            songId: matchedSong._id.toString(),\n                            title: matchedSong.title,\n                            artist: matchedSong.artist,\n                            confidence: matchConfidence || 0.9\n                        };\n                    } else {\n                        // 매칭 해제\n                        updateData.$unset = {\n                            matchedSong: \"\"\n                        };\n                    }\n                    await ParsedTimeline.updateOne({\n                        id: timelineId\n                    }, updateData);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        message: matchSongId ? '곡이 매칭되었습니다.' : '곡 매칭이 해제되었습니다.',\n                        data: {\n                            matchInfo: matchSongId ? {\n                                title: updateData.matchedSong?.title,\n                                artist: updateData.matchedSong?.artist\n                            } : null\n                        }\n                    });\n                } catch (error) {\n                    console.error('곡 매칭 오류:', error);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: '곡 매칭 중 오류가 발생했습니다.'\n                    }, {\n                        status: 500\n                    });\n                }\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: '올바르지 않은 action입니다.'\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error('타임라인 파서 API 오류:', error);\n        let errorMessage = '알 수 없는 오류가 발생했습니다.';\n        if (error instanceof Error) {\n            errorMessage = error.message;\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !(0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.hasPermission)(session.user.role, _lib_permissions__WEBPACK_IMPORTED_MODULE_3__.Permission.SONGS_VIEW)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: '권한이 필요합니다.'\n            }, {\n                status: 403\n            });\n        }\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const action = searchParams.get('action');\n        switch(action){\n            case 'get-parsed-items':\n                const items = await ParsedTimeline.find().sort({\n                    uploadedDate: -1,\n                    startTimeSeconds: 1\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: items\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: '올바르지 않은 action입니다.'\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error('타임라인 파서 GET API 오류:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: '데이터 조회 중 오류가 발생했습니다.'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90aW1lbGluZS1wYXJzZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDTjtBQUNGO0FBQ3dCO0FBQ2xDO0FBQ2lDO0FBQzFCO0FBQ2I7QUFFaEMsK0JBQStCO0FBQy9CLE1BQU1VLHVCQUF1QixJQUFJRCx3REFBZSxDQUFDO0lBQy9DRyxJQUFJO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ2pEQyxTQUFTO1FBQUVKLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUN4Q0csWUFBWTtRQUFFTCxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDM0NJLGNBQWM7UUFBRU4sTUFBTU87UUFBTUwsVUFBVTtJQUFLO0lBQzNDTSxvQkFBb0I7UUFBRVIsTUFBTUM7SUFBTztJQUNuQ1EsUUFBUTtRQUFFVCxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDdkNRLFdBQVc7UUFBRVYsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQzFDUyxVQUFVO1FBQUVYLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUN6Q1Usa0JBQWtCO1FBQUVaLE1BQU1hO1FBQVFYLFVBQVU7SUFBSztJQUNqRFksZ0JBQWdCO1FBQUVkLE1BQU1hO0lBQU87SUFDL0JFLFVBQVU7UUFBRWYsTUFBTWE7SUFBTztJQUN6QkcsWUFBWTtRQUFFaEIsTUFBTWlCO1FBQVNDLFNBQVM7SUFBSztJQUMzQ0MsWUFBWTtRQUFFbkIsTUFBTWlCO1FBQVNDLFNBQVM7SUFBTTtJQUM1Q0UsYUFBYTtRQUNYQyxRQUFRO1lBQUVyQixNQUFNQztRQUFPO1FBQ3ZCcUIsT0FBTztZQUFFdEIsTUFBTUM7UUFBTztRQUN0QlEsUUFBUTtZQUFFVCxNQUFNQztRQUFPO1FBQ3ZCc0IsWUFBWTtZQUFFdkIsTUFBTWE7UUFBTztJQUM3QjtJQUNBVyxpQkFBaUI7UUFBRXhCLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNoRHVCLGVBQWU7UUFBRXpCLE1BQU1D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QUFTQTtRQUVmLE1BQU0sRUFBRW1TLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlqRixRQUFReEQsR0FBRztRQUM1QyxNQUFNZ0UsU0FBU3dFLGFBQWFFLEdBQUcsQ0FBQztRQUVoQyxPQUFRMUU7WUFDTixLQUFLO2dCQUNILE1BQU1zRCxRQUFRLE1BQU0xTyxlQUFlaUQsSUFBSSxHQUFHYSxJQUFJLENBQUM7b0JBQUV2RixjQUFjLENBQUM7b0JBQUdNLGtCQUFrQjtnQkFBRTtnQkFFdkYsT0FBT3pCLHFEQUFZQSxDQUFDNk4sSUFBSSxDQUFDO29CQUN2QkMsU0FBUztvQkFDVHdCLE1BQU1nQztnQkFDUjtZQUVGO2dCQUNFLE9BQU90UixxREFBWUEsQ0FBQzZOLElBQUksQ0FDdEI7b0JBQUVDLFNBQVM7b0JBQU9uQixPQUFPO2dCQUFxQixHQUM5QztvQkFBRTVHLFFBQVE7Z0JBQUk7UUFFcEI7SUFFRixFQUFFLE9BQU80RyxPQUFPO1FBQ2RqSCxRQUFRaUgsS0FBSyxDQUFDLHVCQUF1QkE7UUFFckMsT0FBTzNNLHFEQUFZQSxDQUFDNk4sSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9uQixPQUFPO1FBQXVCLEdBQ2hEO1lBQUU1RyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9hcHAvYXBpL3RpbWVsaW5lLXBhcnNlci9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9uZXh0JztcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aE9wdGlvbnMnO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiwgUGVybWlzc2lvbiwgVXNlclJvbGUgfSBmcm9tICdAL2xpYi9wZXJtaXNzaW9ucyc7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJ0AvbGliL21vbmdvZGInO1xuaW1wb3J0IHsgWW91VHViZUNvbW1lbnQsIFlvdVR1YmVWaWRlbyB9IGZyb20gJ0AvbW9kZWxzL1lvdVR1YmVDb21tZW50JztcbmltcG9ydCBTb25nRGV0YWlsIGZyb20gJ0AvbW9kZWxzL1NvbmdEZXRhaWwnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuLy8g7YyM7Iux65CcIO2DgOyehOudvOyduCDrjbDsnbTthLDrpbwg7JyE7ZWcIE1vbmdvREIg7Iqk7YKk66eIXG5jb25zdCBQYXJzZWRUaW1lbGluZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBpZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcbiAgdmlkZW9JZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHZpZGVvVGl0bGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB1cGxvYWRlZERhdGU6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSwgLy8g7YyM7Iux65CcIOuCoOynnFxuICBvcmlnaW5hbERhdGVTdHJpbmc6IHsgdHlwZTogU3RyaW5nIH0sIC8vIOybkOuzuCDrgqDsp5wg66y47J6Q7Je0XG4gIGFydGlzdDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sIC8vIHNvbmdEYXRhMVxuICBzb25nVGl0bGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LCAvLyBzb25nRGF0YTJcbiAgdmlkZW9Vcmw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LCAvLyDquLDrs7gg67mE65SU7JikIFVSTCAodCDtjIzrnbzrr7jthLAg7KCc7Jm4KVxuICBzdGFydFRpbWVTZWNvbmRzOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSwgLy8g7Iuc7J6RIOyLnOqwhCAo7LSIKVxuICBlbmRUaW1lU2Vjb25kczogeyB0eXBlOiBOdW1iZXIgfSwgLy8g7KKF66OMIOyLnOqwhCAo7LSILCDrp4jsp4Drp4kg6rOh7J2AIG51bGwpXG4gIGR1cmF0aW9uOiB7IHR5cGU6IE51bWJlciB9LCAvLyDqs6Eg6ri47J20ICjstIgpXG4gIGlzUmVsZXZhbnQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICBpc0V4Y2x1ZGVkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gIG1hdGNoZWRTb25nOiB7XG4gICAgc29uZ0lkOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgIHRpdGxlOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgIGFydGlzdDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICBjb25maWRlbmNlOiB7IHR5cGU6IE51bWJlciB9XG4gIH0sXG4gIG9yaWdpbmFsQ29tbWVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sIC8vIOybkOuzuCDrjJPquIBcbiAgY29tbWVudEF1dGhvcjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sIC8vIOuMk+q4gCDsnpHshLHsnpBcbiAgY29tbWVudElkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSwgLy8g7JuQ67O4IOuMk+q4gCBJRFxuICBjb21tZW50UHVibGlzaGVkQXQ6IHsgdHlwZTogRGF0ZSB9LCAvLyDrjJPquIAg7J6R7ISxIOyLnOqwhFxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cbn0pO1xuXG5jb25zdCBQYXJzZWRUaW1lbGluZSA9IG1vbmdvb3NlLm1vZGVscy5QYXJzZWRUaW1lbGluZSB8fCBtb25nb29zZS5tb2RlbCgnUGFyc2VkVGltZWxpbmUnLCBQYXJzZWRUaW1lbGluZVNjaGVtYSk7XG5cbi8vIO2FjeyKpO2KuCDsoJXqt5ztmZQg7ZWo7IiYICjqs7XrsLEv7Yq57IiY66y47J6QIOygnOqxsCwg7IaM66y47J6QIOuzgO2ZmClcbmZ1bmN0aW9uIG5vcm1hbGl6ZVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRleHRcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC50cmltKClcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnJykgLy8g66qo65OgIOqzteuwsSDsoJzqsbBcbiAgICAucmVwbGFjZSgvWy1fLiwhPygpW1xcXXt9XS9nLCAnJykgLy8g6riw67O4IOq1rOuRkOygkOunjCDsoJzqsbBcbiAgICAucmVwbGFjZSgvW15cXHfqsIAt7Z6jXS9nLCAnJyk7IC8vIO2VnOq4gCwg7JiB66y4LCDsiKvsnpDrp4wg7Jyg7KeAXG59XG5cbi8vIExldmVuc2h0ZWluIGRpc3RhbmNlIOqzhOyCsFxuZnVuY3Rpb24gbGV2ZW5zaHRlaW5EaXN0YW5jZShzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IG1hdHJpeCA9IFtdO1xuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RyMi5sZW5ndGg7IGkrKykge1xuICAgIG1hdHJpeFtpXSA9IFtpXTtcbiAgfVxuICBcbiAgZm9yIChsZXQgaiA9IDA7IGogPD0gc3RyMS5sZW5ndGg7IGorKykge1xuICAgIG1hdHJpeFswXVtqXSA9IGo7XG4gIH1cbiAgXG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0cjIubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBzdHIxLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoc3RyMi5jaGFyQXQoaSAtIDEpID09PSBzdHIxLmNoYXJBdChqIC0gMSkpIHtcbiAgICAgICAgbWF0cml4W2ldW2pdID0gbWF0cml4W2kgLSAxXVtqIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXhbaV1bal0gPSBNYXRoLm1pbihcbiAgICAgICAgICBtYXRyaXhbaSAtIDFdW2ogLSAxXSArIDEsIC8vIHN1YnN0aXR1dGlvblxuICAgICAgICAgIG1hdHJpeFtpXVtqIC0gMV0gKyAxLCAgICAgLy8gaW5zZXJ0aW9uXG4gICAgICAgICAgbWF0cml4W2kgLSAxXVtqXSArIDEgICAgICAvLyBkZWxldGlvblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIG1hdHJpeFtzdHIyLmxlbmd0aF1bc3RyMS5sZW5ndGhdO1xufVxuXG4vLyDqsJzshKDrkJwg66y47J6Q7Je0IOycoOyCrOuPhCDqs4TsgrBcbmZ1bmN0aW9uIGNhbGN1bGF0ZVNpbWlsYXJpdHkoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xuICBpZiAoIXN0cjEgfHwgIXN0cjIpIHJldHVybiAwO1xuICBcbiAgY29uc3QgczEgPSBzdHIxLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICBjb25zdCBzMiA9IHN0cjIudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gIFxuICBpZiAoczEgPT09IHMyKSByZXR1cm4gMTtcbiAgXG4gIC8vIDEuIO2PrO2VqCDqtIDqs4Qg7LK07YGsICjrhpLsnYAg7KCQ7IiYKVxuICBpZiAoczEuaW5jbHVkZXMoczIpIHx8IHMyLmluY2x1ZGVzKHMxKSkge1xuICAgIGNvbnN0IGxvbmdlciA9IHMxLmxlbmd0aCA+IHMyLmxlbmd0aCA/IHMxIDogczI7XG4gICAgY29uc3Qgc2hvcnRlciA9IHMxLmxlbmd0aCA+IHMyLmxlbmd0aCA/IHMyIDogczE7XG4gICAgcmV0dXJuIDAuOCArIChzaG9ydGVyLmxlbmd0aCAvIGxvbmdlci5sZW5ndGgpICogMC4yOyAvLyAwLjh+MS4wXG4gIH1cbiAgXG4gIC8vIDIuIOqzte2GtSDrtoDrtoQg66y47J6Q7Je0IOywvuq4sFxuICBsZXQgY29tbW9uTGVuZ3RoID0gMDtcbiAgY29uc3QgbWluTGVuID0gTWF0aC5taW4oczEubGVuZ3RoLCBzMi5sZW5ndGgpO1xuICBcbiAgLy8g7Iuc7J6RIOu2gOu2hCDqs7XthrUg66y47J6Q7Je0XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWluTGVuOyBpKyspIHtcbiAgICBpZiAoczFbaV0gPT09IHMyW2ldKSB7XG4gICAgICBjb21tb25MZW5ndGgrKztcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIFxuICAvLyDrgZ0g67aA67aEIOqzte2GtSDrrLjsnpDsl7RcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWluTGVuIC0gY29tbW9uTGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoczFbczEubGVuZ3RoIC0gaV0gPT09IHMyW3MyLmxlbmd0aCAtIGldKSB7XG4gICAgICBjb21tb25MZW5ndGgrKztcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIFxuICBpZiAoY29tbW9uTGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IG1heExlbiA9IE1hdGgubWF4KHMxLmxlbmd0aCwgczIubGVuZ3RoKTtcbiAgICBjb25zdCBzaW1pbGFyaXR5ID0gY29tbW9uTGVuZ3RoIC8gbWF4TGVuO1xuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuMykgcmV0dXJuIHNpbWlsYXJpdHk7XG4gIH1cbiAgXG4gIC8vIDMuIExldmVuc2h0ZWluIGRpc3RhbmNlIOq4sOuwmCDqs4TsgrBcbiAgY29uc3QgbWF4TGVuID0gTWF0aC5tYXgoczEubGVuZ3RoLCBzMi5sZW5ndGgpO1xuICBpZiAobWF4TGVuID09PSAwKSByZXR1cm4gMTtcbiAgXG4gIGNvbnN0IGRpc3RhbmNlID0gbGV2ZW5zaHRlaW5EaXN0YW5jZShzMSwgczIpO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgKG1heExlbiAtIGRpc3RhbmNlKSAvIG1heExlbik7XG59XG5cblxuLy8g7JWE7Yuw7Iqk7Yq4IOqygOyDiSAo7JWE7Yuw7Iqk7Yq4LCBhcnRpc3RBbGlhcywgc2VhcmNoVGFncylcbmZ1bmN0aW9uIHNlYXJjaEluQXJ0aXN0RmllbGRzKHNvbmc6IGFueSwgbm9ybWFsaXplZFF1ZXJ5OiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCBmaWVsZHMgPSBbXG4gICAgc29uZy5hcnRpc3QsXG4gICAgc29uZy5hcnRpc3RBbGlhcyxcbiAgICAuLi4oc29uZy5zZWFyY2hUYWdzIHx8IFtdKVxuICBdLmZpbHRlcihCb29sZWFuKTtcbiAgXG4gIGxldCBtYXhTaW1pbGFyaXR5ID0gMDtcbiAgbGV0IGV4YWN0TWF0Y2ggPSBmYWxzZTtcbiAgXG4gIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZEZpZWxkID0gbm9ybWFsaXplVGV4dChmaWVsZCk7XG4gICAgXG4gICAgLy8gMS4g7JmE7KCEIOydvOy5mCDssrTtgaxcbiAgICBpZiAobm9ybWFsaXplZEZpZWxkID09PSBub3JtYWxpemVkUXVlcnkpIHtcbiAgICAgIGV4YWN0TWF0Y2ggPSB0cnVlO1xuICAgICAgbWF4U2ltaWxhcml0eSA9IDEuMDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICAvLyAyLiDtj6ztlagg6rSA6rOEIOyytO2BrCAo7JaR67Cp7ZalKVxuICAgIGlmIChub3JtYWxpemVkRmllbGQuaW5jbHVkZXMobm9ybWFsaXplZFF1ZXJ5KSB8fCBub3JtYWxpemVkUXVlcnkuaW5jbHVkZXMobm9ybWFsaXplZEZpZWxkKSkge1xuICAgICAgbWF4U2ltaWxhcml0eSA9IE1hdGgubWF4KG1heFNpbWlsYXJpdHksIDAuOCk7XG4gICAgfVxuICAgIFxuICAgIC8vIDMuIOycoOyCrOuPhCDqs4TsgrBcbiAgICBjb25zdCBzaW1pbGFyaXR5ID0gY2FsY3VsYXRlU2ltaWxhcml0eShub3JtYWxpemVkUXVlcnksIG5vcm1hbGl6ZWRGaWVsZCk7XG4gICAgbWF4U2ltaWxhcml0eSA9IE1hdGgubWF4KG1heFNpbWlsYXJpdHksIHNpbWlsYXJpdHkpO1xuICAgIFxuICAgIC8vIDQuIOynp+ydgCDrrLjsnpDsl7Qg7Yq567OEIOyymOumrCAoM+q4gOyekCDsnbTtlZgpXG4gICAgaWYgKG5vcm1hbGl6ZWRRdWVyeS5sZW5ndGggPD0gMyB8fCBub3JtYWxpemVkRmllbGQubGVuZ3RoIDw9IDMpIHtcbiAgICAgIGlmIChub3JtYWxpemVkRmllbGQuaW5jbHVkZXMobm9ybWFsaXplZFF1ZXJ5KSB8fCBub3JtYWxpemVkUXVlcnkuaW5jbHVkZXMobm9ybWFsaXplZEZpZWxkKSkge1xuICAgICAgICBtYXhTaW1pbGFyaXR5ID0gTWF0aC5tYXgobWF4U2ltaWxhcml0eSwgMC43KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBtYXhTaW1pbGFyaXR5O1xufVxuXG4vLyDsoJzrqqkg6rKA7IOJICh0aXRsZSwgdGl0bGVBbGlhcywgc2VhcmNoVGFncylcbmZ1bmN0aW9uIHNlYXJjaEluVGl0bGVGaWVsZHMoc29uZzogYW55LCBub3JtYWxpemVkUXVlcnk6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IGZpZWxkcyA9IFtcbiAgICBzb25nLnRpdGxlLFxuICAgIHNvbmcudGl0bGVBbGlhcyxcbiAgICAuLi4oc29uZy5zZWFyY2hUYWdzIHx8IFtdKVxuICBdLmZpbHRlcihCb29sZWFuKTtcbiAgXG4gIGxldCBtYXhTaW1pbGFyaXR5ID0gMDtcbiAgbGV0IGV4YWN0TWF0Y2ggPSBmYWxzZTtcbiAgXG4gIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZEZpZWxkID0gbm9ybWFsaXplVGV4dChmaWVsZCk7XG4gICAgXG4gICAgLy8gMS4g7JmE7KCEIOydvOy5mCDssrTtgaxcbiAgICBpZiAobm9ybWFsaXplZEZpZWxkID09PSBub3JtYWxpemVkUXVlcnkpIHtcbiAgICAgIGV4YWN0TWF0Y2ggPSB0cnVlO1xuICAgICAgbWF4U2ltaWxhcml0eSA9IDEuMDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICAvLyAyLiDtj6ztlagg6rSA6rOEIOyytO2BrCAo7JaR67Cp7ZalKVxuICAgIGlmIChub3JtYWxpemVkRmllbGQuaW5jbHVkZXMobm9ybWFsaXplZFF1ZXJ5KSB8fCBub3JtYWxpemVkUXVlcnkuaW5jbHVkZXMobm9ybWFsaXplZEZpZWxkKSkge1xuICAgICAgbWF4U2ltaWxhcml0eSA9IE1hdGgubWF4KG1heFNpbWlsYXJpdHksIDAuOCk7XG4gICAgfVxuICAgIFxuICAgIC8vIDMuIOycoOyCrOuPhCDqs4TsgrBcbiAgICBjb25zdCBzaW1pbGFyaXR5ID0gY2FsY3VsYXRlU2ltaWxhcml0eShub3JtYWxpemVkUXVlcnksIG5vcm1hbGl6ZWRGaWVsZCk7XG4gICAgbWF4U2ltaWxhcml0eSA9IE1hdGgubWF4KG1heFNpbWlsYXJpdHksIHNpbWlsYXJpdHkpO1xuICAgIFxuICAgIC8vIDQuIOynp+ydgCDrrLjsnpDsl7Qg7Yq567OEIOyymOumrCAoM+q4gOyekCDsnbTtlZgpXG4gICAgaWYgKG5vcm1hbGl6ZWRRdWVyeS5sZW5ndGggPD0gMyB8fCBub3JtYWxpemVkRmllbGQubGVuZ3RoIDw9IDMpIHtcbiAgICAgIGlmIChub3JtYWxpemVkRmllbGQuaW5jbHVkZXMobm9ybWFsaXplZFF1ZXJ5KSB8fCBub3JtYWxpemVkUXVlcnkuaW5jbHVkZXMobm9ybWFsaXplZEZpZWxkKSkge1xuICAgICAgICBtYXhTaW1pbGFyaXR5ID0gTWF0aC5tYXgobWF4U2ltaWxhcml0eSwgMC43KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBtYXhTaW1pbGFyaXR5O1xufVxuXG4vLyDtg4DsnoTrnbzsnbgg642w7J207YSw7JmAIOuFuOuemCBEQiDrp6Tsua1cbmFzeW5jIGZ1bmN0aW9uIG1hdGNoVGltZWxpbmVXaXRoU29uZ3MoYXJ0aXN0OiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpIHtcbiAgYXdhaXQgZGJDb25uZWN0KCk7XG4gIFxuICBjb25zdCBub3JtYWxpemVkQXJ0aXN0ID0gbm9ybWFsaXplVGV4dChhcnRpc3QpO1xuICBjb25zdCBub3JtYWxpemVkVGl0bGUgPSBub3JtYWxpemVUZXh0KHRpdGxlKTtcbiAgXG4gIC8vIOq4sOuzuCDroZzqt7jrp4wg7Jyg7KeAXG4gIGNvbnNvbGUubG9nKGDwn5SNIOqygOyDiSDsi5zsnpE6IFwiJHthcnRpc3R9XCIgLSBcIiR7dGl0bGV9XCJgKTtcbiAgXG4gIC8vIOuqqOuToCDqs6Eg65iQ64qUIO2ZnOyEsSvsg4Htg5zsl4bripQg6rOhIOqwgOyguOyYpOq4sFxuICBsZXQgYWxsU29uZ3MgPSBhd2FpdCBTb25nRGV0YWlsLmZpbmQoeyBcbiAgICAkb3I6IFtcbiAgICAgIHsgc3RhdHVzOiAnYWN0aXZlJyB9LFxuICAgICAgeyBzdGF0dXM6IHsgJGV4aXN0czogZmFsc2UgfSB9LFxuICAgICAgeyBzdGF0dXM6IG51bGwgfVxuICAgIF1cbiAgfSkubGVhbigpO1xuICBcbiAgLy8g6rKA7IOJIOuMgOyDgeydtCDsoIHri6TrqbQg66qo65OgIOqzoeydhCDrjIDsg4HsnLzroZwg6rKA7IOJXG4gIGlmIChhbGxTb25ncy5sZW5ndGggPCAxMDApIHtcbiAgICBhbGxTb25ncyA9IGF3YWl0IFNvbmdEZXRhaWwuZmluZCh7fSkubGVhbigpO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZyhg8J+UjSDqsoDsg4kg64yA7IOBIOqzoSDsiJg6ICR7YWxsU29uZ3MubGVuZ3RofeqwnGApO1xuICBcbiAgY29uc3QgY2FuZGlkYXRlcyA9IFtdO1xuICBsZXQgcHJvY2Vzc2VkQ291bnQgPSAwO1xuICBcbiAgZm9yIChjb25zdCBzb25nIG9mIGFsbFNvbmdzKSB7XG4gICAgY29uc3QgYXJ0aXN0U2ltaWxhcml0eSA9IHNlYXJjaEluQXJ0aXN0RmllbGRzKHNvbmcsIG5vcm1hbGl6ZWRBcnRpc3QpO1xuICAgIGNvbnN0IHRpdGxlU2ltaWxhcml0eSA9IHNlYXJjaEluVGl0bGVGaWVsZHMoc29uZywgbm9ybWFsaXplZFRpdGxlKTtcbiAgICBcbiAgICAvLyDsoITssrQg7J287LmY7JyoID0gKOyVhO2LsOyKpO2KuCDsnKDsgqzrj4QgKyDsoJzrqqkg7Jyg7IKs64+EKSAvIDJcbiAgICBjb25zdCBvdmVyYWxsU2ltaWxhcml0eSA9IChhcnRpc3RTaW1pbGFyaXR5ICsgdGl0bGVTaW1pbGFyaXR5KSAvIDI7XG4gICAgXG4gICAgLy8g64aS7J2AIOycoOyCrOuPhCDqsrDqs7zrp4wg66Gc6re4XG4gICAgaWYgKG92ZXJhbGxTaW1pbGFyaXR5ID4gMC4zKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+OryDrp6TsuZg6IFwiJHtzb25nLmFydGlzdH1cIiAtIFwiJHtzb25nLnRpdGxlfVwiICgkeyhvdmVyYWxsU2ltaWxhcml0eSAqIDEwMCkudG9GaXhlZCgxKX0lKWApO1xuICAgIH1cbiAgICBcbiAgICAvLyDstZzshowg7J6E6rOE6rCSIOydtOyDgeyduCDqsr3smrDrp4wg7ZuE67O066GcIOy2lOqwgCAo7J6E6rOE6rCSIOuCruy2pClcbiAgICBpZiAob3ZlcmFsbFNpbWlsYXJpdHkgPiAwLjEpIHtcbiAgICAgIGNhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgIHNvbmcsXG4gICAgICAgIGFydGlzdFNpbWlsYXJpdHksXG4gICAgICAgIHRpdGxlU2ltaWxhcml0eSxcbiAgICAgICAgb3ZlcmFsbFNpbWlsYXJpdHksXG4gICAgICAgIGlzRXhhY3RNYXRjaDogb3ZlcmFsbFNpbWlsYXJpdHkgPj0gMC45NVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHByb2Nlc3NlZENvdW50Kys7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGDinIUg6rKA7IOJIOyZhOujjDogJHtjYW5kaWRhdGVzLmxlbmd0aH3qsJwg7ZuE67O0IOuwnOqyrGApO1xuICBcbiAgLy8g7J287LmY7JyoIOyInOycvOuhnCDsoJXroKxcbiAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiBiLm92ZXJhbGxTaW1pbGFyaXR5IC0gYS5vdmVyYWxsU2ltaWxhcml0eSk7XG4gIFxuICByZXR1cm4gY2FuZGlkYXRlcy5zbGljZSgwLCAxMCk7IC8vIOyDgeychCAxMOqwnOunjCDrsJjtmZhcbn1cblxuLy8g7Iuc6rCEIO2MjOudvOuvuO2EsOulvCDstIjroZwg67OA7ZmY7ZWY64qUIO2VqOyImCAo7L2c66GgIO2Yle2DnCDsmrDshKAg7LKY66asKVxuZnVuY3Rpb24gcGFyc2VUaW1lVG9TZWNvbmRzKHRpbWVQYXJhbTogc3RyaW5nKTogbnVtYmVyIHtcbiAgLy8g7L2c66GgIO2Yle2DnCDsspjrpqwgKOy1nOyasOyEoClcbiAgLy8gaDptOnMg7ZiV7IudICjsmIg6IDE6MjM6NDUpXG4gIGNvbnN0IGNvbG9uSG1zTWF0Y2ggPSB0aW1lUGFyYW0ubWF0Y2goL14oXFxkezEsMn0pOihcXGR7Mn0pOihcXGR7Mn0pJC8pO1xuICBpZiAoY29sb25IbXNNYXRjaCkge1xuICAgIGNvbnN0IGhvdXJzID0gcGFyc2VJbnQoY29sb25IbXNNYXRjaFsxXSk7XG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KGNvbG9uSG1zTWF0Y2hbMl0pO1xuICAgIGNvbnN0IHNlY29uZHMgPSBwYXJzZUludChjb2xvbkhtc01hdGNoWzNdKTtcbiAgICByZXR1cm4gaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kcztcbiAgfVxuICBcbiAgLy8gbTpzIO2YleyLnSAo7JiIOiAyMzo0NSlcbiAgY29uc3QgY29sb25Nc01hdGNoID0gdGltZVBhcmFtLm1hdGNoKC9eKFxcZHsxLDJ9KTooXFxkezJ9KSQvKTtcbiAgaWYgKGNvbG9uTXNNYXRjaCkge1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChjb2xvbk1zTWF0Y2hbMV0pO1xuICAgIGNvbnN0IHNlY29uZHMgPSBwYXJzZUludChjb2xvbk1zTWF0Y2hbMl0pO1xuICAgIHJldHVybiBtaW51dGVzICogNjAgKyBzZWNvbmRzO1xuICB9XG4gIFxuICAvLyDsiKvsnpDrp4wg7J6I64qUIOqyveyasCAo7LSIKVxuICBpZiAoL15cXGQrJC8udGVzdCh0aW1lUGFyYW0pKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRpbWVQYXJhbSk7XG4gIH1cbiAgXG4gIC8vIGg6bTpzIO2YleyLnSAo7JiIOiAxaDIzbTQ1cylcbiAgY29uc3QgaG1zTWF0Y2ggPSB0aW1lUGFyYW0ubWF0Y2goLyhcXGQrKWgoXFxkKyltKFxcZCspcy8pO1xuICBpZiAoaG1zTWF0Y2gpIHtcbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KGhtc01hdGNoWzFdKTtcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQoaG1zTWF0Y2hbMl0pO1xuICAgIGNvbnN0IHNlY29uZHMgPSBwYXJzZUludChobXNNYXRjaFszXSk7XG4gICAgcmV0dXJuIGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHM7XG4gIH1cbiAgXG4gIC8vIG06cyDtmJXsi50gKOyYiDogMjNtNDVzKVxuICBjb25zdCBtc01hdGNoID0gdGltZVBhcmFtLm1hdGNoKC8oXFxkKyltKFxcZCspcy8pO1xuICBpZiAobXNNYXRjaCkge1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtc01hdGNoWzFdKTtcbiAgICBjb25zdCBzZWNvbmRzID0gcGFyc2VJbnQobXNNYXRjaFsyXSk7XG4gICAgcmV0dXJuIG1pbnV0ZXMgKiA2MCArIHNlY29uZHM7XG4gIH1cbiAgXG4gIC8vIGg6bSDtmJXsi50gKOyYiDogMWgyM20pXG4gIGNvbnN0IGhtTWF0Y2ggPSB0aW1lUGFyYW0ubWF0Y2goLyhcXGQrKWgoXFxkKyltLyk7XG4gIGlmIChobU1hdGNoKSB7XG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChobU1hdGNoWzFdKTtcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQoaG1NYXRjaFsyXSk7XG4gICAgcmV0dXJuIGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MDtcbiAgfVxuICBcbiAgLy8gbSDtmJXsi50gKOyYiDogMjNtKVxuICBjb25zdCBtTWF0Y2ggPSB0aW1lUGFyYW0ubWF0Y2goLyhcXGQrKW0vKTtcbiAgaWYgKG1NYXRjaCkge1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtTWF0Y2hbMV0pO1xuICAgIHJldHVybiBtaW51dGVzICogNjA7XG4gIH1cbiAgXG4gIC8vIHMg7ZiV7IudICjsmIg6IDQ1cylcbiAgY29uc3Qgc01hdGNoID0gdGltZVBhcmFtLm1hdGNoKC8oXFxkKylzLyk7XG4gIGlmIChzTWF0Y2gpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoc01hdGNoWzFdKTtcbiAgfVxuICBcbiAgcmV0dXJuIDA7XG59XG5cbi8vIOqwnOyEoOuQnCBIVE1MIOyXlO2LsO2LsCDrlJTsvZTrlKkg7ZWo7IiYXG5mdW5jdGlvbiBkZWNvZGVIdG1sRW50aXRpZXModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8g6riw67O4IEhUTUwg7JeU7Yuw7YuwIOunpO2VkVxuICBjb25zdCBuYW1lZEVudGl0aWVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICcmYW1wOyc6ICcmJyxcbiAgICAnJmx0Oyc6ICc8JyxcbiAgICAnJmd0Oyc6ICc+JyxcbiAgICAnJnF1b3Q7JzogJ1wiJyxcbiAgICAnJmFwb3M7JzogXCInXCIsXG4gICAgJyZuYnNwOyc6ICcgJyxcbiAgICAnJmNvcHk7JzogJ8KpJyxcbiAgICAnJnJlZzsnOiAnwq4nLFxuICAgICcmdHJhZGU7JzogJ+KEoidcbiAgfTtcbiAgXG4gIHJldHVybiB0ZXh0XG4gICAgLy8gMS4g7Iir7J6QIO2Yle2DnOydmCBIVE1MIOyXlO2LsO2LsCDrlJTsvZTrlKkgKCYjMzk7IOKGkiAnKVxuICAgIC5yZXBsYWNlKC8mIyhcXGQrKTsvZywgKG1hdGNoLCBjb2RlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChjb2RlLCAxMCkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbWF0Y2g7IC8vIOuzgO2ZmCDsi6TtjKgg7IucIOybkOuzuCDrsJjtmZhcbiAgICAgIH1cbiAgICB9KVxuICAgIC8vIDIuIDE27KeE7IiYIO2Yle2DnOydmCBIVE1MIOyXlO2LsO2LsCDrlJTsvZTrlKkgKCYjeDI3OyDihpIgJylcbiAgICAucmVwbGFjZSgvJiN4KFswLTlhLWZBLUZdKyk7L2csIChtYXRjaCwgY29kZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoY29kZSwgMTYpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyDrs4DtmZgg7Iuk7YyoIOyLnCDsm5Drs7gg67CY7ZmYXG4gICAgICB9XG4gICAgfSlcbiAgICAvLyAzLiDsnbTrpoQg6riw67CYIEhUTUwg7JeU7Yuw7YuwIOuUlOy9lOuUqVxuICAgIC5yZXBsYWNlKC8mW2EtekEtWl1bYS16QS1aMC05XSo7L2csIChlbnRpdHkpID0+IHtcbiAgICAgIHJldHVybiBuYW1lZEVudGl0aWVzW2VudGl0eV0gfHwgZW50aXR5O1xuICAgIH0pO1xufVxuXG4vLyDsnYzslYUg7Luo7YWQ7LigIOyXrOu2gCDtjJDri6gg7ZWo7IiYICjrqqjrk6Ag6rKDIO2PrO2VqClcbmZ1bmN0aW9uIGlzTXVzaWNDb250ZW50KHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyDsmYTsoITtnogg67mIIO2FjeyKpO2KuOuCmCDsnZjrr7jsl4bripQg6riw7Zi466eMIOygnOyZuFxuICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkgPT09ICcnIHx8IC9eWz8hLn5cXHNdKiQvLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIC8vIOq3uCDsmbgg66qo65OgIOuCtOyaqSDtj6ztlahcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIOuylOyaqSDtg4DsnoTrnbzsnbgg7YyM7IuxIO2VqOyImCAtIOuqqOuToCDtg4DsnoTsiqTtg6ztlIQg7Yyo7YS07J2EIOy6kOy5mFxuZnVuY3Rpb24gc3BsaXRDb21tZW50QnlUaW1lc3RhbXBzKGRlY29kZWRIdG1sOiBzdHJpbmcpIHtcbiAgY29uc29sZS5sb2coJ/CflI0g67KU7JqpIO2DgOyehOudvOyduCDtjIzsi7Eg7Iuc7J6RLi4uJyk7XG4gIFxuICBjb25zdCByZXN1bHRzID0gW107XG4gIGxldCBiYXNlVmlkZW9VcmwgPSAnJztcbiAgXG4gIC8vIOyyqyDrsojsp7gg7Jyg7Yqc67iMIOunge2BrOyXkOyEnCDquLDrs7ggVVJMIOy2lOy2nFxuICBjb25zdCBsaW5rTWF0Y2ggPSBkZWNvZGVkSHRtbC5tYXRjaCgvPGFbXj5dKmhyZWY9XCIoW15cIl0qeW91dHViZVteXCJdKilcIltePl0qPi8pO1xuICBpZiAobGlua01hdGNoKSB7XG4gICAgYmFzZVZpZGVvVXJsID0gbGlua01hdGNoWzFdLnJlcGxhY2UoL1s/Jl10PVxcZCsvLCAnJykucmVwbGFjZSgvWz8mXSQvLCAnJyk7XG4gIH1cbiAgXG4gIC8vIDHri6jqs4Q6IOuqqOuToCDtg4DsnoTsiqTtg6ztlIQg66eB7YGs66W8IOywvuqzoCDso7zrs4Ag7YWN7Iqk7Yq4IOy2lOy2nFxuICBjb25zdCBhbGxUaW1lc3RhbXBQYXR0ZXJuID0gLzxhW14+XSo+KFxcZHsxLDJ9OlxcZHsyfSg/OjpcXGR7Mn0pPyk8XFwvYT4vZztcbiAgbGV0IG1hdGNoO1xuICBjb25zdCB0aW1lc3RhbXBQb3NpdGlvbnMgPSBbXTtcbiAgXG4gIHdoaWxlICgobWF0Y2ggPSBhbGxUaW1lc3RhbXBQYXR0ZXJuLmV4ZWMoZGVjb2RlZEh0bWwpKSAhPT0gbnVsbCkge1xuICAgIHRpbWVzdGFtcFBvc2l0aW9ucy5wdXNoKHtcbiAgICAgIHRpbWVUZXh0OiBtYXRjaFsxXSxcbiAgICAgIHRpbWVTZWNvbmRzOiBwYXJzZVRpbWVUb1NlY29uZHMobWF0Y2hbMV0pLFxuICAgICAgc3RhcnRQb3M6IG1hdGNoLmluZGV4LFxuICAgICAgZW5kUG9zOiBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcbiAgICAgIGZ1bGxNYXRjaDogbWF0Y2hbMF1cbiAgICB9KTtcbiAgfVxuICBcbiAgY29uc29sZS5sb2coYPCflZAg7LSdICR7dGltZXN0YW1wUG9zaXRpb25zLmxlbmd0aH3qsJwg7YOA7J6E7Iqk7YOs7ZSEIOuwnOqyrGApO1xuICBcbiAgLy8gMuuLqOqzhDog6rCBIO2DgOyehOyKpO2DrO2UhCDso7zrs4DsnZgg7Luo7YWN7Iqk7Yq4IOy2lOy2nFxuICB0aW1lc3RhbXBQb3NpdGlvbnMuZm9yRWFjaCgodGltZXN0YW1wLCBpbmRleCkgPT4ge1xuICAgIC8vIO2YhOyerCDtg4DsnoTsiqTtg6ztlIQg7J207ZuE67aA7YSwIOuLpOydjCDtg4DsnoTsiqTtg6ztlIQg7KCE6rmM7KeA7J2YIO2FjeyKpO2KuFxuICAgIGNvbnN0IG5leHRTdGFydFBvcyA9IGluZGV4IDwgdGltZXN0YW1wUG9zaXRpb25zLmxlbmd0aCAtIDEgPyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFBvc2l0aW9uc1tpbmRleCArIDFdLnN0YXJ0UG9zIDogXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkSHRtbC5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgY29udGV4dFRleHQgPSBkZWNvZGVkSHRtbC5zdWJzdHJpbmcodGltZXN0YW1wLmVuZFBvcywgbmV4dFN0YXJ0UG9zKTtcbiAgICBcbiAgICAvLyDthY3siqTtirgg7KCV66asIOuwjyDstpTstpxcbiAgICBsZXQgY2xlYW5UZXh0ID0gY29udGV4dFRleHRcbiAgICAgIC5yZXBsYWNlKC88YnJcXHMqXFwvPz4vZ2ksICcgJykgIC8vIDxicj4g7YOc6re466W8IOqzteuwseycvOuhnFxuICAgICAgLnJlcGxhY2UoLzxbXj5dKj4vZywgJyAnKSAgICAgIC8vIOuqqOuToCBIVE1MIO2DnOq3uCDsoJzqsbBcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJykgICAgICAgICAgLy8g7Jew7IaNIOqzteuwseydhCDtlZjrgpjroZxcbiAgICAgIC50cmltKCk7XG4gICAgXG4gICAgLy8g7Yq57IiYIOuniOy7pOuCmCDruIzrnpjtgrcg7KCV67O0IOygnOqxsFxuICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dFxuICAgICAgLnJlcGxhY2UoL15b8J+OtfCfqrtdXFxzKi8sICcnKSAgICAgLy8g7J2066qo7KeAIOuniOy7pCDsoJzqsbBcbiAgICAgIC5yZXBsYWNlKC9eXFxbLio/XFxdXFxzKi8sICcnKSAgICAgLy8g67iM656Y7YK3IOygleuztCDsoJzqsbAgKFvsoIDssZddLCBb64W4656Y7YOA7J6EXSDrk7EpXG4gICAgICAucmVwbGFjZSgvXlxccyotXFxzKi8sICcnKSAgICAgICAgLy8g7Iuc7J6RIOuMgOyLnCDsoJzqsbBcbiAgICAgIC5yZXBsYWNlKC9eXFxzKn5cXHMqLywgJycpICAgICAgICAvLyDsi5zsnpEg7Yu465OcIOygnOqxsFxuICAgICAgLnRyaW0oKTtcbiAgICBcbiAgICAvLyBWUyDtjKjthLQg7LKY66asIC0gXCLqs6ExIFZTIOyLnOqwhCDqs6EyXCIg7ZiV7YOc66W8IOu2hOumrFxuICAgIGNvbnN0IHZzTWF0Y2ggPSBjbGVhblRleHQubWF0Y2goL14oLio/KVxccytWU1xccysoXFxkezEsMn06XFxkezJ9KD86OlxcZHsyfSk/KVxccysoLio/KSQvKTtcbiAgICBpZiAodnNNYXRjaCkge1xuICAgICAgLy8gVlMg7JWe67aA67aE66eMIO2YhOyerCDtg4DsnoTsiqTtg6ztlITsl5Ag7Jew6rKwXG4gICAgICBjbGVhblRleHQgPSB2c01hdGNoWzFdLnRyaW0oKTtcbiAgICB9XG4gICAgXG4gICAgLy8g67mIIO2FjeyKpO2KuOuCmCDrhIjrrLQg7Ken7J2AIO2FjeyKpO2KuCDsiqTtgrVcbiAgICBpZiAoIWNsZWFuVGV4dCB8fCBjbGVhblRleHQubGVuZ3RoIDwgMikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyDsnYzslYUg6rSA66CoIOyXrOu2gCDtjJDri6hcbiAgICBjb25zdCBpc0xpa2VseU11c2ljID0gaXNNdXNpY0NvbnRlbnQoY2xlYW5UZXh0KTtcbiAgICBcbiAgICBpZiAoaXNMaWtlbHlNdXNpYykge1xuICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgdGltZVRleHQ6IHRpbWVzdGFtcC50aW1lVGV4dCxcbiAgICAgICAgdGltZVNlY29uZHM6IHRpbWVzdGFtcC50aW1lU2Vjb25kcyxcbiAgICAgICAgY29udGVudDogY2xlYW5UZXh0LFxuICAgICAgICBiYXNlVmlkZW9VcmwsXG4gICAgICAgIHNvdXJjZTogJ2dlbmVyYWwnXG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn462IOuwnOqyrDogJHt0aW1lc3RhbXAudGltZVRleHR9IOKGkiBcIiR7Y2xlYW5UZXh0fVwiYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinYwg7KCc7Jm4OiAke3RpbWVzdGFtcC50aW1lVGV4dH0g4oaSIFwiJHtjbGVhblRleHQuc3Vic3RyaW5nKDAsIDUwKX0uLi5cImApO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyDsi5zqsITsiJwg7KCV66CsXG4gIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYS50aW1lU2Vjb25kcyAtIGIudGltZVNlY29uZHMpO1xuICBjb25zb2xlLmxvZyhg8J+TjSDstJ0gJHtyZXN1bHRzLmxlbmd0aH3qsJwg7J2M7JWFIO2VreuqqSDrsJzqsqxgKTtcbiAgXG4gIHJldHVybiByZXN1bHRzO1xufVxuXG4vLyDquLDrs7gg67mE65SU7JikIFVSTCDstpTstpxcbmZ1bmN0aW9uIGV4dHJhY3RCYXNlVmlkZW9VcmwodGltZWxpbmVzOiBhbnlbXSkge1xuICBjb25zdCBsaW5rVGltZWxpbmUgPSB0aW1lbGluZXMuZmluZCh0ID0+IHQudHlwZSA9PT0gJ2xpbmsnICYmIHQudXJsKTtcbiAgaWYgKGxpbmtUaW1lbGluZSkge1xuICAgIHJldHVybiBsaW5rVGltZWxpbmUudXJsLnJlcGxhY2UoL1s/Jl10PVxcZCsvLCAnJykucmVwbGFjZSgvWz8mXSQvLCAnJyk7XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vLyDsmYTsoITtnogg7IOI66Gc7Jq0IO2DgOyehOudvOyduCDtjIzsi7Eg7ZWo7IiYXG5mdW5jdGlvbiBwYXJzZVRpbWVsaW5lQ29tbWVudChodG1sVGV4dDogc3RyaW5nLCB2aWRlb1RpdGxlOiBzdHJpbmcpIHtcbiAgY29uc29sZS5sb2coYPCflI0g7JuQ67O4IOuMk+q4gCDtjIzsi7Eg7Iuc7J6RLi4uYCk7XG4gIFxuICAvLyBIVE1MIOyXlO2LsO2LsCDrlJTsvZTrlKlcbiAgY29uc3QgZGVjb2RlZEh0bWwgPSBkZWNvZGVIdG1sRW50aXRpZXMoaHRtbFRleHQpO1xuICBcbiAgLy8gMeuLqOqzhDog7YOA7J6E7Iqk7YOs7ZSEIOq4sOykgOycvOuhnCDrjJPquIDsnYQg7JmE7KCE7Z6IIOu2hO2VoFxuICBjb25zdCBzZWN0aW9ucyA9IHNwbGl0Q29tbWVudEJ5VGltZXN0YW1wcyhkZWNvZGVkSHRtbCk7XG4gIFxuICBpZiAoc2VjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS5sb2coYOKdjCDtg4DsnoTsiqTtg6ztlITqsIAg67Cc6rKs65CY7KeAIOyViuydjGApO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBcbiAgY29uc29sZS5sb2coYPCfk4og7LSdICR7c2VjdGlvbnMubGVuZ3RofeqwnCDqtazqsITsnLzroZwg67aE7ZWg65CoYCk7XG4gIFxuICAvLyAy64uo6rOEOiDqsIEg67aE7ZWg65CcIOq1rOqwhOydhCDqsJzrs4TsoIHsnLzroZwg7YyM7IuxICjsm5Drs7gg64yT6riA7J2AIOuNlCDsnbTsg4Eg67O07KeAIOyViuydjClcbiAgY29uc3QgcmF3TWF0Y2hlcyA9IFtdO1xuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNlY3Rpb24gPSBzZWN0aW9uc1tpXTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgXFxu8J+UhCDqtazqsIQgJHtpICsgMX0g6rCc67OEIO2MjOyLsTogJHtzZWN0aW9uLnRpbWVUZXh0fWApO1xuICAgIGNvbnNvbGUubG9nKGDwn5OdIOq1rOqwhCDrgrTsmqk6IFwiJHtzZWN0aW9uLmNvbnRlbnR9XCJgKTtcbiAgICBcbiAgICAvLyAz64uo6rOEOiDrtoTtlaDrkJwg6rWs6rCE66eMIOyCrOyaqe2VmOyXrCDqs6Eg7KCV67O0IO2MjOyLsVxuICAgIGNvbnN0IHNvbmdJbmZvID0gcGFyc2VTb25nSW5mbyhzZWN0aW9uLmNvbnRlbnQpO1xuICAgIGNvbnN0IGlzUmVsZXZhbnQgPSBzb25nSW5mby5hcnRpc3QgIT09ICfslYwg7IiYIOyXhuydjCc7XG4gICAgXG4gICAgcmF3TWF0Y2hlcy5wdXNoKHtcbiAgICAgIHVybDogc2VjdGlvbi5iYXNlVmlkZW9VcmwgfHwgJycsIC8vIOq1rOqwhOyXkOyEnCDstpTstpzrkJwg67mE65SU7JikIFVSTCDsgqzsmqlcbiAgICAgIHRpbWVTZWNvbmRzOiBzZWN0aW9uLnRpbWVTZWNvbmRzLFxuICAgICAgdGltZVRleHQ6IHNlY3Rpb24udGltZVRleHQsXG4gICAgICBzZWN0aW9uVGV4dDogc2VjdGlvbi5jb250ZW50LFxuICAgICAgYXJ0aXN0OiBzb25nSW5mby5hcnRpc3QsXG4gICAgICBzb25nVGl0bGU6IHNvbmdJbmZvLnNvbmdUaXRsZSxcbiAgICAgIGlzUmVsZXZhbnQ6IGlzUmVsZXZhbnRcbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgJHtpc1JlbGV2YW50ID8gJ+KchScgOiAn4pqg77iPJ30g6rWs6rCEIO2MjOyLsSDsmYTro4w6ICR7c2VjdGlvbi50aW1lVGV4dH0gLSAke3NvbmdJbmZvLmFydGlzdH0gLSAke3NvbmdJbmZvLnNvbmdUaXRsZX1gKTtcbiAgfVxuICBcbiAgY29uc29sZS5sb2coYPCfk4og7LSdICR7cmF3TWF0Y2hlcy5sZW5ndGh96rCcIOycoO2aqO2VnCDqs6Eg67Cc6rKsYCk7XG5cbiAgLy8g7Iuc6rCE7IicIOygleugrFxuICByYXdNYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEudGltZVNlY29uZHMgLSBiLnRpbWVTZWNvbmRzKTtcblxuICAvLyDquLDrs7gg67mE65SU7JikIFVSTCDstpTstpwgKHQg7YyM652866+47YSwIOygnOqxsClcbiAgY29uc3QgYmFzZVZpZGVvVXJsID0gcmF3TWF0Y2hlcy5sZW5ndGggPiAwID8gXG4gICAgcmF3TWF0Y2hlc1swXS51cmwucmVwbGFjZSgvWz8mXXQ9XFxkKy8sICcnKS5yZXBsYWNlKC9bPyZdJC8sICcnKSA6ICcnO1xuXG4gIC8vIOuCoOynnCDstpTstpxcbiAgY29uc3QgZGF0ZUluZm8gPSBleHRyYWN0RGF0ZUZyb21UaXRsZSh2aWRlb1RpdGxlKTtcblxuICAvLyDqsrDqs7wg67Cw7Je0IOy0iOq4sO2ZlFxuICBjb25zdCBzb25nRW50cmllcyA9IFtdO1xuXG4gIC8vIOqwgSDqs6Eg7KCV67O07JmAIOyLnOyekS/sooXro4wg7Iuc6rCEIOqzhOyCsFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhd01hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjdXJyZW50ID0gcmF3TWF0Y2hlc1tpXTtcbiAgICBjb25zdCBuZXh0ID0gcmF3TWF0Y2hlc1tpICsgMV07XG4gICAgXG4gICAgY29uc3QgbGl2ZUNsaXAgPSB7XG4gICAgICB2aWRlb1VybDogYmFzZVZpZGVvVXJsLFxuICAgICAgYXJ0aXN0OiBjdXJyZW50LmFydGlzdCxcbiAgICAgIHNvbmdUaXRsZTogY3VycmVudC5zb25nVGl0bGUsXG4gICAgICBzdGFydFRpbWVTZWNvbmRzOiBjdXJyZW50LnRpbWVTZWNvbmRzLFxuICAgICAgZW5kVGltZVNlY29uZHM6IG5leHQgPyBuZXh0LnRpbWVTZWNvbmRzIDogbnVsbCxcbiAgICAgIGR1cmF0aW9uOiBuZXh0ID8gKG5leHQudGltZVNlY29uZHMgLSBjdXJyZW50LnRpbWVTZWNvbmRzKSA6IG51bGwsXG4gICAgICB1cGxvYWRlZERhdGU6IGRhdGVJbmZvLmRhdGUsXG4gICAgICBvcmlnaW5hbERhdGVTdHJpbmc6IGRhdGVJbmZvLm9yaWdpbmFsU3RyaW5nLFxuICAgICAgaXNSZWxldmFudDogY3VycmVudC5pc1JlbGV2YW50XG4gICAgfTtcbiAgICBcbiAgICBzb25nRW50cmllcy5wdXNoKGxpdmVDbGlwKTtcbiAgfVxuXG4gIHJldHVybiBzb25nRW50cmllcztcbn1cblxuLy8g6rOhIOygleuztCDtjIzsi7Eg7ZWo7IiYICjslYTti7DsiqTtirjsmYAg6rOh66qFIOu2hOumrClcbmZ1bmN0aW9uIHBhcnNlU29uZ0luZm8oc29uZ1RleHQ6IHN0cmluZykge1xuICBjb25zdCBjbGVhblRleHQgPSBzb25nVGV4dC50cmltKCk7XG4gIFxuICAvLyDri6TslpHtlZwg6rWs67aE7J6Q66GcIOu2hOumrCDsi5zrj4RcbiAgY29uc3Qgc2VwYXJhdG9ycyA9IFsnIC0gJywgJyDigJMgJywgJyDigJQgJywgJyB8ICcsICcgLyAnXTtcbiAgXG4gIGZvciAoY29uc3Qgc2VwYXJhdG9yIG9mIHNlcGFyYXRvcnMpIHtcbiAgICBpZiAoY2xlYW5UZXh0LmluY2x1ZGVzKHNlcGFyYXRvcikpIHtcbiAgICAgIGNvbnN0IHBhcnRzID0gY2xlYW5UZXh0LnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICBpZiAocGFydHMubGVuZ3RoID49IDIgJiYgcGFydHNbMF0udHJpbSgpICYmIHBhcnRzWzFdLnRyaW0oKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGFydGlzdDogcGFydHNbMF0udHJpbSgpLFxuICAgICAgICAgIHNvbmdUaXRsZTogcGFydHMuc2xpY2UoMSkuam9pbihzZXBhcmF0b3IpLnRyaW0oKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLy8g6rWs67aE7J6Q6rCAIOyXhuuKlCDqsr3smrAsIOyghOyytOulvCDqs6HrqoXsnLzroZwg7LKY66asXG4gIHJldHVybiB7XG4gICAgYXJ0aXN0OiAn7JWMIOyImCDsl4bsnYwnLFxuICAgIHNvbmdUaXRsZTogY2xlYW5UZXh0XG4gIH07XG59XG5cbi8vIOy0iOulvCBISDpNTTpTUyDrmJDripQgTU06U1Mg7ZiV7Iud7Jy866GcIOuzgO2ZmFxuZnVuY3Rpb24gZm9ybWF0U2Vjb25kcyhzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICBjb25zdCBzZWNzID0gc2Vjb25kcyAlIDYwO1xuICBcbiAgaWYgKGhvdXJzID4gMCkge1xuICAgIHJldHVybiBgJHtob3Vyc306JHttaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHttaW51dGVzfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gIH1cbn1cblxuXG5cbi8vIOuFuOuemCDrjbDsnbTthLDrsqDsnbTsiqTsl5DshJwg66ek7LmtIOywvuq4sFxuYXN5bmMgZnVuY3Rpb24gZmluZFNvbmdNYXRjaGVzKGFydGlzdDogc3RyaW5nLCBzb25nVGl0bGU6IHN0cmluZykge1xuICB0cnkge1xuICAgIC8vIO2ZnOyEsSDsg4Htg5zsnbgg6rOh65Ok66eMIOqygOyDiVxuICAgIGNvbnN0IHNvbmdzID0gYXdhaXQgU29uZ0RldGFpbC5maW5kKHsgXG4gICAgICBzdGF0dXM6IHsgJGluOiBbJ2FjdGl2ZScsICdwZW5kaW5nJ10gfSBcbiAgICB9KS5sZWFuKCk7XG4gICAgXG4gICAgY29uc3Qgbm9ybWFsaXplZElucHV0QXJ0aXN0ID0gbm9ybWFsaXplVGV4dChhcnRpc3QpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRJbnB1dFRpdGxlID0gbm9ybWFsaXplVGV4dChzb25nVGl0bGUpO1xuICAgIFxuICAgIGNvbnN0IG1hdGNoZXMgPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHNvbmcgb2Ygc29uZ3MpIHtcbiAgICAgIC8vIOq4sOuzuCDslYTti7DsiqTtirgv7KCc66qpIOunpOy5rVxuICAgICAgY29uc3QgYXJ0aXN0U2ltaWxhcml0eSA9IGNhbGN1bGF0ZVNpbWlsYXJpdHkobm9ybWFsaXplZElucHV0QXJ0aXN0LCBub3JtYWxpemVUZXh0KHNvbmcuYXJ0aXN0KSk7XG4gICAgICBjb25zdCB0aXRsZVNpbWlsYXJpdHkgPSBjYWxjdWxhdGVTaW1pbGFyaXR5KG5vcm1hbGl6ZWRJbnB1dFRpdGxlLCBub3JtYWxpemVUZXh0KHNvbmcudGl0bGUpKTtcbiAgICAgIFxuICAgICAgLy8g67OE7Lmt7J20IOyeiOuKlCDqsr3smrAg67OE7Lmt64+EIO2ZleyduFxuICAgICAgbGV0IGJlc3RBcnRpc3RTaW1pbGFyaXR5ID0gYXJ0aXN0U2ltaWxhcml0eTtcbiAgICAgIGxldCBiZXN0VGl0bGVTaW1pbGFyaXR5ID0gdGl0bGVTaW1pbGFyaXR5O1xuICAgICAgXG4gICAgICBpZiAoc29uZy5hcnRpc3RBbGlhcykge1xuICAgICAgICBjb25zdCBhbGlhc1NpbWlsYXJpdHkgPSBjYWxjdWxhdGVTaW1pbGFyaXR5KG5vcm1hbGl6ZWRJbnB1dEFydGlzdCwgbm9ybWFsaXplVGV4dChzb25nLmFydGlzdEFsaWFzKSk7XG4gICAgICAgIGJlc3RBcnRpc3RTaW1pbGFyaXR5ID0gTWF0aC5tYXgoYmVzdEFydGlzdFNpbWlsYXJpdHksIGFsaWFzU2ltaWxhcml0eSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChzb25nLnRpdGxlQWxpYXMpIHtcbiAgICAgICAgY29uc3QgYWxpYXNTaW1pbGFyaXR5ID0gY2FsY3VsYXRlU2ltaWxhcml0eShub3JtYWxpemVkSW5wdXRUaXRsZSwgbm9ybWFsaXplVGV4dChzb25nLnRpdGxlQWxpYXMpKTtcbiAgICAgICAgYmVzdFRpdGxlU2ltaWxhcml0eSA9IE1hdGgubWF4KGJlc3RUaXRsZVNpbWlsYXJpdHksIGFsaWFzU2ltaWxhcml0eSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOqygOyDiSDtg5zqt7jrj4Qg7ZmV7J24XG4gICAgICBpZiAoc29uZy5zZWFyY2hUYWdzICYmIHNvbmcuc2VhcmNoVGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHNvbmcuc2VhcmNoVGFncykge1xuICAgICAgICAgIGNvbnN0IHRhZ0FydGlzdFNpbWlsYXJpdHkgPSBjYWxjdWxhdGVTaW1pbGFyaXR5KG5vcm1hbGl6ZWRJbnB1dEFydGlzdCwgbm9ybWFsaXplVGV4dCh0YWcpKTtcbiAgICAgICAgICBjb25zdCB0YWdUaXRsZVNpbWlsYXJpdHkgPSBjYWxjdWxhdGVTaW1pbGFyaXR5KG5vcm1hbGl6ZWRJbnB1dFRpdGxlLCBub3JtYWxpemVUZXh0KHRhZykpO1xuICAgICAgICAgIGJlc3RBcnRpc3RTaW1pbGFyaXR5ID0gTWF0aC5tYXgoYmVzdEFydGlzdFNpbWlsYXJpdHksIHRhZ0FydGlzdFNpbWlsYXJpdHkpO1xuICAgICAgICAgIGJlc3RUaXRsZVNpbWlsYXJpdHkgPSBNYXRoLm1heChiZXN0VGl0bGVTaW1pbGFyaXR5LCB0YWdUaXRsZVNpbWlsYXJpdHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOyihe2VqSDsoJDsiJgg6rOE7IKwICjslYTti7DsiqTtirggNDAlLCDsoJzrqqkgNjAlKVxuICAgICAgY29uc3Qgb3ZlcmFsbENvbmZpZGVuY2UgPSAoYmVzdEFydGlzdFNpbWlsYXJpdHkgKiAwLjQpICsgKGJlc3RUaXRsZVNpbWlsYXJpdHkgKiAwLjYpO1xuICAgICAgXG4gICAgICAvLyDstZzshowg7Iug66Kw64+EIOq4sOykgCAoMC42IOydtOyDgeunjCDtm4Trs7TroZwg7ISg7KCVKVxuICAgICAgaWYgKG92ZXJhbGxDb25maWRlbmNlID49IDAuNikge1xuICAgICAgICBtYXRjaGVzLnB1c2goe1xuICAgICAgICAgIHNvbmdJZDogc29uZy5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICB0aXRsZTogc29uZy50aXRsZSxcbiAgICAgICAgICBhcnRpc3Q6IHNvbmcuYXJ0aXN0LFxuICAgICAgICAgIGNvbmZpZGVuY2U6IG92ZXJhbGxDb25maWRlbmNlLFxuICAgICAgICAgIGFydGlzdFNpbWlsYXJpdHk6IGJlc3RBcnRpc3RTaW1pbGFyaXR5LFxuICAgICAgICAgIHRpdGxlU2ltaWxhcml0eTogYmVzdFRpdGxlU2ltaWxhcml0eSxcbiAgICAgICAgICBtYXRjaGVkRmllbGQ6IGJlc3RBcnRpc3RTaW1pbGFyaXR5ID4gYXJ0aXN0U2ltaWxhcml0eSB8fCBiZXN0VGl0bGVTaW1pbGFyaXR5ID4gdGl0bGVTaW1pbGFyaXR5ID8gJ2FsaWFzJyA6ICdtYWluJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g7Iug66Kw64+EIOyInOycvOuhnCDsoJXroKztlZjqs6Ag7IOB7JyEIDXqsJzrp4wg67CY7ZmYXG4gICAgcmV0dXJuIG1hdGNoZXNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvbmZpZGVuY2UgLSBhLmNvbmZpZGVuY2UpXG4gICAgICAuc2xpY2UoMCwgNSk7XG4gICAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfrhbjrnpgg66ek7LmtIOykkSDsmKTrpZg6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vLyDstZzsoIEg66ek7LmtIOyEoO2DnSAo6rCA7J6lIOuGkuydgCDsi6DrorDrj4QpXG5hc3luYyBmdW5jdGlvbiBnZXRCZXN0U29uZ01hdGNoKGFydGlzdDogc3RyaW5nLCBzb25nVGl0bGU6IHN0cmluZykge1xuICBjb25zdCBtYXRjaGVzID0gYXdhaXQgZmluZFNvbmdNYXRjaGVzKGFydGlzdCwgc29uZ1RpdGxlKTtcbiAgXG4gIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIFxuICBjb25zdCBiZXN0TWF0Y2ggPSBtYXRjaGVzWzBdO1xuICBcbiAgLy8g7Iug66Kw64+E6rCAIDAuOCDsnbTsg4Hsnbwg65WM66eMIOyekOuPmSDrp6Tsua3snLzroZwg7LKY66asXG4gIGlmIChiZXN0TWF0Y2guY29uZmlkZW5jZSA+PSAwLjgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc29uZ0lkOiBiZXN0TWF0Y2guc29uZ0lkLFxuICAgICAgdGl0bGU6IGJlc3RNYXRjaC50aXRsZSxcbiAgICAgIGFydGlzdDogYmVzdE1hdGNoLmFydGlzdCxcbiAgICAgIGNvbmZpZGVuY2U6IGJlc3RNYXRjaC5jb25maWRlbmNlXG4gICAgfTtcbiAgfVxuICBcbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIOu5hOuUlOyYpCDsoJzrqqnsl5DshJwg64Kg7KecIOy2lOy2nCAo6rCc7ISg65CcIOuyhOyghClcbmZ1bmN0aW9uIGV4dHJhY3REYXRlRnJvbVRpdGxlKHRpdGxlOiBzdHJpbmcpOiB7IGRhdGU6IERhdGUgfCBudWxsLCBvcmlnaW5hbFN0cmluZzogc3RyaW5nIHwgbnVsbCB9IHtcbiAgLy8gMjUuMDYuMDEg7ZiV7IudIO2MqO2EtCAoWVkuTU0uREQpXG4gIGNvbnN0IHNob3J0WWVhclBhdHRlcm4gPSAvKFxcZHsyfSlcXC4oXFxkezEsMn0pXFwuKFxcZHsxLDJ9KS87XG4gIGNvbnN0IHNob3J0WWVhck1hdGNoID0gdGl0bGUubWF0Y2goc2hvcnRZZWFyUGF0dGVybik7XG4gIFxuICBpZiAoc2hvcnRZZWFyTWF0Y2gpIHtcbiAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQoc2hvcnRZZWFyTWF0Y2hbMV0pO1xuICAgIGNvbnN0IG1vbnRoID0gcGFyc2VJbnQoc2hvcnRZZWFyTWF0Y2hbMl0pO1xuICAgIGNvbnN0IGRheSA9IHBhcnNlSW50KHNob3J0WWVhck1hdGNoWzNdKTtcbiAgICBcbiAgICAvLyAyMDAw64WE64yA66GcIOqwgOyglSAoMjUgLT4gMjAyNSlcbiAgICBjb25zdCBmdWxsWWVhciA9IHllYXIgPCA1MCA/IDIwMDAgKyB5ZWFyIDogMTkwMCArIHllYXI7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShmdWxsWWVhciwgbW9udGggLSAxLCBkYXkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgb3JpZ2luYWxTdHJpbmc6IHNob3J0WWVhck1hdGNoWzBdXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfrgqDsp5wg7YyM7IuxIOyYpOulmDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8g64uk66W4IOuCoOynnCDtmJXsi53rk6RcbiAgY29uc3QgZGF0ZVBhdHRlcm5zID0gW1xuICAgIHtcbiAgICAgIHBhdHRlcm46IC8oXFxkezR9KVtcXC5cXC1cXC9dKFxcZHsxLDJ9KVtcXC5cXC1cXC9dKFxcZHsxLDJ9KS8sICAvLyAyMDI0LjAzLjE1LCAyMDI0LTAzLTE1XG4gICAgICBwYXJzZXI6IChtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSkgPT4gbmV3IERhdGUocGFyc2VJbnQobWF0Y2hbMV0pLCBwYXJzZUludChtYXRjaFsyXSkgLSAxLCBwYXJzZUludChtYXRjaFszXSkpXG4gICAgfSxcbiAgICB7XG4gICAgICBwYXR0ZXJuOiAvKFxcZHsxLDJ9KVtcXC5cXC1cXC9dKFxcZHsxLDJ9KVtcXC5cXC1cXC9dKFxcZHs0fSkvLCAgLy8gMDMuMTUuMjAyNFxuICAgICAgcGFyc2VyOiAobWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkpID0+IG5ldyBEYXRlKHBhcnNlSW50KG1hdGNoWzNdKSwgcGFyc2VJbnQobWF0Y2hbMV0pIC0gMSwgcGFyc2VJbnQobWF0Y2hbMl0pKVxuICAgIH0sXG4gICAge1xuICAgICAgcGF0dGVybjogLyhcXGR7NH0p64WEXFxzKihcXGR7MSwyfSnsm5RcXHMqKFxcZHsxLDJ9KeydvC8sICAgICAgIC8vIDIwMjTrhYQgM+yblCAxNeydvFxuICAgICAgcGFyc2VyOiAobWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkpID0+IG5ldyBEYXRlKHBhcnNlSW50KG1hdGNoWzFdKSwgcGFyc2VJbnQobWF0Y2hbMl0pIC0gMSwgcGFyc2VJbnQobWF0Y2hbM10pKVxuICAgIH1cbiAgXTtcblxuICBmb3IgKGNvbnN0IHsgcGF0dGVybiwgcGFyc2VyIH0gb2YgZGF0ZVBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0aXRsZS5tYXRjaChwYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBwYXJzZXIobWF0Y2gpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhdGU6IGRhdGUsXG4gICAgICAgICAgb3JpZ2luYWxTdHJpbmc6IG1hdGNoWzBdXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfrgqDsp5wg7YyM7IuxIOyYpOulmDonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgZGF0ZTogbnVsbCwgb3JpZ2luYWxTdHJpbmc6IG51bGwgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gICAgaWYgKCFzZXNzaW9uIHx8ICFoYXNQZXJtaXNzaW9uKHNlc3Npb24udXNlci5yb2xlIGFzIFVzZXJSb2xlLCBQZXJtaXNzaW9uLlNPTkdTX0VESVQpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn7Y647KeRIOq2jO2VnOydtCDtlYTsmpTtlanri4jri6QuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBhY3Rpb24sIGl0ZW1JZCwgaXNSZWxldmFudCwgaXNFeGNsdWRlZCB9ID0gYm9keTtcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdyZXByb2Nlc3MtdGltZWxpbmUtY29tbWVudHMnOlxuICAgICAgICAvLyDquLDsobQg642w7J207YSw66W8IOqwnOyEoOuQnCDrqYDti7Drnbzsnbgg7YyM7IuxIOuwqeyLneycvOuhnCDsl4XrjbDsnbTtirhcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQg6riw7KG0IO2MjOyLseuQnCDtg4DsnoTrnbzsnbgg642w7J207YSw66W8IOqwnOyEoOuQnCDrsKnsi53snLzroZwg7JeF642w7J207Yq4IOyLnOyekS4uLicpO1xuICAgICAgICBcbiAgICAgICAgLy8g66qo65OgIO2DgOyehOudvOyduCDrjJPquIAg7KGw7ZqMICjsspjrpqzsmYTro4wg7Jes67aAIOustOq0gClcbiAgICAgICAgY29uc3QgYWxsVGltZWxpbmVDb21tZW50cyA9IGF3YWl0IFlvdVR1YmVDb21tZW50LmZpbmQoeyBcbiAgICAgICAgICBpc1RpbWVsaW5lOiB0cnVlIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+TnSDstJ0gJHthbGxUaW1lbGluZUNvbW1lbnRzLmxlbmd0aH3qsJwg7YOA7J6E65287J24IOuMk+q4gCDrsJzqsqxgKTtcblxuICAgICAgICBsZXQgcmVwcm9jZXNzZWRDb3VudCA9IDA7XG4gICAgICAgIGxldCBkYXRhVXBkYXRlZENvdW50ID0gMDtcbiAgICAgICAgbGV0IG5ld0l0ZW1zQ291bnQgPSAwO1xuXG4gICAgICAgIGZvciAoY29uc3QgY29tbWVudCBvZiBhbGxUaW1lbGluZUNvbW1lbnRzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOu5hOuUlOyYpCDsoJXrs7Qg7KGw7ZqMXG4gICAgICAgICAgICBjb25zdCB2aWRlbyA9IGF3YWl0IFlvdVR1YmVWaWRlby5maW5kT25lKHsgdmlkZW9JZDogY29tbWVudC52aWRlb0lkIH0pO1xuICAgICAgICAgICAgaWYgKCF2aWRlbykgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIOyerOyymOumrCDspJE6ICR7Y29tbWVudC5jb21tZW50SWR9YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGhhc0h0bWxMaW5rcyA9IGNvbW1lbnQudGV4dENvbnRlbnQuaW5jbHVkZXMoJzxhICcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaGFzSHRtbExpbmtzKSB7XG4gICAgICAgICAgICAgIC8vIOqwnOyEoOuQnCDrqYDti7Drnbzsnbgg7YOA7J6E65287J24IOuMk+q4gCDtjIzsi7FcbiAgICAgICAgICAgICAgY29uc3QgbGl2ZUNsaXBzID0gcGFyc2VUaW1lbGluZUNvbW1lbnQoY29tbWVudC50ZXh0Q29udGVudCwgdmlkZW8udGl0bGUpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGxpdmVDbGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8g7J20IOuMk+q4gOyXkOyEnCDquLDsobTsl5Ag7YyM7Iux65CcIO2DgOyehOudvOyduOuTpCDsobDtmoxcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1RpbWVsaW5lcyA9IGF3YWl0IFBhcnNlZFRpbWVsaW5lLmZpbmQoe1xuICAgICAgICAgICAgICAgICAgY29tbWVudElkOiBjb21tZW50LmNvbW1lbnRJZFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8g6riw7KG0IO2MjOyLsSDqsrDqs7zsmYAg7IOIIO2MjOyLsSDqsrDqs7wg67mE6rWQXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0g7IOI66GcIO2MjOyLseuQnCDtgbTrpr0g6rCc7IiYOiAke2xpdmVDbGlwcy5sZW5ndGh96rCcYCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflI0g6riw7KG0IO2DgOyehOudvOyduCDqsJzsiJg6ICR7ZXhpc3RpbmdUaW1lbGluZXMubGVuZ3RofeqwnGApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2xpcERhdGEgb2YgbGl2ZUNsaXBzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSDsg4gg7YG066a9IC0g7Iuc7J6R7Iuc6rCEOiAke2NsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHN97LSILCDslYTti7DsiqTtirg6ICR7Y2xpcERhdGEuYXJ0aXN0fSwg6rOh66qFOiAke2NsaXBEYXRhLnNvbmdUaXRsZX1gKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8g66i87KCAIHN0YXJ0VGltZVNlY29uZHProZwg66ek7LmtIOyLnOuPhFxuICAgICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nQ2xpcCA9IGV4aXN0aW5nVGltZWxpbmVzLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIHRpbWVsaW5lID0+IHRpbWVsaW5lLnN0YXJ0VGltZVNlY29uZHMgPT09IGNsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHNcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0VGltZVNlY29uZHProZwg66ek7Lmt65CY7KeAIOyViuuKlCDqsr3smrAsIOyVhO2LsOyKpO2KuC3qs6HrqoXsnLzroZwg66ek7LmtIOyLnOuPhFxuICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ0NsaXApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdDbGlwID0gZXhpc3RpbmdUaW1lbGluZXMuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICB0aW1lbGluZSA9PiB0aW1lbGluZS5hcnRpc3QgPT09IGNsaXBEYXRhLmFydGlzdCAmJiB0aW1lbGluZS5zb25nVGl0bGUgPT09IGNsaXBEYXRhLnNvbmdUaXRsZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdDbGlwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflIQg7JWE7Yuw7Iqk7Yq4LeqzoeuqheycvOuhnCDrp6Tsua3rkKg6ICR7ZXhpc3RpbmdDbGlwLmFydGlzdH0gLSAke2V4aXN0aW5nQ2xpcC5zb25nVGl0bGV9ICjquLDsobQg7Iuc6rCEOiAke2V4aXN0aW5nQ2xpcC5zdGFydFRpbWVTZWNvbmRzfey0iCDihpIg7IOIIOyLnOqwhDogJHtjbGlwRGF0YS5zdGFydFRpbWVTZWNvbmRzfey0iClgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSDsi5zsnpHsi5zqsITsnLzroZwg66ek7Lmt65CoOiAke2NsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHN97LSIYCk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0NsaXApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g6riw7KG0IOuNsOydtO2EsOulvCDsg4jroZzsmrQg7YyM7IuxIOqysOqzvOuhnCDsl4XrjbDsnbTtirhcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGFydGlzdDogY2xpcERhdGEuYXJ0aXN0LFxuICAgICAgICAgICAgICAgICAgICAgIHNvbmdUaXRsZTogY2xpcERhdGEuc29uZ1RpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZVNlY29uZHM6IGNsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHMsIC8vIOyImOygleuQnCDsi5zsnpHsi5zqsITrj4Qg7JeF642w7J207Yq4XG4gICAgICAgICAgICAgICAgICAgICAgZW5kVGltZVNlY29uZHM6IGNsaXBEYXRhLmVuZFRpbWVTZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBjbGlwRGF0YS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICBpc1JlbGV2YW50OiBjbGlwRGF0YS5pc1JlbGV2YW50LFxuICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ29tbWVudDogY29tbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDrjJPquIAg7J6R7ISx7J6QIOygleuztOqwgCDsl4bripQg6rK97Jqw7JeQ66eMIOy2lOqwgFxuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nQ2xpcC5jb21tZW50QXV0aG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YS5jb21tZW50QXV0aG9yID0gY29tbWVudC5hdXRob3JOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEuY29tbWVudElkID0gY29tbWVudC5jb21tZW50SWQ7XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YS5jb21tZW50UHVibGlzaGVkQXQgPSBjb21tZW50LnB1Ymxpc2hlZEF0O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUGFyc2VkVGltZWxpbmUudXBkYXRlT25lKFxuICAgICAgICAgICAgICAgICAgICAgIHsgX2lkOiBleGlzdGluZ0NsaXAuX2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGFVcGRhdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflIQg7JeF642w7J207Yq465CoOiAke2NsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHN97LSIIC0gJHtjbGlwRGF0YS5hcnRpc3R9IC0gJHtjbGlwRGF0YS5zb25nVGl0bGV9YCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDsg4jroZzsmrQg642w7J207YSw64qUIOyDneyEse2VmOyngCDslYrsnYwgKOq4sOyhtCDrjbDsnbTthLAg7JeF642w7J207Yq466eMKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4o+t77iPIOyDiOuhnOyatCDtg4DsnoTrnbzsnbgg67Cc6rKs7ZaI7KeA66eMIOyDneyEse2VmOyngCDslYrsnYw6ICR7Y2xpcERhdGEuc3RhcnRUaW1lU2Vjb25kc33stIggLSAke2NsaXBEYXRhLmFydGlzdH0gLSAke2NsaXBEYXRhLnNvbmdUaXRsZX1gKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJlcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg64yT6riAIOyerOyymOumrCDsmKTrpZggKCR7Y29tbWVudC5jb21tZW50SWR9KTpgLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDquLDsobQg642w7J207YSwIOyXheuNsOydtO2KuCDsmYTro4w6ICR7cmVwcm9jZXNzZWRDb3VudH3qsJwg64yT6riAIOyymOumrCwgJHtkYXRhVXBkYXRlZENvdW50feqwnCDquLDsobQg642w7J207YSwIOyXheuNsOydtO2KuCAo7IOI66Gc7Jq0IOuNsOydtO2EsCDsg53shLEg7JeG7J2MKWAsXG4gICAgICAgICAgZGF0YTogeyByZXByb2Nlc3NlZENvdW50LCBkYXRhVXBkYXRlZENvdW50LCBuZXdJdGVtc1NraXBwZWQ6IG5ld0l0ZW1zQ291bnQgfVxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAncGFyc2UtdGltZWxpbmUtY29tbWVudHMnOlxuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCDtg4DsnoTrnbzsnbgg64yT6riAIO2MjOyLsSDsi5zsnpEuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOuqqOuToCDtg4DsnoTrnbzsnbgg64yT6riAIOyhsO2ajCAo7LKY66as7JmE66OMIOyXrOu2gCDrrLTqtIApXG4gICAgICAgIGNvbnN0IHRpbWVsaW5lQ29tbWVudHMgPSBhd2FpdCBZb3VUdWJlQ29tbWVudC5maW5kKHsgXG4gICAgICAgICAgaXNUaW1lbGluZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOy0nSAke3RpbWVsaW5lQ29tbWVudHMubGVuZ3RofeqwnCDtg4DsnoTrnbzsnbgg64yT6riAIOuwnOqyrGApO1xuICAgICAgICBcbiAgICAgICAgLy8g7J2066+4IO2MjOyLseuQnCBjb21tZW50SWQg66qp66GdIOyhsO2ajFxuICAgICAgICBjb25zdCBleGlzdGluZ0NvbW1lbnRJZHMgPSBhd2FpdCBQYXJzZWRUaW1lbGluZS5kaXN0aW5jdCgnY29tbWVudElkJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIOq4sOyhtOyXkCDtjIzsi7HrkJwg64yT6riAOiAke2V4aXN0aW5nQ29tbWVudElkcy5sZW5ndGh96rCcYCk7XG4gICAgICAgIFxuICAgICAgICAvLyDsg4jroZzsmrQg64yT6riA66eMIO2VhO2EsOungVxuICAgICAgICBjb25zdCBuZXdUaW1lbGluZUNvbW1lbnRzID0gdGltZWxpbmVDb21tZW50cy5maWx0ZXIoXG4gICAgICAgICAgY29tbWVudCA9PiAhZXhpc3RpbmdDb21tZW50SWRzLmluY2x1ZGVzKGNvbW1lbnQuY29tbWVudElkKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIOyDiOuhnCDsspjrpqztlaAg64yT6riAOiAke25ld1RpbWVsaW5lQ29tbWVudHMubGVuZ3RofeqwnGApO1xuXG4gICAgICAgIGlmIChuZXdUaW1lbGluZUNvbW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ+yDiOuhnCDtjIzsi7HtlaAg7YOA7J6E65287J24IOuMk+q4gOydtCDsl4bsirXri4jri6QuJyxcbiAgICAgICAgICAgIGRhdGE6IHsgbmV3Q29tbWVudHM6IDAsIHRvdGFsQ29tbWVudHM6IHRpbWVsaW5lQ29tbWVudHMubGVuZ3RoIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOyymOydjCDrqocg6rCcIOuMk+q4gOydmCDsg5jtlIwg7Lac66ClXG4gICAgICAgIGNvbnNvbGUubG9nKCdcXG7wn5OLIOyyqyAz6rCcIOuMk+q4gCDsg5jtlIw6Jyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4oMywgbmV3VGltZWxpbmVDb21tZW50cy5sZW5ndGgpOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzYW1wbGUgPSBuZXdUaW1lbGluZUNvbW1lbnRzW2ldO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcXG7sg5jtlIwgJHtpICsgMX0gKCR7c2FtcGxlLmNvbW1lbnRJZH0pOmApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDrgrTsmqk6ICR7c2FtcGxlLnRleHRDb250ZW50LnN1YnN0cmluZygwLCAzMDApfWApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBIVE1MIOunge2BrCDtj6ztlag6ICR7c2FtcGxlLnRleHRDb250ZW50LmluY2x1ZGVzKCc8YSAnKX1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgWW91VHViZSDrp4Htgawg7Y+s7ZWoOiAke3NhbXBsZS50ZXh0Q29udGVudC5pbmNsdWRlcygneW91dHViZS5jb20nKX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9jZXNzZWRDb3VudCA9IDA7XG4gICAgICAgIGxldCB0b3RhbExpdmVDbGlwcyA9IDA7XG5cbiAgICAgICAgZm9yIChjb25zdCBjb21tZW50IG9mIG5ld1RpbWVsaW5lQ29tbWVudHMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g67mE65SU7JikIOygleuztCDsobDtmoxcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvID0gYXdhaXQgWW91VHViZVZpZGVvLmZpbmRPbmUoeyB2aWRlb0lkOiBjb21tZW50LnZpZGVvSWQgfSk7XG4gICAgICAgICAgICBpZiAoIXZpZGVvKSBjb250aW51ZTtcblxuICAgICAgICAgICAgLy8g65SU67KE6re4OiDrjJPquIAg64K07JqpIO2ZleyduFxuICAgICAgICAgICAgY29uc29sZS5sb2coYFxcbvCflI0g64yT6riAIOuCtOyaqSAoJHtjb21tZW50LmNvbW1lbnRJZH0pOmApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coY29tbWVudC50ZXh0Q29udGVudC5zdWJzdHJpbmcoMCwgMjAwKSArICcuLi4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSFRNTCDrp4HtgazqsIAg7J6I64qU7KeAIO2ZleyduFxuICAgICAgICAgICAgY29uc3QgaGFzSHRtbExpbmtzID0gY29tbWVudC50ZXh0Q29udGVudC5pbmNsdWRlcygnPGEgJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgSFRNTCDrp4Htgawg7Y+s7ZWoOiAke2hhc0h0bWxMaW5rc31gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGhhc0h0bWxMaW5rcykge1xuICAgICAgICAgICAgICAvLyDtg4DsnoTrnbzsnbgg64yT6riAIO2MjOyLsVxuICAgICAgICAgICAgICBjb25zdCBsaXZlQ2xpcHMgPSBwYXJzZVRpbWVsaW5lQ29tbWVudChjb21tZW50LnRleHRDb250ZW50LCB2aWRlby50aXRsZSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDtjIzsi7Eg6rKw6rO8OiAke2xpdmVDbGlwcy5sZW5ndGh96rCcIO2BtOumvWApO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGxpdmVDbGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfjrUgJHt2aWRlby50aXRsZX3sl5DshJwgJHtsaXZlQ2xpcHMubGVuZ3RofeqwnCDqs6Eg67Cc6rKsYCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbGlwRGF0YSBvZiBsaXZlQ2xpcHMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaXBJZCA9IGAke2NvbW1lbnQuY29tbWVudElkfV8ke2NsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHN9YDtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8g6riw7KG0IO2MjOyLseuQnCDtg4DsnoTrnbzsnbjsnbQg7J6I64qU7KeAIO2ZleyduFxuICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDbGlwID0gYXdhaXQgUGFyc2VkVGltZWxpbmUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvSWQ6IGNvbW1lbnQudmlkZW9JZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lU2Vjb25kczogY2xpcERhdGEuc3RhcnRUaW1lU2Vjb25kc1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdDbGlwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRpbWVsaW5lID0gbmV3IFBhcnNlZFRpbWVsaW5lKHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogY2xpcElkLFxuICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSWQ6IGNvbW1lbnQudmlkZW9JZCxcbiAgICAgICAgICAgICAgICAgICAgICB2aWRlb1RpdGxlOiB2aWRlby50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRlZERhdGU6IGNsaXBEYXRhLnVwbG9hZGVkRGF0ZSB8fCB2aWRlby5wdWJsaXNoZWRBdCxcbiAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbERhdGVTdHJpbmc6IGNsaXBEYXRhLm9yaWdpbmFsRGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICBhcnRpc3Q6IGNsaXBEYXRhLmFydGlzdCxcbiAgICAgICAgICAgICAgICAgICAgICBzb25nVGl0bGU6IGNsaXBEYXRhLnNvbmdUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICB2aWRlb1VybDogY2xpcERhdGEudmlkZW9VcmwsXG4gICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lU2Vjb25kczogY2xpcERhdGEuc3RhcnRUaW1lU2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lU2Vjb25kczogY2xpcERhdGEuZW5kVGltZVNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGNsaXBEYXRhLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ29tbWVudDogY29tbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICBjb21tZW50QXV0aG9yOiBjb21tZW50LmF1dGhvck5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY29tbWVudElkOiBjb21tZW50LmNvbW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb21tZW50UHVibGlzaGVkQXQ6IGNvbW1lbnQucHVibGlzaGVkQXQsXG4gICAgICAgICAgICAgICAgICAgICAgaXNSZWxldmFudDogY2xpcERhdGEuaXNSZWxldmFudCxcbiAgICAgICAgICAgICAgICAgICAgICBpc0V4Y2x1ZGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwYXJzZWRUaW1lbGluZS5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsTGl2ZUNsaXBzKys7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+SviDsoIDsnqU6ICR7Y2xpcERhdGEuYXJ0aXN0fSAtICR7Y2xpcERhdGEuc29uZ1RpdGxlfSAoJHtmb3JtYXRTZWNvbmRzKGNsaXBEYXRhLnN0YXJ0VGltZVNlY29uZHMpfSR7Y2xpcERhdGEuZW5kVGltZVNlY29uZHMgPyBgIH4gJHtmb3JtYXRTZWNvbmRzKGNsaXBEYXRhLmVuZFRpbWVTZWNvbmRzKX1gIDogJyd9KSAke2NsaXBEYXRhLmlzUmVsZXZhbnQgPyAnW+q0gOugqOyEsSDsnojsnYxdJyA6ICdb6rSA66Co7ISxIOyXhuydjF0nfWApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8g64yT6riA7J2EIOyymOumrOyZhOujjOuhnCDtkZzsi5xcbiAgICAgICAgICAgICAgYXdhaXQgWW91VHViZUNvbW1lbnQudXBkYXRlT25lKFxuICAgICAgICAgICAgICAgIHsgY29tbWVudElkOiBjb21tZW50LmNvbW1lbnRJZCB9LFxuICAgICAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgICBpc1Byb2Nlc3NlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkQnk6ICd0aW1lbGluZS1wYXJzZXInXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinYwgSFRNTCDrp4Htgawg7JeG7J2MLCDqsbTrhIjrnIBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg64yT6riAIO2MjOyLsSDsmKTrpZggKCR7Y29tbWVudC5jb21tZW50SWR9KTpgLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g7Ya16rOEIOqzhOyCsFxuICAgICAgICBjb25zdCB0b3RhbFZpZGVvcyA9IGF3YWl0IFlvdVR1YmVWaWRlby5jb3VudERvY3VtZW50cygpO1xuICAgICAgICBjb25zdCB0b3RhbFRpbWVsaW5lQ29tbWVudHMgPSBhd2FpdCBZb3VUdWJlQ29tbWVudC5jb3VudERvY3VtZW50cyh7IGlzVGltZWxpbmU6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGFsbFBhcnNlZFRpbWVsaW5lcyA9IGF3YWl0IFBhcnNlZFRpbWVsaW5lLmZpbmQoKS5zb3J0KHsgdXBsb2FkZWREYXRlOiAtMSwgc3RhcnRUaW1lU2Vjb25kczogMSB9KTtcbiAgICAgICAgY29uc3QgcmVsZXZhbnRDbGlwcyA9IGFsbFBhcnNlZFRpbWVsaW5lcy5maWx0ZXIoY2xpcCA9PiBjbGlwLmlzUmVsZXZhbnQgJiYgIWNsaXAuaXNFeGNsdWRlZCkubGVuZ3RoO1xuICAgICAgICBjb25zdCBtYXRjaGVkQ2xpcHMgPSBhbGxQYXJzZWRUaW1lbGluZXMuZmlsdGVyKGNsaXAgPT4gY2xpcC5tYXRjaGVkU29uZykubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgLy8g6rOg7JygIOqzoSDsiJgg6rOE7IKwXG4gICAgICAgIGNvbnN0IHVuaXF1ZVNvbmdzU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICBhbGxQYXJzZWRUaW1lbGluZXMuZm9yRWFjaChjbGlwID0+IHtcbiAgICAgICAgICB1bmlxdWVTb25nc1NldC5hZGQoYCR7Y2xpcC5hcnRpc3R9XyR7Y2xpcC5zb25nVGl0bGV9YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgICAgIHRvdGFsVmlkZW9zLFxuICAgICAgICAgIHRvdGFsVGltZWxpbmVDb21tZW50cyxcbiAgICAgICAgICBwYXJzZWRJdGVtczogYWxsUGFyc2VkVGltZWxpbmVzLmxlbmd0aCxcbiAgICAgICAgICByZWxldmFudEl0ZW1zOiByZWxldmFudENsaXBzLFxuICAgICAgICAgIG1hdGNoZWRTb25nczogbWF0Y2hlZENsaXBzLFxuICAgICAgICAgIHVuaXF1ZVNvbmdzOiB1bmlxdWVTb25nc1NldC5zaXplXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS5sb2coYOKchSDtg4DsnoTrnbzsnbgg7YyM7IuxIOyZhOujjDogJHtwcm9jZXNzZWRDb3VudH3qsJwg64yT6riA7JeQ7IScICR7dG90YWxMaXZlQ2xpcHN96rCcIO2MjOyLseuQnCDtg4DsnoTrnbzsnbgg7IOd7ISxYCk7XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGl0ZW1zOiBhbGxQYXJzZWRUaW1lbGluZXMsXG4gICAgICAgICAgICBzdGF0c1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVzc2FnZTogYO2DgOyehOudvOyduCDtjIzsi7Eg7JmE66OMOiAke3RvdGFsTGl2ZUNsaXBzfeqwnCDtjIzsi7HrkJwg7YOA7J6E65287J24IOyDneyEsWBcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ3VwZGF0ZS1pdGVtLXJlbGV2YW5jZSc6XG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdpdGVtSWTqsIAg7ZWE7JqU7ZWp64uI64ukLicgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBQYXJzZWRUaW1lbGluZS51cGRhdGVPbmUoXG4gICAgICAgICAgeyBpZDogaXRlbUlkIH0sXG4gICAgICAgICAgeyBcbiAgICAgICAgICAgIGlzUmVsZXZhbnQ6IGlzUmVsZXZhbnQsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICfqtIDroKjshLEg7IOB7YOc6rCAIOyXheuNsOydtO2KuOuQmOyXiOyKteuLiOuLpC4nXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICd1cGRhdGUtaXRlbS1leGNsdXNpb24nOlxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaXRlbUlk6rCAIO2VhOyalO2VqeuLiOuLpC4nIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgUGFyc2VkVGltZWxpbmUudXBkYXRlT25lKFxuICAgICAgICAgIHsgaWQ6IGl0ZW1JZCB9LFxuICAgICAgICAgIHsgXG4gICAgICAgICAgICBpc0V4Y2x1ZGVkOiBpc0V4Y2x1ZGVkLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAn7KCc7Jm4IOyDge2DnOqwgCDsl4XrjbDsnbTtirjrkJjsl4jsirXri4jri6QuJ1xuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAnZmluZC1zb25nLW1hdGNoZXMnOlxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaXRlbUlk6rCAIO2VhOyalO2VqeuLiOuLpC4nIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyc2VkVGltZWxpbmUgPSBhd2FpdCBQYXJzZWRUaW1lbGluZS5maW5kT25lKHsgaWQ6IGl0ZW1JZCB9KTtcbiAgICAgICAgaWYgKCFwYXJzZWRUaW1lbGluZSkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn7YyM7Iux65CcIO2DgOyehOudvOyduOydhCDssL7snYQg7IiYIOyXhuyKteuLiOuLpC4nIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc29uZ01hdGNoZXMgPSBhd2FpdCBmaW5kU29uZ01hdGNoZXMocGFyc2VkVGltZWxpbmUuYXJ0aXN0LCBwYXJzZWRUaW1lbGluZS5zb25nVGl0bGUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHBhcnNlZFRpbWVsaW5lOiB7XG4gICAgICAgICAgICAgIGlkOiBwYXJzZWRUaW1lbGluZS5pZCxcbiAgICAgICAgICAgICAgYXJ0aXN0OiBwYXJzZWRUaW1lbGluZS5hcnRpc3QsXG4gICAgICAgICAgICAgIHNvbmdUaXRsZTogcGFyc2VkVGltZWxpbmUuc29uZ1RpdGxlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWF0Y2hlczogc29uZ01hdGNoZXNcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdhc3NpZ24tc29uZy1tYXRjaCc6XG4gICAgICAgIGNvbnN0IHsgc29uZ0lkLCBjb25maWRlbmNlIH0gPSBib2R5O1xuICAgICAgICBcbiAgICAgICAgaWYgKCFpdGVtSWQgfHwgIXNvbmdJZCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaXRlbUlk7JmAIHNvbmdJZOqwgCDtlYTsmpTtlanri4jri6QuJyB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOyEoO2DneuQnCDqs6Eg7KCV67O0IOyhsO2ajFxuICAgICAgICBjb25zdCBzZWxlY3RlZFNvbmcgPSBhd2FpdCBTb25nRGV0YWlsLmZpbmRCeUlkKHNvbmdJZCk7XG4gICAgICAgIGlmICghc2VsZWN0ZWRTb25nKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfshKDtg53rkJwg6rOh7J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukLicgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBQYXJzZWRUaW1lbGluZS51cGRhdGVPbmUoXG4gICAgICAgICAgeyBpZDogaXRlbUlkIH0sXG4gICAgICAgICAgeyBcbiAgICAgICAgICAgIG1hdGNoZWRTb25nOiB7XG4gICAgICAgICAgICAgIHNvbmdJZDogc2VsZWN0ZWRTb25nLl9pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgICB0aXRsZTogc2VsZWN0ZWRTb25nLnRpdGxlLFxuICAgICAgICAgICAgICBhcnRpc3Q6IHNlbGVjdGVkU29uZy5hcnRpc3QsXG4gICAgICAgICAgICAgIGNvbmZpZGVuY2U6IGNvbmZpZGVuY2UgfHwgMS4wIC8vIOyImOuPmSDrp6Tsua3snYAg6riw67O47KCB7Jy866GcIDEwMCUg7Iug66Kw64+EXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAn6rOhIOunpOy5reydtCDsmYTro4zrkJjsl4jsirXri4jri6QuJ1xuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAncmVtb3ZlLXNvbmctbWF0Y2gnOlxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnaXRlbUlk6rCAIO2VhOyalO2VqeuLiOuLpC4nIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgUGFyc2VkVGltZWxpbmUudXBkYXRlT25lKFxuICAgICAgICAgIHsgaWQ6IGl0ZW1JZCB9LFxuICAgICAgICAgIHsgXG4gICAgICAgICAgICAkdW5zZXQ6IHsgbWF0Y2hlZFNvbmc6IFwiXCIgfSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ+qzoSDrp6Tsua3snbQg7ZW07KCc65CY7JeI7Iq164uI64ukLidcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ3VwZGF0ZS1saXZlLWNsaXAnOlxuICAgICAgICBjb25zdCB7IGFydGlzdCwgc29uZ1RpdGxlLCBzdGFydFRpbWVTZWNvbmRzLCBlbmRUaW1lU2Vjb25kcyB9ID0gYm9keTtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdpdGVtSWTqsIAg7ZWE7JqU7ZWp64uI64ukLicgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRhdGVGaWVsZHM6IGFueSA9IHsgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgICAgIFxuICAgICAgICBpZiAoYXJ0aXN0ICE9PSB1bmRlZmluZWQpIHVwZGF0ZUZpZWxkcy5hcnRpc3QgPSBhcnRpc3QudHJpbSgpO1xuICAgICAgICBpZiAoc29uZ1RpdGxlICE9PSB1bmRlZmluZWQpIHVwZGF0ZUZpZWxkcy5zb25nVGl0bGUgPSBzb25nVGl0bGUudHJpbSgpO1xuICAgICAgICBpZiAoc3RhcnRUaW1lU2Vjb25kcyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVGaWVsZHMuc3RhcnRUaW1lU2Vjb25kcyA9IHN0YXJ0VGltZVNlY29uZHM7XG4gICAgICAgIGlmIChlbmRUaW1lU2Vjb25kcyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVGaWVsZHMuZW5kVGltZVNlY29uZHMgPSBlbmRUaW1lU2Vjb25kcztcblxuICAgICAgICAvLyDsp4Dsho0g7Iuc6rCEIOyerOqzhOyCsCAo7KKF66OMIOyLnOqwhOydtCDsnojripQg6rK97JqwKVxuICAgICAgICBpZiAoZW5kVGltZVNlY29uZHMgIT09IHVuZGVmaW5lZCAmJiBzdGFydFRpbWVTZWNvbmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1cGRhdGVGaWVsZHMuZHVyYXRpb24gPSBlbmRUaW1lU2Vjb25kcyA+IHN0YXJ0VGltZVNlY29uZHMgPyBlbmRUaW1lU2Vjb25kcyAtIHN0YXJ0VGltZVNlY29uZHMgOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgUGFyc2VkVGltZWxpbmUudXBkYXRlT25lKFxuICAgICAgICAgIHsgaWQ6IGl0ZW1JZCB9LFxuICAgICAgICAgIHVwZGF0ZUZpZWxkc1xuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAn7YyM7Iux65CcIO2DgOyehOudvOyduCDsoJXrs7TqsIAg7JeF642w7J207Yq465CY7JeI7Iq164uI64ukLidcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ3NlYXJjaC1zb25nLW1hdGNoZXMnOlxuICAgICAgICBjb25zdCB7IHNlYXJjaEFydGlzdCwgc2VhcmNoVGl0bGUgfSA9IGJvZHk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXNlYXJjaEFydGlzdCB8fCAhc2VhcmNoVGl0bGUpIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ3NlYXJjaEFydGlzdOyZgCBzZWFyY2hUaXRsZeydtCDtlYTsmpTtlanri4jri6QuJyB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IGF3YWl0IG1hdGNoVGltZWxpbmVXaXRoU29uZ3Moc2VhcmNoQXJ0aXN0LCBzZWFyY2hUaXRsZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHF1ZXJ5OiB7IGFydGlzdDogc2VhcmNoQXJ0aXN0LCB0aXRsZTogc2VhcmNoVGl0bGUgfSxcbiAgICAgICAgICAgICAgY2FuZGlkYXRlczogY2FuZGlkYXRlcyB8fCBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+qzoSDqsoDsg4kg7Jik66WYOicsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+qzoSDqsoDsg4kg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJyB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICdtYXRjaC10aW1lbGluZS1zb25nJzpcbiAgICAgICAgY29uc3QgeyB0aW1lbGluZUlkLCBzb25nSWQ6IG1hdGNoU29uZ0lkLCBjb25maWRlbmNlOiBtYXRjaENvbmZpZGVuY2UgfSA9IGJvZHk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRpbWVsaW5lSWQpIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ3RpbWVsaW5lSWTqsIAg7ZWE7JqU7ZWp64uI64ukLicgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHsgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG1hdGNoU29uZ0lkKSB7XG4gICAgICAgICAgICAvLyDqs6Eg66ek7LmtXG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkU29uZyA9IGF3YWl0IFNvbmdEZXRhaWwuZmluZEJ5SWQobWF0Y2hTb25nSWQpO1xuICAgICAgICAgICAgaWYgKCFtYXRjaGVkU29uZykge1xuICAgICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICftlbTri7kg6rOh7J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukLicgfSxcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlRGF0YS5tYXRjaGVkU29uZyA9IHtcbiAgICAgICAgICAgICAgc29uZ0lkOiBtYXRjaGVkU29uZy5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGl0bGU6IG1hdGNoZWRTb25nLnRpdGxlLFxuICAgICAgICAgICAgICBhcnRpc3Q6IG1hdGNoZWRTb25nLmFydGlzdCxcbiAgICAgICAgICAgICAgY29uZmlkZW5jZTogbWF0Y2hDb25maWRlbmNlIHx8IDAuOVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g66ek7LmtIO2VtOygnFxuICAgICAgICAgICAgdXBkYXRlRGF0YS4kdW5zZXQgPSB7IG1hdGNoZWRTb25nOiBcIlwiIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXdhaXQgUGFyc2VkVGltZWxpbmUudXBkYXRlT25lKFxuICAgICAgICAgICAgeyBpZDogdGltZWxpbmVJZCB9LFxuICAgICAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1hdGNoU29uZ0lkID8gJ+qzoeydtCDrp6Tsua3rkJjsl4jsirXri4jri6QuJyA6ICfqs6Eg66ek7Lmt7J20IO2VtOygnOuQmOyXiOyKteuLiOuLpC4nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBtYXRjaEluZm86IG1hdGNoU29uZ0lkID8ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiB1cGRhdGVEYXRhLm1hdGNoZWRTb25nPy50aXRsZSxcbiAgICAgICAgICAgICAgICBhcnRpc3Q6IHVwZGF0ZURhdGEubWF0Y2hlZFNvbmc/LmFydGlzdFxuICAgICAgICAgICAgICB9IDogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+qzoSDrp6Tsua0g7Jik66WYOicsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+qzoSDrp6Tsua0g7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJyB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfsmKzrsJTrpbTsp4Ag7JWK7J2AIGFjdGlvbuyeheuLiOuLpC4nIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign7YOA7J6E65287J24IO2MjOyEnCBBUEkg7Jik66WYOicsIGVycm9yKTtcbiAgICBcbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ+yVjCDsiJgg7JeG64qUIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJztcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuICAgIGlmICghc2Vzc2lvbiB8fCAhaGFzUGVybWlzc2lvbihzZXNzaW9uLnVzZXIucm9sZSBhcyBVc2VyUm9sZSwgUGVybWlzc2lvbi5TT05HU19WSUVXKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+q2jO2VnOydtCDtlYTsmpTtlanri4jri6QuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG5cbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgYWN0aW9uID0gc2VhcmNoUGFyYW1zLmdldCgnYWN0aW9uJyk7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnZ2V0LXBhcnNlZC1pdGVtcyc6XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgUGFyc2VkVGltZWxpbmUuZmluZCgpLnNvcnQoeyB1cGxvYWRlZERhdGU6IC0xLCBzdGFydFRpbWVTZWNvbmRzOiAxIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IGl0ZW1zXG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfsmKzrsJTrpbTsp4Ag7JWK7J2AIGFjdGlvbuyeheuLiOuLpC4nIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign7YOA7J6E65287J24IO2MjOyEnCBHRVQgQVBJIOyYpOulmDonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfrjbDsnbTthLAg7KGw7ZqMIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiaGFzUGVybWlzc2lvbiIsIlBlcm1pc3Npb24iLCJkYkNvbm5lY3QiLCJZb3VUdWJlQ29tbWVudCIsIllvdVR1YmVWaWRlbyIsIlNvbmdEZXRhaWwiLCJtb25nb29zZSIsIlBhcnNlZFRpbWVsaW5lU2NoZW1hIiwiU2NoZW1hIiwiaWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJ2aWRlb0lkIiwidmlkZW9UaXRsZSIsInVwbG9hZGVkRGF0ZSIsIkRhdGUiLCJvcmlnaW5hbERhdGVTdHJpbmciLCJhcnRpc3QiLCJzb25nVGl0bGUiLCJ2aWRlb1VybCIsInN0YXJ0VGltZVNlY29uZHMiLCJOdW1iZXIiLCJlbmRUaW1lU2Vjb25kcyIsImR1cmF0aW9uIiwiaXNSZWxldmFudCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiaXNFeGNsdWRlZCIsIm1hdGNoZWRTb25nIiwic29uZ0lkIiwidGl0bGUiLCJjb25maWRlbmNlIiwib3JpZ2luYWxDb21tZW50IiwiY29tbWVudEF1dGhvciIsImNvbW1lbnRJZCIsImNvbW1lbnRQdWJsaXNoZWRBdCIsImNyZWF0ZWRBdCIsIm5vdyIsInVwZGF0ZWRBdCIsIlBhcnNlZFRpbWVsaW5lIiwibW9kZWxzIiwibW9kZWwiLCJub3JtYWxpemVUZXh0IiwidGV4dCIsInRvTG93ZXJDYXNlIiwidHJpbSIsInJlcGxhY2UiLCJsZXZlbnNodGVpbkRpc3RhbmNlIiwic3RyMSIsInN0cjIiLCJtYXRyaXgiLCJpIiwibGVuZ3RoIiwiaiIsImNoYXJBdCIsIk1hdGgiLCJtaW4iLCJjYWxjdWxhdGVTaW1pbGFyaXR5IiwiczEiLCJzMiIsImluY2x1ZGVzIiwibG9uZ2VyIiwic2hvcnRlciIsImNvbW1vbkxlbmd0aCIsIm1pbkxlbiIsIm1heExlbiIsIm1heCIsInNpbWlsYXJpdHkiLCJkaXN0YW5jZSIsInNlYXJjaEluQXJ0aXN0RmllbGRzIiwic29uZyIsIm5vcm1hbGl6ZWRRdWVyeSIsImZpZWxkcyIsImFydGlzdEFsaWFzIiwic2VhcmNoVGFncyIsImZpbHRlciIsIm1heFNpbWlsYXJpdHkiLCJleGFjdE1hdGNoIiwiZmllbGQiLCJub3JtYWxpemVkRmllbGQiLCJzZWFyY2hJblRpdGxlRmllbGRzIiwidGl0bGVBbGlhcyIsIm1hdGNoVGltZWxpbmVXaXRoU29uZ3MiLCJub3JtYWxpemVkQXJ0aXN0Iiwibm9ybWFsaXplZFRpdGxlIiwiY29uc29sZSIsImxvZyIsImFsbFNvbmdzIiwiZmluZCIsIiRvciIsInN0YXR1cyIsIiRleGlzdHMiLCJsZWFuIiwiY2FuZGlkYXRlcyIsInByb2Nlc3NlZENvdW50IiwiYXJ0aXN0U2ltaWxhcml0eSIsInRpdGxlU2ltaWxhcml0eSIsIm92ZXJhbGxTaW1pbGFyaXR5IiwidG9GaXhlZCIsInB1c2giLCJpc0V4YWN0TWF0Y2giLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInBhcnNlVGltZVRvU2Vjb25kcyIsInRpbWVQYXJhbSIsImNvbG9uSG1zTWF0Y2giLCJtYXRjaCIsImhvdXJzIiwicGFyc2VJbnQiLCJtaW51dGVzIiwic2Vjb25kcyIsImNvbG9uTXNNYXRjaCIsInRlc3QiLCJobXNNYXRjaCIsIm1zTWF0Y2giLCJobU1hdGNoIiwibU1hdGNoIiwic01hdGNoIiwiZGVjb2RlSHRtbEVudGl0aWVzIiwibmFtZWRFbnRpdGllcyIsImNvZGUiLCJmcm9tQ2hhckNvZGUiLCJlIiwiZW50aXR5IiwiaXNNdXNpY0NvbnRlbnQiLCJzcGxpdENvbW1lbnRCeVRpbWVzdGFtcHMiLCJkZWNvZGVkSHRtbCIsInJlc3VsdHMiLCJiYXNlVmlkZW9VcmwiLCJsaW5rTWF0Y2giLCJhbGxUaW1lc3RhbXBQYXR0ZXJuIiwidGltZXN0YW1wUG9zaXRpb25zIiwiZXhlYyIsInRpbWVUZXh0IiwidGltZVNlY29uZHMiLCJzdGFydFBvcyIsImluZGV4IiwiZW5kUG9zIiwiZnVsbE1hdGNoIiwiZm9yRWFjaCIsInRpbWVzdGFtcCIsIm5leHRTdGFydFBvcyIsImNvbnRleHRUZXh0Iiwic3Vic3RyaW5nIiwiY2xlYW5UZXh0IiwidnNNYXRjaCIsImlzTGlrZWx5TXVzaWMiLCJjb250ZW50Iiwic291cmNlIiwiZXh0cmFjdEJhc2VWaWRlb1VybCIsInRpbWVsaW5lcyIsImxpbmtUaW1lbGluZSIsInQiLCJ1cmwiLCJwYXJzZVRpbWVsaW5lQ29tbWVudCIsImh0bWxUZXh0Iiwic2VjdGlvbnMiLCJyYXdNYXRjaGVzIiwic2VjdGlvbiIsInNvbmdJbmZvIiwicGFyc2VTb25nSW5mbyIsInNlY3Rpb25UZXh0IiwiZGF0ZUluZm8iLCJleHRyYWN0RGF0ZUZyb21UaXRsZSIsInNvbmdFbnRyaWVzIiwiY3VycmVudCIsIm5leHQiLCJsaXZlQ2xpcCIsImRhdGUiLCJvcmlnaW5hbFN0cmluZyIsInNvbmdUZXh0Iiwic2VwYXJhdG9ycyIsInNlcGFyYXRvciIsInBhcnRzIiwic3BsaXQiLCJqb2luIiwiZm9ybWF0U2Vjb25kcyIsImZsb29yIiwic2VjcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJmaW5kU29uZ01hdGNoZXMiLCJzb25ncyIsIiRpbiIsIm5vcm1hbGl6ZWRJbnB1dEFydGlzdCIsIm5vcm1hbGl6ZWRJbnB1dFRpdGxlIiwibWF0Y2hlcyIsImJlc3RBcnRpc3RTaW1pbGFyaXR5IiwiYmVzdFRpdGxlU2ltaWxhcml0eSIsImFsaWFzU2ltaWxhcml0eSIsInRhZyIsInRhZ0FydGlzdFNpbWlsYXJpdHkiLCJ0YWdUaXRsZVNpbWlsYXJpdHkiLCJvdmVyYWxsQ29uZmlkZW5jZSIsIl9pZCIsIm1hdGNoZWRGaWVsZCIsImVycm9yIiwiZ2V0QmVzdFNvbmdNYXRjaCIsImJlc3RNYXRjaCIsInNob3J0WWVhclBhdHRlcm4iLCJzaG9ydFllYXJNYXRjaCIsInllYXIiLCJtb250aCIsImRheSIsImZ1bGxZZWFyIiwiZGF0ZVBhdHRlcm5zIiwicGF0dGVybiIsInBhcnNlciIsIlBPU1QiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJyb2xlIiwiU09OR1NfRURJVCIsImpzb24iLCJzdWNjZXNzIiwiYm9keSIsImFjdGlvbiIsIml0ZW1JZCIsImFsbFRpbWVsaW5lQ29tbWVudHMiLCJpc1RpbWVsaW5lIiwicmVwcm9jZXNzZWRDb3VudCIsImRhdGFVcGRhdGVkQ291bnQiLCJuZXdJdGVtc0NvdW50IiwiY29tbWVudCIsInZpZGVvIiwiZmluZE9uZSIsImhhc0h0bWxMaW5rcyIsInRleHRDb250ZW50IiwibGl2ZUNsaXBzIiwiZXhpc3RpbmdUaW1lbGluZXMiLCJjbGlwRGF0YSIsImV4aXN0aW5nQ2xpcCIsInRpbWVsaW5lIiwidXBkYXRlRGF0YSIsImF1dGhvck5hbWUiLCJwdWJsaXNoZWRBdCIsInVwZGF0ZU9uZSIsIm1lc3NhZ2UiLCJkYXRhIiwibmV3SXRlbXNTa2lwcGVkIiwidGltZWxpbmVDb21tZW50cyIsImV4aXN0aW5nQ29tbWVudElkcyIsImRpc3RpbmN0IiwibmV3VGltZWxpbmVDb21tZW50cyIsIm5ld0NvbW1lbnRzIiwidG90YWxDb21tZW50cyIsInNhbXBsZSIsInRvdGFsTGl2ZUNsaXBzIiwiY2xpcElkIiwicGFyc2VkVGltZWxpbmUiLCJzYXZlIiwiaXNQcm9jZXNzZWQiLCJwcm9jZXNzZWRBdCIsInByb2Nlc3NlZEJ5IiwidG90YWxWaWRlb3MiLCJjb3VudERvY3VtZW50cyIsInRvdGFsVGltZWxpbmVDb21tZW50cyIsImFsbFBhcnNlZFRpbWVsaW5lcyIsInJlbGV2YW50Q2xpcHMiLCJjbGlwIiwibWF0Y2hlZENsaXBzIiwidW5pcXVlU29uZ3NTZXQiLCJTZXQiLCJhZGQiLCJzdGF0cyIsInBhcnNlZEl0ZW1zIiwicmVsZXZhbnRJdGVtcyIsIm1hdGNoZWRTb25ncyIsInVuaXF1ZVNvbmdzIiwic2l6ZSIsIml0ZW1zIiwic29uZ01hdGNoZXMiLCJzZWxlY3RlZFNvbmciLCJmaW5kQnlJZCIsIiR1bnNldCIsInVwZGF0ZUZpZWxkcyIsInVuZGVmaW5lZCIsInNlYXJjaEFydGlzdCIsInNlYXJjaFRpdGxlIiwicXVlcnkiLCJ0aW1lbGluZUlkIiwibWF0Y2hTb25nSWQiLCJtYXRjaENvbmZpZGVuY2UiLCJtYXRjaEluZm8iLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIkdFVCIsIlNPTkdTX1ZJRVciLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJnZXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/timeline-parser/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/adminChannels.ts":
/*!**********************************!*\
  !*** ./src/lib/adminChannels.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AYAUKE_ADMIN_CHANNELS: () => (/* binding */ AYAUKE_ADMIN_CHANNELS),\n/* harmony export */   AYAUKE_ADMIN_CHANNEL_IDS: () => (/* binding */ AYAUKE_ADMIN_CHANNEL_IDS),\n/* harmony export */   SUPER_ADMIN_CHANNELS: () => (/* binding */ SUPER_ADMIN_CHANNELS),\n/* harmony export */   SUPER_ADMIN_CHANNEL_IDS: () => (/* binding */ SUPER_ADMIN_CHANNEL_IDS),\n/* harmony export */   getAdminInfo: () => (/* binding */ getAdminInfo),\n/* harmony export */   getAyaukeAdminInfo: () => (/* binding */ getAyaukeAdminInfo),\n/* harmony export */   getStaticUserRole: () => (/* binding */ getStaticUserRole),\n/* harmony export */   getSuperAdminInfo: () => (/* binding */ getSuperAdminInfo),\n/* harmony export */   isAdminChannel: () => (/* binding */ isAdminChannel),\n/* harmony export */   isAyaukeAdminChannel: () => (/* binding */ isAyaukeAdminChannel),\n/* harmony export */   isSuperAdminChannel: () => (/* binding */ isSuperAdminChannel)\n/* harmony export */ });\n/* harmony import */ var _permissions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./permissions */ \"(rsc)/./src/lib/permissions.ts\");\n\n// 최고 관리자 권한을 가진 치지직 채널 ID 목록 (하드코딩)\nconst SUPER_ADMIN_CHANNEL_IDS = [\n    'd6017f757614569add71b0bc83a81382'\n];\n// 아야우케 관리자 권한을 가진 치지직 채널 ID 목록 (하드코딩)\nconst AYAUKE_ADMIN_CHANNEL_IDS = [\n    'abe8aa82baf3d3ef54ad8468ee73e7fc'\n];\n// 최고 관리자 채널 정보\nconst SUPER_ADMIN_CHANNELS = {\n    'd6017f757614569add71b0bc83a81382': {\n        name: '개발자',\n        role: '개발 관리자'\n    }\n};\n// 아야우케 관리자 채널 정보  \nconst AYAUKE_ADMIN_CHANNELS = {\n    'abe8aa82baf3d3ef54ad8468ee73e7fc': {\n        name: '아야우케',\n        role: '노래책 관리자'\n    }\n};\nfunction isSuperAdminChannel(channelId) {\n    if (!channelId) return false;\n    return SUPER_ADMIN_CHANNEL_IDS.includes(channelId);\n}\nfunction isAyaukeAdminChannel(channelId) {\n    if (!channelId) return false;\n    return AYAUKE_ADMIN_CHANNEL_IDS.includes(channelId);\n}\nfunction getSuperAdminInfo(channelId) {\n    if (!channelId || !isSuperAdminChannel(channelId)) return null;\n    return SUPER_ADMIN_CHANNELS[channelId] || null;\n}\nfunction getAyaukeAdminInfo(channelId) {\n    if (!channelId || !isAyaukeAdminChannel(channelId)) return null;\n    return AYAUKE_ADMIN_CHANNELS[channelId] || null;\n}\nfunction getStaticUserRole(channelId) {\n    if (!channelId) return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.USER;\n    if (isSuperAdminChannel(channelId)) {\n        return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.SUPER_ADMIN;\n    }\n    if (isAyaukeAdminChannel(channelId)) {\n        return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.AYAUKE_ADMIN;\n    }\n    return _permissions__WEBPACK_IMPORTED_MODULE_0__.UserRole.USER;\n}\n// 하위 호환성을 위한 함수들 (나중에 제거)\nfunction isAdminChannel(channelId) {\n    return isSuperAdminChannel(channelId) || isAyaukeAdminChannel(channelId);\n}\nfunction getAdminInfo(channelId) {\n    return getSuperAdminInfo(channelId) || getAyaukeAdminInfo(channelId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FkbWluQ2hhbm5lbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBRXhDLG9DQUFvQztBQUM3QixNQUFNQywwQkFBMEI7SUFDckM7Q0FDRCxDQUFTO0FBRVYsc0NBQXNDO0FBQy9CLE1BQU1DLDJCQUEyQjtJQUN0QztDQUNELENBQVM7QUFFVixlQUFlO0FBQ1IsTUFBTUMsdUJBQXVCO0lBQ2xDLG9DQUFvQztRQUNsQ0MsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7QUFDRixFQUFVO0FBRVYsbUJBQW1CO0FBQ1osTUFBTUMsd0JBQXdCO0lBQ25DLG9DQUFvQztRQUNsQ0YsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7QUFDRixFQUFVO0FBRUgsU0FBU0Usb0JBQW9CQyxTQUFvQztJQUN0RSxJQUFJLENBQUNBLFdBQVcsT0FBTztJQUN2QixPQUFPUCx3QkFBd0JRLFFBQVEsQ0FBQ0Q7QUFDMUM7QUFFTyxTQUFTRSxxQkFBcUJGLFNBQW9DO0lBQ3ZFLElBQUksQ0FBQ0EsV0FBVyxPQUFPO0lBQ3ZCLE9BQU9OLHlCQUF5Qk8sUUFBUSxDQUFDRDtBQUMzQztBQUVPLFNBQVNHLGtCQUFrQkgsU0FBb0M7SUFDcEUsSUFBSSxDQUFDQSxhQUFhLENBQUNELG9CQUFvQkMsWUFBWSxPQUFPO0lBQzFELE9BQU9MLG9CQUFvQixDQUFDSyxVQUErQyxJQUFJO0FBQ2pGO0FBRU8sU0FBU0ksbUJBQW1CSixTQUFvQztJQUNyRSxJQUFJLENBQUNBLGFBQWEsQ0FBQ0UscUJBQXFCRixZQUFZLE9BQU87SUFDM0QsT0FBT0YscUJBQXFCLENBQUNFLFVBQWdELElBQUk7QUFDbkY7QUFFTyxTQUFTSyxrQkFBa0JMLFNBQW9DO0lBQ3BFLElBQUksQ0FBQ0EsV0FBVyxPQUFPUixrREFBUUEsQ0FBQ2MsSUFBSTtJQUVwQyxJQUFJUCxvQkFBb0JDLFlBQVk7UUFDbEMsT0FBT1Isa0RBQVFBLENBQUNlLFdBQVc7SUFDN0I7SUFFQSxJQUFJTCxxQkFBcUJGLFlBQVk7UUFDbkMsT0FBT1Isa0RBQVFBLENBQUNnQixZQUFZO0lBQzlCO0lBRUEsT0FBT2hCLGtEQUFRQSxDQUFDYyxJQUFJO0FBQ3RCO0FBRUEsMEJBQTBCO0FBQ25CLFNBQVNHLGVBQWVULFNBQW9DO0lBQ2pFLE9BQU9ELG9CQUFvQkMsY0FBY0UscUJBQXFCRjtBQUNoRTtBQUVPLFNBQVNVLGFBQWFWLFNBQW9DO0lBQy9ELE9BQU9HLGtCQUFrQkgsY0FBY0ksbUJBQW1CSjtBQUM1RCIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9saWIvYWRtaW5DaGFubmVscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyUm9sZSB9IGZyb20gJy4vcGVybWlzc2lvbnMnXG5cbi8vIOy1nOqzoCDqtIDrpqzsnpAg6raM7ZWc7J2EIOqwgOynhCDsuZjsp4Dsp4Eg7LGE64SQIElEIOuqqeuhnSAo7ZWY65Oc7L2U65SpKVxuZXhwb3J0IGNvbnN0IFNVUEVSX0FETUlOX0NIQU5ORUxfSURTID0gW1xuICAnZDYwMTdmNzU3NjE0NTY5YWRkNzFiMGJjODNhODEzODInLCAvLyDsgqzsmqnsnpAgKOqwnOuwnOyekClcbl0gYXMgY29uc3RcblxuLy8g7JWE7JW87Jqw7LyAIOq0gOumrOyekCDqtoztlZzsnYQg6rCA7KeEIOy5mOyngOyngSDssYTrhJAgSUQg66qp66GdICjtlZjrk5zsvZTrlKkpXG5leHBvcnQgY29uc3QgQVlBVUtFX0FETUlOX0NIQU5ORUxfSURTID0gW1xuICAnYWJlOGFhODJiYWYzZDNlZjU0YWQ4NDY4ZWU3M2U3ZmMnLCAvLyDslYTslbzsmrDsvIAgKOuFuOuemOyxhSDqtIDrpqzsnpApXG5dIGFzIGNvbnN0XG5cbi8vIOy1nOqzoCDqtIDrpqzsnpAg7LGE64SQIOygleuztFxuZXhwb3J0IGNvbnN0IFNVUEVSX0FETUlOX0NIQU5ORUxTID0ge1xuICAnZDYwMTdmNzU3NjE0NTY5YWRkNzFiMGJjODNhODEzODInOiB7XG4gICAgbmFtZTogJ+qwnOuwnOyekCcsXG4gICAgcm9sZTogJ+qwnOuwnCDqtIDrpqzsnpAnLFxuICB9LFxufSBhcyBjb25zdFxuXG4vLyDslYTslbzsmrDsvIAg6rSA66as7J6QIOyxhOuEkCDsoJXrs7QgIFxuZXhwb3J0IGNvbnN0IEFZQVVLRV9BRE1JTl9DSEFOTkVMUyA9IHtcbiAgJ2FiZThhYTgyYmFmM2QzZWY1NGFkODQ2OGVlNzNlN2ZjJzoge1xuICAgIG5hbWU6ICfslYTslbzsmrDsvIAnLFxuICAgIHJvbGU6ICfrhbjrnpjssYUg6rSA66as7J6QJyxcbiAgfSxcbn0gYXMgY29uc3RcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwZXJBZG1pbkNoYW5uZWwoY2hhbm5lbElkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIGlmICghY2hhbm5lbElkKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIFNVUEVSX0FETUlOX0NIQU5ORUxfSURTLmluY2x1ZGVzKGNoYW5uZWxJZCBhcyBhbnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0F5YXVrZUFkbWluQ2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCFjaGFubmVsSWQpIHJldHVybiBmYWxzZVxuICByZXR1cm4gQVlBVUtFX0FETUlOX0NIQU5ORUxfSURTLmluY2x1ZGVzKGNoYW5uZWxJZCBhcyBhbnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBlckFkbWluSW5mbyhjaGFubmVsSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgaWYgKCFjaGFubmVsSWQgfHwgIWlzU3VwZXJBZG1pbkNoYW5uZWwoY2hhbm5lbElkKSkgcmV0dXJuIG51bGxcbiAgcmV0dXJuIFNVUEVSX0FETUlOX0NIQU5ORUxTW2NoYW5uZWxJZCBhcyBrZXlvZiB0eXBlb2YgU1VQRVJfQURNSU5fQ0hBTk5FTFNdIHx8IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF5YXVrZUFkbWluSW5mbyhjaGFubmVsSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgaWYgKCFjaGFubmVsSWQgfHwgIWlzQXlhdWtlQWRtaW5DaGFubmVsKGNoYW5uZWxJZCkpIHJldHVybiBudWxsXG4gIHJldHVybiBBWUFVS0VfQURNSU5fQ0hBTk5FTFNbY2hhbm5lbElkIGFzIGtleW9mIHR5cGVvZiBBWUFVS0VfQURNSU5fQ0hBTk5FTFNdIHx8IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXRpY1VzZXJSb2xlKGNoYW5uZWxJZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFVzZXJSb2xlIHtcbiAgaWYgKCFjaGFubmVsSWQpIHJldHVybiBVc2VyUm9sZS5VU0VSXG4gIFxuICBpZiAoaXNTdXBlckFkbWluQ2hhbm5lbChjaGFubmVsSWQpKSB7XG4gICAgcmV0dXJuIFVzZXJSb2xlLlNVUEVSX0FETUlOXG4gIH1cbiAgXG4gIGlmIChpc0F5YXVrZUFkbWluQ2hhbm5lbChjaGFubmVsSWQpKSB7XG4gICAgcmV0dXJuIFVzZXJSb2xlLkFZQVVLRV9BRE1JTlxuICB9XG4gIFxuICByZXR1cm4gVXNlclJvbGUuVVNFUlxufVxuXG4vLyDtlZjsnIQg7Zi47ZmY7ISx7J2EIOychO2VnCDtlajsiJjrk6QgKOuCmOykkeyXkCDsoJzqsbApXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbkNoYW5uZWwoY2hhbm5lbElkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIHJldHVybiBpc1N1cGVyQWRtaW5DaGFubmVsKGNoYW5uZWxJZCkgfHwgaXNBeWF1a2VBZG1pbkNoYW5uZWwoY2hhbm5lbElkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRtaW5JbmZvKGNoYW5uZWxJZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICByZXR1cm4gZ2V0U3VwZXJBZG1pbkluZm8oY2hhbm5lbElkKSB8fCBnZXRBeWF1a2VBZG1pbkluZm8oY2hhbm5lbElkKVxufSJdLCJuYW1lcyI6WyJVc2VyUm9sZSIsIlNVUEVSX0FETUlOX0NIQU5ORUxfSURTIiwiQVlBVUtFX0FETUlOX0NIQU5ORUxfSURTIiwiU1VQRVJfQURNSU5fQ0hBTk5FTFMiLCJuYW1lIiwicm9sZSIsIkFZQVVLRV9BRE1JTl9DSEFOTkVMUyIsImlzU3VwZXJBZG1pbkNoYW5uZWwiLCJjaGFubmVsSWQiLCJpbmNsdWRlcyIsImlzQXlhdWtlQWRtaW5DaGFubmVsIiwiZ2V0U3VwZXJBZG1pbkluZm8iLCJnZXRBeWF1a2VBZG1pbkluZm8iLCJnZXRTdGF0aWNVc2VyUm9sZSIsIlVTRVIiLCJTVVBFUl9BRE1JTiIsIkFZQVVLRV9BRE1JTiIsImlzQWRtaW5DaGFubmVsIiwiZ2V0QWRtaW5JbmZvIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/adminChannels.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authOptions.ts":
/*!********************************!*\
  !*** ./src/lib/authOptions.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_chzzkCookieManual__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/chzzkCookieManual */ \"(rsc)/./src/lib/chzzkCookieManual.ts\");\n/* harmony import */ var _lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/adminChannels */ \"(rsc)/./src/lib/adminChannels.ts\");\n/* harmony import */ var _lib_permissions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/permissions */ \"(rsc)/./src/lib/permissions.ts\");\n/* harmony import */ var _lib_userService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/userService */ \"(rsc)/./src/lib/userService.ts\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./src/models/User.ts\");\n/* harmony import */ var _models_UserActivity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/models/UserActivity */ \"(rsc)/./src/models/UserActivity.ts\");\n/* harmony import */ var _lib_chzzkOAuthProvider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/chzzkOAuthProvider */ \"(rsc)/./src/lib/chzzkOAuthProvider.ts\");\n/* harmony import */ var _lib_titleSystem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/titleSystem */ \"(rsc)/./src/lib/titleSystem.ts\");\n\n\n\n\n\n\n\n\n\n\n// 사용자 정보 메모리 캐시 (5분간 유효)\nconst userCache = new Map();\nconst CACHE_DURATION = 5 * 60 * 1000 // 5분\n;\n// 캐시된 사용자 정보 조회\nasync function getCachedUser(channelId) {\n    const now = Date.now();\n    const cached = userCache.get(channelId);\n    // 캐시가 있고 아직 유효하면 캐시 사용\n    if (cached && now - cached.timestamp < CACHE_DURATION) {\n        return cached.data;\n    }\n    // 캐시가 없거나 만료되었으면 DB 조회\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_6__[\"default\"].findOne({\n            channelId\n        });\n        // 조회 결과를 캐시에 저장\n        userCache.set(channelId, {\n            data: user,\n            timestamp: now\n        });\n        return user;\n    } catch (error) {\n        // DB 조회 실패 시 만료된 캐시라도 있으면 사용\n        if (cached) {\n            console.log('DB 조회 실패, 만료된 캐시 사용:', channelId);\n            return cached.data;\n        }\n        throw error;\n    }\n}\nconst authOptions = {\n    providers: [\n        (0,_lib_chzzkOAuthProvider__WEBPACK_IMPORTED_MODULE_8__[\"default\"])({\n            clientId: process.env.CHZZK_CLIENT_ID,\n            clientSecret: process.env.CHZZK_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            id: \"chzzk-cookie\",\n            name: \"치지직 쿠키 로그인\",\n            credentials: {\n                cookies: {\n                    label: \"치지직 쿠키\",\n                    type: \"text\",\n                    placeholder: \"NID_AUT=...; NID_SES=...\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.cookies) return null;\n                    const { client, userInfo } = await (0,_lib_chzzkCookieManual__WEBPACK_IMPORTED_MODULE_1__.createManualChzzkClient)('cookie-user', credentials.cookies);\n                    if (!userInfo || !userInfo.loggedIn) return null;\n                    let channelInfo = null;\n                    try {\n                        if (client.channel && typeof client.channel.info === 'function') {\n                            channelInfo = await client.channel.info(userInfo.userIdHash);\n                        }\n                    } catch (error) {\n                        console.log('채널 정보 가져오기 실패:', error);\n                    }\n                    const channelId = channelInfo?.channelId || userInfo.userIdHash;\n                    const channelName = channelInfo?.channelName || userInfo.nickname || '치지직 사용자';\n                    const isAdmin = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.isAdminChannel)(channelId);\n                    const adminInfo = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getAdminInfo)(channelId);\n                    const result = {\n                        id: userInfo.userIdHash,\n                        name: channelName,\n                        email: null,\n                        image: channelInfo?.channelImageUrl || null,\n                        naverId: null,\n                        channelId: channelId,\n                        channelName: channelName,\n                        channelImageUrl: channelInfo?.channelImageUrl || null,\n                        followerCount: channelInfo?.followerCount || null,\n                        isAdmin,\n                        adminRole: adminInfo?.role || null\n                    };\n                    try {\n                        await (0,_lib_userService__WEBPACK_IMPORTED_MODULE_4__.createOrUpdateUser)({\n                            channelId: channelId,\n                            channelName: channelName,\n                            profileImageUrl: channelInfo?.channelImageUrl\n                        });\n                    } catch (dbError) {\n                        console.error('사용자 DB 저장 오류:', dbError);\n                    }\n                    return result;\n                } catch (error) {\n                    console.error('치지직 쿠키 로그인 오류:', error);\n                    return null;\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user, account }) {\n            if (user) {\n                // OAuth 방식 (치지직 공식 API)\n                if (account?.provider === 'chzzk') {\n                    const channelId = user.channelId || user.id;\n                    const channelName = user.channelName || user.name;\n                    const role = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getStaticUserRole)(channelId);\n                    const adminInfo = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getAdminInfo)(channelId);\n                    token.naverId = null;\n                    token.channelId = channelId;\n                    token.channelName = channelName;\n                    token.channelImageUrl = user.channelImageUrl || user.image;\n                    token.followerCount = user.followerCount;\n                    token.role = role;\n                    token.isAdmin = (0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.roleToIsAdmin)(role) // 하위 호환성\n                    ;\n                    token.adminRole = adminInfo?.role || null;\n                    // 사용자 정보 DB에 저장\n                    try {\n                        const dbUser = await (0,_lib_userService__WEBPACK_IMPORTED_MODULE_4__.createOrUpdateUser)({\n                            channelId: channelId,\n                            channelName: channelName,\n                            profileImageUrl: user.channelImageUrl || user.image\n                        });\n                        token.userId = dbUser._id.toString() // MongoDB ObjectId를 토큰에 저장\n                        ;\n                    } catch (dbError) {\n                        console.error('OAuth 사용자 DB 저장 오류:', dbError);\n                    }\n                } else {\n                    const role = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getStaticUserRole)(user.channelId);\n                    const adminInfo = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_2__.getAdminInfo)(user.channelId);\n                    token.naverId = user.naverId;\n                    token.channelId = user.channelId;\n                    token.channelName = user.channelName;\n                    token.channelImageUrl = user.channelImageUrl;\n                    token.followerCount = user.followerCount;\n                    token.role = role;\n                    token.isAdmin = (0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.roleToIsAdmin)(role) // 하위 호환성\n                    ;\n                    token.adminRole = adminInfo?.role || null;\n                    // 쿠키 방식에서도 DB에 사용자 정보 저장하고 ObjectId 가져오기\n                    try {\n                        const dbUser = await (0,_lib_userService__WEBPACK_IMPORTED_MODULE_4__.createOrUpdateUser)({\n                            channelId: user.channelId,\n                            channelName: user.channelName,\n                            profileImageUrl: user.channelImageUrl\n                        });\n                        token.userId = dbUser._id.toString() // MongoDB ObjectId를 토큰에 저장\n                        ;\n                    } catch (dbError) {\n                        console.error('쿠키 방식 사용자 DB 저장 오류:', dbError);\n                    }\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                // 기본 토큰 정보 설정\n                session.user.id = token.userId // NextAuth 표준 필드\n                ;\n                session.user.naverId = token.naverId || null;\n                session.user.channelId = token.channelId;\n                session.user.userId = token.userId // MongoDB ObjectId 추가\n                ;\n                session.user.followerCount = token.followerCount;\n                session.user.role = token.role;\n                session.user.isAdmin = token.isAdmin;\n                session.user.adminRole = token.adminRole;\n                // 기본 세션 정보 먼저 설정 (토큰 기반)\n                session.user.channelName = token.channelName;\n                session.user.name = token.channelName;\n                session.user.channelImageUrl = token.channelImageUrl;\n                // 캐시된 사용자 정보 가져오기 (선택적 업데이트)\n                try {\n                    const user = await getCachedUser(token.channelId);\n                    if (user) {\n                        // DB에서 가져온 정보로 업데이트 (기존 정보 덮어씀)\n                        session.user.channelName = user.channelName;\n                        session.user.name = user.displayName || user.channelName;\n                        session.user.image = user.profileImageUrl || session.user.channelImageUrl;\n                        session.user.channelImageUrl = user.profileImageUrl || session.user.channelImageUrl;\n                        session.user.role = user.role // DB에서 가져온 최신 권한 사용\n                        ;\n                        session.user.isAdmin = (0,_lib_permissions__WEBPACK_IMPORTED_MODULE_3__.roleToIsAdmin)(user.role);\n                        // 선택된 칭호 정보 추가\n                        const selectedTitle = (0,_lib_titleSystem__WEBPACK_IMPORTED_MODULE_9__.getSelectedTitleInfo)(user);\n                        session.user.selectedTitle = selectedTitle;\n                    }\n                // DB에 사용자가 없으면 기본 정보 그대로 사용\n                } catch (error) {\n                    console.error('세션 콜백에서 사용자 정보 조회 오류:', error);\n                // DB 연결 실패 시 기본 정보(토큰 기반) 그대로 사용\n                // 별도 처리 불필요 - 이미 위에서 기본값 설정됨\n                }\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: '/auth/signin',\n        error: '/auth/error'\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: false\n};\n// 중복 체크인 방지를 위한 메모리 캐시 (userId:date -> timestamp)\nconst checkinCache = new Map();\n/**\n * 세션 콜백에서 자동으로 일일 체크인 처리\n */ async function performDailyCheckin(user) {\n    try {\n        const today = new Date().toISOString().split('T')[0] // YYYY-MM-DD\n        ;\n        const now = new Date();\n        // 오늘 활동 기록이 있는지 확인 (세션에서는 첫 방문 생성만)\n        let todayActivity = await _models_UserActivity__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n            userId: user._id,\n            date: today\n        });\n        // 오늘 활동 기록이 이미 있으면 아무것도 하지 않음\n        if (todayActivity) {\n            return;\n        }\n        // 기존 사용자의 activityStats가 없으면 초기화\n        if (!user.activityStats) {\n            user.activityStats = {\n                totalLoginDays: 0,\n                currentStreak: 0,\n                longestStreak: 0,\n                lastVisitDate: null\n            };\n        }\n        // 오늘 첫 방문 - 새로운 활동 기록 생성\n        todayActivity = new _models_UserActivity__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n            userId: user._id,\n            date: today,\n            visitCount: 1,\n            firstVisitAt: now,\n            lastVisitAt: now\n        });\n        // 연속 접속일 계산\n        const yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        const yesterdayStr = yesterday.toISOString().split('T')[0];\n        if (user.activityStats.lastVisitDate === yesterdayStr) {\n            // 어제 방문했으면 연속 접속일 증가\n            user.activityStats.currentStreak += 1;\n        } else if (user.activityStats.lastVisitDate !== today) {\n            // 어제 방문 안했으면 연속 접속일 초기화 (오늘부터 1일)\n            user.activityStats.currentStreak = 1;\n        }\n        // 최장 연속 접속일 기록 업데이트\n        if (user.activityStats.currentStreak > user.activityStats.longestStreak) {\n            user.activityStats.longestStreak = user.activityStats.currentStreak;\n        }\n        // 총 로그인 날 수 증가\n        user.activityStats.totalLoginDays += 1;\n        user.activityStats.lastVisitDate = today;\n        await todayActivity.save();\n        await user.save();\n        console.log(`🎯 첫 방문 기록 생성: ${user.channelName} - 연속 ${user.activityStats.currentStreak}일`);\n    } catch (error) {\n        console.error('자동 체크인 처리 오류:', error);\n    // 에러가 발생해도 세션 처리는 계속 진행\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGhPcHRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ0E7QUFDb0I7QUFDcEM7QUFDSztBQUNqQjtBQUNMO0FBQ2dCO0FBQ0k7QUFDSTtBQUV4RCx5QkFBeUI7QUFDekIsTUFBTVksWUFBWSxJQUFJQztBQUN0QixNQUFNQyxpQkFBaUIsSUFBSSxLQUFLLEtBQUssS0FBSzs7QUFFMUMsZ0JBQWdCO0FBQ2hCLGVBQWVDLGNBQWNDLFNBQWlCO0lBQzVDLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7SUFDcEIsTUFBTUUsU0FBU1AsVUFBVVEsR0FBRyxDQUFDSjtJQUU3Qix1QkFBdUI7SUFDdkIsSUFBSUcsVUFBVSxNQUFPQSxPQUFPRSxTQUFTLEdBQUlQLGdCQUFnQjtRQUN2RCxPQUFPSyxPQUFPRyxJQUFJO0lBQ3BCO0lBRUEsdUJBQXVCO0lBQ3ZCLElBQUk7UUFDRixNQUFNZix3REFBU0E7UUFDZixNQUFNZ0IsT0FBTyxNQUFNZixvREFBSUEsQ0FBQ2dCLE9BQU8sQ0FBQztZQUFFUjtRQUFVO1FBRTVDLGdCQUFnQjtRQUNoQkosVUFBVWEsR0FBRyxDQUFDVCxXQUFXO1lBQ3ZCTSxNQUFNQztZQUNORixXQUFXSjtRQUNiO1FBRUEsT0FBT007SUFDVCxFQUFFLE9BQU9HLE9BQU87UUFDZCw2QkFBNkI7UUFDN0IsSUFBSVAsUUFBUTtZQUNWUSxRQUFRQyxHQUFHLENBQUMsd0JBQXdCWjtZQUNwQyxPQUFPRyxPQUFPRyxJQUFJO1FBQ3BCO1FBQ0EsTUFBTUk7SUFDUjtBQUNGO0FBRU8sTUFBTUcsY0FBYztJQUN6QkMsV0FBVztRQUNUcEIsbUVBQWFBLENBQUM7WUFDWnFCLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtZQUNyQ0MsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxtQkFBbUI7UUFDL0M7UUFDQXBDLDJFQUFtQkEsQ0FBQztZQUNsQnFDLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxTQUFTO29CQUNQQyxPQUFPO29CQUNQQyxNQUFNO29CQUNOQyxhQUFhO2dCQUNmO1lBQ0Y7WUFDQSxNQUFNQyxXQUFVTCxXQUFXO2dCQUN6QixJQUFJO29CQUNGLElBQUksQ0FBQ0EsYUFBYUMsU0FBUyxPQUFPO29CQUVsQyxNQUFNLEVBQUVLLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUcsTUFBTTdDLCtFQUF1QkEsQ0FBQyxlQUFlc0MsWUFBWUMsT0FBTztvQkFFN0YsSUFBSSxDQUFDTSxZQUFZLENBQUNBLFNBQVNDLFFBQVEsRUFBRSxPQUFPO29CQUU1QyxJQUFJQyxjQUFjO29CQUNsQixJQUFJO3dCQUNGLElBQUlILE9BQU9JLE9BQU8sSUFBSSxPQUFPSixPQUFPSSxPQUFPLENBQUNDLElBQUksS0FBSyxZQUFZOzRCQUMvREYsY0FBYyxNQUFNSCxPQUFPSSxPQUFPLENBQUNDLElBQUksQ0FBQ0osU0FBU0ssVUFBVTt3QkFDN0Q7b0JBQ0YsRUFBRSxPQUFPekIsT0FBTzt3QkFDZEMsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQkY7b0JBQ2hDO29CQUVBLE1BQU1WLFlBQVlnQyxhQUFhaEMsYUFBYThCLFNBQVNLLFVBQVU7b0JBQy9ELE1BQU1DLGNBQWNKLGFBQWFJLGVBQWVOLFNBQVNPLFFBQVEsSUFBSTtvQkFFckUsTUFBTUMsVUFBVXBELGtFQUFjQSxDQUFDYztvQkFDL0IsTUFBTXVDLFlBQVlwRCxnRUFBWUEsQ0FBQ2E7b0JBRS9CLE1BQU13QyxTQUFTO3dCQUNibkIsSUFBSVMsU0FBU0ssVUFBVTt3QkFDdkJiLE1BQU1jO3dCQUNOSyxPQUFPO3dCQUNQQyxPQUFPVixhQUFhVyxtQkFBbUI7d0JBQ3ZDQyxTQUFTO3dCQUNUNUMsV0FBV0E7d0JBQ1hvQyxhQUFhQTt3QkFDYk8saUJBQWlCWCxhQUFhVyxtQkFBbUI7d0JBQ2pERSxlQUFlYixhQUFhYSxpQkFBaUI7d0JBQzdDUDt3QkFDQVEsV0FBV1AsV0FBV1EsUUFBUTtvQkFDaEM7b0JBRUEsSUFBSTt3QkFDRixNQUFNekQsb0VBQWtCQSxDQUFDOzRCQUN2QlUsV0FBV0E7NEJBQ1hvQyxhQUFhQTs0QkFDYlksaUJBQWlCaEIsYUFBYVc7d0JBQ2hDO29CQUNGLEVBQUUsT0FBT00sU0FBUzt3QkFDaEJ0QyxRQUFRRCxLQUFLLENBQUMsaUJBQWlCdUM7b0JBQ2pDO29CQUVBLE9BQU9UO2dCQUNULEVBQUUsT0FBTzlCLE9BQU87b0JBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQkFBa0JBO29CQUNoQyxPQUFPO2dCQUNUO1lBQ0Y7UUFDRjtLQUNEO0lBQ0R3QyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUU3QyxJQUFJLEVBQUU4QyxPQUFPLEVBQUU7WUFDaEMsSUFBSTlDLE1BQU07Z0JBQ1Isd0JBQXdCO2dCQUN4QixJQUFJOEMsU0FBU0MsYUFBYSxTQUFTO29CQUNqQyxNQUFNdEQsWUFBWU8sS0FBS1AsU0FBUyxJQUFJTyxLQUFLYyxFQUFFO29CQUMzQyxNQUFNZSxjQUFjN0IsS0FBSzZCLFdBQVcsSUFBSTdCLEtBQUtlLElBQUk7b0JBQ2pELE1BQU15QixPQUFPM0QscUVBQWlCQSxDQUFDWTtvQkFDL0IsTUFBTXVDLFlBQVlwRCxnRUFBWUEsQ0FBQ2E7b0JBRS9Cb0QsTUFBTVIsT0FBTyxHQUFHO29CQUNoQlEsTUFBTXBELFNBQVMsR0FBR0E7b0JBQ2xCb0QsTUFBTWhCLFdBQVcsR0FBR0E7b0JBQ3BCZ0IsTUFBTVQsZUFBZSxHQUFHcEMsS0FBS29DLGVBQWUsSUFBSXBDLEtBQUttQyxLQUFLO29CQUMxRFUsTUFBTVAsYUFBYSxHQUFHdEMsS0FBS3NDLGFBQWE7b0JBQ3hDTyxNQUFNTCxJQUFJLEdBQUdBO29CQUNiSyxNQUFNZCxPQUFPLEdBQUdqRCwrREFBYUEsQ0FBQzBELE1BQU0sU0FBUzs7b0JBQzdDSyxNQUFNTixTQUFTLEdBQUdQLFdBQVdRLFFBQVE7b0JBRXJDLGdCQUFnQjtvQkFDaEIsSUFBSTt3QkFDRixNQUFNUSxTQUFTLE1BQU1qRSxvRUFBa0JBLENBQUM7NEJBQ3RDVSxXQUFXQTs0QkFDWG9DLGFBQWFBOzRCQUNiWSxpQkFBaUJ6QyxLQUFLb0MsZUFBZSxJQUFJcEMsS0FBS21DLEtBQUs7d0JBQ3JEO3dCQUNBVSxNQUFNSSxNQUFNLEdBQUdELE9BQU9FLEdBQUcsQ0FBQ0MsUUFBUSxHQUFHLDJCQUEyQjs7b0JBQ2xFLEVBQUUsT0FBT1QsU0FBUzt3QkFDaEJ0QyxRQUFRRCxLQUFLLENBQUMsdUJBQXVCdUM7b0JBQ3ZDO2dCQUNGLE9BRUs7b0JBQ0gsTUFBTUYsT0FBTzNELHFFQUFpQkEsQ0FBQ21CLEtBQUtQLFNBQVM7b0JBQzdDLE1BQU11QyxZQUFZcEQsZ0VBQVlBLENBQUNvQixLQUFLUCxTQUFTO29CQUU3Q29ELE1BQU1SLE9BQU8sR0FBR3JDLEtBQUtxQyxPQUFPO29CQUM1QlEsTUFBTXBELFNBQVMsR0FBR08sS0FBS1AsU0FBUztvQkFDaENvRCxNQUFNaEIsV0FBVyxHQUFHN0IsS0FBSzZCLFdBQVc7b0JBQ3BDZ0IsTUFBTVQsZUFBZSxHQUFHcEMsS0FBS29DLGVBQWU7b0JBQzVDUyxNQUFNUCxhQUFhLEdBQUd0QyxLQUFLc0MsYUFBYTtvQkFDeENPLE1BQU1MLElBQUksR0FBR0E7b0JBQ2JLLE1BQU1kLE9BQU8sR0FBR2pELCtEQUFhQSxDQUFDMEQsTUFBTSxTQUFTOztvQkFDN0NLLE1BQU1OLFNBQVMsR0FBR1AsV0FBV1EsUUFBUTtvQkFFckMseUNBQXlDO29CQUN6QyxJQUFJO3dCQUNGLE1BQU1RLFNBQVMsTUFBTWpFLG9FQUFrQkEsQ0FBQzs0QkFDdENVLFdBQVdPLEtBQUtQLFNBQVM7NEJBQ3pCb0MsYUFBYTdCLEtBQUs2QixXQUFXOzRCQUM3QlksaUJBQWlCekMsS0FBS29DLGVBQWU7d0JBQ3ZDO3dCQUNBUyxNQUFNSSxNQUFNLEdBQUdELE9BQU9FLEdBQUcsQ0FBQ0MsUUFBUSxHQUFHLDJCQUEyQjs7b0JBQ2xFLEVBQUUsT0FBT1QsU0FBUzt3QkFDaEJ0QyxRQUFRRCxLQUFLLENBQUMsdUJBQXVCdUM7b0JBQ3ZDO2dCQUNGO1lBQ0Y7WUFDQSxPQUFPRztRQUNUO1FBQ0EsTUFBTU8sU0FBUSxFQUFFQSxPQUFPLEVBQUVQLEtBQUssRUFBRTtZQUM5QixJQUFJQSxTQUFTTyxRQUFRcEQsSUFBSSxFQUFFO2dCQUN6QixjQUFjO2dCQUNkb0QsUUFBUXBELElBQUksQ0FBQ2MsRUFBRSxHQUFHK0IsTUFBTUksTUFBTSxDQUFXLGlCQUFpQjs7Z0JBQzFERyxRQUFRcEQsSUFBSSxDQUFDcUMsT0FBTyxHQUFHUSxNQUFNUixPQUFPLElBQWM7Z0JBQ2xEZSxRQUFRcEQsSUFBSSxDQUFDUCxTQUFTLEdBQUdvRCxNQUFNcEQsU0FBUztnQkFDeEMyRCxRQUFRcEQsSUFBSSxDQUFDaUQsTUFBTSxHQUFHSixNQUFNSSxNQUFNLENBQVcsc0JBQXNCOztnQkFDbkVHLFFBQVFwRCxJQUFJLENBQUNzQyxhQUFhLEdBQUdPLE1BQU1QLGFBQWE7Z0JBQ2hEYyxRQUFRcEQsSUFBSSxDQUFDd0MsSUFBSSxHQUFHSyxNQUFNTCxJQUFJO2dCQUM5QlksUUFBUXBELElBQUksQ0FBQytCLE9BQU8sR0FBR2MsTUFBTWQsT0FBTztnQkFDcENxQixRQUFRcEQsSUFBSSxDQUFDdUMsU0FBUyxHQUFHTSxNQUFNTixTQUFTO2dCQUV4Qyx5QkFBeUI7Z0JBQ3pCYSxRQUFRcEQsSUFBSSxDQUFDNkIsV0FBVyxHQUFHZ0IsTUFBTWhCLFdBQVc7Z0JBQzVDdUIsUUFBUXBELElBQUksQ0FBQ2UsSUFBSSxHQUFHOEIsTUFBTWhCLFdBQVc7Z0JBQ3JDdUIsUUFBUXBELElBQUksQ0FBQ29DLGVBQWUsR0FBR1MsTUFBTVQsZUFBZTtnQkFFcEQsNkJBQTZCO2dCQUM3QixJQUFJO29CQUNGLE1BQU1wQyxPQUFPLE1BQU1SLGNBQWNxRCxNQUFNcEQsU0FBUztvQkFFaEQsSUFBSU8sTUFBTTt3QkFDUixnQ0FBZ0M7d0JBQ2hDb0QsUUFBUXBELElBQUksQ0FBQzZCLFdBQVcsR0FBRzdCLEtBQUs2QixXQUFXO3dCQUMzQ3VCLFFBQVFwRCxJQUFJLENBQUNlLElBQUksR0FBR2YsS0FBS3FELFdBQVcsSUFBSXJELEtBQUs2QixXQUFXO3dCQUN4RHVCLFFBQVFwRCxJQUFJLENBQUNtQyxLQUFLLEdBQUduQyxLQUFLeUMsZUFBZSxJQUFJVyxRQUFRcEQsSUFBSSxDQUFDb0MsZUFBZTt3QkFDekVnQixRQUFRcEQsSUFBSSxDQUFDb0MsZUFBZSxHQUFHcEMsS0FBS3lDLGVBQWUsSUFBSVcsUUFBUXBELElBQUksQ0FBQ29DLGVBQWU7d0JBQ25GZ0IsUUFBUXBELElBQUksQ0FBQ3dDLElBQUksR0FBR3hDLEtBQUt3QyxJQUFJLENBQUMsb0JBQW9COzt3QkFDbERZLFFBQVFwRCxJQUFJLENBQUMrQixPQUFPLEdBQUdqRCwrREFBYUEsQ0FBQ2tCLEtBQUt3QyxJQUFJO3dCQUU5QyxlQUFlO3dCQUNmLE1BQU1jLGdCQUFnQmxFLHNFQUFvQkEsQ0FBQ1k7d0JBQzNDb0QsUUFBUXBELElBQUksQ0FBQ3NELGFBQWEsR0FBR0E7b0JBQy9CO2dCQUNBLDRCQUE0QjtnQkFDOUIsRUFBRSxPQUFPbkQsT0FBTztvQkFDZEMsUUFBUUQsS0FBSyxDQUFDLHlCQUF5QkE7Z0JBQ3ZDLGlDQUFpQztnQkFDakMsNkJBQTZCO2dCQUMvQjtZQUNGO1lBQ0EsT0FBT2lEO1FBQ1Q7SUFDRjtJQUNBRyxPQUFPO1FBQ0xDLFFBQVE7UUFDUnJELE9BQU87SUFDVDtJQUNBaUQsU0FBUztRQUNQSyxVQUFVO0lBQ1o7SUFDQUMsUUFBUWpELFFBQVFDLEdBQUcsQ0FBQ2lELGVBQWU7SUFDbkNDLE9BQU87QUFDVCxFQUFDO0FBRUQsa0RBQWtEO0FBQ2xELE1BQU1DLGVBQWUsSUFBSXZFO0FBRXpCOztDQUVDLEdBQ0QsZUFBZXdFLG9CQUFvQjlELElBQVM7SUFDMUMsSUFBSTtRQUNGLE1BQU0rRCxRQUFRLElBQUlwRSxPQUFPcUUsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhOztRQUNsRSxNQUFNdkUsTUFBTSxJQUFJQztRQUVoQixvQ0FBb0M7UUFDcEMsSUFBSXVFLGdCQUFnQixNQUFNaEYsNERBQVlBLENBQUNlLE9BQU8sQ0FBQztZQUM3Q2dELFFBQVFqRCxLQUFLa0QsR0FBRztZQUNoQmlCLE1BQU1KO1FBQ1I7UUFFQSw4QkFBOEI7UUFDOUIsSUFBSUcsZUFBZTtZQUNqQjtRQUNGO1FBRUEsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQ2xFLEtBQUtvRSxhQUFhLEVBQUU7WUFDdkJwRSxLQUFLb0UsYUFBYSxHQUFHO2dCQUNuQkMsZ0JBQWdCO2dCQUNoQkMsZUFBZTtnQkFDZkMsZUFBZTtnQkFDZkMsZUFBZTtZQUNqQjtRQUNGO1FBRUEseUJBQXlCO1FBQ3pCTixnQkFBZ0IsSUFBSWhGLDREQUFZQSxDQUFDO1lBQy9CK0QsUUFBUWpELEtBQUtrRCxHQUFHO1lBQ2hCaUIsTUFBTUo7WUFDTlUsWUFBWTtZQUNaQyxjQUFjaEY7WUFDZGlGLGFBQWFqRjtRQUNmO1FBRUEsWUFBWTtRQUNaLE1BQU1rRixZQUFZLElBQUlqRjtRQUN0QmlGLFVBQVVDLE9BQU8sQ0FBQ0QsVUFBVUUsT0FBTyxLQUFLO1FBQ3hDLE1BQU1DLGVBQWVILFVBQVVaLFdBQVcsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBRTFELElBQUlqRSxLQUFLb0UsYUFBYSxDQUFDSSxhQUFhLEtBQUtPLGNBQWM7WUFDckQscUJBQXFCO1lBQ3JCL0UsS0FBS29FLGFBQWEsQ0FBQ0UsYUFBYSxJQUFJO1FBQ3RDLE9BQU8sSUFBSXRFLEtBQUtvRSxhQUFhLENBQUNJLGFBQWEsS0FBS1QsT0FBTztZQUNyRCxrQ0FBa0M7WUFDbEMvRCxLQUFLb0UsYUFBYSxDQUFDRSxhQUFhLEdBQUc7UUFDckM7UUFFQSxvQkFBb0I7UUFDcEIsSUFBSXRFLEtBQUtvRSxhQUFhLENBQUNFLGFBQWEsR0FBR3RFLEtBQUtvRSxhQUFhLENBQUNHLGFBQWEsRUFBRTtZQUN2RXZFLEtBQUtvRSxhQUFhLENBQUNHLGFBQWEsR0FBR3ZFLEtBQUtvRSxhQUFhLENBQUNFLGFBQWE7UUFDckU7UUFFQSxlQUFlO1FBQ2Z0RSxLQUFLb0UsYUFBYSxDQUFDQyxjQUFjLElBQUk7UUFDckNyRSxLQUFLb0UsYUFBYSxDQUFDSSxhQUFhLEdBQUdUO1FBRW5DLE1BQU1HLGNBQWNjLElBQUk7UUFDeEIsTUFBTWhGLEtBQUtnRixJQUFJO1FBRWY1RSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxlQUFlLEVBQUVMLEtBQUs2QixXQUFXLENBQUMsTUFBTSxFQUFFN0IsS0FBS29FLGFBQWEsQ0FBQ0UsYUFBYSxDQUFDLENBQUMsQ0FBQztJQUM1RixFQUFFLE9BQU9uRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxpQkFBaUJBO0lBQy9CLHdCQUF3QjtJQUMxQjtBQUNGIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi9hdXRoT3B0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiXG5pbXBvcnQgeyBjcmVhdGVNYW51YWxDaHp6a0NsaWVudCB9IGZyb20gXCJAL2xpYi9jaHp6a0Nvb2tpZU1hbnVhbFwiXG5pbXBvcnQgeyBpc0FkbWluQ2hhbm5lbCwgZ2V0QWRtaW5JbmZvLCBnZXRTdGF0aWNVc2VyUm9sZSB9IGZyb20gXCJAL2xpYi9hZG1pbkNoYW5uZWxzXCJcbmltcG9ydCB7IHJvbGVUb0lzQWRtaW4gfSBmcm9tICdAL2xpYi9wZXJtaXNzaW9ucydcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlVXNlciB9IGZyb20gJ0AvbGliL3VzZXJTZXJ2aWNlJ1xuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICdAL2xpYi9tb25nb2RiJ1xuaW1wb3J0IFVzZXIgZnJvbSAnQC9tb2RlbHMvVXNlcidcbmltcG9ydCBVc2VyQWN0aXZpdHkgZnJvbSAnQC9tb2RlbHMvVXNlckFjdGl2aXR5J1xuaW1wb3J0IENoenprUHJvdmlkZXIgZnJvbSAnQC9saWIvY2h6emtPQXV0aFByb3ZpZGVyJ1xuaW1wb3J0IHsgZ2V0U2VsZWN0ZWRUaXRsZUluZm8gfSBmcm9tICdAL2xpYi90aXRsZVN5c3RlbSdcblxuLy8g7IKs7Jqp7J6QIOygleuztCDrqZTrqqjrpqwg7LqQ7IucICg167aE6rCEIOycoO2aqClcbmNvbnN0IHVzZXJDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGRhdGE6IGFueSwgdGltZXN0YW1wOiBudW1iZXIgfT4oKVxuY29uc3QgQ0FDSEVfRFVSQVRJT04gPSA1ICogNjAgKiAxMDAwIC8vIDXrtoRcblxuLy8g7LqQ7Iuc65CcIOyCrOyaqeyekCDsoJXrs7Qg7KGw7ZqMXG5hc3luYyBmdW5jdGlvbiBnZXRDYWNoZWRVc2VyKGNoYW5uZWxJZDogc3RyaW5nKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3QgY2FjaGVkID0gdXNlckNhY2hlLmdldChjaGFubmVsSWQpXG4gIFxuICAvLyDsupDsi5zqsIAg7J6I6rOgIOyVhOyngSDsnKDtmqjtlZjrqbQg7LqQ7IucIOyCrOyaqVxuICBpZiAoY2FjaGVkICYmIChub3cgLSBjYWNoZWQudGltZXN0YW1wKSA8IENBQ0hFX0RVUkFUSU9OKSB7XG4gICAgcmV0dXJuIGNhY2hlZC5kYXRhXG4gIH1cbiAgXG4gIC8vIOy6kOyLnOqwgCDsl4bqsbDrgpgg66eM66OM65CY7JeI7Jy866m0IERCIOyhsO2ajFxuICB0cnkge1xuICAgIGF3YWl0IGRiQ29ubmVjdCgpXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGNoYW5uZWxJZCB9KVxuICAgIFxuICAgIC8vIOyhsO2ajCDqsrDqs7zrpbwg7LqQ7Iuc7JeQIOyggOyepVxuICAgIHVzZXJDYWNoZS5zZXQoY2hhbm5lbElkLCB7XG4gICAgICBkYXRhOiB1c2VyLFxuICAgICAgdGltZXN0YW1wOiBub3dcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiB1c2VyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gREIg7KGw7ZqMIOyLpO2MqCDsi5wg66eM66OM65CcIOy6kOyLnOudvOuPhCDsnojsnLzrqbQg7IKs7JqpXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgY29uc29sZS5sb2coJ0RCIOyhsO2ajCDsi6TtjKgsIOunjOujjOuQnCDsupDsi5wg7IKs7JqpOicsIGNoYW5uZWxJZClcbiAgICAgIHJldHVybiBjYWNoZWQuZGF0YVxuICAgIH1cbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ2h6emtQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQ0haWktfQ0xJRU5UX0lEISxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQ0haWktfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBpZDogXCJjaHp6ay1jb29raWVcIixcbiAgICAgIG5hbWU6IFwi7LmY7KeA7KeBIOy/oO2CpCDroZzqt7jsnbhcIixcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGNvb2tpZXM6IHsgXG4gICAgICAgICAgbGFiZWw6IFwi7LmY7KeA7KeBIOy/oO2CpFwiLCBcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBwbGFjZWhvbGRlcjogXCJOSURfQVVUPS4uLjsgTklEX1NFUz0uLi5cIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uY29va2llcykgcmV0dXJuIG51bGxcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB7IGNsaWVudCwgdXNlckluZm8gfSA9IGF3YWl0IGNyZWF0ZU1hbnVhbENoenprQ2xpZW50KCdjb29raWUtdXNlcicsIGNyZWRlbnRpYWxzLmNvb2tpZXMpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF1c2VySW5mbyB8fCAhdXNlckluZm8ubG9nZ2VkSW4pIHJldHVybiBudWxsXG4gICAgICAgICAgXG4gICAgICAgICAgbGV0IGNoYW5uZWxJbmZvID0gbnVsbFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoY2xpZW50LmNoYW5uZWwgJiYgdHlwZW9mIGNsaWVudC5jaGFubmVsLmluZm8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgY2hhbm5lbEluZm8gPSBhd2FpdCBjbGllbnQuY2hhbm5lbC5pbmZvKHVzZXJJbmZvLnVzZXJJZEhhc2gpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfssYTrhJAg7KCV67O0IOqwgOyguOyYpOq4sCDsi6TtjKg6JywgZXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IGNoYW5uZWxJbmZvPy5jaGFubmVsSWQgfHwgdXNlckluZm8udXNlcklkSGFzaFxuICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gY2hhbm5lbEluZm8/LmNoYW5uZWxOYW1lIHx8IHVzZXJJbmZvLm5pY2tuYW1lIHx8ICfsuZjsp4Dsp4Eg7IKs7Jqp7J6QJ1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGlzQWRtaW4gPSBpc0FkbWluQ2hhbm5lbChjaGFubmVsSWQpXG4gICAgICAgICAgY29uc3QgYWRtaW5JbmZvID0gZ2V0QWRtaW5JbmZvKGNoYW5uZWxJZClcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBpZDogdXNlckluZm8udXNlcklkSGFzaCxcbiAgICAgICAgICAgIG5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICAgICAgZW1haWw6IG51bGwsXG4gICAgICAgICAgICBpbWFnZTogY2hhbm5lbEluZm8/LmNoYW5uZWxJbWFnZVVybCB8fCBudWxsLFxuICAgICAgICAgICAgbmF2ZXJJZDogbnVsbCxcbiAgICAgICAgICAgIGNoYW5uZWxJZDogY2hhbm5lbElkLFxuICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICAgICAgY2hhbm5lbEltYWdlVXJsOiBjaGFubmVsSW5mbz8uY2hhbm5lbEltYWdlVXJsIHx8IG51bGwsXG4gICAgICAgICAgICBmb2xsb3dlckNvdW50OiBjaGFubmVsSW5mbz8uZm9sbG93ZXJDb3VudCB8fCBudWxsLFxuICAgICAgICAgICAgaXNBZG1pbixcbiAgICAgICAgICAgIGFkbWluUm9sZTogYWRtaW5JbmZvPy5yb2xlIHx8IG51bGwsXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjcmVhdGVPclVwZGF0ZVVzZXIoe1xuICAgICAgICAgICAgICBjaGFubmVsSWQ6IGNoYW5uZWxJZCxcbiAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNoYW5uZWxOYW1lLFxuICAgICAgICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IGNoYW5uZWxJbmZvPy5jaGFubmVsSW1hZ2VVcmxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign7IKs7Jqp7J6QIERCIOyggOyepSDsmKTrpZg6JywgZGJFcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+y5mOyngOyngSDsv6DtgqQg66Gc6re47J24IOyYpOulmDonLCBlcnJvcilcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgLy8gT0F1dGgg67Cp7IudICjsuZjsp4Dsp4Eg6rO17IudIEFQSSlcbiAgICAgICAgaWYgKGFjY291bnQ/LnByb3ZpZGVyID09PSAnY2h6emsnKSB7XG4gICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gdXNlci5jaGFubmVsSWQgfHwgdXNlci5pZFxuICAgICAgICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gdXNlci5jaGFubmVsTmFtZSB8fCB1c2VyLm5hbWVcbiAgICAgICAgICBjb25zdCByb2xlID0gZ2V0U3RhdGljVXNlclJvbGUoY2hhbm5lbElkKVxuICAgICAgICAgIGNvbnN0IGFkbWluSW5mbyA9IGdldEFkbWluSW5mbyhjaGFubmVsSWQpXG4gICAgICAgICAgXG4gICAgICAgICAgdG9rZW4ubmF2ZXJJZCA9IG51bGxcbiAgICAgICAgICB0b2tlbi5jaGFubmVsSWQgPSBjaGFubmVsSWRcbiAgICAgICAgICB0b2tlbi5jaGFubmVsTmFtZSA9IGNoYW5uZWxOYW1lXG4gICAgICAgICAgdG9rZW4uY2hhbm5lbEltYWdlVXJsID0gdXNlci5jaGFubmVsSW1hZ2VVcmwgfHwgdXNlci5pbWFnZVxuICAgICAgICAgIHRva2VuLmZvbGxvd2VyQ291bnQgPSB1c2VyLmZvbGxvd2VyQ291bnRcbiAgICAgICAgICB0b2tlbi5yb2xlID0gcm9sZVxuICAgICAgICAgIHRva2VuLmlzQWRtaW4gPSByb2xlVG9Jc0FkbWluKHJvbGUpIC8vIO2VmOychCDtmLjtmZjshLFcbiAgICAgICAgICB0b2tlbi5hZG1pblJvbGUgPSBhZG1pbkluZm8/LnJvbGUgfHwgbnVsbFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIOyCrOyaqeyekCDsoJXrs7QgRELsl5Ag7KCA7J6lXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRiVXNlciA9IGF3YWl0IGNyZWF0ZU9yVXBkYXRlVXNlcih7XG4gICAgICAgICAgICAgIGNoYW5uZWxJZDogY2hhbm5lbElkLFxuICAgICAgICAgICAgICBjaGFubmVsTmFtZTogY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICAgIHByb2ZpbGVJbWFnZVVybDogdXNlci5jaGFubmVsSW1hZ2VVcmwgfHwgdXNlci5pbWFnZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRva2VuLnVzZXJJZCA9IGRiVXNlci5faWQudG9TdHJpbmcoKSAvLyBNb25nb0RCIE9iamVjdElk66W8IO2GoO2BsOyXkCDsoIDsnqVcbiAgICAgICAgICB9IGNhdGNoIChkYkVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdPQXV0aCDsgqzsmqnsnpAgREIg7KCA7J6lIOyYpOulmDonLCBkYkVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyDsv6DtgqQg67Cp7IudICjquLDsobQg66Gc7KeBKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCByb2xlID0gZ2V0U3RhdGljVXNlclJvbGUodXNlci5jaGFubmVsSWQpXG4gICAgICAgICAgY29uc3QgYWRtaW5JbmZvID0gZ2V0QWRtaW5JbmZvKHVzZXIuY2hhbm5lbElkKVxuICAgICAgICAgIFxuICAgICAgICAgIHRva2VuLm5hdmVySWQgPSB1c2VyLm5hdmVySWRcbiAgICAgICAgICB0b2tlbi5jaGFubmVsSWQgPSB1c2VyLmNoYW5uZWxJZFxuICAgICAgICAgIHRva2VuLmNoYW5uZWxOYW1lID0gdXNlci5jaGFubmVsTmFtZVxuICAgICAgICAgIHRva2VuLmNoYW5uZWxJbWFnZVVybCA9IHVzZXIuY2hhbm5lbEltYWdlVXJsXG4gICAgICAgICAgdG9rZW4uZm9sbG93ZXJDb3VudCA9IHVzZXIuZm9sbG93ZXJDb3VudFxuICAgICAgICAgIHRva2VuLnJvbGUgPSByb2xlXG4gICAgICAgICAgdG9rZW4uaXNBZG1pbiA9IHJvbGVUb0lzQWRtaW4ocm9sZSkgLy8g7ZWY7JyEIO2YuO2ZmOyEsVxuICAgICAgICAgIHRva2VuLmFkbWluUm9sZSA9IGFkbWluSW5mbz8ucm9sZSB8fCBudWxsXG4gICAgICAgICAgXG4gICAgICAgICAgLy8g7L+g7YKkIOuwqeyLneyXkOyEnOuPhCBEQuyXkCDsgqzsmqnsnpAg7KCV67O0IOyggOyepe2VmOqzoCBPYmplY3RJZCDqsIDsoLjsmKTquLBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgY3JlYXRlT3JVcGRhdGVVc2VyKHtcbiAgICAgICAgICAgICAgY2hhbm5lbElkOiB1c2VyLmNoYW5uZWxJZCxcbiAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IHVzZXIuY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICAgIHByb2ZpbGVJbWFnZVVybDogdXNlci5jaGFubmVsSW1hZ2VVcmxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0b2tlbi51c2VySWQgPSBkYlVzZXIuX2lkLnRvU3RyaW5nKCkgLy8gTW9uZ29EQiBPYmplY3RJZOulvCDthqDtgbDsl5Ag7KCA7J6lXG4gICAgICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign7L+g7YKkIOuwqeyLnSDsgqzsmqnsnpAgREIg7KCA7J6lIOyYpOulmDonLCBkYkVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuXG4gICAgfSxcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgaWYgKHRva2VuICYmIHNlc3Npb24udXNlcikge1xuICAgICAgICAvLyDquLDrs7gg7Yag7YGwIOygleuztCDshKTsoJVcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4udXNlcklkIGFzIHN0cmluZyAvLyBOZXh0QXV0aCDtkZzspIAg7ZWE65OcXG4gICAgICAgIHNlc3Npb24udXNlci5uYXZlcklkID0gdG9rZW4ubmF2ZXJJZCBhcyBzdHJpbmcgfHwgbnVsbFxuICAgICAgICBzZXNzaW9uLnVzZXIuY2hhbm5lbElkID0gdG9rZW4uY2hhbm5lbElkIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIudXNlcklkID0gdG9rZW4udXNlcklkIGFzIHN0cmluZyAvLyBNb25nb0RCIE9iamVjdElkIOy2lOqwgFxuICAgICAgICBzZXNzaW9uLnVzZXIuZm9sbG93ZXJDb3VudCA9IHRva2VuLmZvbGxvd2VyQ291bnQgYXMgbnVtYmVyXG4gICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZSBhcyBzdHJpbmdcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlzQWRtaW4gPSB0b2tlbi5pc0FkbWluIGFzIGJvb2xlYW5cbiAgICAgICAgc2Vzc2lvbi51c2VyLmFkbWluUm9sZSA9IHRva2VuLmFkbWluUm9sZSBhcyBzdHJpbmdcbiAgICAgICAgXG4gICAgICAgIC8vIOq4sOuzuCDshLjshZgg7KCV67O0IOuovOyggCDshKTsoJUgKO2GoO2BsCDquLDrsJgpXG4gICAgICAgIHNlc3Npb24udXNlci5jaGFubmVsTmFtZSA9IHRva2VuLmNoYW5uZWxOYW1lIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIubmFtZSA9IHRva2VuLmNoYW5uZWxOYW1lIGFzIHN0cmluZ1xuICAgICAgICBzZXNzaW9uLnVzZXIuY2hhbm5lbEltYWdlVXJsID0gdG9rZW4uY2hhbm5lbEltYWdlVXJsIGFzIHN0cmluZ1xuICAgICAgICBcbiAgICAgICAgLy8g7LqQ7Iuc65CcIOyCrOyaqeyekCDsoJXrs7Qg6rCA7KC47Jik6riwICjshKDtg53soIEg7JeF642w7J207Yq4KVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDYWNoZWRVc2VyKHRva2VuLmNoYW5uZWxJZCBhcyBzdHJpbmcpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIERC7JeQ7IScIOqwgOyguOyYqCDsoJXrs7TroZwg7JeF642w7J207Yq4ICjquLDsobQg7KCV67O0IOuNruyWtOyUgClcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5jaGFubmVsTmFtZSA9IHVzZXIuY2hhbm5lbE5hbWVcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdXNlci5kaXNwbGF5TmFtZSB8fCB1c2VyLmNoYW5uZWxOYW1lXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuaW1hZ2UgPSB1c2VyLnByb2ZpbGVJbWFnZVVybCB8fCBzZXNzaW9uLnVzZXIuY2hhbm5lbEltYWdlVXJsXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuY2hhbm5lbEltYWdlVXJsID0gdXNlci5wcm9maWxlSW1hZ2VVcmwgfHwgc2Vzc2lvbi51c2VyLmNoYW5uZWxJbWFnZVVybFxuICAgICAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB1c2VyLnJvbGUgLy8gRELsl5DshJwg6rCA7KC47JioIOy1nOyLoCDqtoztlZwg7IKs7JqpXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuaXNBZG1pbiA9IHJvbGVUb0lzQWRtaW4odXNlci5yb2xlIGFzIGFueSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g7ISg7YOd65CcIOy5re2YuCDsoJXrs7Qg7LaU6rCAXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRpdGxlID0gZ2V0U2VsZWN0ZWRUaXRsZUluZm8odXNlcilcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5zZWxlY3RlZFRpdGxlID0gc2VsZWN0ZWRUaXRsZVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBEQuyXkCDsgqzsmqnsnpDqsIAg7JeG7Jy866m0IOq4sOuzuCDsoJXrs7Qg6re464yA66GcIOyCrOyaqVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+yEuOyFmCDsvZzrsLHsl5DshJwg7IKs7Jqp7J6QIOygleuztCDsobDtmowg7Jik66WYOicsIGVycm9yKVxuICAgICAgICAgIC8vIERCIOyXsOqysCDsi6TtjKgg7IucIOq4sOuzuCDsoJXrs7Qo7Yag7YGwIOq4sOuwmCkg6re464yA66GcIOyCrOyaqVxuICAgICAgICAgIC8vIOuzhOuPhCDsspjrpqwg67aI7ZWE7JqUIC0g7J2066+4IOychOyXkOyEnCDquLDrs7jqsJIg7ISk7KCV65CoXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uXG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nLFxuICAgIGVycm9yOiAnL2F1dGgvZXJyb3InLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIgYXMgY29uc3QsXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBkZWJ1ZzogZmFsc2UsIC8vIOuUlOuyhOq3uCDrqqjrk5wg67mE7Zmc7ISx7ZmUXG59XG5cbi8vIOykkeuztSDssrTtgazsnbgg67Cp7KeA66W8IOychO2VnCDrqZTrqqjrpqwg7LqQ7IucICh1c2VySWQ6ZGF0ZSAtPiB0aW1lc3RhbXApXG5jb25zdCBjaGVja2luQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG5cbi8qKlxuICog7IS47IWYIOy9nOuwseyXkOyEnCDsnpDrj5nsnLzroZwg7J287J28IOyytO2BrOyduCDsspjrpqxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybURhaWx5Q2hlY2tpbih1c2VyOiBhbnkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdIC8vIFlZWVktTU0tRERcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgXG4gICAgLy8g7Jik64qYIO2ZnOuPmSDquLDroZ3snbQg7J6I64qU7KeAIO2ZleyduCAo7IS47IWY7JeQ7ISc64qUIOyyqyDrsKnrrLgg7IOd7ISx66eMKVxuICAgIGxldCB0b2RheUFjdGl2aXR5ID0gYXdhaXQgVXNlckFjdGl2aXR5LmZpbmRPbmUoe1xuICAgICAgdXNlcklkOiB1c2VyLl9pZCxcbiAgICAgIGRhdGU6IHRvZGF5XG4gICAgfSlcblxuICAgIC8vIOyYpOuKmCDtmZzrj5kg6riw66Gd7J20IOydtOuvuCDsnojsnLzrqbQg7JWE66y06rKD64+EIO2VmOyngCDslYrsnYxcbiAgICBpZiAodG9kYXlBY3Rpdml0eSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8g6riw7KG0IOyCrOyaqeyekOydmCBhY3Rpdml0eVN0YXRz6rCAIOyXhuycvOuptCDstIjquLDtmZRcbiAgICBpZiAoIXVzZXIuYWN0aXZpdHlTdGF0cykge1xuICAgICAgdXNlci5hY3Rpdml0eVN0YXRzID0ge1xuICAgICAgICB0b3RhbExvZ2luRGF5czogMCxcbiAgICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgICAgbG9uZ2VzdFN0cmVhazogMCxcbiAgICAgICAgbGFzdFZpc2l0RGF0ZTogbnVsbCxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDsmKTripgg7LKrIOuwqeusuCAtIOyDiOuhnOyatCDtmZzrj5kg6riw66GdIOyDneyEsVxuICAgIHRvZGF5QWN0aXZpdHkgPSBuZXcgVXNlckFjdGl2aXR5KHtcbiAgICAgIHVzZXJJZDogdXNlci5faWQsXG4gICAgICBkYXRlOiB0b2RheSxcbiAgICAgIHZpc2l0Q291bnQ6IDEsXG4gICAgICBmaXJzdFZpc2l0QXQ6IG5vdyxcbiAgICAgIGxhc3RWaXNpdEF0OiBub3dcbiAgICB9KVxuXG4gICAgLy8g7Jew7IaNIOygkeyGjeydvCDqs4TsgrBcbiAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSgpXG4gICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpXG4gICAgY29uc3QgeWVzdGVyZGF5U3RyID0geWVzdGVyZGF5LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuXG4gICAgaWYgKHVzZXIuYWN0aXZpdHlTdGF0cy5sYXN0VmlzaXREYXRlID09PSB5ZXN0ZXJkYXlTdHIpIHtcbiAgICAgIC8vIOyWtOygnCDrsKnrrLjtlojsnLzrqbQg7Jew7IaNIOygkeyGjeydvCDspp3qsIBcbiAgICAgIHVzZXIuYWN0aXZpdHlTdGF0cy5jdXJyZW50U3RyZWFrICs9IDFcbiAgICB9IGVsc2UgaWYgKHVzZXIuYWN0aXZpdHlTdGF0cy5sYXN0VmlzaXREYXRlICE9PSB0b2RheSkge1xuICAgICAgLy8g7Ja07KCcIOuwqeusuCDslYjtlojsnLzrqbQg7Jew7IaNIOygkeyGjeydvCDstIjquLDtmZQgKOyYpOuKmOu2gO2EsCAx7J28KVxuICAgICAgdXNlci5hY3Rpdml0eVN0YXRzLmN1cnJlbnRTdHJlYWsgPSAxXG4gICAgfVxuXG4gICAgLy8g7LWc7J6lIOyXsOyGjSDsoJHsho3snbwg6riw66GdIOyXheuNsOydtO2KuFxuICAgIGlmICh1c2VyLmFjdGl2aXR5U3RhdHMuY3VycmVudFN0cmVhayA+IHVzZXIuYWN0aXZpdHlTdGF0cy5sb25nZXN0U3RyZWFrKSB7XG4gICAgICB1c2VyLmFjdGl2aXR5U3RhdHMubG9uZ2VzdFN0cmVhayA9IHVzZXIuYWN0aXZpdHlTdGF0cy5jdXJyZW50U3RyZWFrXG4gICAgfVxuXG4gICAgLy8g7LSdIOuhnOq3uOyduCDrgqAg7IiYIOymneqwgFxuICAgIHVzZXIuYWN0aXZpdHlTdGF0cy50b3RhbExvZ2luRGF5cyArPSAxXG4gICAgdXNlci5hY3Rpdml0eVN0YXRzLmxhc3RWaXNpdERhdGUgPSB0b2RheVxuXG4gICAgYXdhaXQgdG9kYXlBY3Rpdml0eS5zYXZlKClcbiAgICBhd2FpdCB1c2VyLnNhdmUoKVxuXG4gICAgY29uc29sZS5sb2coYPCfjq8g7LKrIOuwqeusuCDquLDroZ0g7IOd7ISxOiAke3VzZXIuY2hhbm5lbE5hbWV9IC0g7Jew7IaNICR7dXNlci5hY3Rpdml0eVN0YXRzLmN1cnJlbnRTdHJlYWt97J28YClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfsnpDrj5kg7LK07YGs7J24IOyymOumrCDsmKTrpZg6JywgZXJyb3IpXG4gICAgLy8g7JeQ65+s6rCAIOuwnOyDne2VtOuPhCDshLjshZgg7LKY66as64qUIOqzhOyGjSDsp4TtlolcbiAgfVxufSJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiY3JlYXRlTWFudWFsQ2h6emtDbGllbnQiLCJpc0FkbWluQ2hhbm5lbCIsImdldEFkbWluSW5mbyIsImdldFN0YXRpY1VzZXJSb2xlIiwicm9sZVRvSXNBZG1pbiIsImNyZWF0ZU9yVXBkYXRlVXNlciIsImRiQ29ubmVjdCIsIlVzZXIiLCJVc2VyQWN0aXZpdHkiLCJDaHp6a1Byb3ZpZGVyIiwiZ2V0U2VsZWN0ZWRUaXRsZUluZm8iLCJ1c2VyQ2FjaGUiLCJNYXAiLCJDQUNIRV9EVVJBVElPTiIsImdldENhY2hlZFVzZXIiLCJjaGFubmVsSWQiLCJub3ciLCJEYXRlIiwiY2FjaGVkIiwiZ2V0IiwidGltZXN0YW1wIiwiZGF0YSIsInVzZXIiLCJmaW5kT25lIiwic2V0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJDSFpaS19DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJDSFpaS19DTElFTlRfU0VDUkVUIiwiaWQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJjb29raWVzIiwibGFiZWwiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJhdXRob3JpemUiLCJjbGllbnQiLCJ1c2VySW5mbyIsImxvZ2dlZEluIiwiY2hhbm5lbEluZm8iLCJjaGFubmVsIiwiaW5mbyIsInVzZXJJZEhhc2giLCJjaGFubmVsTmFtZSIsIm5pY2tuYW1lIiwiaXNBZG1pbiIsImFkbWluSW5mbyIsInJlc3VsdCIsImVtYWlsIiwiaW1hZ2UiLCJjaGFubmVsSW1hZ2VVcmwiLCJuYXZlcklkIiwiZm9sbG93ZXJDb3VudCIsImFkbWluUm9sZSIsInJvbGUiLCJwcm9maWxlSW1hZ2VVcmwiLCJkYkVycm9yIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJhY2NvdW50IiwicHJvdmlkZXIiLCJkYlVzZXIiLCJ1c2VySWQiLCJfaWQiLCJ0b1N0cmluZyIsInNlc3Npb24iLCJkaXNwbGF5TmFtZSIsInNlbGVjdGVkVGl0bGUiLCJwYWdlcyIsInNpZ25JbiIsInN0cmF0ZWd5Iiwic2VjcmV0IiwiTkVYVEFVVEhfU0VDUkVUIiwiZGVidWciLCJjaGVja2luQ2FjaGUiLCJwZXJmb3JtRGFpbHlDaGVja2luIiwidG9kYXkiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwidG9kYXlBY3Rpdml0eSIsImRhdGUiLCJhY3Rpdml0eVN0YXRzIiwidG90YWxMb2dpbkRheXMiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImxhc3RWaXNpdERhdGUiLCJ2aXNpdENvdW50IiwiZmlyc3RWaXNpdEF0IiwibGFzdFZpc2l0QXQiLCJ5ZXN0ZXJkYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInllc3RlcmRheVN0ciIsInNhdmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authOptions.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/chzzkCookieManual.ts":
/*!**************************************!*\
  !*** ./src/lib/chzzkCookieManual.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addManualChzzkCookie: () => (/* binding */ addManualChzzkCookie),\n/* harmony export */   createManualChzzkClient: () => (/* binding */ createManualChzzkClient),\n/* harmony export */   getManualCookies: () => (/* binding */ getManualCookies),\n/* harmony export */   printCookieGuide: () => (/* binding */ printCookieGuide),\n/* harmony export */   removeManualCookie: () => (/* binding */ removeManualCookie)\n/* harmony export */ });\n/* harmony import */ var chzzk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chzzk */ \"(rsc)/./node_modules/chzzk/dist/index.js\");\n/* harmony import */ var chzzk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(chzzk__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * 수동 쿠키 입력 및 관리 시스템\n * 자동 인증이 실패할 경우를 대비한 수동 방법\n */ \n// 수동으로 설정할 수 있는 치지직 쿠키 저장소\nconst MANUAL_CHZZK_COOKIES = {\n};\n/**\n * 수동 쿠키를 추가하는 함수 (개발자 도구용)\n */ function addManualChzzkCookie(naverId, cookies) {\n    MANUAL_CHZZK_COOKIES[naverId] = cookies;\n    console.log(`수동 쿠키 추가됨: ${naverId}`);\n}\n/**\n * 수동 쿠키를 사용해서 치지직 클라이언트 생성\n */ async function createManualChzzkClient(naverId, providedCookies) {\n    console.log('=== 수동 쿠키로 치지직 클라이언트 생성 ===');\n    // 직접 제공된 쿠키가 있으면 우선 사용\n    const cookies = providedCookies || MANUAL_CHZZK_COOKIES[naverId];\n    if (!cookies) {\n        console.log(`네이버 ID ${naverId}에 대한 수동 쿠키가 없습니다`);\n        return {\n            client: new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient(),\n            userInfo: null\n        };\n    }\n    try {\n        console.log('수동 쿠키로 클라이언트 생성:', cookies.substring(0, 50) + '...');\n        console.log('전체 쿠키 길이:', cookies.length);\n        // 쿠키에서 NID_AUT와 NID_SES 추출\n        const nidAuth = cookies.match(/NID_AUT=([^;]+)/)?.[1];\n        const nidSession = cookies.match(/NID_SES=([^;]+)/)?.[1];\n        console.log('추출된 NID_AUT:', nidAuth ? nidAuth.substring(0, 20) + '...' : 'null');\n        console.log('추출된 NID_SES:', nidSession ? nidSession.substring(0, 20) + '...' : 'null');\n        if (!nidAuth || !nidSession) {\n            console.log('필수 쿠키 (NID_AUT 또는 NID_SES)가 없습니다');\n            return {\n                client: new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient(),\n                userInfo: null\n            };\n        }\n        // 치지직 비공식 API 클라이언트 생성 (올바른 방식)\n        const client = new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient({\n            nidAuth: nidAuth,\n            nidSession: nidSession\n        });\n        console.log('ChzzkClient 생성 완료, 사용자 정보 조회 시도...');\n        // 다양한 API 메서드 시도\n        let userInfo = null;\n        try {\n            console.log('client.user() 메서드 시도...');\n            userInfo = await client.user();\n            console.log('client.user() 결과:', JSON.stringify(userInfo, null, 2));\n        } catch (userError) {\n            console.log('client.user() 실패:', userError);\n            try {\n                console.log('client.me.user() 메서드 시도...');\n                userInfo = await client.me.user();\n                console.log('client.me.user() 결과:', JSON.stringify(userInfo, null, 2));\n            } catch (meError) {\n                console.log('client.me.user() 실패:', meError);\n                try {\n                    console.log('client.me 프로퍼티 확인...');\n                    console.log('client.me:', client.me);\n                    if (client.me && typeof client.me.user === 'function') {\n                        userInfo = await client.me.user();\n                        console.log('client.me.user() 재시도 결과:', JSON.stringify(userInfo, null, 2));\n                    }\n                } catch (me2Error) {\n                    console.log('client.me 재시도 실패:', me2Error);\n                }\n            }\n        }\n        if (userInfo && userInfo.loggedIn) {\n            console.log('수동 쿠키 인증 성공!');\n            return {\n                client,\n                userInfo\n            };\n        } else {\n            console.log('사용자 정보 조회 실패, 하지만 클라이언트는 생성됨');\n            return {\n                client,\n                userInfo: null\n            };\n        }\n    } catch (error) {\n        console.log('수동 쿠키 클라이언트 생성 실패:', error);\n        console.log('error.message:', error instanceof Error ? error.message : 'Unknown error');\n        return {\n            client: new chzzk__WEBPACK_IMPORTED_MODULE_0__.ChzzkClient(),\n            userInfo: null\n        };\n    }\n}\n/**\n * 쿠키 설정 가이드 출력\n */ function printCookieGuide(naverId) {\n    console.log('=== 치지직 쿠키 수동 설정 가이드 ===');\n    console.log('1. 브라우저에서 https://chzzk.naver.com 에 로그인');\n    console.log('2. 개발자 도구 (F12) → Application/Storage → Cookies');\n    console.log('3. NID_AUT와 NID_SES 쿠키 값을 복사');\n    console.log('4. 다음 코드를 브라우저 콘솔에서 실행:');\n    console.log(``);\n    console.log(`   // 쿠키 값을 여기에 입력`);\n    console.log(`   const cookies = \"NID_AUT=당신의_NID_AUT_값; NID_SES=당신의_NID_SES_값\"`);\n    console.log(`   `);\n    console.log(`   // API 호출`);\n    console.log(`   fetch('/api/admin/set-manual-cookie', {`);\n    console.log(`     method: 'POST',`);\n    console.log(`     headers: { 'Content-Type': 'application/json' },`);\n    console.log(`     body: JSON.stringify({`);\n    console.log(`       naverId: '${naverId}',`);\n    console.log(`       cookies: cookies`);\n    console.log(`     })`);\n    console.log(`   })`);\n    console.log('');\n    console.log('5. 로그아웃 후 다시 로그인하여 테스트');\n}\n/**\n * 현재 등록된 수동 쿠키 목록 조회\n */ function getManualCookies() {\n    return {\n        ...MANUAL_CHZZK_COOKIES\n    };\n}\n/**\n * 수동 쿠키 삭제\n */ function removeManualCookie(naverId) {\n    delete MANUAL_CHZZK_COOKIES[naverId];\n    console.log(`수동 쿠키 삭제됨: ${naverId}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUFHLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQztJQUNyQ0QsUUFBUUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3JCRCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDbkJELFFBQVFDLEdBQUcsQ0FBQztJQUNaRCxRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBOztDQUVDLEdBQ00sU0FBU3NCO0lBQ2QsT0FBTztRQUFFLEdBQUczQixvQkFBb0I7SUFBQztBQUNuQztBQUVBOztDQUVDLEdBQ00sU0FBUzRCLG1CQUFtQjFCLE9BQWU7SUFDaEQsT0FBT0Ysb0JBQW9CLENBQUNFLFFBQVE7SUFDcENFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRUgsU0FBUztBQUNyQyIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9saWIvY2h6emtDb29raWVNYW51YWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDsiJjrj5kg7L+g7YKkIOyeheugpSDrsI8g6rSA66asIOyLnOyKpO2FnFxuICog7J6Q64+ZIOyduOymneydtCDsi6TtjKjtlaAg6rK97Jqw66W8IOuMgOu5hO2VnCDsiJjrj5kg67Cp67KVXG4gKi9cblxuaW1wb3J0IHsgQ2h6emtDbGllbnQgfSBmcm9tICdjaHp6aydcblxuLy8g7IiY64+Z7Jy866GcIOyEpOygle2VoCDsiJgg7J6I64qUIOy5mOyngOyngSDsv6DtgqQg7KCA7J6l7IaMXG5jb25zdCBNQU5VQUxfQ0haWktfQ09PS0lFUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8g64Sk7J2067KEIElEOiDsuZjsp4Dsp4Eg7L+g7YKkIOunpO2VkVxuICAvLyDsmIg6ICdNZTVwN19Gd0ZXMHdoeFNOd2V0WUJTa2dSQ0JoVGt1VndpLTc3bkZpZUNJJzogJ05JRF9BVVQ9Li4uOyBOSURfU0VTPS4uLidcbn1cblxuLyoqXG4gKiDsiJjrj5kg7L+g7YKk66W8IOy2lOqwgO2VmOuKlCDtlajsiJggKOqwnOuwnOyekCDrj4TqtazsmqkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRNYW51YWxDaHp6a0Nvb2tpZShuYXZlcklkOiBzdHJpbmcsIGNvb2tpZXM6IHN0cmluZykge1xuICBNQU5VQUxfQ0haWktfQ09PS0lFU1tuYXZlcklkXSA9IGNvb2tpZXNcbiAgY29uc29sZS5sb2coYOyImOuPmSDsv6DtgqQg7LaU6rCA65CoOiAke25hdmVySWR9YClcbn1cblxuLyoqXG4gKiDsiJjrj5kg7L+g7YKk66W8IOyCrOyaqe2VtOyEnCDsuZjsp4Dsp4Eg7YG065287J207Ja47Yq4IOyDneyEsVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWFudWFsQ2h6emtDbGllbnQobmF2ZXJJZDogc3RyaW5nLCBwcm92aWRlZENvb2tpZXM/OiBzdHJpbmcpIHtcbiAgY29uc29sZS5sb2coJz09PSDsiJjrj5kg7L+g7YKk66GcIOy5mOyngOyngSDtgbTrnbzsnbTslrjtirgg7IOd7ISxID09PScpXG4gIFxuICAvLyDsp4HsoJEg7KCc6rO165CcIOy/oO2CpOqwgCDsnojsnLzrqbQg7Jqw7ISgIOyCrOyaqVxuICBjb25zdCBjb29raWVzID0gcHJvdmlkZWRDb29raWVzIHx8IE1BTlVBTF9DSFpaS19DT09LSUVTW25hdmVySWRdXG4gIFxuICBpZiAoIWNvb2tpZXMpIHtcbiAgICBjb25zb2xlLmxvZyhg64Sk7J2067KEIElEICR7bmF2ZXJJZH3sl5Ag64yA7ZWcIOyImOuPmSDsv6DtgqTqsIAg7JeG7Iq164uI64ukYClcbiAgICByZXR1cm4geyBjbGllbnQ6IG5ldyBDaHp6a0NsaWVudCgpLCB1c2VySW5mbzogbnVsbCB9XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ+yImOuPmSDsv6DtgqTroZwg7YG065287J207Ja47Yq4IOyDneyEsTonLCBjb29raWVzLnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJylcbiAgICBjb25zb2xlLmxvZygn7KCE7LK0IOy/oO2CpCDquLjsnbQ6JywgY29va2llcy5sZW5ndGgpXG4gICAgXG4gICAgLy8g7L+g7YKk7JeQ7IScIE5JRF9BVVTsmYAgTklEX1NFUyDstpTstpxcbiAgICBjb25zdCBuaWRBdXRoID0gY29va2llcy5tYXRjaCgvTklEX0FVVD0oW147XSspLyk/LlsxXVxuICAgIGNvbnN0IG5pZFNlc3Npb24gPSBjb29raWVzLm1hdGNoKC9OSURfU0VTPShbXjtdKykvKT8uWzFdXG4gICAgXG4gICAgY29uc29sZS5sb2coJ+y2lOy2nOuQnCBOSURfQVVUOicsIG5pZEF1dGggPyBuaWRBdXRoLnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJyA6ICdudWxsJylcbiAgICBjb25zb2xlLmxvZygn7LaU7Lac65CcIE5JRF9TRVM6JywgbmlkU2Vzc2lvbiA/IG5pZFNlc3Npb24uc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nIDogJ251bGwnKVxuICAgIFxuICAgIGlmICghbmlkQXV0aCB8fCAhbmlkU2Vzc2lvbikge1xuICAgICAgY29uc29sZS5sb2coJ+2VhOyImCDsv6DtgqQgKE5JRF9BVVQg65iQ64qUIE5JRF9TRVMp6rCAIOyXhuyKteuLiOuLpCcpXG4gICAgICByZXR1cm4geyBjbGllbnQ6IG5ldyBDaHp6a0NsaWVudCgpLCB1c2VySW5mbzogbnVsbCB9XG4gICAgfVxuICAgIFxuICAgIC8vIOy5mOyngOyngSDruYTqs7Xsi50gQVBJIO2BtOudvOydtOyWuO2KuCDsg53shLEgKOyYrOuwlOuluCDrsKnsi50pXG4gICAgY29uc3QgY2xpZW50ID0gbmV3IENoenprQ2xpZW50KHtcbiAgICAgIG5pZEF1dGg6IG5pZEF1dGgsXG4gICAgICBuaWRTZXNzaW9uOiBuaWRTZXNzaW9uXG4gICAgfSlcbiAgICBcbiAgICBjb25zb2xlLmxvZygnQ2h6emtDbGllbnQg7IOd7ISxIOyZhOujjCwg7IKs7Jqp7J6QIOygleuztCDsobDtmowg7Iuc64+ELi4uJylcbiAgICBcbiAgICAvLyDri6TslpHtlZwgQVBJIOuplOyEnOuTnCDsi5zrj4RcbiAgICBsZXQgdXNlckluZm8gPSBudWxsXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdjbGllbnQudXNlcigpIOuplOyEnOuTnCDsi5zrj4QuLi4nKVxuICAgICAgdXNlckluZm8gPSBhd2FpdCBjbGllbnQudXNlcigpXG4gICAgICBjb25zb2xlLmxvZygnY2xpZW50LnVzZXIoKSDqsrDqs7w6JywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8sIG51bGwsIDIpKVxuICAgIH0gY2F0Y2ggKHVzZXJFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ2NsaWVudC51c2VyKCkg7Iuk7YyoOicsIHVzZXJFcnJvcilcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudC5tZS51c2VyKCkg66mU7ISc65OcIOyLnOuPhC4uLicpXG4gICAgICAgIHVzZXJJbmZvID0gYXdhaXQgY2xpZW50Lm1lLnVzZXIoKVxuICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lLnVzZXIoKSDqsrDqs7w6JywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8sIG51bGwsIDIpKVxuICAgICAgfSBjYXRjaCAobWVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lLnVzZXIoKSDsi6TtjKg6JywgbWVFcnJvcilcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudC5tZSDtlITroZztjbzti7Ag7ZmV7J24Li4uJylcbiAgICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lOicsIGNsaWVudC5tZSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoY2xpZW50Lm1lICYmIHR5cGVvZiBjbGllbnQubWUudXNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXNlckluZm8gPSBhd2FpdCBjbGllbnQubWUudXNlcigpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50Lm1lLnVzZXIoKSDsnqzsi5zrj4Qg6rKw6rO8OicsIEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvLCBudWxsLCAyKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKG1lMkVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudC5tZSDsnqzsi5zrj4Qg7Iuk7YyoOicsIG1lMkVycm9yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICh1c2VySW5mbyAmJiB1c2VySW5mby5sb2dnZWRJbikge1xuICAgICAgY29uc29sZS5sb2coJ+yImOuPmSDsv6DtgqQg7J247KadIOyEseqztSEnKVxuICAgICAgcmV0dXJuIHsgY2xpZW50LCB1c2VySW5mbyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfsgqzsmqnsnpAg7KCV67O0IOyhsO2ajCDsi6TtjKgsIO2VmOyngOunjCDtgbTrnbzsnbTslrjtirjripQg7IOd7ISx65CoJylcbiAgICAgIHJldHVybiB7IGNsaWVudCwgdXNlckluZm86IG51bGwgfVxuICAgIH1cbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygn7IiY64+ZIOy/oO2CpCDtgbTrnbzsnbTslrjtirgg7IOd7ISxIOyLpO2MqDonLCBlcnJvcilcbiAgICBjb25zb2xlLmxvZygnZXJyb3IubWVzc2FnZTonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJylcbiAgICByZXR1cm4geyBjbGllbnQ6IG5ldyBDaHp6a0NsaWVudCgpLCB1c2VySW5mbzogbnVsbCB9XG4gIH1cbn1cblxuLyoqXG4gKiDsv6DtgqQg7ISk7KCVIOqwgOydtOuTnCDstpzroKVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaW50Q29va2llR3VpZGUobmF2ZXJJZDogc3RyaW5nKSB7XG4gIGNvbnNvbGUubG9nKCc9PT0g7LmY7KeA7KeBIOy/oO2CpCDsiJjrj5kg7ISk7KCVIOqwgOydtOuTnCA9PT0nKVxuICBjb25zb2xlLmxvZygnMS4g67iM65287Jqw7KCA7JeQ7IScIGh0dHBzOi8vY2h6emsubmF2ZXIuY29tIOyXkCDroZzqt7jsnbgnKVxuICBjb25zb2xlLmxvZygnMi4g6rCc67Cc7J6QIOuPhOq1rCAoRjEyKSDihpIgQXBwbGljYXRpb24vU3RvcmFnZSDihpIgQ29va2llcycpXG4gIGNvbnNvbGUubG9nKCczLiBOSURfQVVU7JmAIE5JRF9TRVMg7L+g7YKkIOqwkuydhCDrs7XsgqwnKVxuICBjb25zb2xlLmxvZygnNC4g64uk7J2MIOy9lOuTnOulvCDruIzrnbzsmrDsoIAg7L2Y7IaU7JeQ7IScIOyLpO2WiTonKVxuICBjb25zb2xlLmxvZyhgYClcbiAgY29uc29sZS5sb2coYCAgIC8vIOy/oO2CpCDqsJLsnYQg7Jes6riw7JeQIOyeheugpWApXG4gIGNvbnNvbGUubG9nKGAgICBjb25zdCBjb29raWVzID0gXCJOSURfQVVUPeuLueyLoOydmF9OSURfQVVUX+qwkjsgTklEX1NFUz3ri7nsi6DsnZhfTklEX1NFU1/qsJJcImApXG4gIGNvbnNvbGUubG9nKGAgICBgKVxuICBjb25zb2xlLmxvZyhgICAgLy8gQVBJIO2YuOy2nGApXG4gIGNvbnNvbGUubG9nKGAgICBmZXRjaCgnL2FwaS9hZG1pbi9zZXQtbWFudWFsLWNvb2tpZScsIHtgKVxuICBjb25zb2xlLmxvZyhgICAgICBtZXRob2Q6ICdQT1NUJyxgKVxuICBjb25zb2xlLmxvZyhgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxgKVxuICBjb25zb2xlLmxvZyhgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YClcbiAgY29uc29sZS5sb2coYCAgICAgICBuYXZlcklkOiAnJHtuYXZlcklkfScsYClcbiAgY29uc29sZS5sb2coYCAgICAgICBjb29raWVzOiBjb29raWVzYClcbiAgY29uc29sZS5sb2coYCAgICAgfSlgKVxuICBjb25zb2xlLmxvZyhgICAgfSlgKVxuICBjb25zb2xlLmxvZygnJylcbiAgY29uc29sZS5sb2coJzUuIOuhnOq3uOyVhOybgyDtm4Qg64uk7IucIOuhnOq3uOyduO2VmOyXrCDthYzsiqTtirgnKVxufVxuXG4vKipcbiAqIO2YhOyerCDrk7HroZ3rkJwg7IiY64+ZIOy/oO2CpCDrqqnroZ0g7KGw7ZqMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYW51YWxDb29raWVzKCkge1xuICByZXR1cm4geyAuLi5NQU5VQUxfQ0haWktfQ09PS0lFUyB9XG59XG5cbi8qKlxuICog7IiY64+ZIOy/oO2CpCDsgq3soJxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1hbnVhbENvb2tpZShuYXZlcklkOiBzdHJpbmcpIHtcbiAgZGVsZXRlIE1BTlVBTF9DSFpaS19DT09LSUVTW25hdmVySWRdXG4gIGNvbnNvbGUubG9nKGDsiJjrj5kg7L+g7YKkIOyCreygnOuQqDogJHtuYXZlcklkfWApXG59Il0sIm5hbWVzIjpbIkNoenprQ2xpZW50IiwiTUFOVUFMX0NIWlpLX0NPT0tJRVMiLCJhZGRNYW51YWxDaHp6a0Nvb2tpZSIsIm5hdmVySWQiLCJjb29raWVzIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZU1hbnVhbENoenprQ2xpZW50IiwicHJvdmlkZWRDb29raWVzIiwiY2xpZW50IiwidXNlckluZm8iLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJuaWRBdXRoIiwibWF0Y2giLCJuaWRTZXNzaW9uIiwidXNlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1c2VyRXJyb3IiLCJtZSIsIm1lRXJyb3IiLCJtZTJFcnJvciIsImxvZ2dlZEluIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJwcmludENvb2tpZUd1aWRlIiwiZ2V0TWFudWFsQ29va2llcyIsInJlbW92ZU1hbnVhbENvb2tpZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/chzzkCookieManual.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/chzzkOAuthProvider.ts":
/*!***************************************!*\
  !*** ./src/lib/chzzkOAuthProvider.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChzzkProvider)\n/* harmony export */ });\n// 토큰을 저장할 임시 변수\nlet currentAccessToken = null;\nfunction ChzzkProvider(options) {\n    return {\n        id: \"chzzk\",\n        name: \"치지직\",\n        type: \"oauth\",\n        authorization: {\n            url: \"https://chzzk.naver.com/account-interlock\",\n            params: {\n                clientId: options.clientId,\n                redirectUri: `${process.env.NEXTAUTH_URL}/api/auth/callback/chzzk`,\n                response_type: \"code\"\n            }\n        },\n        // 디버깅을 위한 로그\n        ... true && {\n            debug: true\n        },\n        token: {\n            url: \"https://chzzk.naver.com/auth/v1/token\",\n            async request (context) {\n                const response = await fetch(\"https://chzzk.naver.com/auth/v1/token\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        grantType: \"authorization_code\",\n                        clientId: options.clientId,\n                        clientSecret: options.clientSecret,\n                        code: context.params.code,\n                        state: context.params.state\n                    })\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    console.error('치지직 토큰 요청 실패:', {\n                        status: response.status,\n                        statusText: response.statusText,\n                        error: errorText,\n                        clientId: options.clientId,\n                        redirectUri: `${process.env.NEXTAUTH_URL}/api/auth/callback/chzzk`\n                    });\n                    // API 승인 관련 오류인지 확인\n                    if (response.status === 401 || response.status === 403) {\n                        throw new Error(`치지직 API 승인이 필요합니다. 클라이언트 ID/SECRET을 확인하거나 API 승인 상태를 확인하세요. (${response.status})`);\n                    }\n                    throw new Error(`Token request failed: ${response.status} - ${errorText}`);\n                }\n                const tokens = await response.json();\n                const result = {\n                    access_token: tokens.content?.accessToken || tokens.accessToken,\n                    refresh_token: tokens.content?.refreshToken || tokens.refreshToken,\n                    token_type: tokens.content?.tokenType || tokens.tokenType || \"Bearer\",\n                    expires_in: tokens.content?.expiresIn || tokens.expiresIn || 86400\n                };\n                // 토큰을 임시 변수에 저장\n                currentAccessToken = result.access_token;\n                return result;\n            }\n        },\n        userinfo: {\n            url: \"https://chzzk.naver.com/open/v1/users/me\",\n            async request (context) {\n                // context에서 토큰을 가져오거나 임시 저장된 토큰 사용\n                const accessToken = context.tokens?.access_token || currentAccessToken;\n                // 액세스 토큰이 없으면 로그인 실패\n                if (!accessToken) {\n                    throw new Error('Access token not found');\n                }\n                // 치지직 공식 사용자 정보 API 호출\n                try {\n                    const response = await fetch(\"https://openapi.chzzk.naver.com/open/v1/users/me\", {\n                        method: \"GET\",\n                        headers: {\n                            Authorization: `Bearer ${accessToken}`,\n                            \"Content-Type\": \"application/json\"\n                        }\n                    });\n                    if (response.ok) {\n                        const userData = await response.json();\n                        const content = userData.content || userData;\n                        if (content.channelId && content.channelName) {\n                            return {\n                                userIdHash: content.channelId,\n                                nickname: content.channelName || content.nickname,\n                                profileImageUrl: content.profileImageUrl || content.channelImageUrl,\n                                channelId: content.channelId,\n                                channelName: content.channelName || content.nickname,\n                                channelImageUrl: content.channelImageUrl,\n                                followerCount: content.followerCount || 0\n                            };\n                        }\n                    } else {\n                        const errorText = await response.text();\n                        console.error('치지직 사용자 정보 API 호출 실패:', {\n                            status: response.status,\n                            statusText: response.statusText,\n                            error: errorText,\n                            accessToken: accessToken ? '토큰 있음' : '토큰 없음'\n                        });\n                        // API 승인 관련 오류인지 확인\n                        if (response.status === 401 || response.status === 403) {\n                            throw new Error(`치지직 API 승인이 필요합니다. 개발자 콘솔에서 API 승인 상태를 확인하세요. (${response.status})`);\n                        }\n                    }\n                // 공식 API 응답이 유효하지 않음\n                } catch (error) {\n                    console.error('치지직 공식 API 호출 실패:', error);\n                    // API 승인 관련 오류라면 더 명확한 메시지 표시\n                    if (error.message && error.message.includes('승인')) {\n                        throw error;\n                    }\n                }\n                // Fallback API들 시도\n                const fallbackUrls = [\n                    'https://api.chzzk.naver.com/open/v1/users/me',\n                    'https://comm-api.game.naver.com/nng_main/v1/user/getUserStatus'\n                ];\n                for (const url of fallbackUrls){\n                    try {\n                        const response = await fetch(url, {\n                            method: \"GET\",\n                            headers: {\n                                Authorization: `Bearer ${accessToken}`,\n                                \"Content-Type\": \"application/json\"\n                            }\n                        });\n                        if (response.ok) {\n                            const responseText = await response.text();\n                            // HTML 응답 건너뛰기\n                            if (responseText.includes('<!doctype html>')) continue;\n                            const userData = JSON.parse(responseText);\n                            const content = userData.content || userData.response || userData;\n                            if (content.channelId && content.channelName) {\n                                return {\n                                    userIdHash: content.channelId,\n                                    nickname: content.channelName,\n                                    profileImageUrl: content.profileImageUrl || content.channelImageUrl,\n                                    channelId: content.channelId,\n                                    channelName: content.channelName,\n                                    channelImageUrl: content.channelImageUrl,\n                                    followerCount: content.followerCount || 0\n                                };\n                            }\n                        }\n                    } catch (error) {\n                        continue;\n                    }\n                }\n                // 모든 API 실패\n                throw new Error('Chzzk user info API failed');\n            }\n        },\n        profile (profile) {\n            return {\n                id: profile.userIdHash,\n                name: profile.channelName || profile.nickname,\n                email: null,\n                image: profile.channelImageUrl || profile.profileImageUrl,\n                channelId: profile.channelId || profile.userIdHash,\n                channelName: profile.channelName || profile.nickname,\n                channelImageUrl: profile.channelImageUrl,\n                followerCount: profile.followerCount\n            };\n        },\n        ...options\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VyxRQUFRVCxRQUFRO2dCQUM3Q1UsT0FBTztnQkFDUEMsT0FBT0YsUUFBUVAsZUFBZSxJQUFJTyxRQUFRUixlQUFlO2dCQUN6REosV0FBV1ksUUFBUVosU0FBUyxJQUFJWSxRQUFRVixVQUFVO2dCQUNsREQsYUFBYVcsUUFBUVgsV0FBVyxJQUFJVyxRQUFRVCxRQUFRO2dCQUNwREUsaUJBQWlCTyxRQUFRUCxlQUFlO2dCQUN4Q0MsZUFBZU0sUUFBUU4sYUFBYTtZQUN0QztRQUNGO1FBQ0EsR0FBR3pELE9BQU87SUFDWjtBQUNGIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi9jaHp6a09BdXRoUHJvdmlkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT0F1dGhDb25maWcsIE9BdXRoVXNlckNvbmZpZyB9IGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL29hdXRoXCJcblxuZXhwb3J0IGludGVyZmFjZSBDaHp6a1Byb2ZpbGUge1xuICB1c2VySWRIYXNoOiBzdHJpbmdcbiAgbmlja25hbWU6IHN0cmluZ1xuICBwcm9maWxlSW1hZ2VVcmw/OiBzdHJpbmdcbiAgY2hhbm5lbElkPzogc3RyaW5nXG4gIGNoYW5uZWxOYW1lPzogc3RyaW5nXG4gIGNoYW5uZWxJbWFnZVVybD86IHN0cmluZ1xuICBmb2xsb3dlckNvdW50PzogbnVtYmVyXG59XG5cbi8vIO2GoO2BsOydhCDsoIDsnqXtlaAg7J6E7IucIOuzgOyImFxubGV0IGN1cnJlbnRBY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGxcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2h6emtQcm92aWRlcihcbiAgb3B0aW9uczogT0F1dGhVc2VyQ29uZmlnPENoenprUHJvZmlsZT5cbik6IE9BdXRoQ29uZmlnPENoenprUHJvZmlsZT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImNoenprXCIsXG4gICAgbmFtZTogXCLsuZjsp4Dsp4FcIixcbiAgICB0eXBlOiBcIm9hdXRoXCIsXG4gICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgdXJsOiBcImh0dHBzOi8vY2h6emsubmF2ZXIuY29tL2FjY291bnQtaW50ZXJsb2NrXCIsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgIHJlZGlyZWN0VXJpOiBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L2FwaS9hdXRoL2NhbGxiYWNrL2NoenprYCxcbiAgICAgICAgcmVzcG9uc2VfdHlwZTogXCJjb2RlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgLy8g65SU67KE6rmF7J2EIOychO2VnCDroZzqt7hcbiAgICAuLi4ocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYge1xuICAgICAgZGVidWc6IHRydWVcbiAgICB9KSxcbiAgICB0b2tlbjoge1xuICAgICAgdXJsOiBcImh0dHBzOi8vY2h6emsubmF2ZXIuY29tL2F1dGgvdjEvdG9rZW5cIixcbiAgICAgIGFzeW5jIHJlcXVlc3QoY29udGV4dCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9jaHp6ay5uYXZlci5jb20vYXV0aC92MS90b2tlblwiLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGdyYW50VHlwZTogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcbiAgICAgICAgICAgIGNvZGU6IGNvbnRleHQucGFyYW1zLmNvZGUsXG4gICAgICAgICAgICBzdGF0ZTogY29udGV4dC5wYXJhbXMuc3RhdGUsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+y5mOyngOyngSDthqDtgbAg7JqU7LKtIOyLpO2MqDonLCB7XG4gICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JUZXh0LFxuICAgICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgICByZWRpcmVjdFVyaTogYCR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS9hcGkvYXV0aC9jYWxsYmFjay9jaHp6a2BcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFQSSDsirnsnbgg6rSA66CoIOyYpOulmOyduOyngCDtmZXsnbhcbiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg7LmY7KeA7KeBIEFQSSDsirnsnbjsnbQg7ZWE7JqU7ZWp64uI64ukLiDtgbTrnbzsnbTslrjtirggSUQvU0VDUkVU7J2EIO2ZleyduO2VmOqxsOuCmCBBUEkg7Iq57J24IOyDge2DnOulvCDtmZXsnbjtlZjshLjsmpQuICgke3Jlc3BvbnNlLnN0YXR1c30pYClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiByZXF1ZXN0IGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5zLmNvbnRlbnQ/LmFjY2Vzc1Rva2VuIHx8IHRva2Vucy5hY2Nlc3NUb2tlbixcbiAgICAgICAgICByZWZyZXNoX3Rva2VuOiB0b2tlbnMuY29udGVudD8ucmVmcmVzaFRva2VuIHx8IHRva2Vucy5yZWZyZXNoVG9rZW4sXG4gICAgICAgICAgdG9rZW5fdHlwZTogdG9rZW5zLmNvbnRlbnQ/LnRva2VuVHlwZSB8fCB0b2tlbnMudG9rZW5UeXBlIHx8IFwiQmVhcmVyXCIsXG4gICAgICAgICAgZXhwaXJlc19pbjogdG9rZW5zLmNvbnRlbnQ/LmV4cGlyZXNJbiB8fCB0b2tlbnMuZXhwaXJlc0luIHx8IDg2NDAwLFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDthqDtgbDsnYQg7J6E7IucIOuzgOyImOyXkCDsoIDsnqVcbiAgICAgICAgY3VycmVudEFjY2Vzc1Rva2VuID0gcmVzdWx0LmFjY2Vzc190b2tlblxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfSxcbiAgICB9LFxuICAgIHVzZXJpbmZvOiB7XG4gICAgICB1cmw6IFwiaHR0cHM6Ly9jaHp6ay5uYXZlci5jb20vb3Blbi92MS91c2Vycy9tZVwiLFxuICAgICAgYXN5bmMgcmVxdWVzdChjb250ZXh0KSB7XG4gICAgICAgIC8vIGNvbnRleHTsl5DshJwg7Yag7YGw7J2EIOqwgOyguOyYpOqxsOuCmCDsnoTsi5wg7KCA7J6l65CcIO2GoO2BsCDsgqzsmqlcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBjb250ZXh0LnRva2Vucz8uYWNjZXNzX3Rva2VuIHx8IGN1cnJlbnRBY2Nlc3NUb2tlblxuICAgICAgICBcbiAgICAgICAgLy8g7JWh7IS47IqkIO2GoO2BsOydtCDsl4bsnLzrqbQg66Gc6re47J24IOyLpO2MqFxuICAgICAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY2Nlc3MgdG9rZW4gbm90IGZvdW5kJylcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g7LmY7KeA7KeBIOqzteyLnSDsgqzsmqnsnpAg7KCV67O0IEFQSSDtmLjstpxcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9vcGVuYXBpLmNoenprLm5hdmVyLmNvbS9vcGVuL3YxL3VzZXJzL21lXCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB1c2VyRGF0YS5jb250ZW50IHx8IHVzZXJEYXRhXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjb250ZW50LmNoYW5uZWxJZCAmJiBjb250ZW50LmNoYW5uZWxOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkSGFzaDogY29udGVudC5jaGFubmVsSWQsXG4gICAgICAgICAgICAgICAgbmlja25hbWU6IGNvbnRlbnQuY2hhbm5lbE5hbWUgfHwgY29udGVudC5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IGNvbnRlbnQucHJvZmlsZUltYWdlVXJsIHx8IGNvbnRlbnQuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxJZDogY29udGVudC5jaGFubmVsSWQsXG4gICAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNvbnRlbnQuY2hhbm5lbE5hbWUgfHwgY29udGVudC5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgICBjaGFubmVsSW1hZ2VVcmw6IGNvbnRlbnQuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICAgICAgICAgIGZvbGxvd2VyQ291bnQ6IGNvbnRlbnQuZm9sbG93ZXJDb3VudCB8fCAwLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign7LmY7KeA7KeBIOyCrOyaqeyekCDsoJXrs7QgQVBJIO2YuOy2nCDsi6TtjKg6Jywge1xuICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yVGV4dCxcbiAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VuID8gJ+2GoO2BsCDsnojsnYwnIDogJ+2GoO2BsCDsl4bsnYwnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBUEkg7Iq57J24IOq0gOugqCDsmKTrpZjsnbjsp4Ag7ZmV7J24XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDsuZjsp4Dsp4EgQVBJIOyKueyduOydtCDtlYTsmpTtlanri4jri6QuIOqwnOuwnOyekCDsvZjshpTsl5DshJwgQVBJIOyKueyduCDsg4Htg5zrpbwg7ZmV7J247ZWY7IS47JqULiAoJHtyZXNwb25zZS5zdGF0dXN9KWApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIOqzteyLnSBBUEkg7J2R64u17J20IOycoO2aqO2VmOyngCDslYrsnYxcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfsuZjsp4Dsp4Eg6rO17IudIEFQSSDtmLjstpwg7Iuk7YyoOicsIGVycm9yKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFQSSDsirnsnbgg6rSA66CoIOyYpOulmOudvOuptCDrjZQg66qF7ZmV7ZWcIOuplOyLnOyngCDtkZzsi5xcbiAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCfsirnsnbgnKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEZhbGxiYWNrIEFQSeuTpCDsi5zrj4RcbiAgICAgICAgY29uc3QgZmFsbGJhY2tVcmxzID0gW1xuICAgICAgICAgICdodHRwczovL2FwaS5jaHp6ay5uYXZlci5jb20vb3Blbi92MS91c2Vycy9tZScsXG4gICAgICAgICAgJ2h0dHBzOi8vY29tbS1hcGkuZ2FtZS5uYXZlci5jb20vbm5nX21haW4vdjEvdXNlci9nZXRVc2VyU3RhdHVzJ1xuICAgICAgICBdXG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiBmYWxsYmFja1VybHMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBIVE1MIOydkeuLtSDqsbTrhIjrm7DquLBcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlVGV4dC5pbmNsdWRlcygnPCFkb2N0eXBlIGh0bWw+JykpIGNvbnRpbnVlXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KVxuICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gdXNlckRhdGEuY29udGVudCB8fCB1c2VyRGF0YS5yZXNwb25zZSB8fCB1c2VyRGF0YVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuY2hhbm5lbElkICYmIGNvbnRlbnQuY2hhbm5lbE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgdXNlcklkSGFzaDogY29udGVudC5jaGFubmVsSWQsXG4gICAgICAgICAgICAgICAgICBuaWNrbmFtZTogY29udGVudC5jaGFubmVsTmFtZSxcbiAgICAgICAgICAgICAgICAgIHByb2ZpbGVJbWFnZVVybDogY29udGVudC5wcm9maWxlSW1hZ2VVcmwgfHwgY29udGVudC5jaGFubmVsSW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgICBjaGFubmVsSWQ6IGNvbnRlbnQuY2hhbm5lbElkLFxuICAgICAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNvbnRlbnQuY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICAgICAgICBjaGFubmVsSW1hZ2VVcmw6IGNvbnRlbnQuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICAgICAgICAgICAgZm9sbG93ZXJDb3VudDogY29udGVudC5mb2xsb3dlckNvdW50IHx8IDAsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIOqwnOuzhCDsi6TtjKjripQg66y07Iuc7ZWY6rOgIOuLpOydjCBVUkwg7Iuc64+EXG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g66qo65OgIEFQSSDsi6TtjKhcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaHp6ayB1c2VyIGluZm8gQVBJIGZhaWxlZCcpXG4gICAgICB9LFxuICAgIH0sXG4gICAgcHJvZmlsZShwcm9maWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcHJvZmlsZS51c2VySWRIYXNoLFxuICAgICAgICBuYW1lOiBwcm9maWxlLmNoYW5uZWxOYW1lIHx8IHByb2ZpbGUubmlja25hbWUsXG4gICAgICAgIGVtYWlsOiBudWxsLFxuICAgICAgICBpbWFnZTogcHJvZmlsZS5jaGFubmVsSW1hZ2VVcmwgfHwgcHJvZmlsZS5wcm9maWxlSW1hZ2VVcmwsXG4gICAgICAgIGNoYW5uZWxJZDogcHJvZmlsZS5jaGFubmVsSWQgfHwgcHJvZmlsZS51c2VySWRIYXNoLFxuICAgICAgICBjaGFubmVsTmFtZTogcHJvZmlsZS5jaGFubmVsTmFtZSB8fCBwcm9maWxlLm5pY2tuYW1lLFxuICAgICAgICBjaGFubmVsSW1hZ2VVcmw6IHByb2ZpbGUuY2hhbm5lbEltYWdlVXJsLFxuICAgICAgICBmb2xsb3dlckNvdW50OiBwcm9maWxlLmZvbGxvd2VyQ291bnQsXG4gICAgICB9XG4gICAgfSxcbiAgICAuLi5vcHRpb25zLFxuICB9XG59Il0sIm5hbWVzIjpbImN1cnJlbnRBY2Nlc3NUb2tlbiIsIkNoenprUHJvdmlkZXIiLCJvcHRpb25zIiwiaWQiLCJuYW1lIiwidHlwZSIsImF1dGhvcml6YXRpb24iLCJ1cmwiLCJwYXJhbXMiLCJjbGllbnRJZCIsInJlZGlyZWN0VXJpIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsInJlc3BvbnNlX3R5cGUiLCJkZWJ1ZyIsInRva2VuIiwicmVxdWVzdCIsImNvbnRleHQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZ3JhbnRUeXBlIiwiY2xpZW50U2VjcmV0IiwiY29kZSIsInN0YXRlIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIkVycm9yIiwidG9rZW5zIiwianNvbiIsInJlc3VsdCIsImFjY2Vzc190b2tlbiIsImNvbnRlbnQiLCJhY2Nlc3NUb2tlbiIsInJlZnJlc2hfdG9rZW4iLCJyZWZyZXNoVG9rZW4iLCJ0b2tlbl90eXBlIiwidG9rZW5UeXBlIiwiZXhwaXJlc19pbiIsImV4cGlyZXNJbiIsInVzZXJpbmZvIiwiQXV0aG9yaXphdGlvbiIsInVzZXJEYXRhIiwiY2hhbm5lbElkIiwiY2hhbm5lbE5hbWUiLCJ1c2VySWRIYXNoIiwibmlja25hbWUiLCJwcm9maWxlSW1hZ2VVcmwiLCJjaGFubmVsSW1hZ2VVcmwiLCJmb2xsb3dlckNvdW50IiwibWVzc2FnZSIsImluY2x1ZGVzIiwiZmFsbGJhY2tVcmxzIiwicmVzcG9uc2VUZXh0IiwicGFyc2UiLCJwcm9maWxlIiwiZW1haWwiLCJpbWFnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/chzzkOAuthProvider.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ dbConnect),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        // console.log('🔄 기존 MongoDB 연결 재사용');\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        // console.log('🚀 새로운 MongoDB 연결 시작...');\n        // console.log('📍 MongoDB URI:', MONGODB_URI ? 'URI 설정됨' : 'URI 없음');\n        const opts = {\n            bufferCommands: false,\n            serverSelectionTimeoutMS: 5000,\n            connectTimeoutMS: 5000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            // console.log('✅ MongoDB 연결 성공!');\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        console.error('❌ MongoDB 연결 실패:', e);\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFM0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUcsTUFDUjtBQUVKO0FBV0EsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZix1Q0FBdUM7UUFDdkMsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLDBDQUEwQztRQUMxQyxzRUFBc0U7UUFFdEUsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLDBCQUEwQjtZQUMxQkMsa0JBQWtCO1FBQ3BCO1FBRUFSLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWNTLE1BQU1LLElBQUksQ0FBQyxDQUFDZjtZQUMxRCxtQ0FBbUM7WUFDbkMsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9RLEdBQUc7UUFDVkMsUUFBUUMsS0FBSyxDQUFDLG9CQUFvQkY7UUFDbENYLE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNUTtJQUNSO0lBRUEsT0FBT1gsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDO0FBQ2lCIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi9tb25nb2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG5cbmlmICghTU9OR09EQl9VUkkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCdcbiAgKTtcbn1cblxuaW50ZXJmYWNlIE1vbmdvb3NlQ2FjaGUge1xuICBjb25uOiB0eXBlb2YgbW9uZ29vc2UgfCBudWxsO1xuICBwcm9taXNlOiBQcm9taXNlPHR5cGVvZiBtb25nb29zZT4gfCBudWxsO1xufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIHZhciBtb25nb29zZTogTW9uZ29vc2VDYWNoZTtcbn1cblxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcblxuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRiQ29ubmVjdCgpOiBQcm9taXNlPHR5cGVvZiBtb25nb29zZT4ge1xuICBpZiAoY2FjaGVkLmNvbm4pIHtcbiAgICAvLyBjb25zb2xlLmxvZygn8J+UhCDquLDsobQgTW9uZ29EQiDsl7DqsrAg7J6s7IKs7JqpJyk7XG4gICAgcmV0dXJuIGNhY2hlZC5jb25uO1xuICB9XG5cbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCfwn5qAIOyDiOuhnOyatCBNb25nb0RCIOyXsOqysCDsi5zsnpEuLi4nKTtcbiAgICAvLyBjb25zb2xlLmxvZygn8J+TjSBNb25nb0RCIFVSSTonLCBNT05HT0RCX1VSSSA/ICdVUkkg7ISk7KCV65CoJyA6ICdVUkkg7JeG7J2MJyk7XG4gICAgXG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCwgLy8gNey0iOuhnCDri6jstpVcbiAgICAgIGNvbm5lY3RUaW1lb3V0TVM6IDUwMDAsXG4gICAgfTtcblxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSEsIG9wdHMpLnRoZW4oKG1vbmdvb3NlKSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZygn4pyFIE1vbmdvREIg7Jew6rKwIOyEseqztSEnKTtcbiAgICAgIHJldHVybiBtb25nb29zZTtcbiAgICB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBNb25nb0RCIOyXsOqysCDsi6TtjKg6JywgZSk7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIHRocm93IGU7XG4gIH1cblxuICByZXR1cm4gY2FjaGVkLmNvbm47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDtcbmV4cG9ydCB7IGRiQ29ubmVjdCBhcyBjb25uZWN0VG9EYXRhYmFzZSB9OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJjb25uZWN0VGltZW91dE1TIiwiY29ubmVjdCIsInRoZW4iLCJlIiwiY29uc29sZSIsImVycm9yIiwiY29ubmVjdFRvRGF0YWJhc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/permissions.ts":
/*!********************************!*\
  !*** ./src/lib/permissions.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Permission: () => (/* binding */ Permission),\n/* harmony export */   UserRole: () => (/* binding */ UserRole),\n/* harmony export */   canAccessAdminPanel: () => (/* binding */ canAccessAdminPanel),\n/* harmony export */   canManageSongs: () => (/* binding */ canManageSongs),\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   isSuperAdmin: () => (/* binding */ isSuperAdmin),\n/* harmony export */   roleToIsAdmin: () => (/* binding */ roleToIsAdmin)\n/* harmony export */ });\nvar UserRole = /*#__PURE__*/ function(UserRole) {\n    UserRole[\"SUPER_ADMIN\"] = \"super_admin\";\n    UserRole[\"SONG_ADMIN\"] = \"song_admin\";\n    UserRole[\"AYAUKE_ADMIN\"] = \"ayauke_admin\";\n    UserRole[\"SONG_EDITOR\"] = \"song_editor\";\n    UserRole[\"USER\"] = \"user\";\n    return UserRole;\n}({});\nvar Permission = /*#__PURE__*/ function(Permission) {\n    // 시스템 관리\n    Permission[\"SYSTEM_ADMIN\"] = \"system.admin\";\n    Permission[\"USER_MANAGE\"] = \"users.manage\";\n    // 노래 관리\n    Permission[\"SONGS_VIEW\"] = \"songs.view\";\n    Permission[\"SONGS_CREATE\"] = \"songs.create\";\n    Permission[\"SONGS_EDIT\"] = \"songs.edit\";\n    Permission[\"SONGS_DELETE\"] = \"songs.delete\";\n    Permission[\"SONGS_BULK_EDIT\"] = \"songs.bulk_edit\";\n    Permission[\"SONGS_STATS\"] = \"songs.stats\";\n    return Permission;\n}({});\nconst ROLE_PERMISSIONS = {\n    [\"super_admin\"]: [\n        \"system.admin\",\n        \"users.manage\",\n        \"songs.view\",\n        \"songs.create\",\n        \"songs.edit\",\n        \"songs.delete\",\n        \"songs.bulk_edit\",\n        \"songs.stats\"\n    ],\n    [\"song_admin\"]: [\n        \"songs.view\",\n        \"songs.create\",\n        \"songs.edit\",\n        \"songs.delete\",\n        \"songs.bulk_edit\",\n        \"songs.stats\"\n    ],\n    [\"ayauke_admin\"]: [\n        \"songs.view\",\n        \"songs.create\",\n        \"songs.edit\",\n        \"songs.delete\",\n        \"songs.bulk_edit\",\n        \"songs.stats\"\n    ],\n    [\"song_editor\"]: [\n        \"songs.view\",\n        \"songs.edit\",\n        \"songs.stats\"\n    ],\n    [\"user\"]: []\n};\nfunction hasPermission(userRole, permission) {\n    const permissions = ROLE_PERMISSIONS[userRole] || [];\n    return permissions.includes(permission);\n}\nfunction canAccessAdminPanel(role) {\n    return role !== \"user\";\n}\nfunction isSuperAdmin(role) {\n    return role === \"super_admin\";\n}\nfunction canManageSongs(role) {\n    return hasPermission(role, \"songs.view\");\n}\n// 하위 호환성을 위한 임시 함수 (나중에 제거)\nfunction roleToIsAdmin(role) {\n    return role !== \"user\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Blcm1pc3Npb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBTyxzQ0FBS0E7Ozs7OztXQUFBQTtNQU1YO0FBRU0sd0NBQUtDO0lBQ1YsU0FBUzs7O0lBSVQsUUFBUTs7Ozs7OztXQUxFQTtNQVlYO0FBRUQsTUFBTUMsbUJBQW1CO0lBQ3ZCLGVBQXNCLEVBQUU7Ozs7Ozs7OztLQVN2QjtJQUNELGNBQXFCLEVBQUU7Ozs7Ozs7S0FPdEI7SUFDRCxnQkFBdUIsRUFBRTs7Ozs7OztLQU94QjtJQUNELGVBQXNCLEVBQUU7Ozs7S0FJdkI7SUFDRCxRQUFlLEVBQUUsRUFBRTtBQUNyQjtBQUVPLFNBQVNDLGNBQWNDLFFBQWtCLEVBQUVDLFVBQXNCO0lBQ3RFLE1BQU1DLGNBQWNKLGdCQUFnQixDQUFDRSxTQUFTLElBQUksRUFBRTtJQUNwRCxPQUFPRSxZQUFZQyxRQUFRLENBQUNGO0FBQzlCO0FBRU8sU0FBU0csb0JBQW9CQyxJQUFjO0lBQ2hELE9BQU9BO0FBQ1Q7QUFFTyxTQUFTQyxhQUFhRCxJQUFjO0lBQ3pDLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTRSxlQUFlRixJQUFjO0lBQzNDLE9BQU9OLGNBQWNNO0FBQ3ZCO0FBRUEsNEJBQTRCO0FBQ3JCLFNBQVNHLGNBQWNILElBQWM7SUFDMUMsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9saWIvcGVybWlzc2lvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gVXNlclJvbGUge1xuICBTVVBFUl9BRE1JTiA9ICdzdXBlcl9hZG1pbicsXG4gIFNPTkdfQURNSU4gPSAnc29uZ19hZG1pbicsIFxuICBBWUFVS0VfQURNSU4gPSAnYXlhdWtlX2FkbWluJywgLy8g7JWE7JW87Jqw7LyAIOq0gOumrOyekCAoU09OR19BRE1JTuqzvCDrj5nsnbztlZwg6raM7ZWcKVxuICBTT05HX0VESVRPUiA9ICdzb25nX2VkaXRvcicsXG4gIFVTRVIgPSAndXNlcidcbn1cblxuZXhwb3J0IGVudW0gUGVybWlzc2lvbiB7XG4gIC8vIOyLnOyKpO2FnCDqtIDrpqxcbiAgU1lTVEVNX0FETUlOID0gJ3N5c3RlbS5hZG1pbicsXG4gIFVTRVJfTUFOQUdFID0gJ3VzZXJzLm1hbmFnZScsXG4gIFxuICAvLyDrhbjrnpgg6rSA66asXG4gIFNPTkdTX1ZJRVcgPSAnc29uZ3MudmlldycsXG4gIFNPTkdTX0NSRUFURSA9ICdzb25ncy5jcmVhdGUnLFxuICBTT05HU19FRElUID0gJ3NvbmdzLmVkaXQnLFxuICBTT05HU19ERUxFVEUgPSAnc29uZ3MuZGVsZXRlJyxcbiAgU09OR1NfQlVMS19FRElUID0gJ3NvbmdzLmJ1bGtfZWRpdCcsXG4gIFNPTkdTX1NUQVRTID0gJ3NvbmdzLnN0YXRzJyxcbn1cblxuY29uc3QgUk9MRV9QRVJNSVNTSU9OUyA9IHtcbiAgW1VzZXJSb2xlLlNVUEVSX0FETUlOXTogW1xuICAgIFBlcm1pc3Npb24uU1lTVEVNX0FETUlOLFxuICAgIFBlcm1pc3Npb24uVVNFUl9NQU5BR0UsXG4gICAgUGVybWlzc2lvbi5TT05HU19WSUVXLFxuICAgIFBlcm1pc3Npb24uU09OR1NfQ1JFQVRFLFxuICAgIFBlcm1pc3Npb24uU09OR1NfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0RFTEVURSxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0JVTEtfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1NUQVRTLFxuICBdLFxuICBbVXNlclJvbGUuU09OR19BRE1JTl06IFtcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1ZJRVcsXG4gICAgUGVybWlzc2lvbi5TT05HU19DUkVBVEUsXG4gICAgUGVybWlzc2lvbi5TT05HU19FRElULFxuICAgIFBlcm1pc3Npb24uU09OR1NfREVMRVRFLFxuICAgIFBlcm1pc3Npb24uU09OR1NfQlVMS19FRElULFxuICAgIFBlcm1pc3Npb24uU09OR1NfU1RBVFMsXG4gIF0sXG4gIFtVc2VyUm9sZS5BWUFVS0VfQURNSU5dOiBbXG4gICAgUGVybWlzc2lvbi5TT05HU19WSUVXLFxuICAgIFBlcm1pc3Npb24uU09OR1NfQ1JFQVRFLFxuICAgIFBlcm1pc3Npb24uU09OR1NfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0RFTEVURSxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX0JVTEtfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1NUQVRTLFxuICBdLFxuICBbVXNlclJvbGUuU09OR19FRElUT1JdOiBbXG4gICAgUGVybWlzc2lvbi5TT05HU19WSUVXLFxuICAgIFBlcm1pc3Npb24uU09OR1NfRURJVCxcbiAgICBQZXJtaXNzaW9uLlNPTkdTX1NUQVRTLFxuICBdLFxuICBbVXNlclJvbGUuVVNFUl06IFtdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHVzZXJSb2xlOiBVc2VyUm9sZSwgcGVybWlzc2lvbjogUGVybWlzc2lvbik6IGJvb2xlYW4ge1xuICBjb25zdCBwZXJtaXNzaW9ucyA9IFJPTEVfUEVSTUlTU0lPTlNbdXNlclJvbGVdIHx8IFtdXG4gIHJldHVybiBwZXJtaXNzaW9ucy5pbmNsdWRlcyhwZXJtaXNzaW9uKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuQWNjZXNzQWRtaW5QYW5lbChyb2xlOiBVc2VyUm9sZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gcm9sZSAhPT0gVXNlclJvbGUuVVNFUlxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBlckFkbWluKHJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XG4gIHJldHVybiByb2xlID09PSBVc2VyUm9sZS5TVVBFUl9BRE1JTlxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuTWFuYWdlU29uZ3Mocm9sZTogVXNlclJvbGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIGhhc1Blcm1pc3Npb24ocm9sZSwgUGVybWlzc2lvbi5TT05HU19WSUVXKVxufVxuXG4vLyDtlZjsnIQg7Zi47ZmY7ISx7J2EIOychO2VnCDsnoTsi5wg7ZWo7IiYICjrgpjspJHsl5Ag7KCc6rGwKVxuZXhwb3J0IGZ1bmN0aW9uIHJvbGVUb0lzQWRtaW4ocm9sZTogVXNlclJvbGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIHJvbGUgIT09IFVzZXJSb2xlLlVTRVJcbn0iXSwibmFtZXMiOlsiVXNlclJvbGUiLCJQZXJtaXNzaW9uIiwiUk9MRV9QRVJNSVNTSU9OUyIsImhhc1Blcm1pc3Npb24iLCJ1c2VyUm9sZSIsInBlcm1pc3Npb24iLCJwZXJtaXNzaW9ucyIsImluY2x1ZGVzIiwiY2FuQWNjZXNzQWRtaW5QYW5lbCIsInJvbGUiLCJpc1N1cGVyQWRtaW4iLCJjYW5NYW5hZ2VTb25ncyIsInJvbGVUb0lzQWRtaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/permissions.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/titleSystem.ts":
/*!********************************!*\
  !*** ./src/lib/titleSystem.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TITLE_DEFINITIONS: () => (/* binding */ TITLE_DEFINITIONS),\n/* harmony export */   checkForNewTitles: () => (/* binding */ checkForNewTitles),\n/* harmony export */   getSelectedTitleInfo: () => (/* binding */ getSelectedTitleInfo),\n/* harmony export */   getTitleDefinition: () => (/* binding */ getTitleDefinition),\n/* harmony export */   getTitleRarityColor: () => (/* binding */ getTitleRarityColor),\n/* harmony export */   grantTitle: () => (/* binding */ grantTitle)\n/* harmony export */ });\n// 칭호 정의들\nconst TITLE_DEFINITIONS = [\n    // 관리자 칭호 (기존 role 기반)\n    {\n        id: \"super_admin\",\n        name: \"최고 관리자\",\n        description: \"사이트의 모든 권한을 가진 최고 관리자입니다\",\n        condition: \"사이트 관리자 권한 보유\",\n        rarity: \"legendary\",\n        checkCondition: (user)=>user.role === \"super_admin\",\n        autoGrant: true\n    },\n    {\n        id: \"ayauke_admin\",\n        name: \"아야냥이\",\n        description: \"스트리머 아야에게 부여되는 특별한 칭호입니다\",\n        condition: \"사이트를 선물받은 스트리머\",\n        rarity: \"epic\",\n        checkCondition: (user)=>user.role === \"ayauke_admin\",\n        autoGrant: true\n    },\n    {\n        id: \"honeyz\",\n        name: \"HONEYZ\",\n        description: \"허니즈에게 부여되는 칭호입니다\",\n        condition: \"허니즈 소속 스트리머\",\n        rarity: \"epic\",\n        checkCondition: (user)=>{\n            const honeyzChannelIds = [\n                \"abe8aa82baf3d3ef54ad8468ee73e7fc\",\n                \"798e100206987b59805cfb75f927e965\",\n                \"b82e8bc2505e37156b2d1140ba1fc05c\",\n                \"c0d9723cbb75dc223c6aa8a9d4f56002\",\n                \"bd07973b6021d72512240c01a386d5c9\",\n                \"65a53076fe1a39636082dd6dba8b8a4b\",\n                \"d6017f757614569add71b0bc83a81382\"\n            ];\n            return honeyzChannelIds.includes(user.channelId);\n        },\n        autoGrant: true\n    },\n    {\n        id: \"song_admin\",\n        name: \"노래 관리자\",\n        description: \"노래 정보를 관리하는 관리자입니다\",\n        condition: \"노래 관리자 권한 보유\",\n        rarity: \"epic\",\n        checkCondition: (user)=>user.role === \"song_admin\",\n        autoGrant: true\n    },\n    {\n        id: \"song_editor\",\n        name: \"편집자\",\n        description: \"노래 정보를 편집할 수 있는 편집자입니다\",\n        condition: \"편집자 권한 보유\",\n        rarity: \"rare\",\n        checkCondition: (user)=>user.role === \"song_editor\",\n        autoGrant: true\n    },\n    // 활동 기반 칭호\n    {\n        id: \"chzzk_user\",\n        name: \"치지직 사용자\",\n        description: \"아야의 팬사이트에 오신 것을 환영합니다!\",\n        condition: \"회원가입 시 자동 부여\",\n        rarity: \"common\",\n        checkCondition: ()=>true,\n        autoGrant: true\n    },\n    {\n        id: \"regular_visitor\",\n        name: \"단골손님\",\n        description: \"자주 방문해주시는 소중한 단골손님입니다\",\n        condition: \"로그인 10회 이상\",\n        rarity: \"common\",\n        checkCondition: (user, stats)=>(stats?.loginCount || 0) >= 10,\n        autoGrant: true\n    },\n    {\n        id: \"music_lover\",\n        name: \"노래 매니아\",\n        description: \"음악을 사랑하는 진정한 매니아입니다\",\n        condition: \"좋아요 50개 이상\",\n        rarity: \"rare\",\n        checkCondition: (user, stats)=>(stats?.likeCount || 0) >= 50,\n        autoGrant: true\n    },\n    {\n        id: \"playlist_curator\",\n        name: \"플레이리스트 큐레이터\",\n        description: \"음악 취향이 뛰어난 플레이리스트 전문가입니다\",\n        condition: \"플레이리스트 5개 이상 생성\",\n        rarity: \"rare\",\n        checkCondition: (user, stats)=>(stats?.playlistCount || 0) >= 5,\n        autoGrant: true\n    },\n    {\n        id: \"loyal_fan\",\n        name: \"충성스러운 팬\",\n        description: \"아야를 꾸준히 응원해주시는 충성스러운 팬입니다\",\n        condition: \"30일 연속 접속\",\n        rarity: \"epic\",\n        checkCondition: (user, stats)=>(stats?.consecutiveDays || 0) >= 30,\n        autoGrant: true\n    },\n    // 특별 칭호 (수동 부여)\n    {\n        id: \"developer_friend\",\n        name: \"개발자의 친구\",\n        description: \"개발자와 특별한 인연이 있는 소중한 친구입니다\",\n        condition: \"개발자가 직접 부여\",\n        rarity: \"legendary\",\n        checkCondition: ()=>false,\n        autoGrant: false\n    },\n    {\n        id: \"beta_tester\",\n        name: \"베타 테스터\",\n        description: \"사이트 초기부터 함께해주신 베타 테스터입니다\",\n        condition: \"특정 기간 가입자\",\n        rarity: \"epic\",\n        checkCondition: ()=>false,\n        autoGrant: false\n    }\n];\n// 칭호 ID로 정의 찾기\nfunction getTitleDefinition(titleId) {\n    return TITLE_DEFINITIONS.find((title)=>title.id === titleId);\n}\n// 희귀도별 색상 반환\nfunction getTitleRarityColor(rarity) {\n    switch(rarity){\n        case \"common\":\n            return \"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-800 dark:border-gray-700\";\n        case \"rare\":\n            return \"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 border border-blue-800 dark:border-blue-700\";\n        case \"epic\":\n            return \"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 border border-purple-800 dark:border-purple-700\";\n        case \"legendary\":\n            return \"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 border border-yellow-800 dark:border-yellow-700\";\n        default:\n            return \"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-800 dark:border-gray-700\";\n    }\n}\n// 사용자가 획득할 수 있는 새로운 칭호 확인\nfunction checkForNewTitles(user, stats) {\n    const currentTitleIds = user.titles.map((title)=>title.id);\n    const newTitles = [];\n    for (const titleDef of TITLE_DEFINITIONS){\n        // 이미 보유한 칭호는 건너뛰기\n        if (currentTitleIds.includes(titleDef.id)) continue;\n        // 자동 부여 칭호만 체크\n        if (!titleDef.autoGrant) continue;\n        // 조건 확인\n        if (titleDef.checkCondition(user, stats)) {\n            newTitles.push(titleDef);\n        }\n    }\n    return newTitles;\n}\n// 사용자에게 칭호 부여\nfunction grantTitle(user, titleDef) {\n    console.log(\"🏆 칭호 부여 시도:\", {\n        titleId: titleDef.id,\n        titleName: titleDef.name\n    });\n    // 이미 보유한 칭호인지 확인\n    const alreadyHas = user.titles.some((title)=>title.id === titleDef.id);\n    if (alreadyHas) {\n        console.log(\"🏆 이미 보유한 칭호:\", titleDef.name);\n        return false;\n    }\n    // 칭호 추가\n    const newTitle = {\n        id: titleDef.id,\n        name: titleDef.name,\n        description: titleDef.description,\n        earnedAt: new Date(),\n        condition: titleDef.condition,\n        rarity: titleDef.rarity\n    };\n    console.log(\"🏆 칭호 추가 전 titles.length:\", user.titles.length);\n    user.titles.push(newTitle);\n    console.log(\"🏆 칭호 추가 후 titles.length:\", user.titles.length);\n    console.log(\"🏆 추가된 칭호:\", newTitle);\n    // 첫 번째 칭호라면 자동으로 선택\n    if (!user.selectedTitle) {\n        user.selectedTitle = titleDef.id;\n        console.log(\"🏆 첫 번째 칭호로 선택됨:\", titleDef.id);\n    }\n    return true;\n}\n// 선택된 칭호 정보 가져오기\nfunction getSelectedTitleInfo(user) {\n    if (!user.selectedTitle) return null;\n    const selectedTitle = user.titles.find((title)=>title.id === user.selectedTitle);\n    if (!selectedTitle) return null;\n    // Mongoose 객체를 순수한 JavaScript 객체로 변환\n    const titleObj = typeof selectedTitle.toObject === \"function\" ? selectedTitle.toObject() : JSON.parse(JSON.stringify(selectedTitle));\n    return {\n        id: titleObj.id,\n        name: titleObj.name,\n        description: titleObj.description,\n        rarity: titleObj.rarity,\n        colorClass: getTitleRarityColor(titleObj.rarity)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3RpdGxlU3lzdGVtLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQW1CQSxTQUFTO0FBQ0YsTUFBTUEsb0JBQXVDO0lBQ2xELHNCQUFzQjtJQUN0QjtRQUNFQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsZ0JBQWdCLENBQUNDLE9BQVNBLEtBQUtDLElBQUksS0FBSztRQUN4Q0MsV0FBVztJQUNiO0lBQ0E7UUFDRVIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxRQUFRO1FBQ1JDLGdCQUFnQixDQUFDQyxPQUFTQSxLQUFLQyxJQUFJLEtBQUs7UUFDeENDLFdBQVc7SUFDYjtJQUNBO1FBQ0VSLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxnQkFBZ0IsQ0FBQ0M7WUFDZixNQUFNRyxtQkFBbUI7Z0JBQ3ZCO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2FBQ0Q7WUFDRCxPQUFPQSxpQkFBaUJDLFFBQVEsQ0FBQ0osS0FBS0ssU0FBUztRQUNqRDtRQUNBSCxXQUFXO0lBQ2I7SUFDQTtRQUNFUixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsZ0JBQWdCLENBQUNDLE9BQVNBLEtBQUtDLElBQUksS0FBSztRQUN4Q0MsV0FBVztJQUNiO0lBQ0E7UUFDRVIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxRQUFRO1FBQ1JDLGdCQUFnQixDQUFDQyxPQUFTQSxLQUFLQyxJQUFJLEtBQUs7UUFDeENDLFdBQVc7SUFDYjtJQUVBLFdBQVc7SUFDWDtRQUNFUixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsZ0JBQWdCLElBQU07UUFDdEJHLFdBQVc7SUFDYjtJQUNBO1FBQ0VSLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxnQkFBZ0IsQ0FBQ0MsTUFBTU0sUUFBVSxDQUFDQSxPQUFPQyxjQUFjLE1BQU07UUFDN0RMLFdBQVc7SUFDYjtJQUNBO1FBQ0VSLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxnQkFBZ0IsQ0FBQ0MsTUFBTU0sUUFBVSxDQUFDQSxPQUFPRSxhQUFhLE1BQU07UUFDNUROLFdBQVc7SUFDYjtJQUNBO1FBQ0VSLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxnQkFBZ0IsQ0FBQ0MsTUFBTU0sUUFBVSxDQUFDQSxPQUFPRyxpQkFBaUIsTUFBTTtRQUNoRVAsV0FBVztJQUNiO0lBQ0E7UUFDRVIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxRQUFRO1FBQ1JDLGdCQUFnQixDQUFDQyxNQUFNTSxRQUFVLENBQUNBLE9BQU9JLG1CQUFtQixNQUFNO1FBQ2xFUixXQUFXO0lBQ2I7SUFFQSxnQkFBZ0I7SUFDaEI7UUFDRVIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxRQUFRO1FBQ1JDLGdCQUFnQixJQUFNO1FBQ3RCRyxXQUFXO0lBQ2I7SUFDQTtRQUNFUixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsZ0JBQWdCLElBQU07UUFDdEJHLFdBQVc7SUFDYjtDQUNELENBQUM7QUFFRixlQUFlO0FBQ1IsU0FBU1MsbUJBQ2RDLE9BQWU7SUFFZixPQUFPbkIsa0JBQWtCb0IsSUFBSSxDQUFDLENBQUNDLFFBQVVBLE1BQU1wQixFQUFFLEtBQUtrQjtBQUN4RDtBQUVBLGFBQWE7QUFDTixTQUFTRyxvQkFBb0JqQixNQUFjO0lBQ2hELE9BQVFBO1FBQ04sS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVDtZQUNFLE9BQU87SUFDWDtBQUNGO0FBRUEsMEJBQTBCO0FBQ25CLFNBQVNrQixrQkFDZGhCLElBQVcsRUFDWE0sS0FBaUI7SUFFakIsTUFBTVcsa0JBQWtCakIsS0FBS2tCLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLENBQUNMLFFBQVVBLE1BQU1wQixFQUFFO0lBQzNELE1BQU0wQixZQUErQixFQUFFO0lBRXZDLEtBQUssTUFBTUMsWUFBWTVCLGtCQUFtQjtRQUN4QyxrQkFBa0I7UUFDbEIsSUFBSXdCLGdCQUFnQmIsUUFBUSxDQUFDaUIsU0FBUzNCLEVBQUUsR0FBRztRQUUzQyxlQUFlO1FBQ2YsSUFBSSxDQUFDMkIsU0FBU25CLFNBQVMsRUFBRTtRQUV6QixRQUFRO1FBQ1IsSUFBSW1CLFNBQVN0QixjQUFjLENBQUNDLE1BQU1NLFFBQVE7WUFDeENjLFVBQVVFLElBQUksQ0FBQ0Q7UUFDakI7SUFDRjtJQUVBLE9BQU9EO0FBQ1Q7QUFFQSxjQUFjO0FBQ1AsU0FBU0csV0FBV3ZCLElBQVcsRUFBRXFCLFFBQXlCO0lBQy9ERyxRQUFRQyxHQUFHLENBQUMsZ0JBQWdCO1FBQzFCYixTQUFTUyxTQUFTM0IsRUFBRTtRQUNwQmdDLFdBQVdMLFNBQVMxQixJQUFJO0lBQzFCO0lBRUEsaUJBQWlCO0lBQ2pCLE1BQU1nQyxhQUFhM0IsS0FBS2tCLE1BQU0sQ0FBQ1UsSUFBSSxDQUFDLENBQUNkLFFBQVVBLE1BQU1wQixFQUFFLEtBQUsyQixTQUFTM0IsRUFBRTtJQUN2RSxJQUFJaUMsWUFBWTtRQUNkSCxRQUFRQyxHQUFHLENBQUMsaUJBQWlCSixTQUFTMUIsSUFBSTtRQUMxQyxPQUFPO0lBQ1Q7SUFFQSxRQUFRO0lBQ1IsTUFBTWtDLFdBQVc7UUFDZm5DLElBQUkyQixTQUFTM0IsRUFBRTtRQUNmQyxNQUFNMEIsU0FBUzFCLElBQUk7UUFDbkJDLGFBQWF5QixTQUFTekIsV0FBVztRQUNqQ2tDLFVBQVUsSUFBSUM7UUFDZGxDLFdBQVd3QixTQUFTeEIsU0FBUztRQUM3QkMsUUFBUXVCLFNBQVN2QixNQUFNO0lBQ3pCO0lBRUEwQixRQUFRQyxHQUFHLENBQUMsNkJBQTZCekIsS0FBS2tCLE1BQU0sQ0FBQ2MsTUFBTTtJQUMzRGhDLEtBQUtrQixNQUFNLENBQUNJLElBQUksQ0FBQ087SUFDakJMLFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkJ6QixLQUFLa0IsTUFBTSxDQUFDYyxNQUFNO0lBQzNEUixRQUFRQyxHQUFHLENBQUMsY0FBY0k7SUFFMUIsb0JBQW9CO0lBQ3BCLElBQUksQ0FBQzdCLEtBQUtpQyxhQUFhLEVBQUU7UUFDdkJqQyxLQUFLaUMsYUFBYSxHQUFHWixTQUFTM0IsRUFBRTtRQUNoQzhCLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JKLFNBQVMzQixFQUFFO0lBQzdDO0lBRUEsT0FBTztBQUNUO0FBRUEsaUJBQWlCO0FBQ1YsU0FBU3dDLHFCQUFxQmxDLElBQVc7SUFDOUMsSUFBSSxDQUFDQSxLQUFLaUMsYUFBYSxFQUFFLE9BQU87SUFFaEMsTUFBTUEsZ0JBQWdCakMsS0FBS2tCLE1BQU0sQ0FBQ0wsSUFBSSxDQUNwQyxDQUFDQyxRQUFVQSxNQUFNcEIsRUFBRSxLQUFLTSxLQUFLaUMsYUFBYTtJQUU1QyxJQUFJLENBQUNBLGVBQWUsT0FBTztJQUUzQixxQ0FBcUM7SUFDckMsTUFBTUUsV0FDSixPQUFPRixjQUFjRyxRQUFRLEtBQUssYUFDOUJILGNBQWNHLFFBQVEsS0FDdEJDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsU0FBUyxDQUFDTjtJQUVoQyxPQUFPO1FBQ0x2QyxJQUFJeUMsU0FBU3pDLEVBQUU7UUFDZkMsTUFBTXdDLFNBQVN4QyxJQUFJO1FBQ25CQyxhQUFhdUMsU0FBU3ZDLFdBQVc7UUFDakNFLFFBQVFxQyxTQUFTckMsTUFBTTtRQUN2QjBDLFlBQVl6QixvQkFBb0JvQixTQUFTckMsTUFBTTtJQUNqRDtBQUNGIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL2xpYi90aXRsZVN5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJVXNlciB9IGZyb20gXCJAL21vZGVscy9Vc2VyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGl0bGVEZWZpbml0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb25kaXRpb246IHN0cmluZztcbiAgcmFyaXR5OiBcImNvbW1vblwiIHwgXCJyYXJlXCIgfCBcImVwaWNcIiB8IFwibGVnZW5kYXJ5XCI7XG4gIGNoZWNrQ29uZGl0aW9uOiAodXNlcjogSVVzZXIsIHN0YXRzPzogYW55KSA9PiBib29sZWFuO1xuICBhdXRvR3JhbnQ6IGJvb2xlYW47IC8vIOyekOuPmSDrtoDsl6wg7Jes67aAXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclN0YXRzIHtcbiAgbGlrZUNvdW50OiBudW1iZXI7XG4gIHBsYXlsaXN0Q291bnQ6IG51bWJlcjtcbiAgbG9naW5Db3VudDogbnVtYmVyO1xuICBjb25zZWN1dGl2ZURheXM6IG51bWJlcjtcbn1cblxuLy8g7Lmt7Zi4IOygleydmOuTpFxuZXhwb3J0IGNvbnN0IFRJVExFX0RFRklOSVRJT05TOiBUaXRsZURlZmluaXRpb25bXSA9IFtcbiAgLy8g6rSA66as7J6QIOy5re2YuCAo6riw7KG0IHJvbGUg6riw67CYKVxuICB7XG4gICAgaWQ6IFwic3VwZXJfYWRtaW5cIixcbiAgICBuYW1lOiBcIuy1nOqzoCDqtIDrpqzsnpBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLsgqzsnbTtirjsnZgg66qo65OgIOq2jO2VnOydhCDqsIDsp4Qg7LWc6rOgIOq0gOumrOyekOyeheuLiOuLpFwiLFxuICAgIGNvbmRpdGlvbjogXCLsgqzsnbTtirgg6rSA66as7J6QIOq2jO2VnCDrs7TsnKBcIixcbiAgICByYXJpdHk6IFwibGVnZW5kYXJ5XCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwic3VwZXJfYWRtaW5cIixcbiAgICBhdXRvR3JhbnQ6IHRydWUsXG4gIH0sXG4gIHtcbiAgICBpZDogXCJheWF1a2VfYWRtaW5cIixcbiAgICBuYW1lOiBcIuyVhOyVvOuDpeydtFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIuyKpO2KuOumrOuouCDslYTslbzsl5Dqsowg67aA7Jes65CY64qUIO2KueuzhO2VnCDsua3tmLjsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwi7IKs7J207Yq466W8IOyEoOusvOuwm+ydgCDsiqTtirjrpqzrqLhcIixcbiAgICByYXJpdHk6IFwiZXBpY1wiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlcikgPT4gdXNlci5yb2xlID09PSBcImF5YXVrZV9hZG1pblwiLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImhvbmV5elwiLFxuICAgIG5hbWU6IFwiSE9ORVlaXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7ZeI64uI7KaI7JeQ6rKMIOu2gOyXrOuQmOuKlCDsua3tmLjsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwi7ZeI64uI7KaIIOyGjOyGjSDsiqTtirjrpqzrqLhcIixcbiAgICByYXJpdHk6IFwiZXBpY1wiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlcikgPT4ge1xuICAgICAgY29uc3QgaG9uZXl6Q2hhbm5lbElkcyA9IFtcbiAgICAgICAgXCJhYmU4YWE4MmJhZjNkM2VmNTRhZDg0NjhlZTczZTdmY1wiLCAvLyDslYTslbxcbiAgICAgICAgXCI3OThlMTAwMjA2OTg3YjU5ODA1Y2ZiNzVmOTI3ZTk2NVwiLCAvLyDrlJTrlJTrlJTsmqlcbiAgICAgICAgXCJiODJlOGJjMjUwNWUzNzE1NmIyZDExNDBiYTFmYzA1Y1wiLCAvLyDri7TsnKDsnbRcbiAgICAgICAgXCJjMGQ5NzIzY2JiNzVkYzIyM2M2YWE4YTlkNGY1NjAwMlwiLCAvLyDtl4jri4jsuITrn6zsiqRcbiAgICAgICAgXCJiZDA3OTczYjYwMjFkNzI1MTIyNDBjMDFhMzg2ZDVjOVwiLCAvLyDrp53rgrRcbiAgICAgICAgXCI2NWE1MzA3NmZlMWEzOTYzNjA4MmRkNmRiYThiOGE0YlwiLCAvLyDsmKTtmZTsmpRcbiAgICAgICAgXCJkNjAxN2Y3NTc2MTQ1NjlhZGQ3MWIwYmM4M2E4MTM4MlwiLCAvLyDthYzsiqTtirhcbiAgICAgIF07XG4gICAgICByZXR1cm4gaG9uZXl6Q2hhbm5lbElkcy5pbmNsdWRlcyh1c2VyLmNoYW5uZWxJZCk7XG4gICAgfSxcbiAgICBhdXRvR3JhbnQ6IHRydWUsXG4gIH0sXG4gIHtcbiAgICBpZDogXCJzb25nX2FkbWluXCIsXG4gICAgbmFtZTogXCLrhbjrnpgg6rSA66as7J6QXCIsXG4gICAgZGVzY3JpcHRpb246IFwi64W4656YIOygleuztOulvCDqtIDrpqztlZjripQg6rSA66as7J6Q7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIuuFuOuemCDqtIDrpqzsnpAg6raM7ZWcIOuztOycoFwiLFxuICAgIHJhcml0eTogXCJlcGljXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwic29uZ19hZG1pblwiLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInNvbmdfZWRpdG9yXCIsXG4gICAgbmFtZTogXCLtjrjsp5HsnpBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLrhbjrnpgg7KCV67O066W8IO2OuOynke2VoCDsiJgg7J6I64qUIO2OuOynkeyekOyeheuLiOuLpFwiLFxuICAgIGNvbmRpdGlvbjogXCLtjrjsp5HsnpAg6raM7ZWcIOuztOycoFwiLFxuICAgIHJhcml0eTogXCJyYXJlXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwic29uZ19lZGl0b3JcIixcbiAgICBhdXRvR3JhbnQ6IHRydWUsXG4gIH0sXG5cbiAgLy8g7Zmc64+ZIOq4sOuwmCDsua3tmLhcbiAge1xuICAgIGlkOiBcImNoenprX3VzZXJcIixcbiAgICBuYW1lOiBcIuy5mOyngOyngSDsgqzsmqnsnpBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLslYTslbzsnZgg7Yys7IKs7J207Yq47JeQIOyYpOyLoCDqsoPsnYQg7ZmY7JiB7ZWp64uI64ukIVwiLFxuICAgIGNvbmRpdGlvbjogXCLtmozsm5DqsIDsnoUg7IucIOyekOuPmSDrtoDsl6xcIixcbiAgICByYXJpdHk6IFwiY29tbW9uXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICgpID0+IHRydWUsIC8vIOuqqOuToCDsi6Dqt5wg7IKs7Jqp7J6Q7JeQ6rKMIOu2gOyXrFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInJlZ3VsYXJfdmlzaXRvclwiLFxuICAgIG5hbWU6IFwi64uo6rOo7IaQ64uYXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7J6Q7KO8IOuwqeusuO2VtOyjvOyLnOuKlCDshozspJHtlZwg64uo6rOo7IaQ64uY7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIuuhnOq3uOyduCAxMO2ajCDsnbTsg4FcIixcbiAgICByYXJpdHk6IFwiY29tbW9uXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyLCBzdGF0cykgPT4gKHN0YXRzPy5sb2dpbkNvdW50IHx8IDApID49IDEwLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcIm11c2ljX2xvdmVyXCIsXG4gICAgbmFtZTogXCLrhbjrnpgg66ek64uI7JWEXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7J2M7JWF7J2EIOyCrOueke2VmOuKlCDsp4TsoJXtlZwg66ek64uI7JWE7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIuyii+yVhOyalCA1MOqwnCDsnbTsg4FcIixcbiAgICByYXJpdHk6IFwicmFyZVwiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlciwgc3RhdHMpID0+IChzdGF0cz8ubGlrZUNvdW50IHx8IDApID49IDUwLFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInBsYXlsaXN0X2N1cmF0b3JcIixcbiAgICBuYW1lOiBcIu2UjOugiOydtOumrOyKpO2KuCDtgZDroIjsnbTthLBcIixcbiAgICBkZXNjcmlwdGlvbjogXCLsnYzslYUg7Leo7Zal7J20IOubsOyWtOuCnCDtlIzroIjsnbTrpqzsiqTtirgg7KCE66y46rCA7J6F64uI64ukXCIsXG4gICAgY29uZGl0aW9uOiBcIu2UjOugiOydtOumrOyKpO2KuCA16rCcIOydtOyDgSDsg53shLFcIixcbiAgICByYXJpdHk6IFwicmFyZVwiLFxuICAgIGNoZWNrQ29uZGl0aW9uOiAodXNlciwgc3RhdHMpID0+IChzdGF0cz8ucGxheWxpc3RDb3VudCB8fCAwKSA+PSA1LFxuICAgIGF1dG9HcmFudDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImxveWFsX2ZhblwiLFxuICAgIG5hbWU6IFwi7Lap7ISx7Iqk65+s7Jq0IO2MrFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIuyVhOyVvOulvCDqvrjspIDtnogg7J2R7JuQ7ZW07KO87Iuc64qUIOy2qeyEseyKpOufrOyatCDtjKzsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwiMzDsnbwg7Jew7IaNIOygkeyGjVwiLFxuICAgIHJhcml0eTogXCJlcGljXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICh1c2VyLCBzdGF0cykgPT4gKHN0YXRzPy5jb25zZWN1dGl2ZURheXMgfHwgMCkgPj0gMzAsXG4gICAgYXV0b0dyYW50OiB0cnVlLFxuICB9LFxuXG4gIC8vIO2KueuzhCDsua3tmLggKOyImOuPmSDrtoDsl6wpXG4gIHtcbiAgICBpZDogXCJkZXZlbG9wZXJfZnJpZW5kXCIsXG4gICAgbmFtZTogXCLqsJzrsJzsnpDsnZgg7Lmc6rWsXCIsXG4gICAgZGVzY3JpcHRpb246IFwi6rCc67Cc7J6Q7JmAIO2KueuzhO2VnCDsnbjsl7DsnbQg7J6I64qUIOyGjOykke2VnCDsuZzqtazsnoXri4jri6RcIixcbiAgICBjb25kaXRpb246IFwi6rCc67Cc7J6Q6rCAIOyngeygkSDrtoDsl6xcIixcbiAgICByYXJpdHk6IFwibGVnZW5kYXJ5XCIsXG4gICAgY2hlY2tDb25kaXRpb246ICgpID0+IGZhbHNlLCAvLyDsiJjrj5kg67aA7Jes66eMXG4gICAgYXV0b0dyYW50OiBmYWxzZSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImJldGFfdGVzdGVyXCIsXG4gICAgbmFtZTogXCLrsqDtg4Ag7YWM7Iqk7YSwXCIsXG4gICAgZGVzY3JpcHRpb246IFwi7IKs7J207Yq4IOy0iOq4sOu2gO2EsCDtlajqu5jtlbTso7zsi6Ag67Kg7YOAIO2FjOyKpO2EsOyeheuLiOuLpFwiLFxuICAgIGNvbmRpdGlvbjogXCLtirnsoJUg6riw6rCEIOqwgOyeheyekFwiLFxuICAgIHJhcml0eTogXCJlcGljXCIsXG4gICAgY2hlY2tDb25kaXRpb246ICgpID0+IGZhbHNlLCAvLyDsiJjrj5kg67aA7Jes66eMXG4gICAgYXV0b0dyYW50OiBmYWxzZSxcbiAgfSxcbl07XG5cbi8vIOy5re2YuCBJROuhnCDsoJXsnZgg7LC+6riwXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGl0bGVEZWZpbml0aW9uKFxuICB0aXRsZUlkOiBzdHJpbmdcbik6IFRpdGxlRGVmaW5pdGlvbiB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBUSVRMRV9ERUZJTklUSU9OUy5maW5kKCh0aXRsZSkgPT4gdGl0bGUuaWQgPT09IHRpdGxlSWQpO1xufVxuXG4vLyDtnazqt4Drj4Trs4Qg7IOJ7IOBIOuwmO2ZmFxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpdGxlUmFyaXR5Q29sb3IocmFyaXR5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHJhcml0eSkge1xuICAgIGNhc2UgXCJjb21tb25cIjpcbiAgICAgIHJldHVybiBcImJnLWdyYXktMTAwIGRhcms6YmctZ3JheS04MDAgdGV4dC1ncmF5LTgwMCBkYXJrOnRleHQtZ3JheS0yMDAgYm9yZGVyIGJvcmRlci1ncmF5LTgwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiO1xuICAgIGNhc2UgXCJyYXJlXCI6XG4gICAgICByZXR1cm4gXCJiZy1ibHVlLTEwMCBkYXJrOmJnLWJsdWUtOTAwIHRleHQtYmx1ZS04MDAgZGFyazp0ZXh0LWJsdWUtMjAwIGJvcmRlciBib3JkZXItYmx1ZS04MDAgZGFyazpib3JkZXItYmx1ZS03MDBcIjtcbiAgICBjYXNlIFwiZXBpY1wiOlxuICAgICAgcmV0dXJuIFwiYmctcHVycGxlLTEwMCBkYXJrOmJnLXB1cnBsZS05MDAgdGV4dC1wdXJwbGUtODAwIGRhcms6dGV4dC1wdXJwbGUtMjAwIGJvcmRlciBib3JkZXItcHVycGxlLTgwMCBkYXJrOmJvcmRlci1wdXJwbGUtNzAwXCI7XG4gICAgY2FzZSBcImxlZ2VuZGFyeVwiOlxuICAgICAgcmV0dXJuIFwiYmcteWVsbG93LTEwMCBkYXJrOmJnLXllbGxvdy05MDAgdGV4dC15ZWxsb3ctODAwIGRhcms6dGV4dC15ZWxsb3ctMjAwIGJvcmRlciBib3JkZXIteWVsbG93LTgwMCBkYXJrOmJvcmRlci15ZWxsb3ctNzAwXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcImJnLWdyYXktMTAwIGRhcms6YmctZ3JheS04MDAgdGV4dC1ncmF5LTgwMCBkYXJrOnRleHQtZ3JheS0yMDAgYm9yZGVyIGJvcmRlci1ncmF5LTgwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiO1xuICB9XG59XG5cbi8vIOyCrOyaqeyekOqwgCDtmo3rk53tlaAg7IiYIOyeiOuKlCDsg4jroZzsmrQg7Lmt7Zi4IO2ZleyduFxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9yTmV3VGl0bGVzKFxuICB1c2VyOiBJVXNlcixcbiAgc3RhdHM/OiBVc2VyU3RhdHNcbik6IFRpdGxlRGVmaW5pdGlvbltdIHtcbiAgY29uc3QgY3VycmVudFRpdGxlSWRzID0gdXNlci50aXRsZXMubWFwKCh0aXRsZSkgPT4gdGl0bGUuaWQpO1xuICBjb25zdCBuZXdUaXRsZXM6IFRpdGxlRGVmaW5pdGlvbltdID0gW107XG5cbiAgZm9yIChjb25zdCB0aXRsZURlZiBvZiBUSVRMRV9ERUZJTklUSU9OUykge1xuICAgIC8vIOydtOuvuCDrs7TsnKDtlZwg7Lmt7Zi464qUIOqxtOuEiOubsOq4sFxuICAgIGlmIChjdXJyZW50VGl0bGVJZHMuaW5jbHVkZXModGl0bGVEZWYuaWQpKSBjb250aW51ZTtcblxuICAgIC8vIOyekOuPmSDrtoDsl6wg7Lmt7Zi466eMIOyytO2BrFxuICAgIGlmICghdGl0bGVEZWYuYXV0b0dyYW50KSBjb250aW51ZTtcblxuICAgIC8vIOyhsOqxtCDtmZXsnbhcbiAgICBpZiAodGl0bGVEZWYuY2hlY2tDb25kaXRpb24odXNlciwgc3RhdHMpKSB7XG4gICAgICBuZXdUaXRsZXMucHVzaCh0aXRsZURlZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld1RpdGxlcztcbn1cblxuLy8g7IKs7Jqp7J6Q7JeQ6rKMIOy5re2YuCDrtoDsl6xcbmV4cG9ydCBmdW5jdGlvbiBncmFudFRpdGxlKHVzZXI6IElVc2VyLCB0aXRsZURlZjogVGl0bGVEZWZpbml0aW9uKTogYm9vbGVhbiB7XG4gIGNvbnNvbGUubG9nKFwi8J+PhiDsua3tmLgg67aA7JesIOyLnOuPhDpcIiwge1xuICAgIHRpdGxlSWQ6IHRpdGxlRGVmLmlkLFxuICAgIHRpdGxlTmFtZTogdGl0bGVEZWYubmFtZSxcbiAgfSk7XG5cbiAgLy8g7J2066+4IOuztOycoO2VnCDsua3tmLjsnbjsp4Ag7ZmV7J24XG4gIGNvbnN0IGFscmVhZHlIYXMgPSB1c2VyLnRpdGxlcy5zb21lKCh0aXRsZSkgPT4gdGl0bGUuaWQgPT09IHRpdGxlRGVmLmlkKTtcbiAgaWYgKGFscmVhZHlIYXMpIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfj4Yg7J2066+4IOuztOycoO2VnCDsua3tmLg6XCIsIHRpdGxlRGVmLm5hbWUpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIOy5re2YuCDstpTqsIBcbiAgY29uc3QgbmV3VGl0bGUgPSB7XG4gICAgaWQ6IHRpdGxlRGVmLmlkLFxuICAgIG5hbWU6IHRpdGxlRGVmLm5hbWUsXG4gICAgZGVzY3JpcHRpb246IHRpdGxlRGVmLmRlc2NyaXB0aW9uLFxuICAgIGVhcm5lZEF0OiBuZXcgRGF0ZSgpLFxuICAgIGNvbmRpdGlvbjogdGl0bGVEZWYuY29uZGl0aW9uLFxuICAgIHJhcml0eTogdGl0bGVEZWYucmFyaXR5LFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKFwi8J+PhiDsua3tmLgg7LaU6rCAIOyghCB0aXRsZXMubGVuZ3RoOlwiLCB1c2VyLnRpdGxlcy5sZW5ndGgpO1xuICB1c2VyLnRpdGxlcy5wdXNoKG5ld1RpdGxlKTtcbiAgY29uc29sZS5sb2coXCLwn4+GIOy5re2YuCDstpTqsIAg7ZuEIHRpdGxlcy5sZW5ndGg6XCIsIHVzZXIudGl0bGVzLmxlbmd0aCk7XG4gIGNvbnNvbGUubG9nKFwi8J+PhiDstpTqsIDrkJwg7Lmt7Zi4OlwiLCBuZXdUaXRsZSk7XG5cbiAgLy8g7LKrIOuyiOynuCDsua3tmLjrnbzrqbQg7J6Q64+Z7Jy866GcIOyEoO2DnVxuICBpZiAoIXVzZXIuc2VsZWN0ZWRUaXRsZSkge1xuICAgIHVzZXIuc2VsZWN0ZWRUaXRsZSA9IHRpdGxlRGVmLmlkO1xuICAgIGNvbnNvbGUubG9nKFwi8J+PhiDssqsg67KI7Ke4IOy5re2YuOuhnCDshKDtg53rkKg6XCIsIHRpdGxlRGVmLmlkKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyDshKDtg53rkJwg7Lmt7Zi4IOygleuztCDqsIDsoLjsmKTquLBcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWxlY3RlZFRpdGxlSW5mbyh1c2VyOiBJVXNlcikge1xuICBpZiAoIXVzZXIuc2VsZWN0ZWRUaXRsZSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3Qgc2VsZWN0ZWRUaXRsZSA9IHVzZXIudGl0bGVzLmZpbmQoXG4gICAgKHRpdGxlKSA9PiB0aXRsZS5pZCA9PT0gdXNlci5zZWxlY3RlZFRpdGxlXG4gICk7XG4gIGlmICghc2VsZWN0ZWRUaXRsZSkgcmV0dXJuIG51bGw7XG5cbiAgLy8gTW9uZ29vc2Ug6rCd7LK066W8IOyInOyImO2VnCBKYXZhU2NyaXB0IOqwneyytOuhnCDrs4DtmZhcbiAgY29uc3QgdGl0bGVPYmogPVxuICAgIHR5cGVvZiBzZWxlY3RlZFRpdGxlLnRvT2JqZWN0ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gc2VsZWN0ZWRUaXRsZS50b09iamVjdCgpXG4gICAgICA6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRUaXRsZSkpO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IHRpdGxlT2JqLmlkLFxuICAgIG5hbWU6IHRpdGxlT2JqLm5hbWUsXG4gICAgZGVzY3JpcHRpb246IHRpdGxlT2JqLmRlc2NyaXB0aW9uLFxuICAgIHJhcml0eTogdGl0bGVPYmoucmFyaXR5LFxuICAgIGNvbG9yQ2xhc3M6IGdldFRpdGxlUmFyaXR5Q29sb3IodGl0bGVPYmoucmFyaXR5KSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJUSVRMRV9ERUZJTklUSU9OUyIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY29uZGl0aW9uIiwicmFyaXR5IiwiY2hlY2tDb25kaXRpb24iLCJ1c2VyIiwicm9sZSIsImF1dG9HcmFudCIsImhvbmV5ekNoYW5uZWxJZHMiLCJpbmNsdWRlcyIsImNoYW5uZWxJZCIsInN0YXRzIiwibG9naW5Db3VudCIsImxpa2VDb3VudCIsInBsYXlsaXN0Q291bnQiLCJjb25zZWN1dGl2ZURheXMiLCJnZXRUaXRsZURlZmluaXRpb24iLCJ0aXRsZUlkIiwiZmluZCIsInRpdGxlIiwiZ2V0VGl0bGVSYXJpdHlDb2xvciIsImNoZWNrRm9yTmV3VGl0bGVzIiwiY3VycmVudFRpdGxlSWRzIiwidGl0bGVzIiwibWFwIiwibmV3VGl0bGVzIiwidGl0bGVEZWYiLCJwdXNoIiwiZ3JhbnRUaXRsZSIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZU5hbWUiLCJhbHJlYWR5SGFzIiwic29tZSIsIm5ld1RpdGxlIiwiZWFybmVkQXQiLCJEYXRlIiwibGVuZ3RoIiwic2VsZWN0ZWRUaXRsZSIsImdldFNlbGVjdGVkVGl0bGVJbmZvIiwidGl0bGVPYmoiLCJ0b09iamVjdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImNvbG9yQ2xhc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/titleSystem.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/userService.ts":
/*!********************************!*\
  !*** ./src/lib/userService.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOrUpdateUser: () => (/* binding */ createOrUpdateUser),\n/* harmony export */   getAdminUsers: () => (/* binding */ getAdminUsers),\n/* harmony export */   getUserByChannelId: () => (/* binding */ getUserByChannelId),\n/* harmony export */   getUserStats: () => (/* binding */ getUserStats),\n/* harmony export */   updateUserPreferences: () => (/* binding */ updateUserPreferences)\n/* harmony export */ });\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/models/User */ \"(rsc)/./src/models/User.ts\");\n/* harmony import */ var _lib_adminChannels__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/adminChannels */ \"(rsc)/./src/lib/adminChannels.ts\");\n/* harmony import */ var _lib_titleSystem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/titleSystem */ \"(rsc)/./src/lib/titleSystem.ts\");\n\n\n\n/**\n * 사용자 생성 또는 업데이트 (로그인 시 호출)\n */ async function createOrUpdateUser(userData) {\n    try {\n        const staticRole = (0,_lib_adminChannels__WEBPACK_IMPORTED_MODULE_1__.getStaticUserRole)(userData.channelId);\n        // 기존 사용자 찾기\n        let user = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n            channelId: userData.channelId\n        });\n        if (user) {\n            // 기존 사용자 업데이트\n            const oldChannelName = user.channelName;\n            const newChannelName = userData.channelName;\n            // channelName 변경 감지 및 이력 추가\n            if (oldChannelName !== newChannelName) {\n                user.channelNameHistory.push({\n                    channelName: newChannelName,\n                    changedAt: new Date(),\n                    source: \"login\"\n                });\n                console.log(`치지직 채널명 변경 감지: ${oldChannelName} → ${newChannelName}`);\n            }\n            user.channelName = newChannelName;\n            // displayName이 없으면 channelName으로 설정하지 않음 (프로필 수정 시에만 생성)\n            user.profileImageUrl = userData.profileImageUrl || user.profileImageUrl;\n            // 정적 권한이 현재 권한보다 높으면 업데이트\n            // if (staticRole !== 'user' && (user.role === 'user' || staticRole === 'super_admin')) {\n            //   user.role = staticRole\n            //   console.log(`사용자 권한 업데이트: ${userData.channelName} → ${staticRole}`)\n            // }\n            user.lastLoginAt = new Date();\n            // 기존 사용자의 칭호 필드가 없으면 초기화\n            if (!user.titles) {\n                user.titles = [];\n            }\n            if (user.selectedTitle === undefined) {\n                user.selectedTitle = null;\n            }\n            // 칭호 체크 및 부여\n            await checkAndGrantTitles(user);\n            const savedUser = await user.save();\n            console.log(`기존 사용자 업데이트: ${userData.channelName} (${userData.channelId})`);\n            // 저장 후 실제 DB 상태 확인\n            console.log(\"🏆 저장 후 DB 상태:\", {\n                titlesCount: savedUser.titles?.length || 0,\n                selectedTitle: savedUser.selectedTitle,\n                titles: savedUser.titles?.map((t)=>t.name) || []\n            });\n            // DB에서 다시 조회해서 실제 저장 확인\n            const reloadedUser = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n                channelId: userData.channelId\n            });\n            console.log(\"🏆 DB 재조회 결과:\", {\n                titlesCount: reloadedUser?.titles?.length || 0,\n                selectedTitle: reloadedUser?.selectedTitle,\n                titles: reloadedUser?.titles?.map((t)=>t.name) || []\n            });\n        } else {\n            // 새 사용자 생성\n            user = new _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n                channelId: userData.channelId,\n                channelName: userData.channelName,\n                displayName: userData.channelName,\n                profileImageUrl: userData.profileImageUrl,\n                role: staticRole,\n                lastLoginAt: new Date(),\n                channelNameHistory: [\n                    {\n                        channelName: userData.channelName,\n                        changedAt: new Date(),\n                        source: \"initial\"\n                    }\n                ],\n                titles: [],\n                selectedTitle: null,\n                preferences: {\n                    theme: \"system\",\n                    defaultPlaylistView: \"grid\"\n                }\n            });\n            // 신규 사용자 칭호 체크 및 부여\n            await checkAndGrantTitles(user);\n            await user.save();\n            console.log(`새 사용자 생성: ${userData.channelName} (${userData.channelId}) - 권한: ${staticRole}`);\n        }\n        return user;\n    } catch (error) {\n        console.error(\"사용자 생성/업데이트 오류:\", error);\n        throw error;\n    }\n}\n/**\n * 사용자 정보 조회\n */ async function getUserByChannelId(channelId) {\n    try {\n        return await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n            channelId\n        });\n    } catch (error) {\n        console.error(\"사용자 조회 오류:\", error);\n        return null;\n    }\n}\n/**\n * 사용자 환경설정 업데이트\n */ async function updateUserPreferences(channelId, preferences) {\n    try {\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n            channelId\n        });\n        if (!user) return null;\n        user.preferences = {\n            ...user.preferences,\n            ...preferences\n        };\n        await user.save();\n        return user;\n    } catch (error) {\n        console.error(\"사용자 환경설정 업데이트 오류:\", error);\n        return null;\n    }\n}\n/**\n * 관리자 목록 조회\n */ async function getAdminUsers() {\n    try {\n        return await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({\n            role: {\n                $ne: \"user\"\n            }\n        }).sort({\n            lastLoginAt: -1\n        });\n    } catch (error) {\n        console.error(\"관리자 목록 조회 오류:\", error);\n        return [];\n    }\n}\n/**\n * 활성 사용자 통계\n */ async function getUserStats() {\n    try {\n        const totalUsers = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].countDocuments();\n        const activeUsers = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].countDocuments({\n            lastLoginAt: {\n                $gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n            }\n        });\n        const adminUsers = await _models_User__WEBPACK_IMPORTED_MODULE_0__[\"default\"].countDocuments({\n            role: {\n                $ne: \"user\"\n            }\n        });\n        return {\n            totalUsers,\n            activeUsers,\n            adminUsers\n        };\n    } catch (error) {\n        console.error(\"사용자 통계 조회 오류:\", error);\n        return {\n            totalUsers: 0,\n            activeUsers: 0,\n            adminUsers: 0\n        };\n    }\n}\n/**\n * 사용자 통계 수집\n */ async function getUserStatsForTitles(user) {\n    try {\n        // Like 모델에서 해당 사용자의 좋아요 수 조회\n        const Like = (await __webpack_require__.e(/*! import() */ \"_rsc_src_models_Like_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/models/Like */ \"(rsc)/./src/models/Like.ts\"))).default;\n        const likeCount = await Like.countDocuments({\n            userId: user._id\n        });\n        // Playlist 모델에서 해당 사용자의 플레이리스트 수 조회\n        const Playlist = (await __webpack_require__.e(/*! import() */ \"_rsc_src_models_Playlist_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/models/Playlist */ \"(rsc)/./src/models/Playlist.ts\"))).default;\n        const playlistCount = await Playlist.countDocuments({\n            userId: user._id\n        });\n        // 실제 활동 통계 사용 (activityStats가 없으면 기본값)\n        const activityStats = user.activityStats || {\n            totalLoginDays: 1,\n            currentStreak: 1,\n            longestStreak: 1,\n            lastVisitDate: null\n        };\n        return {\n            likeCount,\n            playlistCount,\n            loginCount: activityStats.totalLoginDays,\n            consecutiveDays: activityStats.currentStreak\n        };\n    } catch (error) {\n        console.error(\"사용자 통계 수집 오류:\", error);\n        return {\n            likeCount: 0,\n            playlistCount: 0,\n            loginCount: 1,\n            consecutiveDays: 1\n        };\n    }\n}\n/**\n * 사용자 칭호 체크 및 부여\n */ async function checkAndGrantTitles(user) {\n    try {\n        // 기존 칭호가 없으면 빈 배열로 초기화\n        if (!user.titles) {\n            user.titles = [];\n        }\n        if (user.selectedTitle === undefined) {\n            user.selectedTitle = null;\n        }\n        // 사용자 통계 수집\n        const stats = await getUserStatsForTitles(user);\n        // 새로 획득할 수 있는 칭호 확인\n        const newTitleDefs = (0,_lib_titleSystem__WEBPACK_IMPORTED_MODULE_2__.checkForNewTitles)(user, stats);\n        // 새 칭호 부여\n        let grantedCount = 0;\n        for (const titleDef of newTitleDefs){\n            if ((0,_lib_titleSystem__WEBPACK_IMPORTED_MODULE_2__.grantTitle)(user, titleDef)) {\n                grantedCount++;\n                console.log(`칭호 부여: ${user.channelName} → ${titleDef.name}`);\n                // Mongoose가 배열 변경을 감지하도록 명시적으로 표시\n                user.markModified(\"titles\");\n                user.markModified(\"selectedTitle\");\n            }\n        }\n        if (grantedCount > 0) {\n            console.log(`총 ${grantedCount}개의 새로운 칭호를 부여했습니다`);\n            console.log(\"🏆 현재 사용자 칭호 상태:\", {\n                titlesCount: user.titles.length,\n                selectedTitle: user.selectedTitle,\n                titles: user.titles.map((t)=>t.name)\n            });\n        }\n    } catch (error) {\n        console.error(\"칭호 체크 및 부여 오류:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS2MsTUFBTSxDQUFDTyxNQUFNO2dCQUMvQk4sZUFBZWYsS0FBS2UsYUFBYTtnQkFDakNELFFBQVFkLEtBQUtjLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVDLElBQUk7WUFDdkM7UUFDRjtJQUNGLEVBQUUsT0FBT08sT0FBTztRQUNkckIsUUFBUXFCLEtBQUssQ0FBQyxrQkFBa0JBO0lBQ2xDO0FBQ0YiLCJzb3VyY2VzIjpbIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvbGliL3VzZXJTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBVc2VyLCB7IElVc2VyIH0gZnJvbSBcIkAvbW9kZWxzL1VzZXJcIjtcbmltcG9ydCB7IGdldFN0YXRpY1VzZXJSb2xlIH0gZnJvbSBcIkAvbGliL2FkbWluQ2hhbm5lbHNcIjtcbmltcG9ydCB7IGNoZWNrRm9yTmV3VGl0bGVzLCBncmFudFRpdGxlLCBVc2VyU3RhdHMgfSBmcm9tIFwiQC9saWIvdGl0bGVTeXN0ZW1cIjtcblxuLyoqXG4gKiDsgqzsmqnsnpAg7IOd7ISxIOuYkOuKlCDsl4XrjbDsnbTtirggKOuhnOq3uOyduCDsi5wg7Zi47LacKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVVc2VyKHVzZXJEYXRhOiB7XG4gIGNoYW5uZWxJZDogc3RyaW5nO1xuICBjaGFubmVsTmFtZTogc3RyaW5nO1xuICBwcm9maWxlSW1hZ2VVcmw/OiBzdHJpbmc7XG59KTogUHJvbWlzZTxJVXNlcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHN0YXRpY1JvbGUgPSBnZXRTdGF0aWNVc2VyUm9sZSh1c2VyRGF0YS5jaGFubmVsSWQpO1xuXG4gICAgLy8g6riw7KG0IOyCrOyaqeyekCDssL7quLBcbiAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGNoYW5uZWxJZDogdXNlckRhdGEuY2hhbm5lbElkIH0pO1xuXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIC8vIOq4sOyhtCDsgqzsmqnsnpAg7JeF642w7J207Yq4XG4gICAgICBjb25zdCBvbGRDaGFubmVsTmFtZSA9IHVzZXIuY2hhbm5lbE5hbWU7XG4gICAgICBjb25zdCBuZXdDaGFubmVsTmFtZSA9IHVzZXJEYXRhLmNoYW5uZWxOYW1lO1xuXG4gICAgICAvLyBjaGFubmVsTmFtZSDrs4Dqsr0g6rCQ7KeAIOuwjyDsnbTroKUg7LaU6rCAXG4gICAgICBpZiAob2xkQ2hhbm5lbE5hbWUgIT09IG5ld0NoYW5uZWxOYW1lKSB7XG4gICAgICAgIHVzZXIuY2hhbm5lbE5hbWVIaXN0b3J5LnB1c2goe1xuICAgICAgICAgIGNoYW5uZWxOYW1lOiBuZXdDaGFubmVsTmFtZSxcbiAgICAgICAgICBjaGFuZ2VkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgc291cmNlOiBcImxvZ2luXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBg7LmY7KeA7KeBIOyxhOuEkOuqhSDrs4Dqsr0g6rCQ7KeAOiAke29sZENoYW5uZWxOYW1lfSDihpIgJHtuZXdDaGFubmVsTmFtZX1gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHVzZXIuY2hhbm5lbE5hbWUgPSBuZXdDaGFubmVsTmFtZTtcbiAgICAgIC8vIGRpc3BsYXlOYW1l7J20IOyXhuycvOuptCBjaGFubmVsTmFtZeycvOuhnCDshKTsoJXtlZjsp4Ag7JWK7J2MICjtlITroZztlYQg7IiY7KCVIOyLnOyXkOunjCDsg53shLEpXG4gICAgICB1c2VyLnByb2ZpbGVJbWFnZVVybCA9IHVzZXJEYXRhLnByb2ZpbGVJbWFnZVVybCB8fCB1c2VyLnByb2ZpbGVJbWFnZVVybDtcblxuICAgICAgLy8g7KCV7KCBIOq2jO2VnOydtCDtmITsnqwg6raM7ZWc67O064ukIOuGkuycvOuptCDsl4XrjbDsnbTtirhcbiAgICAgIC8vIGlmIChzdGF0aWNSb2xlICE9PSAndXNlcicgJiYgKHVzZXIucm9sZSA9PT0gJ3VzZXInIHx8IHN0YXRpY1JvbGUgPT09ICdzdXBlcl9hZG1pbicpKSB7XG4gICAgICAvLyAgIHVzZXIucm9sZSA9IHN0YXRpY1JvbGVcbiAgICAgIC8vICAgY29uc29sZS5sb2coYOyCrOyaqeyekCDqtoztlZwg7JeF642w7J207Yq4OiAke3VzZXJEYXRhLmNoYW5uZWxOYW1lfSDihpIgJHtzdGF0aWNSb2xlfWApXG4gICAgICAvLyB9XG5cbiAgICAgIHVzZXIubGFzdExvZ2luQXQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAvLyDquLDsobQg7IKs7Jqp7J6Q7J2YIOy5re2YuCDtlYTrk5zqsIAg7JeG7Jy866m0IOy0iOq4sO2ZlFxuICAgICAgaWYgKCF1c2VyLnRpdGxlcykge1xuICAgICAgICB1c2VyLnRpdGxlcyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIuc2VsZWN0ZWRUaXRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVzZXIuc2VsZWN0ZWRUaXRsZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIOy5re2YuCDssrTtgawg67CPIOu2gOyXrFxuICAgICAgYXdhaXQgY2hlY2tBbmRHcmFudFRpdGxlcyh1c2VyKTtcblxuICAgICAgY29uc3Qgc2F2ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYOq4sOyhtCDsgqzsmqnsnpAg7JeF642w7J207Yq4OiAke3VzZXJEYXRhLmNoYW5uZWxOYW1lfSAoJHt1c2VyRGF0YS5jaGFubmVsSWR9KWBcbiAgICAgICk7XG5cbiAgICAgIC8vIOyggOyepSDtm4Qg7Iuk7KCcIERCIOyDge2DnCDtmZXsnbhcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+PhiDsoIDsnqUg7ZuEIERCIOyDge2DnDpcIiwge1xuICAgICAgICB0aXRsZXNDb3VudDogc2F2ZWRVc2VyLnRpdGxlcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNlbGVjdGVkVGl0bGU6IHNhdmVkVXNlci5zZWxlY3RlZFRpdGxlLFxuICAgICAgICB0aXRsZXM6IHNhdmVkVXNlci50aXRsZXM/Lm1hcCgodDogYW55KSA9PiB0Lm5hbWUpIHx8IFtdLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIERC7JeQ7IScIOuLpOyLnCDsobDtmoztlbTshJwg7Iuk7KCcIOyggOyepSDtmZXsnbhcbiAgICAgIGNvbnN0IHJlbG9hZGVkVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICAgIGNoYW5uZWxJZDogdXNlckRhdGEuY2hhbm5lbElkLFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfj4YgREIg7J6s7KGw7ZqMIOqysOqzvDpcIiwge1xuICAgICAgICB0aXRsZXNDb3VudDogcmVsb2FkZWRVc2VyPy50aXRsZXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzZWxlY3RlZFRpdGxlOiByZWxvYWRlZFVzZXI/LnNlbGVjdGVkVGl0bGUsXG4gICAgICAgIHRpdGxlczogcmVsb2FkZWRVc2VyPy50aXRsZXM/Lm1hcCgodDogYW55KSA9PiB0Lm5hbWUpIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOyDiCDsgqzsmqnsnpAg7IOd7ISxXG4gICAgICB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICBjaGFubmVsSWQ6IHVzZXJEYXRhLmNoYW5uZWxJZCxcbiAgICAgICAgY2hhbm5lbE5hbWU6IHVzZXJEYXRhLmNoYW5uZWxOYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogdXNlckRhdGEuY2hhbm5lbE5hbWUsIC8vIOqwgOyeheyLnCBjaGFubmVsTmFtZeydhCBkaXNwbGF5TmFtZeycvOuhnCDshKTsoJVcbiAgICAgICAgcHJvZmlsZUltYWdlVXJsOiB1c2VyRGF0YS5wcm9maWxlSW1hZ2VVcmwsXG4gICAgICAgIHJvbGU6IHN0YXRpY1JvbGUsXG4gICAgICAgIGxhc3RMb2dpbkF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjaGFubmVsTmFtZUhpc3Rvcnk6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjaGFubmVsTmFtZTogdXNlckRhdGEuY2hhbm5lbE5hbWUsXG4gICAgICAgICAgICBjaGFuZ2VkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBzb3VyY2U6IFwiaW5pdGlhbFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRpdGxlczogW10sIC8vIOu5iCDsua3tmLgg67Cw7Je066GcIOy0iOq4sO2ZlFxuICAgICAgICBzZWxlY3RlZFRpdGxlOiBudWxsLFxuICAgICAgICBwcmVmZXJlbmNlczoge1xuICAgICAgICAgIHRoZW1lOiBcInN5c3RlbVwiLFxuICAgICAgICAgIGRlZmF1bHRQbGF5bGlzdFZpZXc6IFwiZ3JpZFwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIOyLoOq3nCDsgqzsmqnsnpAg7Lmt7Zi4IOyytO2BrCDrsI8g67aA7JesXG4gICAgICBhd2FpdCBjaGVja0FuZEdyYW50VGl0bGVzKHVzZXIpO1xuXG4gICAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg7IOIIOyCrOyaqeyekCDsg53shLE6ICR7dXNlckRhdGEuY2hhbm5lbE5hbWV9ICgke3VzZXJEYXRhLmNoYW5uZWxJZH0pIC0g6raM7ZWcOiAke3N0YXRpY1JvbGV9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi7IKs7Jqp7J6QIOyDneyEsS/sl4XrjbDsnbTtirgg7Jik66WYOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiDsgqzsmqnsnpAg7KCV67O0IOyhsO2ajFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5Q2hhbm5lbElkKFxuICBjaGFubmVsSWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxJVXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgVXNlci5maW5kT25lKHsgY2hhbm5lbElkIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLsgqzsmqnsnpAg7KGw7ZqMIOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICog7IKs7Jqp7J6QIO2ZmOqyveyEpOyglSDsl4XrjbDsnbTtirhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcmVmZXJlbmNlcyhcbiAgY2hhbm5lbElkOiBzdHJpbmcsXG4gIHByZWZlcmVuY2VzOiBQYXJ0aWFsPElVc2VyW1wicHJlZmVyZW5jZXNcIl0+XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgY2hhbm5lbElkIH0pO1xuICAgIGlmICghdXNlcikgcmV0dXJuIG51bGw7XG5cbiAgICB1c2VyLnByZWZlcmVuY2VzID0geyAuLi51c2VyLnByZWZlcmVuY2VzLCAuLi5wcmVmZXJlbmNlcyB9O1xuICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgcmV0dXJuIHVzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuyCrOyaqeyekCDtmZjqsr3shKTsoJUg7JeF642w7J207Yq4IOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICog6rSA66as7J6QIOuqqeuhnSDsobDtmoxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWluVXNlcnMoKTogUHJvbWlzZTxJVXNlcltdPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IFVzZXIuZmluZCh7IHJvbGU6IHsgJG5lOiBcInVzZXJcIiB9IH0pLnNvcnQoeyBsYXN0TG9naW5BdDogLTEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuq0gOumrOyekCDrqqnroZ0g7KGw7ZqMIOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIO2ZnOyEsSDsgqzsmqnsnpAg7Ya16rOEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyU3RhdHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG90YWxVc2VycyA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoKTtcbiAgICBjb25zdCBhY3RpdmVVc2VycyA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoe1xuICAgICAgbGFzdExvZ2luQXQ6IHsgJGd0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkgfSwgLy8gMzDsnbwg64K0XG4gICAgfSk7XG4gICAgY29uc3QgYWRtaW5Vc2VycyA9IGF3YWl0IFVzZXIuY291bnREb2N1bWVudHMoeyByb2xlOiB7ICRuZTogXCJ1c2VyXCIgfSB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFVzZXJzLFxuICAgICAgYWN0aXZlVXNlcnMsXG4gICAgICBhZG1pblVzZXJzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuyCrOyaqeyekCDthrXqs4Qg7KGw7ZqMIOyYpOulmDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFVzZXJzOiAwLFxuICAgICAgYWN0aXZlVXNlcnM6IDAsXG4gICAgICBhZG1pblVzZXJzOiAwLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiDsgqzsmqnsnpAg7Ya16rOEIOyImOynkVxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyU3RhdHNGb3JUaXRsZXModXNlcjogSVVzZXIpOiBQcm9taXNlPFVzZXJTdGF0cz4ge1xuICB0cnkge1xuICAgIC8vIExpa2Ug66qo64247JeQ7IScIO2VtOuLuSDsgqzsmqnsnpDsnZgg7KKL7JWE7JqUIOyImCDsobDtmoxcbiAgICBjb25zdCBMaWtlID0gKGF3YWl0IGltcG9ydChcIkAvbW9kZWxzL0xpa2VcIikpLmRlZmF1bHQ7XG4gICAgY29uc3QgbGlrZUNvdW50ID0gYXdhaXQgTGlrZS5jb3VudERvY3VtZW50cyh7IHVzZXJJZDogdXNlci5faWQgfSk7XG5cbiAgICAvLyBQbGF5bGlzdCDrqqjrjbjsl5DshJwg7ZW064u5IOyCrOyaqeyekOydmCDtlIzroIjsnbTrpqzsiqTtirgg7IiYIOyhsO2ajFxuICAgIGNvbnN0IFBsYXlsaXN0ID0gKGF3YWl0IGltcG9ydChcIkAvbW9kZWxzL1BsYXlsaXN0XCIpKS5kZWZhdWx0O1xuICAgIGNvbnN0IHBsYXlsaXN0Q291bnQgPSBhd2FpdCBQbGF5bGlzdC5jb3VudERvY3VtZW50cyh7IHVzZXJJZDogdXNlci5faWQgfSk7XG5cbiAgICAvLyDsi6TsoJwg7Zmc64+ZIO2GteqzhCDsgqzsmqkgKGFjdGl2aXR5U3RhdHPqsIAg7JeG7Jy866m0IOq4sOuzuOqwkilcbiAgICBjb25zdCBhY3Rpdml0eVN0YXRzID0gdXNlci5hY3Rpdml0eVN0YXRzIHx8IHtcbiAgICAgIHRvdGFsTG9naW5EYXlzOiAxLFxuICAgICAgY3VycmVudFN0cmVhazogMSxcbiAgICAgIGxvbmdlc3RTdHJlYWs6IDEsXG4gICAgICBsYXN0VmlzaXREYXRlOiBudWxsLFxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGlrZUNvdW50LFxuICAgICAgcGxheWxpc3RDb3VudCxcbiAgICAgIGxvZ2luQ291bnQ6IGFjdGl2aXR5U3RhdHMudG90YWxMb2dpbkRheXMsXG4gICAgICBjb25zZWN1dGl2ZURheXM6IGFjdGl2aXR5U3RhdHMuY3VycmVudFN0cmVhayxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLsgqzsmqnsnpAg7Ya16rOEIOyImOynkSDsmKTrpZg6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGlrZUNvdW50OiAwLFxuICAgICAgcGxheWxpc3RDb3VudDogMCxcbiAgICAgIGxvZ2luQ291bnQ6IDEsXG4gICAgICBjb25zZWN1dGl2ZURheXM6IDEsXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIOyCrOyaqeyekCDsua3tmLgg7LK07YGsIOuwjyDrtoDsl6xcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tBbmRHcmFudFRpdGxlcyh1c2VyOiBJVXNlcik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIC8vIOq4sOyhtCDsua3tmLjqsIAg7JeG7Jy866m0IOu5iCDrsLDsl7TroZwg7LSI6riw7ZmUXG4gICAgaWYgKCF1c2VyLnRpdGxlcykge1xuICAgICAgdXNlci50aXRsZXMgPSBbXTtcbiAgICB9XG4gICAgaWYgKHVzZXIuc2VsZWN0ZWRUaXRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB1c2VyLnNlbGVjdGVkVGl0bGUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIOyCrOyaqeyekCDthrXqs4Qg7IiY7KeRXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBnZXRVc2VyU3RhdHNGb3JUaXRsZXModXNlcik7XG5cbiAgICAvLyDsg4jroZwg7ZqN65Od7ZWgIOyImCDsnojripQg7Lmt7Zi4IO2ZleyduFxuICAgIGNvbnN0IG5ld1RpdGxlRGVmcyA9IGNoZWNrRm9yTmV3VGl0bGVzKHVzZXIsIHN0YXRzKTtcblxuICAgIC8vIOyDiCDsua3tmLgg67aA7JesXG4gICAgbGV0IGdyYW50ZWRDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCB0aXRsZURlZiBvZiBuZXdUaXRsZURlZnMpIHtcbiAgICAgIGlmIChncmFudFRpdGxlKHVzZXIsIHRpdGxlRGVmKSkge1xuICAgICAgICBncmFudGVkQ291bnQrKztcbiAgICAgICAgY29uc29sZS5sb2coYOy5re2YuCDrtoDsl6w6ICR7dXNlci5jaGFubmVsTmFtZX0g4oaSICR7dGl0bGVEZWYubmFtZX1gKTtcbiAgICAgICAgLy8gTW9uZ29vc2XqsIAg67Cw7Je0IOuzgOqyveydhCDqsJDsp4DtlZjrj4TroZ0g66qF7Iuc7KCB7Jy866GcIO2RnOyLnFxuICAgICAgICB1c2VyLm1hcmtNb2RpZmllZChcInRpdGxlc1wiKTtcbiAgICAgICAgdXNlci5tYXJrTW9kaWZpZWQoXCJzZWxlY3RlZFRpdGxlXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChncmFudGVkQ291bnQgPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg7LSdICR7Z3JhbnRlZENvdW50feqwnOydmCDsg4jroZzsmrQg7Lmt7Zi466W8IOu2gOyXrO2WiOyKteuLiOuLpGApO1xuICAgICAgY29uc29sZS5sb2coXCLwn4+GIO2YhOyerCDsgqzsmqnsnpAg7Lmt7Zi4IOyDge2DnDpcIiwge1xuICAgICAgICB0aXRsZXNDb3VudDogdXNlci50aXRsZXMubGVuZ3RoLFxuICAgICAgICBzZWxlY3RlZFRpdGxlOiB1c2VyLnNlbGVjdGVkVGl0bGUsXG4gICAgICAgIHRpdGxlczogdXNlci50aXRsZXMubWFwKCh0KSA9PiB0Lm5hbWUpLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLsua3tmLgg7LK07YGsIOuwjyDrtoDsl6wg7Jik66WYOlwiLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJVc2VyIiwiZ2V0U3RhdGljVXNlclJvbGUiLCJjaGVja0Zvck5ld1RpdGxlcyIsImdyYW50VGl0bGUiLCJjcmVhdGVPclVwZGF0ZVVzZXIiLCJ1c2VyRGF0YSIsInN0YXRpY1JvbGUiLCJjaGFubmVsSWQiLCJ1c2VyIiwiZmluZE9uZSIsIm9sZENoYW5uZWxOYW1lIiwiY2hhbm5lbE5hbWUiLCJuZXdDaGFubmVsTmFtZSIsImNoYW5uZWxOYW1lSGlzdG9yeSIsInB1c2giLCJjaGFuZ2VkQXQiLCJEYXRlIiwic291cmNlIiwiY29uc29sZSIsImxvZyIsInByb2ZpbGVJbWFnZVVybCIsImxhc3RMb2dpbkF0IiwidGl0bGVzIiwic2VsZWN0ZWRUaXRsZSIsInVuZGVmaW5lZCIsImNoZWNrQW5kR3JhbnRUaXRsZXMiLCJzYXZlZFVzZXIiLCJzYXZlIiwidGl0bGVzQ291bnQiLCJsZW5ndGgiLCJtYXAiLCJ0IiwibmFtZSIsInJlbG9hZGVkVXNlciIsImRpc3BsYXlOYW1lIiwicm9sZSIsInByZWZlcmVuY2VzIiwidGhlbWUiLCJkZWZhdWx0UGxheWxpc3RWaWV3IiwiZXJyb3IiLCJnZXRVc2VyQnlDaGFubmVsSWQiLCJ1cGRhdGVVc2VyUHJlZmVyZW5jZXMiLCJnZXRBZG1pblVzZXJzIiwiZmluZCIsIiRuZSIsInNvcnQiLCJnZXRVc2VyU3RhdHMiLCJ0b3RhbFVzZXJzIiwiY291bnREb2N1bWVudHMiLCJhY3RpdmVVc2VycyIsIiRndGUiLCJub3ciLCJhZG1pblVzZXJzIiwiZ2V0VXNlclN0YXRzRm9yVGl0bGVzIiwiTGlrZSIsImRlZmF1bHQiLCJsaWtlQ291bnQiLCJ1c2VySWQiLCJfaWQiLCJQbGF5bGlzdCIsInBsYXlsaXN0Q291bnQiLCJhY3Rpdml0eVN0YXRzIiwidG90YWxMb2dpbkRheXMiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImxhc3RWaXNpdERhdGUiLCJsb2dpbkNvdW50IiwiY29uc2VjdXRpdmVEYXlzIiwic3RhdHMiLCJuZXdUaXRsZURlZnMiLCJncmFudGVkQ291bnQiLCJ0aXRsZURlZiIsIm1hcmtNb2RpZmllZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/userService.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/SongDetail.ts":
/*!**********************************!*\
  !*** ./src/models/SongDetail.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MRLinkSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    url: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    skipSeconds: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    label: {\n        type: String,\n        trim: true\n    },\n    duration: {\n        type: String,\n        trim: true\n    }\n}, {\n    _id: false\n});\nconst SongDetailSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    title: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    artist: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    titleAlias: {\n        type: String,\n        trim: true\n    },\n    artistAlias: {\n        type: String,\n        trim: true\n    },\n    language: {\n        type: String,\n        trim: true,\n        enum: [\n            'Korean',\n            'English',\n            'Japanese',\n            'Chinese',\n            'Other'\n        ]\n    },\n    lyrics: {\n        type: String,\n        trim: true\n    },\n    searchTags: [\n        {\n            type: String,\n            trim: true\n        }\n    ],\n    sungCount: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    lastSungDate: {\n        type: String,\n        trim: true\n    },\n    keyAdjustment: {\n        type: Number,\n        default: null,\n        validate: {\n            validator: function(v) {\n                if (v === undefined || v === null) return true;\n                return v >= -12 && v <= 12;\n            },\n            message: '키 조절은 -12부터 +12 사이의 숫자로 입력해주세요.'\n        }\n    },\n    mrLinks: [\n        MRLinkSchema\n    ],\n    selectedMRIndex: {\n        type: Number,\n        default: 0,\n        min: 0,\n        validate: {\n            validator: function(v) {\n                if (v === undefined || v === null) return true;\n                const mrLinks = this.mrLinks;\n                if (!mrLinks || mrLinks.length === 0) return true;\n                return v < mrLinks.length;\n            },\n            message: 'selectedMRIndex must be within the range of available MR links'\n        }\n    },\n    personalNotes: {\n        type: String,\n        trim: true\n    },\n    imageUrl: {\n        type: String,\n        trim: true,\n        validate: {\n            validator: function(v) {\n                if (!v) return true; // 빈 값은 허용\n                // URL 형식 검증\n                try {\n                    new URL(v);\n                    return true;\n                } catch  {\n                    return false;\n                }\n            },\n            message: '올바른 URL 형식을 입력해주세요.'\n        }\n    },\n    // 곡 상태 관리\n    status: {\n        type: String,\n        enum: [\n            'active',\n            'deleted',\n            'pending',\n            'rejected'\n        ],\n        default: 'active'\n    },\n    // 곡 소스 타입 (기존 source 필드 확장)\n    sourceType: {\n        type: String,\n        enum: [\n            'sheet',\n            'admin',\n            'user_suggestion'\n        ],\n        default: 'sheet'\n    },\n    // 추천자 정보 (사용자 추천곡인 경우)\n    suggestedBy: {\n        type: String,\n        trim: true\n    },\n    // 삭제 관련 정보\n    deletedAt: {\n        type: Date\n    },\n    deletedBy: {\n        type: String,\n        trim: true\n    },\n    deleteReason: {\n        type: String,\n        trim: true\n    },\n    // 승인 관련 정보 (추천곡용)\n    approvedAt: {\n        type: Date\n    },\n    approvedBy: {\n        type: String,\n        trim: true\n    }\n}, {\n    timestamps: true\n});\n// 제목+아티스트 복합 unique 인덱스 (같은 제목이라도 다른 아티스트면 허용)\nSongDetailSchema.index({\n    title: 1,\n    artist: 1\n}, {\n    unique: true\n});\nSongDetailSchema.index({\n    title: 1\n}); // 제목 검색용\nSongDetailSchema.index({\n    sungCount: -1\n});\nSongDetailSchema.index({\n    lastSungDate: -1\n});\nSongDetailSchema.index({\n    searchTags: 1\n});\nSongDetailSchema.index({\n    language: 1\n});\nSongDetailSchema.index({\n    status: 1\n});\nSongDetailSchema.index({\n    sourceType: 1\n});\nSongDetailSchema.index({\n    suggestedBy: 1\n});\nSongDetailSchema.index({\n    deletedAt: -1\n});\n// 새로운 통일된 모델명 (SongDetail)\nconst SongDetail = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).SongDetail || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('SongDetail', SongDetailSchema);\n// 기존 호환성을 위한 별칭 제거 (마이그레이션 완료)\n// SongDetail 모델만 사용\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SongDetail);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VztRQUNUdkMsTUFBTUM7UUFDTkUsTUFBTTtJQUNSO0lBQ0FxQyxjQUFjO1FBQ1p4QyxNQUFNQztRQUNORSxNQUFNO0lBQ1I7SUFDQSxrQkFBa0I7SUFDbEJzQyxZQUFZO1FBQ1Z6QyxNQUFNc0M7SUFDUjtJQUNBSSxZQUFZO1FBQ1YxQyxNQUFNQztRQUNORSxNQUFNO0lBQ1I7QUFDRixHQUFHO0lBQ0R3QyxZQUFZO0FBQ2Q7QUFFQSwrQ0FBK0M7QUFDL0NoQyxpQkFBaUJpQyxLQUFLLENBQUM7SUFBRWhDLE9BQU87SUFBR0MsUUFBUTtBQUFFLEdBQUc7SUFBRWdDLFFBQVE7QUFBSztBQUMvRGxDLGlCQUFpQmlDLEtBQUssQ0FBQztJQUFFaEMsT0FBTztBQUFFLElBQUksU0FBUztBQUMvQ0QsaUJBQWlCaUMsS0FBSyxDQUFDO0lBQUV4QixXQUFXLENBQUM7QUFBRTtBQUN2Q1QsaUJBQWlCaUMsS0FBSyxDQUFDO0lBQUV2QixjQUFjLENBQUM7QUFBRTtBQUMxQ1YsaUJBQWlCaUMsS0FBSyxDQUFDO0lBQUV6QixZQUFZO0FBQUU7QUFDdkNSLGlCQUFpQmlDLEtBQUssQ0FBQztJQUFFNUIsVUFBVTtBQUFFO0FBQ3JDTCxpQkFBaUJpQyxLQUFLLENBQUM7SUFBRVYsUUFBUTtBQUFFO0FBQ25DdkIsaUJBQWlCaUMsS0FBSyxDQUFDO0lBQUVULFlBQVk7QUFBRTtBQUN2Q3hCLGlCQUFpQmlDLEtBQUssQ0FBQztJQUFFUixhQUFhO0FBQUU7QUFDeEN6QixpQkFBaUJpQyxLQUFLLENBQUM7SUFBRVAsV0FBVyxDQUFDO0FBQUU7QUFFdkMsMkJBQTJCO0FBQzNCLE1BQU1TLGFBQWFsRCx3REFBZSxDQUFDa0QsVUFBVSxJQUFJbEQscURBQWMsQ0FBYyxjQUFjZTtBQUUzRiwrQkFBK0I7QUFDL0Isb0JBQW9CO0FBRXBCLGlFQUFlbUMsVUFBVUEsRUFBQyIsInNvdXJjZXMiOlsiL21udC9mL2RhdGEvZ2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9tb2RlbHMvU29uZ0RldGFpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IFNvbmdEZXRhaWwgfSBmcm9tICdAL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBJU29uZ0RldGFpbCBleHRlbmRzIFNvbmdEZXRhaWwsIERvY3VtZW50IHt9XG5cbmNvbnN0IE1STGlua1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB1cmw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbiAgc2tpcFNlY29uZHM6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMCxcbiAgICBtaW46IDAsXG4gIH0sXG4gIGxhYmVsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHRyaW06IHRydWUsXG4gIH0sXG4gIGR1cmF0aW9uOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHRyaW06IHRydWUsXG4gIH0sXG59LCB7IF9pZDogZmFsc2UgfSk7XG5cbmNvbnN0IFNvbmdEZXRhaWxTY2hlbWE6IFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB0aXRsZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICBhcnRpc3Q6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbiAgdGl0bGVBbGlhczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICBhcnRpc3RBbGlhczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICBsYW5ndWFnZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlLFxuICAgIGVudW06IFsnS29yZWFuJywgJ0VuZ2xpc2gnLCAnSmFwYW5lc2UnLCAnQ2hpbmVzZScsICdPdGhlciddLFxuICB9LFxuICBseXJpY3M6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbiAgc2VhcmNoVGFnczogW3tcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdHJpbTogdHJ1ZSxcbiAgfV0sXG4gIHN1bmdDb3VudDoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwLFxuICAgIG1pbjogMCxcbiAgfSxcbiAgbGFzdFN1bmdEYXRlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHRyaW06IHRydWUsXG4gIH0sXG4gIGtleUFkanVzdG1lbnQ6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogbnVsbCxcbiAgICB2YWxpZGF0ZToge1xuICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbih2OiBudW1iZXIgfCBudWxsKSB7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiB2ID49IC0xMiAmJiB2IDw9IDEyO1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6ICftgqQg7KGw7KCI7J2AIC0xMuu2gO2EsCArMTIg7IKs7J207J2YIOyIq+yekOuhnCDsnoXroKXtlbTso7zshLjsmpQuJ1xuICAgIH1cbiAgfSxcbiAgbXJMaW5rczogW01STGlua1NjaGVtYV0sXG4gIHNlbGVjdGVkTVJJbmRleDoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwLFxuICAgIG1pbjogMCxcbiAgICB2YWxpZGF0ZToge1xuICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbih0aGlzOiBJU29uZ0RldGFpbCwgdjogbnVtYmVyKSB7XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGNvbnN0IG1yTGlua3MgPSB0aGlzLm1yTGlua3M7XG4gICAgICAgIGlmICghbXJMaW5rcyB8fCBtckxpbmtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiB2IDwgbXJMaW5rcy5sZW5ndGg7XG4gICAgICB9LFxuICAgICAgbWVzc2FnZTogJ3NlbGVjdGVkTVJJbmRleCBtdXN0IGJlIHdpdGhpbiB0aGUgcmFuZ2Ugb2YgYXZhaWxhYmxlIE1SIGxpbmtzJ1xuICAgIH1cbiAgfSxcbiAgcGVyc29uYWxOb3Rlczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICBpbWFnZVVybDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlLFxuICAgIHZhbGlkYXRlOiB7XG4gICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKHY6IHN0cmluZykge1xuICAgICAgICBpZiAoIXYpIHJldHVybiB0cnVlOyAvLyDruYgg6rCS7J2AIO2XiOyaqVxuICAgICAgICAvLyBVUkwg7ZiV7IudIOqygOymnVxuICAgICAgICB0cnkge1xuICAgICAgICAgIG5ldyBVUkwodik7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6ICfsmKzrsJTrpbggVVJMIO2YleyLneydhCDsnoXroKXtlbTso7zshLjsmpQuJ1xuICAgIH1cbiAgfSxcbiAgLy8g6rOhIOyDge2DnCDqtIDrpqxcbiAgc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IFsnYWN0aXZlJywgJ2RlbGV0ZWQnLCAncGVuZGluZycsICdyZWplY3RlZCddLFxuICAgIGRlZmF1bHQ6ICdhY3RpdmUnXG4gIH0sXG4gIC8vIOqzoSDshozsiqQg7YOA7J6FICjquLDsobQgc291cmNlIO2VhOuTnCDtmZXsnqUpXG4gIHNvdXJjZVR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydzaGVldCcsICdhZG1pbicsICd1c2VyX3N1Z2dlc3Rpb24nXSxcbiAgICBkZWZhdWx0OiAnc2hlZXQnXG4gIH0sXG4gIC8vIOy2lOyynOyekCDsoJXrs7QgKOyCrOyaqeyekCDstpTsspzqs6Hsnbgg6rK97JqwKVxuICBzdWdnZXN0ZWRCeToge1xuICAgIHR5cGU6IFN0cmluZywgLy8g7IKs7Jqp7J6QIOyxhOuEkCBJRFxuICAgIHRyaW06IHRydWUsXG4gIH0sXG4gIC8vIOyCreygnCDqtIDroKgg7KCV67O0XG4gIGRlbGV0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gIH0sXG4gIGRlbGV0ZWRCeToge1xuICAgIHR5cGU6IFN0cmluZywgLy8g7IKt7KCc7ZWcIOq0gOumrOyekCDssYTrhJAgSURcbiAgICB0cmltOiB0cnVlLFxuICB9LFxuICBkZWxldGVSZWFzb246IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbiAgLy8g7Iq57J24IOq0gOugqCDsoJXrs7QgKOy2lOyynOqzoeyaqSlcbiAgYXBwcm92ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gIH0sXG4gIGFwcHJvdmVkQnk6IHtcbiAgICB0eXBlOiBTdHJpbmcsIC8vIOyKueyduO2VnCDqtIDrpqzsnpAg7LGE64SQIElEXG4gICAgdHJpbTogdHJ1ZSxcbiAgfSxcbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZSxcbn0pO1xuXG4vLyDsoJzrqqkr7JWE7Yuw7Iqk7Yq4IOuzte2VqSB1bmlxdWUg7J24642x7IqkICjqsJnsnYAg7KCc66qp7J20652864+EIOuLpOuluCDslYTti7DsiqTtirjrqbQg7ZeI7JqpKVxuU29uZ0RldGFpbFNjaGVtYS5pbmRleCh7IHRpdGxlOiAxLCBhcnRpc3Q6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XG5Tb25nRGV0YWlsU2NoZW1hLmluZGV4KHsgdGl0bGU6IDEgfSk7IC8vIOygnOuqqSDqsoDsg4nsmqlcblNvbmdEZXRhaWxTY2hlbWEuaW5kZXgoeyBzdW5nQ291bnQ6IC0xIH0pO1xuU29uZ0RldGFpbFNjaGVtYS5pbmRleCh7IGxhc3RTdW5nRGF0ZTogLTEgfSk7XG5Tb25nRGV0YWlsU2NoZW1hLmluZGV4KHsgc2VhcmNoVGFnczogMSB9KTtcblNvbmdEZXRhaWxTY2hlbWEuaW5kZXgoeyBsYW5ndWFnZTogMSB9KTtcblNvbmdEZXRhaWxTY2hlbWEuaW5kZXgoeyBzdGF0dXM6IDEgfSk7XG5Tb25nRGV0YWlsU2NoZW1hLmluZGV4KHsgc291cmNlVHlwZTogMSB9KTtcblNvbmdEZXRhaWxTY2hlbWEuaW5kZXgoeyBzdWdnZXN0ZWRCeTogMSB9KTtcblNvbmdEZXRhaWxTY2hlbWEuaW5kZXgoeyBkZWxldGVkQXQ6IC0xIH0pO1xuXG4vLyDsg4jroZzsmrQg7Ya17J2865CcIOuqqOuNuOuqhSAoU29uZ0RldGFpbClcbmNvbnN0IFNvbmdEZXRhaWwgPSBtb25nb29zZS5tb2RlbHMuU29uZ0RldGFpbCB8fCBtb25nb29zZS5tb2RlbDxJU29uZ0RldGFpbD4oJ1NvbmdEZXRhaWwnLCBTb25nRGV0YWlsU2NoZW1hKTtcblxuLy8g6riw7KG0IO2YuO2ZmOyEseydhCDsnITtlZwg67OE7LmtIOygnOqxsCAo66eI7J206re466CI7J207IWYIOyZhOujjClcbi8vIFNvbmdEZXRhaWwg66qo642466eMIOyCrOyaqVxuXG5leHBvcnQgZGVmYXVsdCBTb25nRGV0YWlsOyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIk1STGlua1NjaGVtYSIsInVybCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInRyaW0iLCJza2lwU2Vjb25kcyIsIk51bWJlciIsImRlZmF1bHQiLCJtaW4iLCJsYWJlbCIsImR1cmF0aW9uIiwiX2lkIiwiU29uZ0RldGFpbFNjaGVtYSIsInRpdGxlIiwiYXJ0aXN0IiwidGl0bGVBbGlhcyIsImFydGlzdEFsaWFzIiwibGFuZ3VhZ2UiLCJlbnVtIiwibHlyaWNzIiwic2VhcmNoVGFncyIsInN1bmdDb3VudCIsImxhc3RTdW5nRGF0ZSIsImtleUFkanVzdG1lbnQiLCJ2YWxpZGF0ZSIsInZhbGlkYXRvciIsInYiLCJ1bmRlZmluZWQiLCJtZXNzYWdlIiwibXJMaW5rcyIsInNlbGVjdGVkTVJJbmRleCIsImxlbmd0aCIsInBlcnNvbmFsTm90ZXMiLCJpbWFnZVVybCIsIlVSTCIsInN0YXR1cyIsInNvdXJjZVR5cGUiLCJzdWdnZXN0ZWRCeSIsImRlbGV0ZWRBdCIsIkRhdGUiLCJkZWxldGVkQnkiLCJkZWxldGVSZWFzb24iLCJhcHByb3ZlZEF0IiwiYXBwcm92ZWRCeSIsInRpbWVzdGFtcHMiLCJpbmRleCIsInVuaXF1ZSIsIlNvbmdEZXRhaWwiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/SongDetail.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/User.ts":
/*!****************************!*\
  !*** ./src/models/User.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    channelId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    channelName: {\n        type: String,\n        required: true\n    },\n    displayName: {\n        type: String,\n        required: false\n    },\n    profileImageUrl: {\n        type: String,\n        default: null\n    },\n    role: {\n        type: String,\n        enum: [\n            \"super_admin\",\n            \"song_admin\",\n            \"song_editor\",\n            \"user\"\n        ],\n        default: \"user\"\n    },\n    grantedBy: {\n        type: String,\n        default: null\n    },\n    grantedAt: {\n        type: Date,\n        default: null\n    },\n    lastLoginAt: {\n        type: Date,\n        default: Date.now\n    },\n    channelNameHistory: [\n        {\n            channelName: {\n                type: String,\n                required: true\n            },\n            changedAt: {\n                type: Date,\n                default: Date.now\n            },\n            source: {\n                type: String,\n                enum: [\n                    \"login\",\n                    \"initial\"\n                ],\n                required: true\n            }\n        }\n    ],\n    titles: [\n        {\n            id: {\n                type: String,\n                required: true\n            },\n            name: {\n                type: String,\n                required: true\n            },\n            description: {\n                type: String,\n                required: true\n            },\n            earnedAt: {\n                type: Date,\n                default: Date.now\n            },\n            condition: {\n                type: String,\n                required: true\n            },\n            rarity: {\n                type: String,\n                enum: [\n                    \"common\",\n                    \"rare\",\n                    \"epic\",\n                    \"legendary\"\n                ],\n                required: true\n            }\n        }\n    ],\n    selectedTitle: {\n        type: String,\n        default: null\n    },\n    preferences: {\n        theme: {\n            type: String,\n            enum: [\n                \"light\",\n                \"dark\",\n                \"system\"\n            ],\n            default: \"system\"\n        },\n        defaultPlaylistView: {\n            type: String,\n            enum: [\n                \"grid\",\n                \"list\"\n            ],\n            default: \"grid\"\n        }\n    },\n    activityStats: {\n        totalLoginDays: {\n            type: Number,\n            default: 0\n        },\n        currentStreak: {\n            type: Number,\n            default: 0\n        },\n        longestStreak: {\n            type: Number,\n            default: 0\n        },\n        lastVisitDate: {\n            type: String,\n            default: null\n        }\n    }\n}, {\n    timestamps: true\n});\n// 인덱스 추가 (channelId는 unique: true로 자동 인덱스 생성됨)\nuserSchema.index({\n    role: 1\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBdUNoQyxNQUFNQyxhQUFhLElBQUlELHdEQUFlLENBQ3BDO0lBQ0VHLFdBQVc7UUFDVEMsTUFBTUM7UUFDTkMsVUFBVTtRQUNWQyxRQUFRO0lBQ1Y7SUFDQUMsYUFBYTtRQUNYSixNQUFNQztRQUNOQyxVQUFVO0lBQ1o7SUFDQUcsYUFBYTtRQUNYTCxNQUFNQztRQUNOQyxVQUFVO0lBQ1o7SUFDQUksaUJBQWlCO1FBQ2ZOLE1BQU1DO1FBQ05NLFNBQVM7SUFDWDtJQUNBQyxNQUFNO1FBQ0pSLE1BQU1DO1FBQ05RLE1BQU07WUFBQztZQUFlO1lBQWM7WUFBZTtTQUFPO1FBQzFERixTQUFTO0lBQ1g7SUFDQUcsV0FBVztRQUNUVixNQUFNQztRQUNOTSxTQUFTO0lBQ1g7SUFDQUksV0FBVztRQUNUWCxNQUFNWTtRQUNOTCxTQUFTO0lBQ1g7SUFDQU0sYUFBYTtRQUNYYixNQUFNWTtRQUNOTCxTQUFTSyxLQUFLRSxHQUFHO0lBQ25CO0lBQ0FDLG9CQUFvQjtRQUNsQjtZQUNFWCxhQUFhO2dCQUNYSixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FjLFdBQVc7Z0JBQ1RoQixNQUFNWTtnQkFDTkwsU0FBU0ssS0FBS0UsR0FBRztZQUNuQjtZQUNBRyxRQUFRO2dCQUNOakIsTUFBTUM7Z0JBQ05RLE1BQU07b0JBQUM7b0JBQVM7aUJBQVU7Z0JBQzFCUCxVQUFVO1lBQ1o7UUFDRjtLQUNEO0lBQ0RnQixRQUFRO1FBQ047WUFDRUMsSUFBSTtnQkFDRm5CLE1BQU1DO2dCQUNOQyxVQUFVO1lBQ1o7WUFDQWtCLE1BQU07Z0JBQ0pwQixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FtQixhQUFhO2dCQUNYckIsTUFBTUM7Z0JBQ05DLFVBQVU7WUFDWjtZQUNBb0IsVUFBVTtnQkFDUnRCLE1BQU1ZO2dCQUNOTCxTQUFTSyxLQUFLRSxHQUFHO1lBQ25CO1lBQ0FTLFdBQVc7Z0JBQ1R2QixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FzQixRQUFRO2dCQUNOeEIsTUFBTUM7Z0JBQ05RLE1BQU07b0JBQUM7b0JBQVU7b0JBQVE7b0JBQVE7aUJBQVk7Z0JBQzdDUCxVQUFVO1lBQ1o7UUFDRjtLQUNEO0lBQ0R1QixlQUFlO1FBQ2J6QixNQUFNQztRQUNOTSxTQUFTO0lBQ1g7SUFDQW1CLGFBQWE7UUFDWEMsT0FBTztZQUNMM0IsTUFBTUM7WUFDTlEsTUFBTTtnQkFBQztnQkFBUztnQkFBUTthQUFTO1lBQ2pDRixTQUFTO1FBQ1g7UUFDQXFCLHFCQUFxQjtZQUNuQjVCLE1BQU1DO1lBQ05RLE1BQU07Z0JBQUM7Z0JBQVE7YUFBTztZQUN0QkYsU0FBUztRQUNYO0lBQ0Y7SUFDQXNCLGVBQWU7UUFDYkMsZ0JBQWdCO1lBQ2Q5QixNQUFNK0I7WUFDTnhCLFNBQVM7UUFDWDtRQUNBeUIsZUFBZTtZQUNiaEMsTUFBTStCO1lBQ054QixTQUFTO1FBQ1g7UUFDQTBCLGVBQWU7WUFDYmpDLE1BQU0rQjtZQUNOeEIsU0FBUztRQUNYO1FBQ0EyQixlQUFlO1lBQ2JsQyxNQUFNQztZQUNOTSxTQUFTO1FBQ1g7SUFDRjtBQUNGLEdBQ0E7SUFDRTRCLFlBQVk7QUFDZDtBQUdGLCtDQUErQztBQUMvQ3RDLFdBQVd1QyxLQUFLLENBQUM7SUFBRTVCLE1BQU07QUFBRTtBQUUzQixpRUFBZVosd0RBQWUsQ0FBQzBDLElBQUksSUFDakMxQyxxREFBYyxDQUFRLFFBQVFDLFdBQVdBLEVBQUMiLCJzb3VyY2VzIjpbIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvbW9kZWxzL1VzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyIGV4dGVuZHMgbW9uZ29vc2UuRG9jdW1lbnQge1xuICBjaGFubmVsSWQ6IHN0cmluZztcbiAgY2hhbm5lbE5hbWU6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgcHJvZmlsZUltYWdlVXJsPzogc3RyaW5nO1xuICByb2xlOiBcInN1cGVyX2FkbWluXCIgfCBcImF5YXVrZV9hZG1pblwiIHwgXCJzb25nX2FkbWluXCIgfCBcInNvbmdfZWRpdG9yXCIgfCBcInVzZXJcIjtcbiAgZ3JhbnRlZEJ5Pzogc3RyaW5nO1xuICBncmFudGVkQXQ/OiBEYXRlO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIGxhc3RMb2dpbkF0OiBEYXRlO1xuICBjaGFubmVsTmFtZUhpc3Rvcnk6IEFycmF5PHtcbiAgICBjaGFubmVsTmFtZTogc3RyaW5nO1xuICAgIGNoYW5nZWRBdDogRGF0ZTtcbiAgICBzb3VyY2U6IFwibG9naW5cIiB8IFwiaW5pdGlhbFwiO1xuICB9PjtcbiAgdGl0bGVzOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBlYXJuZWRBdDogRGF0ZTtcbiAgICBjb25kaXRpb246IHN0cmluZztcbiAgICByYXJpdHk6IFwiY29tbW9uXCIgfCBcInJhcmVcIiB8IFwiZXBpY1wiIHwgXCJsZWdlbmRhcnlcIjtcbiAgfT47XG4gIHNlbGVjdGVkVGl0bGU6IHN0cmluZyB8IG51bGw7XG4gIHByZWZlcmVuY2VzOiB7XG4gICAgdGhlbWU6IFwibGlnaHRcIiB8IFwiZGFya1wiIHwgXCJzeXN0ZW1cIjtcbiAgICBkZWZhdWx0UGxheWxpc3RWaWV3OiBcImdyaWRcIiB8IFwibGlzdFwiO1xuICB9O1xuICAvLyDtmZzrj5kg7Ya16rOEICjsmpTslb0g642w7J207YSw66eMIOyggOyepSlcbiAgYWN0aXZpdHlTdGF0czoge1xuICAgIHRvdGFsTG9naW5EYXlzOiBudW1iZXI7IC8vIOy0nSDroZzqt7jsnbjtlZwg64KgIOyImFxuICAgIGN1cnJlbnRTdHJlYWs6IG51bWJlcjsgLy8g7ZiE7J6sIOyXsOyGjSDsoJHsho3snbxcbiAgICBsb25nZXN0U3RyZWFrOiBudW1iZXI7IC8vIOy1nOyepSDsl7Dsho0g7KCR7IaN7J28IOq4sOuhnVxuICAgIGxhc3RWaXNpdERhdGU6IHN0cmluZzsgLy8g66eI7KeA66eJIOuwqeusuCDrgqDsp5wgKFlZWVktTU0tREQpXG4gIH07XG59XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hPElVc2VyPihcbiAge1xuICAgIGNoYW5uZWxJZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgfSxcbiAgICBjaGFubmVsTmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBkaXNwbGF5TmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIH0sXG4gICAgcHJvZmlsZUltYWdlVXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgcm9sZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZW51bTogW1wic3VwZXJfYWRtaW5cIiwgXCJzb25nX2FkbWluXCIsIFwic29uZ19lZGl0b3JcIiwgXCJ1c2VyXCJdLFxuICAgICAgZGVmYXVsdDogXCJ1c2VyXCIsXG4gICAgfSxcbiAgICBncmFudGVkQnk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBncmFudGVkQXQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgbGFzdExvZ2luQXQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgICB9LFxuICAgIGNoYW5uZWxOYW1lSGlzdG9yeTogW1xuICAgICAge1xuICAgICAgICBjaGFubmVsTmFtZToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgY2hhbmdlZEF0OiB7XG4gICAgICAgICAgdHlwZTogRGF0ZSxcbiAgICAgICAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgICAgICAgfSxcbiAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGVudW06IFtcImxvZ2luXCIsIFwiaW5pdGlhbFwiXSxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICB0aXRsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBlYXJuZWRBdDoge1xuICAgICAgICAgIHR5cGU6IERhdGUsXG4gICAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gICAgICAgIH0sXG4gICAgICAgIGNvbmRpdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmFyaXR5OiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGVudW06IFtcImNvbW1vblwiLCBcInJhcmVcIiwgXCJlcGljXCIsIFwibGVnZW5kYXJ5XCJdLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICAgIHNlbGVjdGVkVGl0bGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBwcmVmZXJlbmNlczoge1xuICAgICAgdGhlbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBlbnVtOiBbXCJsaWdodFwiLCBcImRhcmtcIiwgXCJzeXN0ZW1cIl0sXG4gICAgICAgIGRlZmF1bHQ6IFwic3lzdGVtXCIsXG4gICAgICB9LFxuICAgICAgZGVmYXVsdFBsYXlsaXN0Vmlldzoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IFtcImdyaWRcIiwgXCJsaXN0XCJdLFxuICAgICAgICBkZWZhdWx0OiBcImdyaWRcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgICBhY3Rpdml0eVN0YXRzOiB7XG4gICAgICB0b3RhbExvZ2luRGF5czoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgY3VycmVudFN0cmVhazoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgbG9uZ2VzdFN0cmVhazoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgbGFzdFZpc2l0RGF0ZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICB9XG4pO1xuXG4vLyDsnbjrjbHsiqQg7LaU6rCAIChjaGFubmVsSWTripQgdW5pcXVlOiB0cnVl66GcIOyekOuPmSDsnbjrjbHsiqQg7IOd7ISx65CoKVxudXNlclNjaGVtYS5pbmRleCh7IHJvbGU6IDEgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8XG4gIG1vbmdvb3NlLm1vZGVsPElVc2VyPihcIlVzZXJcIiwgdXNlclNjaGVtYSk7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiY2hhbm5lbElkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwiY2hhbm5lbE5hbWUiLCJkaXNwbGF5TmFtZSIsInByb2ZpbGVJbWFnZVVybCIsImRlZmF1bHQiLCJyb2xlIiwiZW51bSIsImdyYW50ZWRCeSIsImdyYW50ZWRBdCIsIkRhdGUiLCJsYXN0TG9naW5BdCIsIm5vdyIsImNoYW5uZWxOYW1lSGlzdG9yeSIsImNoYW5nZWRBdCIsInNvdXJjZSIsInRpdGxlcyIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiZWFybmVkQXQiLCJjb25kaXRpb24iLCJyYXJpdHkiLCJzZWxlY3RlZFRpdGxlIiwicHJlZmVyZW5jZXMiLCJ0aGVtZSIsImRlZmF1bHRQbGF5bGlzdFZpZXciLCJhY3Rpdml0eVN0YXRzIiwidG90YWxMb2dpbkRheXMiLCJOdW1iZXIiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImxhc3RWaXNpdERhdGUiLCJ0aW1lc3RhbXBzIiwiaW5kZXgiLCJtb2RlbHMiLCJVc2VyIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/User.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/UserActivity.ts":
/*!************************************!*\
  !*** ./src/models/UserActivity.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserActivity: () => (/* binding */ UserActivity),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserActivitySchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true,\n        index: true\n    },\n    date: {\n        type: String,\n        required: true\n    },\n    visitCount: {\n        type: Number,\n        default: 1\n    },\n    firstVisitAt: {\n        type: Date,\n        required: true\n    },\n    lastVisitAt: {\n        type: Date,\n        required: true\n    }\n}, {\n    timestamps: true\n});\n// 복합 인덱스: 사용자별 날짜 조회 최적화\nUserActivitySchema.index({\n    userId: 1,\n    date: 1\n}, {\n    unique: true\n});\n// 날짜별 인덱스: 오래된 데이터 정리 시 사용\nUserActivitySchema.index({\n    date: 1\n});\nconst UserActivity = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).UserActivity || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('UserActivity', UserActivitySchema);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserActivity);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXJBY3Rpdml0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFEO0FBWXJELE1BQU1FLHFCQUFxQixJQUFJRCw0Q0FBTUEsQ0FBZ0I7SUFDbkRFLFFBQVE7UUFDTkMsTUFBTUgsNENBQU1BLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtRQUMzQkMsS0FBSztRQUNMQyxVQUFVO1FBQ1ZDLE9BQU87SUFDVDtJQUNBQyxNQUFNO1FBQ0pOLE1BQU1PO1FBQ05ILFVBQVU7SUFDWjtJQUNBSSxZQUFZO1FBQ1ZSLE1BQU1TO1FBQ05DLFNBQVM7SUFDWDtJQUNBQyxjQUFjO1FBQ1pYLE1BQU1ZO1FBQ05SLFVBQVU7SUFDWjtJQUNBUyxhQUFhO1FBQ1hiLE1BQU1ZO1FBQ05SLFVBQVU7SUFDWjtBQUNGLEdBQUc7SUFDRFUsWUFBWTtBQUNkO0FBRUEseUJBQXlCO0FBQ3pCaEIsbUJBQW1CTyxLQUFLLENBQUM7SUFBRU4sUUFBUTtJQUFHTyxNQUFNO0FBQUUsR0FBRztJQUFFUyxRQUFRO0FBQUs7QUFFaEUsMkJBQTJCO0FBQzNCakIsbUJBQW1CTyxLQUFLLENBQUM7SUFBRUMsTUFBTTtBQUFFO0FBRW5DLE1BQU1VLGVBQWVwQix3REFBZSxDQUFDb0IsWUFBWSxJQUFJcEIscURBQWMsQ0FBZ0IsZ0JBQWdCRTtBQUU1RTtBQUN2QixpRUFBZWtCLFlBQVlBLEVBQUEiLCJzb3VyY2VzIjpbIi9tbnQvZi9kYXRhL2dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvbW9kZWxzL1VzZXJBY3Rpdml0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyQWN0aXZpdHkgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHVzZXJJZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWRcbiAgZGF0ZTogc3RyaW5nIC8vICdZWVlZLU1NLUREJyDtmJXsi51cbiAgdmlzaXRDb3VudDogbnVtYmVyXG4gIGZpcnN0VmlzaXRBdDogRGF0ZVxuICBsYXN0VmlzaXRBdDogRGF0ZVxuICBjcmVhdGVkQXQ6IERhdGVcbiAgdXBkYXRlZEF0OiBEYXRlXG59XG5cbmNvbnN0IFVzZXJBY3Rpdml0eVNjaGVtYSA9IG5ldyBTY2hlbWE8SVVzZXJBY3Rpdml0eT4oe1xuICB1c2VySWQ6IHtcbiAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgcmVmOiAnVXNlcicsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgaW5kZXg6IHRydWVcbiAgfSxcbiAgZGF0ZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICB2aXNpdENvdW50OiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDFcbiAgfSxcbiAgZmlyc3RWaXNpdEF0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICBsYXN0VmlzaXRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfVxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlXG59KVxuXG4vLyDrs7Xtlakg7J24642x7IqkOiDsgqzsmqnsnpDrs4Qg64Kg7KecIOyhsO2ajCDstZzsoIHtmZRcblVzZXJBY3Rpdml0eVNjaGVtYS5pbmRleCh7IHVzZXJJZDogMSwgZGF0ZTogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KVxuXG4vLyDrgqDsp5zrs4Qg7J24642x7IqkOiDsmKTrnpjrkJwg642w7J207YSwIOygleumrCDsi5wg7IKs7JqpXG5Vc2VyQWN0aXZpdHlTY2hlbWEuaW5kZXgoeyBkYXRlOiAxIH0pXG5cbmNvbnN0IFVzZXJBY3Rpdml0eSA9IG1vbmdvb3NlLm1vZGVscy5Vc2VyQWN0aXZpdHkgfHwgbW9uZ29vc2UubW9kZWw8SVVzZXJBY3Rpdml0eT4oJ1VzZXJBY3Rpdml0eScsIFVzZXJBY3Rpdml0eVNjaGVtYSlcblxuZXhwb3J0IHsgVXNlckFjdGl2aXR5IH1cbmV4cG9ydCBkZWZhdWx0IFVzZXJBY3Rpdml0eSJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIlVzZXJBY3Rpdml0eVNjaGVtYSIsInVzZXJJZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJpbmRleCIsImRhdGUiLCJTdHJpbmciLCJ2aXNpdENvdW50IiwiTnVtYmVyIiwiZGVmYXVsdCIsImZpcnN0VmlzaXRBdCIsIkRhdGUiLCJsYXN0VmlzaXRBdCIsInRpbWVzdGFtcHMiLCJ1bmlxdWUiLCJVc2VyQWN0aXZpdHkiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/UserActivity.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/YouTubeComment.ts":
/*!**************************************!*\
  !*** ./src/models/YouTubeComment.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   YouTubeChannel: () => (/* binding */ YouTubeChannel),\n/* harmony export */   YouTubeComment: () => (/* binding */ YouTubeComment),\n/* harmony export */   YouTubeVideo: () => (/* binding */ YouTubeVideo)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ChannelSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    channelId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    channelName: {\n        type: String,\n        required: true\n    },\n    channelUrl: {\n        type: String,\n        required: true\n    },\n    lastSyncDate: {\n        type: Date,\n        default: Date.now\n    },\n    totalVideos: {\n        type: Number,\n        default: 0\n    },\n    totalComments: {\n        type: Number,\n        default: 0\n    },\n    timelineComments: {\n        type: Number,\n        default: 0\n    }\n}, {\n    timestamps: true\n});\nconst VideoSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    videoId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    channelId: {\n        type: String,\n        required: true\n    },\n    title: {\n        type: String,\n        required: true\n    },\n    publishedAt: {\n        type: Date,\n        required: true\n    },\n    duration: {\n        type: String,\n        default: ''\n    },\n    viewCount: {\n        type: Number,\n        default: 0\n    },\n    totalComments: {\n        type: Number,\n        default: 0\n    },\n    timelineComments: {\n        type: Number,\n        default: 0\n    },\n    lastCommentSync: {\n        type: Date,\n        default: Date.now\n    },\n    thumbnailUrl: {\n        type: String,\n        default: ''\n    }\n}, {\n    timestamps: true\n});\nconst CommentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    commentId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    videoId: {\n        type: String,\n        required: true\n    },\n    authorName: {\n        type: String,\n        required: true\n    },\n    textContent: {\n        type: String,\n        required: true\n    },\n    publishedAt: {\n        type: Date,\n        required: true\n    },\n    likeCount: {\n        type: Number,\n        default: 0\n    },\n    isTimeline: {\n        type: Boolean,\n        default: false\n    },\n    extractedTimestamps: [\n        {\n            type: String\n        }\n    ],\n    isProcessed: {\n        type: Boolean,\n        default: false\n    },\n    processedBy: {\n        type: String\n    },\n    processedAt: {\n        type: Date\n    },\n    manuallyMarked: {\n        type: Boolean,\n        default: false\n    }\n}, {\n    timestamps: true\n});\n// 인덱스 설정\nVideoSchema.index({\n    channelId: 1,\n    publishedAt: -1\n});\nCommentSchema.index({\n    videoId: 1,\n    isTimeline: 1\n});\nCommentSchema.index({\n    isProcessed: 1,\n    isTimeline: 1\n});\nconst YouTubeChannel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).YouTubeChannel || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('YouTubeChannel', ChannelSchema);\nconst YouTubeVideo = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).YouTubeVideo || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('YouTubeVideo', VideoSchema);\nconst YouTubeComment = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).YouTubeComment || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('YouTubeComment', CommentSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0MscURBQWMsQ0FBWSxnQkFBZ0JtQixhQUFhO0FBQzVHLE1BQU15QixpQkFBaUI1Qyx3REFBZSxDQUFDNEMsY0FBYyxJQUFJNUMscURBQWMsQ0FBYyxrQkFBa0IyQixlQUFlIiwic291cmNlcyI6WyIvbW50L2YvZGF0YS9naXQvY2xhdWRlLWNvZGUvYXlhdWtlLXBhZ2UvYXlhdWtlLXBhZ2Uvc3JjL21vZGVscy9Zb3VUdWJlQ29tbWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBEb2N1bWVudCB9IGZyb20gJ21vbmdvb3NlJztcblxuLy8gWW91VHViZSDssYTrhJAg642w7J207YSwXG5leHBvcnQgaW50ZXJmYWNlIENoYW5uZWxEYXRhIGV4dGVuZHMgRG9jdW1lbnQge1xuICBjaGFubmVsSWQ6IHN0cmluZztcbiAgY2hhbm5lbE5hbWU6IHN0cmluZztcbiAgY2hhbm5lbFVybDogc3RyaW5nO1xuICBsYXN0U3luY0RhdGU6IERhdGU7XG4gIHRvdGFsVmlkZW9zOiBudW1iZXI7XG4gIHRvdGFsQ29tbWVudHM6IG51bWJlcjtcbiAgdGltZWxpbmVDb21tZW50czogbnVtYmVyO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuY29uc3QgQ2hhbm5lbFNjaGVtYSA9IG5ldyBTY2hlbWE8Q2hhbm5lbERhdGE+KHtcbiAgY2hhbm5lbElkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBjaGFubmVsTmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGNoYW5uZWxVcmw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBsYXN0U3luY0RhdGU6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgdG90YWxWaWRlb3M6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRvdGFsQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRpbWVsaW5lQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIFlvdVR1YmUg67mE65SU7JikIOuNsOydtO2EsFxuZXhwb3J0IGludGVyZmFjZSBWaWRlb0RhdGEgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIHZpZGVvSWQ6IHN0cmluZztcbiAgY2hhbm5lbElkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHB1Ymxpc2hlZEF0OiBEYXRlO1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICB2aWV3Q291bnQ6IG51bWJlcjtcbiAgdG90YWxDb21tZW50czogbnVtYmVyO1xuICB0aW1lbGluZUNvbW1lbnRzOiBudW1iZXI7XG4gIGxhc3RDb21tZW50U3luYzogRGF0ZTtcbiAgdGh1bWJuYWlsVXJsOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5jb25zdCBWaWRlb1NjaGVtYSA9IG5ldyBTY2hlbWE8VmlkZW9EYXRhPih7XG4gIHZpZGVvSWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXG4gIGNoYW5uZWxJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgcHVibGlzaGVkQXQ6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZHVyYXRpb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICB2aWV3Q291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRvdGFsQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHRpbWVsaW5lQ29tbWVudHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIGxhc3RDb21tZW50U3luYzogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxuICB0aHVtYm5haWxVcmw6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9XG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWVcbn0pO1xuXG4vLyBZb3VUdWJlIOuMk+q4gCDrjbDsnbTthLBcbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWVudERhdGEgZXh0ZW5kcyBEb2N1bWVudCB7XG4gIGNvbW1lbnRJZDogc3RyaW5nO1xuICB2aWRlb0lkOiBzdHJpbmc7XG4gIGF1dGhvck5hbWU6IHN0cmluZztcbiAgdGV4dENvbnRlbnQ6IHN0cmluZztcbiAgcHVibGlzaGVkQXQ6IERhdGU7XG4gIGxpa2VDb3VudDogbnVtYmVyO1xuICBpc1RpbWVsaW5lOiBib29sZWFuO1xuICBleHRyYWN0ZWRUaW1lc3RhbXBzOiBzdHJpbmdbXTtcbiAgaXNQcm9jZXNzZWQ6IGJvb2xlYW47XG4gIHByb2Nlc3NlZEJ5Pzogc3RyaW5nO1xuICBwcm9jZXNzZWRBdD86IERhdGU7XG4gIG1hbnVhbGx5TWFya2VkPzogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmNvbnN0IENvbW1lbnRTY2hlbWEgPSBuZXcgU2NoZW1hPENvbW1lbnREYXRhPih7XG4gIGNvbW1lbnRJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcbiAgdmlkZW9JZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGF1dGhvck5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB0ZXh0Q29udGVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHB1Ymxpc2hlZEF0OiB7IHR5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGxpa2VDb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgaXNUaW1lbGluZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICBleHRyYWN0ZWRUaW1lc3RhbXBzOiBbeyB0eXBlOiBTdHJpbmcgfV0sXG4gIGlzUHJvY2Vzc2VkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gIHByb2Nlc3NlZEJ5OiB7IHR5cGU6IFN0cmluZyB9LFxuICBwcm9jZXNzZWRBdDogeyB0eXBlOiBEYXRlIH0sXG4gIG1hbnVhbGx5TWFya2VkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIOyduOuNseyKpCDshKTsoJVcblZpZGVvU2NoZW1hLmluZGV4KHsgY2hhbm5lbElkOiAxLCBwdWJsaXNoZWRBdDogLTEgfSk7XG5Db21tZW50U2NoZW1hLmluZGV4KHsgdmlkZW9JZDogMSwgaXNUaW1lbGluZTogMSB9KTtcbkNvbW1lbnRTY2hlbWEuaW5kZXgoeyBpc1Byb2Nlc3NlZDogMSwgaXNUaW1lbGluZTogMSB9KTtcblxuZXhwb3J0IGNvbnN0IFlvdVR1YmVDaGFubmVsID0gbW9uZ29vc2UubW9kZWxzLllvdVR1YmVDaGFubmVsIHx8IG1vbmdvb3NlLm1vZGVsPENoYW5uZWxEYXRhPignWW91VHViZUNoYW5uZWwnLCBDaGFubmVsU2NoZW1hKTtcbmV4cG9ydCBjb25zdCBZb3VUdWJlVmlkZW8gPSBtb25nb29zZS5tb2RlbHMuWW91VHViZVZpZGVvIHx8IG1vbmdvb3NlLm1vZGVsPFZpZGVvRGF0YT4oJ1lvdVR1YmVWaWRlbycsIFZpZGVvU2NoZW1hKTtcbmV4cG9ydCBjb25zdCBZb3VUdWJlQ29tbWVudCA9IG1vbmdvb3NlLm1vZGVscy5Zb3VUdWJlQ29tbWVudCB8fCBtb25nb29zZS5tb2RlbDxDb21tZW50RGF0YT4oJ1lvdVR1YmVDb21tZW50JywgQ29tbWVudFNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiQ2hhbm5lbFNjaGVtYSIsImNoYW5uZWxJZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsImNoYW5uZWxOYW1lIiwiY2hhbm5lbFVybCIsImxhc3RTeW5jRGF0ZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidG90YWxWaWRlb3MiLCJOdW1iZXIiLCJ0b3RhbENvbW1lbnRzIiwidGltZWxpbmVDb21tZW50cyIsInRpbWVzdGFtcHMiLCJWaWRlb1NjaGVtYSIsInZpZGVvSWQiLCJ0aXRsZSIsInB1Ymxpc2hlZEF0IiwiZHVyYXRpb24iLCJ2aWV3Q291bnQiLCJsYXN0Q29tbWVudFN5bmMiLCJ0aHVtYm5haWxVcmwiLCJDb21tZW50U2NoZW1hIiwiY29tbWVudElkIiwiYXV0aG9yTmFtZSIsInRleHRDb250ZW50IiwibGlrZUNvdW50IiwiaXNUaW1lbGluZSIsIkJvb2xlYW4iLCJleHRyYWN0ZWRUaW1lc3RhbXBzIiwiaXNQcm9jZXNzZWQiLCJwcm9jZXNzZWRCeSIsInByb2Nlc3NlZEF0IiwibWFudWFsbHlNYXJrZWQiLCJpbmRleCIsIllvdVR1YmVDaGFubmVsIiwibW9kZWxzIiwibW9kZWwiLCJZb3VUdWJlVmlkZW8iLCJZb3VUdWJlQ29tbWVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/YouTubeComment.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/ws","vendor-chunks/chzzk","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/isomorphic-ws"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftimeline-parser%2Froute&page=%2Fapi%2Ftimeline-parser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimeline-parser%2Froute.ts&appDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fmnt%2Ff%2Fdata%2Fgit%2Fclaude-code%2Fayauke-page%2Fayauke-page&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();