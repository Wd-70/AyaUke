"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/songbook/page",{

/***/ "(app-pages-browser)/./src/hooks/useLikes.ts":
/*!*******************************!*\
  !*** ./src/hooks/useLikes.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useBulkLikes: () => (/* binding */ useBulkLikes),\n/* harmony export */   useLike: () => (/* binding */ useLike),\n/* harmony export */   useLikes: () => (/* binding */ useLikes),\n/* harmony export */   useUserLikes: () => (/* binding */ useUserLikes)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/./node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// 전역 상태 관리를 위한 간단한 store\nclass LikesStore {\n    setLike(songId, liked) {\n        this.likes.set(songId, liked);\n        this.notifySubscribers(songId);\n        // 전역 이벤트 발생\n        if (true) {\n            window.dispatchEvent(new CustomEvent('likesUpdated'));\n        }\n    }\n    getLike(songId) {\n        return this.likes.get(songId);\n    }\n    setLoading(songId, loading) {\n        if (loading) {\n            this.loading.add(songId);\n        } else {\n            this.loading.delete(songId);\n        }\n        this.notifySubscribers(songId);\n    }\n    isLoading(songId) {\n        return this.loading.has(songId);\n    }\n    subscribe(songId, callback) {\n        if (!this.subscribers.has(songId)) {\n            this.subscribers.set(songId, new Set());\n        }\n        this.subscribers.get(songId).add(callback);\n        return ()=>{\n            const songSubscribers = this.subscribers.get(songId);\n            if (songSubscribers) {\n                songSubscribers.delete(callback);\n                if (songSubscribers.size === 0) {\n                    this.subscribers.delete(songId);\n                }\n            }\n        };\n    }\n    notifySubscribers(songId) {\n        const songSubscribers = this.subscribers.get(songId);\n        if (songSubscribers) {\n            songSubscribers.forEach((callback)=>callback());\n        }\n    }\n    // bulk 데이터를 직접 설정\n    setBulkLikes(likesData) {\n        Object.entries(likesData).forEach((param)=>{\n            let [songId, liked] = param;\n            this.likes.set(songId, liked);\n            this.notifySubscribers(songId);\n        });\n        // 전역 이벤트 발생\n        if (true) {\n            window.dispatchEvent(new CustomEvent('likesUpdated'));\n        }\n    }\n    // 좋아요한 곡 ID들 반환\n    getLikedSongIds() {\n        const likedIds = [];\n        this.likes.forEach((liked, songId)=>{\n            if (liked) {\n                likedIds.push(songId);\n            }\n        });\n        return likedIds;\n    }\n    // 대량 로딩 (중복 방지)\n    async bulkLoadLikes(songIds) {\n        let priority = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'low';\n        if (this.bulkLoadPromise && priority === 'low') {\n            // 낮은 우선순위 요청이고 이미 진행 중인 요청이 있으면 기다림\n            await this.bulkLoadPromise;\n        }\n        // 아직 로딩되지 않은 곡들만 필터링\n        const unloadedSongIds = songIds.filter((id)=>!this.likes.has(id));\n        if (unloadedSongIds.length === 0) {\n            console.log(\"⏭️ 모든 곡이 이미 로딩됨: \".concat(songIds.length, \"곡\"));\n            return;\n        }\n        // 동일한 요청이 진행 중인지 확인 (songIds 배열을 문자열로 변환하여 비교)\n        const requestKey = unloadedSongIds.sort().join(',');\n        if (this.bulkLoadPromise) {\n            console.log(\"⌛ 동일한 대량 로딩 요청 대기 중: \".concat(unloadedSongIds.length, \"곡\"));\n            await this.bulkLoadPromise;\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 대량 좋아요 로딩 시작 (\".concat(priority, \"): \").concat(unloadedSongIds.length, \"곡\"));\n        this.bulkLoadPromise = this.performBulkLoad(unloadedSongIds);\n        await this.bulkLoadPromise;\n        this.bulkLoadPromise = null;\n    }\n    async performBulkLoad(songIds) {\n        try {\n            const response = await fetch('/api/likes-bulk', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    songIds\n                })\n            });\n            if (response.ok) {\n                const data = await response.json();\n                // 결과를 store에 저장하고 모든 관련 구독자에게 알림\n                Object.entries(data.likes).forEach((param)=>{\n                    let [songId, liked] = param;\n                    this.likes.set(songId, liked);\n                    this.notifySubscribers(songId);\n                });\n                // 전역 이벤트 발생\n                if (true) {\n                    window.dispatchEvent(new CustomEvent('likesUpdated'));\n                }\n                console.log(\"✅ 대량 좋아요 로딩 완료: \".concat(Object.keys(data.likes).length, \"곡\"));\n            } else {\n                console.error('대량 좋아요 로딩 실패:', response.status);\n            }\n        } catch (error) {\n            console.error('대량 좋아요 로딩 오류:', error);\n        }\n    }\n    reset() {\n        this.likes.clear();\n        this.loading.clear();\n        this.subscribers.clear();\n        this.bulkLoadPromise = null;\n    }\n    constructor(){\n        this.likes = new Map();\n        this.loading = new Set();\n        this.subscribers = new Map();\n        this.bulkLoadPromise = null;\n    }\n}\nconst likesStore = new LikesStore();\n// 전역 이벤트 리스너 설정 (플레이리스트에서 bulk 데이터 수신)\nif (true) {\n    window.addEventListener('likesLoaded', (event)=>{\n        const { likes } = event.detail;\n        console.log('📨 좋아요 bulk 데이터 수신:', likes);\n        likesStore.setBulkLikes(likes);\n    });\n}\nfunction useLike(songId) {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [updateCounter, setUpdateCounter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const mounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    // 강제 업데이트 함수\n    const forceUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLike.useCallback[forceUpdate]\": ()=>{\n            if (mounted.current) {\n                setUpdateCounter({\n                    \"useLike.useCallback[forceUpdate]\": (prev)=>prev + 1\n                }[\"useLike.useCallback[forceUpdate]\"]);\n            }\n        }\n    }[\"useLike.useCallback[forceUpdate]\"], []);\n    // 컴포넌트 언마운트 시 cleanup\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            mounted.current = true;\n            return ({\n                \"useLike.useEffect\": ()=>{\n                    mounted.current = false;\n                }\n            })[\"useLike.useEffect\"];\n        }\n    }[\"useLike.useEffect\"], []);\n    // 세션 변경 시 store 리셋 (다른 사용자로 변경된 경우에만)\n    const prevChannelIdRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            var _session_user;\n            const currentChannelId = (session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId) || null;\n            // 이전 channelId가 있었는데 다른 사용자로 변경된 경우에만 리셋\n            if (prevChannelIdRef.current && prevChannelIdRef.current !== currentChannelId) {\n                console.log('🔄 사용자 변경 감지, store 리셋:', prevChannelIdRef.current, '->', currentChannelId);\n                likesStore.reset();\n            }\n            prevChannelIdRef.current = currentChannelId;\n        }\n    }[\"useLike.useEffect\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId\n    ]);\n    // store 구독 - UI 업데이트를 위해 필요\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            if (!songId) return;\n            const unsubscribe = likesStore.subscribe(songId, forceUpdate);\n            return unsubscribe;\n        }\n    }[\"useLike.useEffect\"], [\n        songId,\n        forceUpdate\n    ]);\n    // 개별 API 호출 제거 - 오직 대량 로딩에만 의존\n    const toggleLike = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId)) {\n            setError('로그인이 필요합니다');\n            return;\n        }\n        const currentLiked = likesStore.getLike(songId) || false;\n        const newLikedState = !currentLiked;\n        // 즉시 UI 반영 (낙관적 업데이트)\n        likesStore.setLike(songId, newLikedState);\n        likesStore.setLoading(songId, true);\n        setError(null);\n        try {\n            if (currentLiked) {\n                // 좋아요 취소\n                const response = await fetch(\"/api/likes?songId=\".concat(songId), {\n                    method: 'DELETE'\n                });\n                if (!response.ok) {\n                    // 실패 시 원래 상태로 되돌림\n                    likesStore.setLike(songId, currentLiked);\n                    const data = await response.json();\n                    setError(data.error || '좋아요 취소에 실패했습니다');\n                }\n            } else {\n                // 좋아요 추가\n                const response = await fetch('/api/likes', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        songId\n                    })\n                });\n                if (!response.ok) {\n                    // 실패 시 원래 상태로 되돌림\n                    likesStore.setLike(songId, currentLiked);\n                    const data = await response.json();\n                    setError(data.error || '좋아요 추가에 실패했습니다');\n                }\n            }\n        } catch (err) {\n            // 오류 시 원래 상태로 되돌림\n            likesStore.setLike(songId, currentLiked);\n            setError('네트워크 오류가 발생했습니다');\n            console.error('좋아요 토글 오류:', err);\n        } finally{\n            likesStore.setLoading(songId, false);\n        }\n    };\n    return {\n        liked: likesStore.getLike(songId) || false,\n        isLoading: likesStore.isLoading(songId),\n        error,\n        toggleLike\n    };\n}\n// 대량 좋아요 로딩을 위한 훅\nfunction useBulkLikes() {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const loadLikes = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBulkLikes.useCallback[loadLikes]\": async function(songIds) {\n            let priority = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'low';\n            var _session_user;\n            if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId) || !songIds.length) {\n                var _session_user1;\n                console.log('🚫 좋아요 로딩 건너뜀:', {\n                    hasSession: !!(session === null || session === void 0 ? void 0 : (_session_user1 = session.user) === null || _session_user1 === void 0 ? void 0 : _session_user1.channelId),\n                    songCount: songIds.length\n                });\n                return;\n            }\n            await likesStore.bulkLoadLikes(songIds, priority);\n        }\n    }[\"useBulkLikes.useCallback[loadLikes]\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId\n    ]);\n    return {\n        loadLikes\n    };\n}\n// 좋아요 관련 정보를 가져오는 훅\nfunction useLikes() {\n    const getLikedSongIds = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLikes.useCallback[getLikedSongIds]\": ()=>{\n            return likesStore.getLikedSongIds();\n        }\n    }[\"useLikes.useCallback[getLikedSongIds]\"], []);\n    return {\n        getLikedSongIds\n    };\n}\nfunction useUserLikes() {\n    let page = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1, limit = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 20;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [likes, setLikes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [pagination, setPagination] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const fetchLikes = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId)) return;\n        setIsLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(\"/api/user/likes?page=\".concat(page, \"&limit=\").concat(limit));\n            if (response.ok) {\n                const data = await response.json();\n                setLikes(data.likes);\n                setPagination(data.pagination);\n            } else {\n                const data = await response.json();\n                setError(data.error || '좋아요 목록을 불러오는데 실패했습니다');\n            }\n        } catch (err) {\n            setError('네트워크 오류가 발생했습니다');\n            console.error('좋아요 목록 조회 오류:', err);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useUserLikes.useEffect\": ()=>{\n            fetchLikes();\n        }\n    }[\"useUserLikes.useEffect\"], [\n        session,\n        page,\n        limit\n    ]);\n    return {\n        likes,\n        isLoading,\n        error,\n        refresh: fetchLikes,\n        pagination\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VMaWtlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnRTtBQUNwQjtBQUU1Qyx5QkFBeUI7QUFDekIsTUFBTUs7SUFNSkMsUUFBUUMsTUFBYyxFQUFFQyxLQUFjLEVBQUU7UUFDdEMsSUFBSSxDQUFDQyxLQUFLLENBQUNDLEdBQUcsQ0FBQ0gsUUFBUUM7UUFDdkIsSUFBSSxDQUFDRyxpQkFBaUIsQ0FBQ0o7UUFDdkIsWUFBWTtRQUNaLElBQUksSUFBNkIsRUFBRTtZQUNqQ0ssT0FBT0MsYUFBYSxDQUFDLElBQUlDLFlBQVk7UUFDdkM7SUFDRjtJQUVBQyxRQUFRUixNQUFjLEVBQXVCO1FBQzNDLE9BQU8sSUFBSSxDQUFDRSxLQUFLLENBQUNPLEdBQUcsQ0FBQ1Q7SUFDeEI7SUFFQVUsV0FBV1YsTUFBYyxFQUFFVyxPQUFnQixFQUFFO1FBQzNDLElBQUlBLFNBQVM7WUFDWCxJQUFJLENBQUNBLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDWjtRQUNuQixPQUFPO1lBQ0wsSUFBSSxDQUFDVyxPQUFPLENBQUNFLE1BQU0sQ0FBQ2I7UUFDdEI7UUFDQSxJQUFJLENBQUNJLGlCQUFpQixDQUFDSjtJQUN6QjtJQUVBYyxVQUFVZCxNQUFjLEVBQVc7UUFDakMsT0FBTyxJQUFJLENBQUNXLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDZjtJQUMxQjtJQUVBZ0IsVUFBVWhCLE1BQWMsRUFBRWlCLFFBQW9CLEVBQUU7UUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQ0MsV0FBVyxDQUFDSCxHQUFHLENBQUNmLFNBQVM7WUFDakMsSUFBSSxDQUFDa0IsV0FBVyxDQUFDZixHQUFHLENBQUNILFFBQVEsSUFBSW1CO1FBQ25DO1FBQ0EsSUFBSSxDQUFDRCxXQUFXLENBQUNULEdBQUcsQ0FBQ1QsUUFBU1ksR0FBRyxDQUFDSztRQUVsQyxPQUFPO1lBQ0wsTUFBTUcsa0JBQWtCLElBQUksQ0FBQ0YsV0FBVyxDQUFDVCxHQUFHLENBQUNU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O0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL21udC9mL0RhdGEvR2l0L2NsYXVkZS1jb2RlL2F5YXVrZS1wYWdlL2F5YXVrZS1wYWdlL3NyYy9ob29rcy91c2VMaWtlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IHVzZVNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnXHJcblxyXG4vLyDsoITsl60g7IOB7YOcIOq0gOumrOulvCDsnITtlZwg6rCE64uo7ZWcIHN0b3JlXHJcbmNsYXNzIExpa2VzU3RvcmUge1xyXG4gIHByaXZhdGUgbGlrZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+ID0gbmV3IE1hcCgpXHJcbiAgcHJpdmF0ZSBsb2FkaW5nOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxyXG4gIHByaXZhdGUgc3Vic2NyaWJlcnM6IE1hcDxzdHJpbmcsIFNldDwoKSA9PiB2b2lkPj4gPSBuZXcgTWFwKClcclxuICBwcml2YXRlIGJ1bGtMb2FkUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsXHJcblxyXG4gIHNldExpa2Uoc29uZ0lkOiBzdHJpbmcsIGxpa2VkOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmxpa2VzLnNldChzb25nSWQsIGxpa2VkKVxyXG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhzb25nSWQpXHJcbiAgICAvLyDsoITsl60g7J2067Kk7Yq4IOuwnOyDnVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbGlrZXNVcGRhdGVkJykpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRMaWtlKHNvbmdJZDogc3RyaW5nKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5saWtlcy5nZXQoc29uZ0lkKVxyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhzb25nSWQ6IHN0cmluZywgbG9hZGluZzogYm9vbGVhbikge1xyXG4gICAgaWYgKGxvYWRpbmcpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nLmFkZChzb25nSWQpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmxvYWRpbmcuZGVsZXRlKHNvbmdJZClcclxuICAgIH1cclxuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkKVxyXG4gIH1cclxuXHJcbiAgaXNMb2FkaW5nKHNvbmdJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5sb2FkaW5nLmhhcyhzb25nSWQpXHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmUoc29uZ0lkOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoIXRoaXMuc3Vic2NyaWJlcnMuaGFzKHNvbmdJZCkpIHtcclxuICAgICAgdGhpcy5zdWJzY3JpYmVycy5zZXQoc29uZ0lkLCBuZXcgU2V0KCkpXHJcbiAgICB9XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmdldChzb25nSWQpIS5hZGQoY2FsbGJhY2spXHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgY29uc3Qgc29uZ1N1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVycy5nZXQoc29uZ0lkKVxyXG4gICAgICBpZiAoc29uZ1N1YnNjcmliZXJzKSB7XHJcbiAgICAgICAgc29uZ1N1YnNjcmliZXJzLmRlbGV0ZShjYWxsYmFjaylcclxuICAgICAgICBpZiAoc29uZ1N1YnNjcmliZXJzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKHNvbmdJZClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNvbmdTdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHNvbmdJZClcclxuICAgIGlmIChzb25nU3Vic2NyaWJlcnMpIHtcclxuICAgICAgc29uZ1N1YnNjcmliZXJzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGJ1bGsg642w7J207YSw66W8IOyngeygkSDshKTsoJVcclxuICBzZXRCdWxrTGlrZXMobGlrZXNEYXRhOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPikge1xyXG4gICAgT2JqZWN0LmVudHJpZXMobGlrZXNEYXRhKS5mb3JFYWNoKChbc29uZ0lkLCBsaWtlZF0pID0+IHtcclxuICAgICAgdGhpcy5saWtlcy5zZXQoc29uZ0lkLCBsaWtlZClcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhzb25nSWQpXHJcbiAgICB9KVxyXG4gICAgLy8g7KCE7JetIOydtOuypO2KuCDrsJzsg51cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xpa2VzVXBkYXRlZCcpKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g7KKL7JWE7JqU7ZWcIOqzoSBJROuTpCDrsJjtmZhcclxuICBnZXRMaWtlZFNvbmdJZHMoKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbGlrZWRJZHM6IHN0cmluZ1tdID0gW11cclxuICAgIHRoaXMubGlrZXMuZm9yRWFjaCgobGlrZWQsIHNvbmdJZCkgPT4ge1xyXG4gICAgICBpZiAobGlrZWQpIHtcclxuICAgICAgICBsaWtlZElkcy5wdXNoKHNvbmdJZClcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBsaWtlZElkc1xyXG4gIH1cclxuXHJcbiAgLy8g64yA65+JIOuhnOuUqSAo7KSR67O1IOuwqeyngClcclxuICBhc3luYyBidWxrTG9hZExpa2VzKHNvbmdJZHM6IHN0cmluZ1tdLCBwcmlvcml0eTogJ2hpZ2gnIHwgJ2xvdycgPSAnbG93Jyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKHRoaXMuYnVsa0xvYWRQcm9taXNlICYmIHByaW9yaXR5ID09PSAnbG93Jykge1xyXG4gICAgICAvLyDrgq7snYAg7Jqw7ISg7Iic7JyEIOyalOyyreydtOqzoCDsnbTrr7gg7KeE7ZaJIOykkeyduCDsmpTssq3snbQg7J6I7Jy866m0IOq4sOuLpOumvFxyXG4gICAgICBhd2FpdCB0aGlzLmJ1bGtMb2FkUHJvbWlzZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOyVhOyngSDroZzrlKnrkJjsp4Ag7JWK7J2AIOqzoeuTpOunjCDtlYTthLDrp4FcclxuICAgIGNvbnN0IHVubG9hZGVkU29uZ0lkcyA9IHNvbmdJZHMuZmlsdGVyKGlkID0+ICF0aGlzLmxpa2VzLmhhcyhpZCkpXHJcbiAgICBcclxuICAgIGlmICh1bmxvYWRlZFNvbmdJZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDij63vuI8g66qo65OgIOqzoeydtCDsnbTrr7gg66Gc65Sp65CoOiAke3NvbmdJZHMubGVuZ3RofeqzoWApXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIOuPmeydvO2VnCDsmpTssq3snbQg7KeE7ZaJIOykkeyduOyngCDtmZXsnbggKHNvbmdJZHMg67Cw7Je07J2EIOusuOyekOyXtOuhnCDrs4DtmZjtlZjsl6wg67mE6rWQKVxyXG4gICAgY29uc3QgcmVxdWVzdEtleSA9IHVubG9hZGVkU29uZ0lkcy5zb3J0KCkuam9pbignLCcpXHJcbiAgICBpZiAodGhpcy5idWxrTG9hZFByb21pc2UpIHtcclxuICAgICAgY29uc29sZS5sb2coYOKMmyDrj5nsnbztlZwg64yA65+JIOuhnOuUqSDsmpTssq0g64yA6riwIOykkTogJHt1bmxvYWRlZFNvbmdJZHMubGVuZ3RofeqzoWApXHJcbiAgICAgIGF3YWl0IHRoaXMuYnVsa0xvYWRQcm9taXNlXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5SEIOuMgOufiSDsoovslYTsmpQg66Gc65SpIOyLnOyekSAoJHtwcmlvcml0eX0pOiAke3VubG9hZGVkU29uZ0lkcy5sZW5ndGh96rOhYClcclxuXHJcbiAgICB0aGlzLmJ1bGtMb2FkUHJvbWlzZSA9IHRoaXMucGVyZm9ybUJ1bGtMb2FkKHVubG9hZGVkU29uZ0lkcylcclxuICAgIGF3YWl0IHRoaXMuYnVsa0xvYWRQcm9taXNlXHJcbiAgICB0aGlzLmJ1bGtMb2FkUHJvbWlzZSA9IG51bGxcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUJ1bGtMb2FkKHNvbmdJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2xpa2VzLWJ1bGsnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzb25nSWRzIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6rKw6rO866W8IHN0b3Jl7JeQIOyggOyepe2VmOqzoCDrqqjrk6Ag6rSA66CoIOq1rOuPheyekOyXkOqyjCDslYzrprxcclxuICAgICAgICBPYmplY3QuZW50cmllcyhkYXRhLmxpa2VzKS5mb3JFYWNoKChbc29uZ0lkLCBsaWtlZF0pID0+IHtcclxuICAgICAgICAgIHRoaXMubGlrZXMuc2V0KHNvbmdJZCwgbGlrZWQgYXMgYm9vbGVhbilcclxuICAgICAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIOyghOyXrSDsnbTrsqTtirgg67Cc7IOdXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xpa2VzVXBkYXRlZCcpKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSDrjIDrn4kg7KKL7JWE7JqUIOuhnOuUqSDsmYTro4w6ICR7T2JqZWN0LmtleXMoZGF0YS5saWtlcykubGVuZ3RofeqzoWApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign64yA65+JIOyii+yVhOyalCDroZzrlKkg7Iuk7YyoOicsIHJlc3BvbnNlLnN0YXR1cylcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign64yA65+JIOyii+yVhOyalCDroZzrlKkg7Jik66WYOicsIGVycm9yKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLmxpa2VzLmNsZWFyKClcclxuICAgIHRoaXMubG9hZGluZy5jbGVhcigpXHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmNsZWFyKClcclxuICAgIHRoaXMuYnVsa0xvYWRQcm9taXNlID0gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgbGlrZXNTdG9yZSA9IG5ldyBMaWtlc1N0b3JlKClcclxuXHJcbi8vIOyghOyXrSDsnbTrsqTtirgg66as7Iqk64SIIOyEpOyglSAo7ZSM66CI7J2066as7Iqk7Yq47JeQ7IScIGJ1bGsg642w7J207YSwIOyImOyLoClcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xpa2VzTG9hZGVkJywgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgY29uc3QgeyBsaWtlcyB9ID0gZXZlbnQuZGV0YWlsXHJcbiAgICBjb25zb2xlLmxvZygn8J+TqCDsoovslYTsmpQgYnVsayDrjbDsnbTthLAg7IiY7IugOicsIGxpa2VzKVxyXG4gICAgbGlrZXNTdG9yZS5zZXRCdWxrTGlrZXMobGlrZXMpXHJcbiAgfSlcclxufVxyXG5cclxuaW50ZXJmYWNlIFVzZUxpa2VSZXR1cm4ge1xyXG4gIGxpa2VkOiBib29sZWFuXHJcbiAgaXNMb2FkaW5nOiBib29sZWFuXHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcclxuICB0b2dnbGVMaWtlOiAoKSA9PiBQcm9taXNlPHZvaWQ+XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VMaWtlKHNvbmdJZDogc3RyaW5nKTogVXNlTGlrZVJldHVybiB7XHJcbiAgY29uc3QgeyBkYXRhOiBzZXNzaW9uIH0gPSB1c2VTZXNzaW9uKClcclxuICBjb25zdCBbdXBkYXRlQ291bnRlciwgc2V0VXBkYXRlQ291bnRlcl0gPSB1c2VTdGF0ZSgwKVxyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcclxuICBjb25zdCBtb3VudGVkID0gdXNlUmVmKHRydWUpXHJcblxyXG4gIC8vIOqwleygnCDsl4XrjbDsnbTtirgg7ZWo7IiYXHJcbiAgY29uc3QgZm9yY2VVcGRhdGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBpZiAobW91bnRlZC5jdXJyZW50KSB7XHJcbiAgICAgIHNldFVwZGF0ZUNvdW50ZXIocHJldiA9PiBwcmV2ICsgMSlcclxuICAgIH1cclxuICB9LCBbXSlcclxuXHJcbiAgLy8g7Lu07Y+s64SM7Yq4IOyWuOuniOyatO2KuCDsi5wgY2xlYW51cFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBtb3VudGVkLmN1cnJlbnQgPSB0cnVlXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBtb3VudGVkLmN1cnJlbnQgPSBmYWxzZVxyXG4gICAgfVxyXG4gIH0sIFtdKVxyXG5cclxuICAvLyDshLjshZgg67OA6rK9IOyLnCBzdG9yZSDrpqzshYsgKOuLpOuluCDsgqzsmqnsnpDroZwg67OA6rK965CcIOqyveyasOyXkOunjClcclxuICBjb25zdCBwcmV2Q2hhbm5lbElkUmVmID0gdXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRDaGFubmVsSWQgPSBzZXNzaW9uPy51c2VyPy5jaGFubmVsSWQgfHwgbnVsbFxyXG4gICAgXHJcbiAgICAvLyDsnbTsoIQgY2hhbm5lbElk6rCAIOyeiOyXiOuKlOuNsCDri6Trpbgg7IKs7Jqp7J6Q66GcIOuzgOqyveuQnCDqsr3smrDsl5Drp4wg66as7IWLXHJcbiAgICBpZiAocHJldkNoYW5uZWxJZFJlZi5jdXJyZW50ICYmIHByZXZDaGFubmVsSWRSZWYuY3VycmVudCAhPT0gY3VycmVudENoYW5uZWxJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UhCDsgqzsmqnsnpAg67OA6rK9IOqwkOyngCwgc3RvcmUg66as7IWLOicsIHByZXZDaGFubmVsSWRSZWYuY3VycmVudCwgJy0+JywgY3VycmVudENoYW5uZWxJZClcclxuICAgICAgbGlrZXNTdG9yZS5yZXNldCgpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByZXZDaGFubmVsSWRSZWYuY3VycmVudCA9IGN1cnJlbnRDaGFubmVsSWRcclxuICB9LCBbc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkXSlcclxuXHJcbiAgLy8gc3RvcmUg6rWs64+FIC0gVUkg7JeF642w7J207Yq466W8IOychO2VtCDtlYTsmpRcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFzb25nSWQpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gbGlrZXNTdG9yZS5zdWJzY3JpYmUoc29uZ0lkLCBmb3JjZVVwZGF0ZSlcclxuXHJcbiAgICByZXR1cm4gdW5zdWJzY3JpYmVcclxuICB9LCBbc29uZ0lkLCBmb3JjZVVwZGF0ZV0pXHJcblxyXG4gIC8vIOqwnOuzhCBBUEkg7Zi47LacIOygnOqxsCAtIOyYpOyngSDrjIDrn4kg66Gc65Sp7JeQ66eMIOydmOyhtFxyXG5cclxuICBjb25zdCB0b2dnbGVMaWtlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5jaGFubmVsSWQpIHtcclxuICAgICAgc2V0RXJyb3IoJ+uhnOq3uOyduOydtCDtlYTsmpTtlanri4jri6QnKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjdXJyZW50TGlrZWQgPSBsaWtlc1N0b3JlLmdldExpa2Uoc29uZ0lkKSB8fCBmYWxzZVxyXG4gICAgY29uc3QgbmV3TGlrZWRTdGF0ZSA9ICFjdXJyZW50TGlrZWRcclxuICAgIFxyXG4gICAgLy8g7KaJ7IucIFVJIOuwmOyYgSAo64KZ6rSA7KCBIOyXheuNsOydtO2KuClcclxuICAgIGxpa2VzU3RvcmUuc2V0TGlrZShzb25nSWQsIG5ld0xpa2VkU3RhdGUpXHJcbiAgICBsaWtlc1N0b3JlLnNldExvYWRpbmcoc29uZ0lkLCB0cnVlKVxyXG4gICAgc2V0RXJyb3IobnVsbClcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoY3VycmVudExpa2VkKSB7XHJcbiAgICAgICAgLy8g7KKL7JWE7JqUIOy3qOyGjFxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvbGlrZXM/c29uZ0lkPSR7c29uZ0lkfWAsIHtcclxuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAvLyDsi6TtjKgg7IucIOybkOuemCDsg4Htg5zroZwg65CY64+M66a8XHJcbiAgICAgICAgICBsaWtlc1N0b3JlLnNldExpa2Uoc29uZ0lkLCBjdXJyZW50TGlrZWQpXHJcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICBzZXRFcnJvcihkYXRhLmVycm9yIHx8ICfsoovslYTsmpQg7Leo7IaM7JeQIOyLpO2MqO2WiOyKteuLiOuLpCcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIOyii+yVhOyalCDstpTqsIBcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2xpa2VzJywge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNvbmdJZCB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIC8vIOyLpO2MqCDsi5wg7JuQ656YIOyDge2DnOuhnCDrkJjrj4zrprxcclxuICAgICAgICAgIGxpa2VzU3RvcmUuc2V0TGlrZShzb25nSWQsIGN1cnJlbnRMaWtlZClcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgIHNldEVycm9yKGRhdGEuZXJyb3IgfHwgJ+yii+yVhOyalCDstpTqsIDsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAvLyDsmKTrpZgg7IucIOybkOuemCDsg4Htg5zroZwg65CY64+M66a8XHJcbiAgICAgIGxpa2VzU3RvcmUuc2V0TGlrZShzb25nSWQsIGN1cnJlbnRMaWtlZClcclxuICAgICAgc2V0RXJyb3IoJ+uEpO2KuOybjO2BrCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukJylcclxuICAgICAgY29uc29sZS5lcnJvcign7KKL7JWE7JqUIO2GoOq4gCDsmKTrpZg6JywgZXJyKVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgbGlrZXNTdG9yZS5zZXRMb2FkaW5nKHNvbmdJZCwgZmFsc2UpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGlrZWQ6IGxpa2VzU3RvcmUuZ2V0TGlrZShzb25nSWQpIHx8IGZhbHNlLFxyXG4gICAgaXNMb2FkaW5nOiBsaWtlc1N0b3JlLmlzTG9hZGluZyhzb25nSWQpLFxyXG4gICAgZXJyb3IsXHJcbiAgICB0b2dnbGVMaWtlXHJcbiAgfVxyXG59XHJcblxyXG4vLyDrjIDrn4kg7KKL7JWE7JqUIOuhnOuUqeydhCDsnITtlZwg7ZuFXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VCdWxrTGlrZXMoKSB7XHJcbiAgY29uc3QgeyBkYXRhOiBzZXNzaW9uIH0gPSB1c2VTZXNzaW9uKClcclxuXHJcbiAgY29uc3QgbG9hZExpa2VzID0gdXNlQ2FsbGJhY2soYXN5bmMgKHNvbmdJZHM6IHN0cmluZ1tdLCBwcmlvcml0eTogJ2hpZ2gnIHwgJ2xvdycgPSAnbG93JykgPT4ge1xyXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5jaGFubmVsSWQgfHwgIXNvbmdJZHMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qrIOyii+yVhOyalCDroZzrlKkg6rG064SI65yAOicsIHsgXHJcbiAgICAgICAgaGFzU2Vzc2lvbjogISFzZXNzaW9uPy51c2VyPy5jaGFubmVsSWQsIFxyXG4gICAgICAgIHNvbmdDb3VudDogc29uZ0lkcy5sZW5ndGggXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGxpa2VzU3RvcmUuYnVsa0xvYWRMaWtlcyhzb25nSWRzLCBwcmlvcml0eSlcclxuICB9LCBbc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkXSlcclxuXHJcbiAgcmV0dXJuIHsgbG9hZExpa2VzIH1cclxufVxyXG5cclxuLy8g7KKL7JWE7JqUIOq0gOugqCDsoJXrs7Trpbwg6rCA7KC47Jik64qUIO2bhVxyXG5leHBvcnQgZnVuY3Rpb24gdXNlTGlrZXMoKSB7XHJcbiAgY29uc3QgZ2V0TGlrZWRTb25nSWRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgcmV0dXJuIGxpa2VzU3RvcmUuZ2V0TGlrZWRTb25nSWRzKClcclxuICB9LCBbXSlcclxuXHJcbiAgcmV0dXJuIHsgZ2V0TGlrZWRTb25nSWRzIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFVzZXJMaWtlc1JldHVybiB7XHJcbiAgbGlrZXM6IHVua25vd25bXVxyXG4gIGlzTG9hZGluZzogYm9vbGVhblxyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsXHJcbiAgcmVmcmVzaDogKCkgPT4gUHJvbWlzZTx2b2lkPlxyXG4gIHBhZ2luYXRpb246IHtcclxuICAgIHBhZ2U6IG51bWJlclxyXG4gICAgdG90YWxQYWdlczogbnVtYmVyXHJcbiAgICBoYXNOZXh0OiBib29sZWFuXHJcbiAgICBoYXNQcmV2OiBib29sZWFuXHJcbiAgfSB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZVVzZXJMaWtlcyhwYWdlOiBudW1iZXIgPSAxLCBsaW1pdDogbnVtYmVyID0gMjApOiBVc2VyTGlrZXNSZXR1cm4ge1xyXG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiB9ID0gdXNlU2Vzc2lvbigpXHJcbiAgY29uc3QgW2xpa2VzLCBzZXRMaWtlc10gPSB1c2VTdGF0ZTx1bmtub3duW10+KFtdKVxyXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXHJcbiAgY29uc3QgW3BhZ2luYXRpb24sIHNldFBhZ2luYXRpb25dID0gdXNlU3RhdGU8dW5rbm93bj4obnVsbClcclxuXHJcbiAgY29uc3QgZmV0Y2hMaWtlcyA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkKSByZXR1cm5cclxuXHJcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcclxuICAgIHNldEVycm9yKG51bGwpXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS91c2VyL2xpa2VzP3BhZ2U9JHtwYWdlfSZsaW1pdD0ke2xpbWl0fWApXHJcbiAgICAgIFxyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgc2V0TGlrZXMoZGF0YS5saWtlcylcclxuICAgICAgICBzZXRQYWdpbmF0aW9uKGRhdGEucGFnaW5hdGlvbilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgc2V0RXJyb3IoZGF0YS5lcnJvciB8fCAn7KKL7JWE7JqUIOuqqeuhneydhCDrtojrn6zsmKTripTrjbAg7Iuk7Yyo7ZaI7Iq164uI64ukJylcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHNldEVycm9yKCfrhKTtirjsm4ztgawg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpCcpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+yii+yVhOyalCDrqqnroZ0g7KGw7ZqMIOyYpOulmDonLCBlcnIpXHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hMaWtlcygpXHJcbiAgfSwgW3Nlc3Npb24sIHBhZ2UsIGxpbWl0XSlcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxpa2VzLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICByZWZyZXNoOiBmZXRjaExpa2VzLFxyXG4gICAgcGFnaW5hdGlvblxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlU2Vzc2lvbiIsIkxpa2VzU3RvcmUiLCJzZXRMaWtlIiwic29uZ0lkIiwibGlrZWQiLCJsaWtlcyIsInNldCIsIm5vdGlmeVN1YnNjcmliZXJzIiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZ2V0TGlrZSIsImdldCIsInNldExvYWRpbmciLCJsb2FkaW5nIiwiYWRkIiwiZGVsZXRlIiwiaXNMb2FkaW5nIiwiaGFzIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJzdWJzY3JpYmVycyIsIlNldCIsInNvbmdTdWJzY3JpYmVycyIsInNpemUiLCJmb3JFYWNoIiwic2V0QnVsa0xpa2VzIiwibGlrZXNEYXRhIiwiT2JqZWN0IiwiZW50cmllcyIsImdldExpa2VkU29uZ0lkcyIsImxpa2VkSWRzIiwicHVzaCIsImJ1bGtMb2FkTGlrZXMiLCJzb25nSWRzIiwicHJpb3JpdHkiLCJidWxrTG9hZFByb21pc2UiLCJ1bmxvYWRlZFNvbmdJZHMiLCJmaWx0ZXIiLCJpZCIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0S2V5Iiwic29ydCIsImpvaW4iLCJwZXJmb3JtQnVsa0xvYWQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJkYXRhIiwianNvbiIsImtleXMiLCJlcnJvciIsInN0YXR1cyIsInJlc2V0IiwiY2xlYXIiLCJNYXAiLCJsaWtlc1N0b3JlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGV0YWlsIiwidXNlTGlrZSIsInNlc3Npb24iLCJ1cGRhdGVDb3VudGVyIiwic2V0VXBkYXRlQ291bnRlciIsInNldEVycm9yIiwibW91bnRlZCIsImZvcmNlVXBkYXRlIiwiY3VycmVudCIsInByZXYiLCJwcmV2Q2hhbm5lbElkUmVmIiwiY3VycmVudENoYW5uZWxJZCIsInVzZXIiLCJjaGFubmVsSWQiLCJ1bnN1YnNjcmliZSIsInRvZ2dsZUxpa2UiLCJjdXJyZW50TGlrZWQiLCJuZXdMaWtlZFN0YXRlIiwiZXJyIiwidXNlQnVsa0xpa2VzIiwibG9hZExpa2VzIiwiaGFzU2Vzc2lvbiIsInNvbmdDb3VudCIsInVzZUxpa2VzIiwidXNlVXNlckxpa2VzIiwicGFnZSIsImxpbWl0Iiwic2V0TGlrZXMiLCJzZXRJc0xvYWRpbmciLCJwYWdpbmF0aW9uIiwic2V0UGFnaW5hdGlvbiIsImZldGNoTGlrZXMiLCJyZWZyZXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useLikes.ts\n"));

/***/ })

});