"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/songbook/page",{

/***/ "(app-pages-browser)/./src/hooks/useLikes.ts":
/*!*******************************!*\
  !*** ./src/hooks/useLikes.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useBulkLikes: () => (/* binding */ useBulkLikes),\n/* harmony export */   useLike: () => (/* binding */ useLike),\n/* harmony export */   useLikes: () => (/* binding */ useLikes),\n/* harmony export */   useUserLikes: () => (/* binding */ useUserLikes)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/./node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// ì „ì—­ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ store\nclass LikesStore {\n    setLike(songId, liked) {\n        this.likes.set(songId, liked);\n        this.notifySubscribers(songId);\n        // ì „ì—­ ì´ë²¤íŠ¸ ë°œìƒ\n        if (true) {\n            window.dispatchEvent(new CustomEvent('likesUpdated'));\n        }\n    }\n    getLike(songId) {\n        return this.likes.get(songId);\n    }\n    setLoading(songId, loading) {\n        if (loading) {\n            this.loading.add(songId);\n        } else {\n            this.loading.delete(songId);\n        }\n        this.notifySubscribers(songId);\n    }\n    isLoading(songId) {\n        return this.loading.has(songId);\n    }\n    subscribe(songId, callback) {\n        if (!this.subscribers.has(songId)) {\n            this.subscribers.set(songId, new Set());\n        }\n        this.subscribers.get(songId).add(callback);\n        return ()=>{\n            const songSubscribers = this.subscribers.get(songId);\n            if (songSubscribers) {\n                songSubscribers.delete(callback);\n                if (songSubscribers.size === 0) {\n                    this.subscribers.delete(songId);\n                }\n            }\n        };\n    }\n    notifySubscribers(songId) {\n        const songSubscribers = this.subscribers.get(songId);\n        if (songSubscribers) {\n            songSubscribers.forEach((callback)=>callback());\n        }\n    }\n    // bulk ë°ì´í„°ë¥¼ ì§ì ‘ ì„¤ì •\n    setBulkLikes(likesData) {\n        Object.entries(likesData).forEach((param)=>{\n            let [songId, liked] = param;\n            this.likes.set(songId, liked);\n            this.notifySubscribers(songId);\n        });\n        // ì „ì—­ ì´ë²¤íŠ¸ ë°œìƒ\n        if (true) {\n            window.dispatchEvent(new CustomEvent('likesUpdated'));\n        }\n    }\n    // ì¢‹ì•„ìš”í•œ ê³¡ IDë“¤ ë°˜í™˜\n    getLikedSongIds() {\n        const likedIds = [];\n        this.likes.forEach((liked, songId)=>{\n            if (liked) {\n                likedIds.push(songId);\n            }\n        });\n        return likedIds;\n    }\n    // ëŒ€ëŸ‰ ë¡œë”© (ì¤‘ë³µ ë°©ì§€)\n    async bulkLoadLikes(songIds) {\n        let priority = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'low';\n        if (this.bulkLoadPromise && priority === 'low') {\n            // ë‚®ì€ ìš°ì„ ìˆœìœ„ ìš”ì²­ì´ê³  ì´ë¯¸ ì§„í–‰ ì¤‘ì¸ ìš”ì²­ì´ ìžˆìœ¼ë©´ ê¸°ë‹¤ë¦¼\n            await this.bulkLoadPromise;\n        }\n        // ì•„ì§ ë¡œë”©ë˜ì§€ ì•Šì€ ê³¡ë“¤ë§Œ í•„í„°ë§\n        const unloadedSongIds = songIds.filter((id)=>!this.likes.has(id));\n        if (unloadedSongIds.length === 0) {\n            console.log(\"â­ï¸ ëª¨ë“  ê³¡ì´ ì´ë¯¸ ë¡œë”©ë¨: \".concat(songIds.length, \"ê³¡\"));\n            return;\n        }\n        // ë™ì¼í•œ ìš”ì²­ì´ ì§„í–‰ ì¤‘ì¸ì§€ í™•ì¸ (songIds ë°°ì—´ì„ ë¬¸ìžì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ)\n        const requestKey = unloadedSongIds.sort().join(',');\n        if (this.bulkLoadPromise) {\n            console.log(\"âŒ› ë™ì¼í•œ ëŒ€ëŸ‰ ë¡œë”© ìš”ì²­ ëŒ€ê¸° ì¤‘: \".concat(unloadedSongIds.length, \"ê³¡\"));\n            await this.bulkLoadPromise;\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì‹œìž‘ (\".concat(priority, \"): \").concat(unloadedSongIds.length, \"ê³¡\"));\n        this.bulkLoadPromise = this.performBulkLoad(unloadedSongIds);\n        await this.bulkLoadPromise;\n        this.bulkLoadPromise = null;\n    }\n    async performBulkLoad(songIds) {\n        try {\n            const response = await fetch('/api/likes-bulk', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    songIds\n                })\n            });\n            if (response.ok) {\n                const data = await response.json();\n                // ê²°ê³¼ë¥¼ storeì— ì €ìž¥í•˜ê³  ëª¨ë“  ê´€ë ¨ êµ¬ë…ìžì—ê²Œ ì•Œë¦¼\n                Object.entries(data.likes).forEach((param)=>{\n                    let [songId, liked] = param;\n                    this.likes.set(songId, liked);\n                    this.notifySubscribers(songId);\n                });\n                console.log(\"âœ… ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì™„ë£Œ: \".concat(Object.keys(data.likes).length, \"ê³¡\"));\n            } else {\n                console.error('ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì‹¤íŒ¨:', response.status);\n            }\n        } catch (error) {\n            console.error('ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì˜¤ë¥˜:', error);\n        }\n    }\n    reset() {\n        this.likes.clear();\n        this.loading.clear();\n        this.subscribers.clear();\n        this.bulkLoadPromise = null;\n    }\n    constructor(){\n        this.likes = new Map();\n        this.loading = new Set();\n        this.subscribers = new Map();\n        this.bulkLoadPromise = null;\n    }\n}\nconst likesStore = new LikesStore();\n// ì „ì—­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì—ì„œ bulk ë°ì´í„° ìˆ˜ì‹ )\nif (true) {\n    window.addEventListener('likesLoaded', (event)=>{\n        const { likes } = event.detail;\n        console.log('ðŸ“¨ ì¢‹ì•„ìš” bulk ë°ì´í„° ìˆ˜ì‹ :', likes);\n        likesStore.setBulkLikes(likes);\n    });\n}\nfunction useLike(songId) {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [updateCounter, setUpdateCounter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const mounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    // ê°•ì œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n    const forceUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLike.useCallback[forceUpdate]\": ()=>{\n            if (mounted.current) {\n                setUpdateCounter({\n                    \"useLike.useCallback[forceUpdate]\": (prev)=>prev + 1\n                }[\"useLike.useCallback[forceUpdate]\"]);\n            }\n        }\n    }[\"useLike.useCallback[forceUpdate]\"], []);\n    // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ cleanup\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            mounted.current = true;\n            return ({\n                \"useLike.useEffect\": ()=>{\n                    mounted.current = false;\n                }\n            })[\"useLike.useEffect\"];\n        }\n    }[\"useLike.useEffect\"], []);\n    // ì„¸ì…˜ ë³€ê²½ ì‹œ store ë¦¬ì…‹ (ë‹¤ë¥¸ ì‚¬ìš©ìžë¡œ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ)\n    const prevChannelIdRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            var _session_user;\n            const currentChannelId = (session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId) || null;\n            // ì´ì „ channelIdê°€ ìžˆì—ˆëŠ”ë° ë‹¤ë¥¸ ì‚¬ìš©ìžë¡œ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ë¦¬ì…‹\n            if (prevChannelIdRef.current && prevChannelIdRef.current !== currentChannelId) {\n                console.log('ðŸ”„ ì‚¬ìš©ìž ë³€ê²½ ê°ì§€, store ë¦¬ì…‹:', prevChannelIdRef.current, '->', currentChannelId);\n                likesStore.reset();\n            }\n            prevChannelIdRef.current = currentChannelId;\n        }\n    }[\"useLike.useEffect\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId\n    ]);\n    // store êµ¬ë… - UI ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í•„ìš”\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            if (!songId) return;\n            const unsubscribe = likesStore.subscribe(songId, forceUpdate);\n            return unsubscribe;\n        }\n    }[\"useLike.useEffect\"], [\n        songId,\n        forceUpdate\n    ]);\n    // ê°œë³„ API í˜¸ì¶œ ì œê±° - ì˜¤ì§ ëŒ€ëŸ‰ ë¡œë”©ì—ë§Œ ì˜ì¡´\n    const toggleLike = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId)) {\n            setError('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');\n            return;\n        }\n        const currentLiked = likesStore.getLike(songId) || false;\n        const newLikedState = !currentLiked;\n        // ì¦‰ì‹œ UI ë°˜ì˜ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\n        likesStore.setLike(songId, newLikedState);\n        likesStore.setLoading(songId, true);\n        setError(null);\n        try {\n            if (currentLiked) {\n                // ì¢‹ì•„ìš” ì·¨ì†Œ\n                const response = await fetch(\"/api/likes?songId=\".concat(songId), {\n                    method: 'DELETE'\n                });\n                if (!response.ok) {\n                    // ì‹¤íŒ¨ ì‹œ ì›ëž˜ ìƒíƒœë¡œ ë˜ëŒë¦¼\n                    likesStore.setLike(songId, currentLiked);\n                    const data = await response.json();\n                    setError(data.error || 'ì¢‹ì•„ìš” ì·¨ì†Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n                }\n            } else {\n                // ì¢‹ì•„ìš” ì¶”ê°€\n                const response = await fetch('/api/likes', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        songId\n                    })\n                });\n                if (!response.ok) {\n                    // ì‹¤íŒ¨ ì‹œ ì›ëž˜ ìƒíƒœë¡œ ë˜ëŒë¦¼\n                    likesStore.setLike(songId, currentLiked);\n                    const data = await response.json();\n                    setError(data.error || 'ì¢‹ì•„ìš” ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n                }\n            }\n        } catch (err) {\n            // ì˜¤ë¥˜ ì‹œ ì›ëž˜ ìƒíƒœë¡œ ë˜ëŒë¦¼\n            likesStore.setLike(songId, currentLiked);\n            setError('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n            console.error('ì¢‹ì•„ìš” í† ê¸€ ì˜¤ë¥˜:', err);\n        } finally{\n            likesStore.setLoading(songId, false);\n        }\n    };\n    return {\n        liked: likesStore.getLike(songId) || false,\n        isLoading: likesStore.isLoading(songId),\n        error,\n        toggleLike\n    };\n}\n// ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”©ì„ ìœ„í•œ í›…\nfunction useBulkLikes() {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const loadLikes = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBulkLikes.useCallback[loadLikes]\": async function(songIds) {\n            let priority = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'low';\n            var _session_user;\n            if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId) || !songIds.length) {\n                var _session_user1;\n                console.log('ðŸš« ì¢‹ì•„ìš” ë¡œë”© ê±´ë„ˆëœ€:', {\n                    hasSession: !!(session === null || session === void 0 ? void 0 : (_session_user1 = session.user) === null || _session_user1 === void 0 ? void 0 : _session_user1.channelId),\n                    songCount: songIds.length\n                });\n                return;\n            }\n            await likesStore.bulkLoadLikes(songIds, priority);\n        }\n    }[\"useBulkLikes.useCallback[loadLikes]\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId\n    ]);\n    return {\n        loadLikes\n    };\n}\n// ì¢‹ì•„ìš” ê´€ë ¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í›…\nfunction useLikes() {\n    const getLikedSongIds = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLikes.useCallback[getLikedSongIds]\": ()=>{\n            return likesStore.getLikedSongIds();\n        }\n    }[\"useLikes.useCallback[getLikedSongIds]\"], []);\n    return {\n        getLikedSongIds\n    };\n}\nfunction useUserLikes() {\n    let page = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1, limit = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 20;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [likes, setLikes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [pagination, setPagination] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const fetchLikes = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId)) return;\n        setIsLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(\"/api/user/likes?page=\".concat(page, \"&limit=\").concat(limit));\n            if (response.ok) {\n                const data = await response.json();\n                setLikes(data.likes);\n                setPagination(data.pagination);\n            } else {\n                const data = await response.json();\n                setError(data.error || 'ì¢‹ì•„ìš” ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n            }\n        } catch (err) {\n            setError('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n            console.error('ì¢‹ì•„ìš” ëª©ë¡ ì¡°íšŒ ì˜¤ë¥˜:', err);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useUserLikes.useEffect\": ()=>{\n            fetchLikes();\n        }\n    }[\"useUserLikes.useEffect\"], [\n        session,\n        page,\n        limit\n    ]);\n    return {\n        likes,\n        isLoading,\n        error,\n        refresh: fetchLikes,\n        pagination\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VMaWtlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnRTtBQUNwQjtBQUU1Qyx5QkFBeUI7QUFDekIsTUFBTUs7SUFNSkMsUUFBUUMsTUFBYyxFQUFFQyxLQUFjLEVBQUU7UUFDdEMsSUFBSSxDQUFDQyxLQUFLLENBQUNDLEdBQUcsQ0FBQ0gsUUFBUUM7UUFDdkIsSUFBSSxDQUFDRyxpQkFBaUIsQ0FBQ0o7UUFDdkIsWUFBWTtRQUNaLElBQUksSUFBNkIsRUFBRTtZQUNqQ0ssT0FBT0MsYUFBYSxDQUFDLElBQUlDLFlBQVk7UUFDdkM7SUFDRjtJQUVBQyxRQUFRUixNQUFjLEVBQXVCO1FBQzNDLE9BQU8sSUFBSSxDQUFDRSxLQUFLLENBQUNPLEdBQUcsQ0FBQ1Q7SUFDeEI7SUFFQVUsV0FBV1YsTUFBYyxFQUFFVyxPQUFnQixFQUFFO1FBQzNDLElBQUlBLFNBQVM7WUFDWCxJQUFJLENBQUNBLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDWjtRQUNuQixPQUFPO1lBQ0wsSUFBSSxDQUFDVyxPQUFPLENBQUNFLE1BQU0sQ0FBQ2I7UUFDdEI7UUFDQSxJQUFJLENBQUNJLGlCQUFpQixDQUFDSjtJQUN6QjtJQUVBYyxVQUFVZCxNQUFjLEVBQVc7UUFDakMsT0FBTyxJQUFJLENBQUNXLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDZjtJQUMxQjtJQUVBZ0IsVUFBVWhCLE1BQWMsRUFBRWlCLFFBQW9CLEVBQUU7UUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQ0MsV0FBVyxDQUFDSCxHQUFHLENBQUNmLFNBQVM7WUFDakMsSUFBSSxDQUFDa0IsV0FBVyxDQUFDZixHQUFHLENBQUNILFFBQVEsSUFBSW1CO1FBQ25DO1FBQ0EsSUFBSSxDQUFDRCxXQUFXLENBQUNULEdBQUcsQ0FBQ1QsUUFBU1ksR0FBRyxDQUFDSztRQUVsQyxPQUFPO1lBQ0wsTUFBTUcsa0JBQWtCLElBQUksQ0FBQ0YsV0FBVyxDQUFDVCxHQUFHLENBQUNU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L3NyYy9ob29rcy91c2VMaWtlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IHVzZVNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnXHJcblxyXG4vLyDsoITsl60g7IOB7YOcIOq0gOumrOulvCDsnITtlZwg6rCE64uo7ZWcIHN0b3JlXHJcbmNsYXNzIExpa2VzU3RvcmUge1xyXG4gIHByaXZhdGUgbGlrZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+ID0gbmV3IE1hcCgpXHJcbiAgcHJpdmF0ZSBsb2FkaW5nOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKVxyXG4gIHByaXZhdGUgc3Vic2NyaWJlcnM6IE1hcDxzdHJpbmcsIFNldDwoKSA9PiB2b2lkPj4gPSBuZXcgTWFwKClcclxuICBwcml2YXRlIGJ1bGtMb2FkUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsXHJcblxyXG4gIHNldExpa2Uoc29uZ0lkOiBzdHJpbmcsIGxpa2VkOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmxpa2VzLnNldChzb25nSWQsIGxpa2VkKVxyXG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhzb25nSWQpXHJcbiAgICAvLyDsoITsl60g7J2067Kk7Yq4IOuwnOyDnVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbGlrZXNVcGRhdGVkJykpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRMaWtlKHNvbmdJZDogc3RyaW5nKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5saWtlcy5nZXQoc29uZ0lkKVxyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhzb25nSWQ6IHN0cmluZywgbG9hZGluZzogYm9vbGVhbikge1xyXG4gICAgaWYgKGxvYWRpbmcpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nLmFkZChzb25nSWQpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmxvYWRpbmcuZGVsZXRlKHNvbmdJZClcclxuICAgIH1cclxuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkKVxyXG4gIH1cclxuXHJcbiAgaXNMb2FkaW5nKHNvbmdJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5sb2FkaW5nLmhhcyhzb25nSWQpXHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmUoc29uZ0lkOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoIXRoaXMuc3Vic2NyaWJlcnMuaGFzKHNvbmdJZCkpIHtcclxuICAgICAgdGhpcy5zdWJzY3JpYmVycy5zZXQoc29uZ0lkLCBuZXcgU2V0KCkpXHJcbiAgICB9XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmdldChzb25nSWQpIS5hZGQoY2FsbGJhY2spXHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgY29uc3Qgc29uZ1N1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVycy5nZXQoc29uZ0lkKVxyXG4gICAgICBpZiAoc29uZ1N1YnNjcmliZXJzKSB7XHJcbiAgICAgICAgc29uZ1N1YnNjcmliZXJzLmRlbGV0ZShjYWxsYmFjaylcclxuICAgICAgICBpZiAoc29uZ1N1YnNjcmliZXJzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKHNvbmdJZClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNvbmdTdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHNvbmdJZClcclxuICAgIGlmIChzb25nU3Vic2NyaWJlcnMpIHtcclxuICAgICAgc29uZ1N1YnNjcmliZXJzLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGJ1bGsg642w7J207YSw66W8IOyngeygkSDshKTsoJVcclxuICBzZXRCdWxrTGlrZXMobGlrZXNEYXRhOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPikge1xyXG4gICAgT2JqZWN0LmVudHJpZXMobGlrZXNEYXRhKS5mb3JFYWNoKChbc29uZ0lkLCBsaWtlZF0pID0+IHtcclxuICAgICAgdGhpcy5saWtlcy5zZXQoc29uZ0lkLCBsaWtlZClcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhzb25nSWQpXHJcbiAgICB9KVxyXG4gICAgLy8g7KCE7JetIOydtOuypO2KuCDrsJzsg51cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xpa2VzVXBkYXRlZCcpKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g7KKL7JWE7JqU7ZWcIOqzoSBJROuTpCDrsJjtmZhcclxuICBnZXRMaWtlZFNvbmdJZHMoKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbGlrZWRJZHM6IHN0cmluZ1tdID0gW11cclxuICAgIHRoaXMubGlrZXMuZm9yRWFjaCgobGlrZWQsIHNvbmdJZCkgPT4ge1xyXG4gICAgICBpZiAobGlrZWQpIHtcclxuICAgICAgICBsaWtlZElkcy5wdXNoKHNvbmdJZClcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBsaWtlZElkc1xyXG4gIH1cclxuXHJcbiAgLy8g64yA65+JIOuhnOuUqSAo7KSR67O1IOuwqeyngClcclxuICBhc3luYyBidWxrTG9hZExpa2VzKHNvbmdJZHM6IHN0cmluZ1tdLCBwcmlvcml0eTogJ2hpZ2gnIHwgJ2xvdycgPSAnbG93Jyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKHRoaXMuYnVsa0xvYWRQcm9taXNlICYmIHByaW9yaXR5ID09PSAnbG93Jykge1xyXG4gICAgICAvLyDrgq7snYAg7Jqw7ISg7Iic7JyEIOyalOyyreydtOqzoCDsnbTrr7gg7KeE7ZaJIOykkeyduCDsmpTssq3snbQg7J6I7Jy866m0IOq4sOuLpOumvFxyXG4gICAgICBhd2FpdCB0aGlzLmJ1bGtMb2FkUHJvbWlzZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOyVhOyngSDroZzrlKnrkJjsp4Ag7JWK7J2AIOqzoeuTpOunjCDtlYTthLDrp4FcclxuICAgIGNvbnN0IHVubG9hZGVkU29uZ0lkcyA9IHNvbmdJZHMuZmlsdGVyKGlkID0+ICF0aGlzLmxpa2VzLmhhcyhpZCkpXHJcbiAgICBcclxuICAgIGlmICh1bmxvYWRlZFNvbmdJZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDij63vuI8g66qo65OgIOqzoeydtCDsnbTrr7gg66Gc65Sp65CoOiAke3NvbmdJZHMubGVuZ3RofeqzoWApXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIOuPmeydvO2VnCDsmpTssq3snbQg7KeE7ZaJIOykkeyduOyngCDtmZXsnbggKHNvbmdJZHMg67Cw7Je07J2EIOusuOyekOyXtOuhnCDrs4DtmZjtlZjsl6wg67mE6rWQKVxyXG4gICAgY29uc3QgcmVxdWVzdEtleSA9IHVubG9hZGVkU29uZ0lkcy5zb3J0KCkuam9pbignLCcpXHJcbiAgICBpZiAodGhpcy5idWxrTG9hZFByb21pc2UpIHtcclxuICAgICAgY29uc29sZS5sb2coYOKMmyDrj5nsnbztlZwg64yA65+JIOuhnOuUqSDsmpTssq0g64yA6riwIOykkTogJHt1bmxvYWRlZFNvbmdJZHMubGVuZ3RofeqzoWApXHJcbiAgICAgIGF3YWl0IHRoaXMuYnVsa0xvYWRQcm9taXNlXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5SEIOuMgOufiSDsoovslYTsmpQg66Gc65SpIOyLnOyekSAoJHtwcmlvcml0eX0pOiAke3VubG9hZGVkU29uZ0lkcy5sZW5ndGh96rOhYClcclxuXHJcbiAgICB0aGlzLmJ1bGtMb2FkUHJvbWlzZSA9IHRoaXMucGVyZm9ybUJ1bGtMb2FkKHVubG9hZGVkU29uZ0lkcylcclxuICAgIGF3YWl0IHRoaXMuYnVsa0xvYWRQcm9taXNlXHJcbiAgICB0aGlzLmJ1bGtMb2FkUHJvbWlzZSA9IG51bGxcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUJ1bGtMb2FkKHNvbmdJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2xpa2VzLWJ1bGsnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzb25nSWRzIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6rKw6rO866W8IHN0b3Jl7JeQIOyggOyepe2VmOqzoCDrqqjrk6Ag6rSA66CoIOq1rOuPheyekOyXkOqyjCDslYzrprxcclxuICAgICAgICBPYmplY3QuZW50cmllcyhkYXRhLmxpa2VzKS5mb3JFYWNoKChbc29uZ0lkLCBsaWtlZF0pID0+IHtcclxuICAgICAgICAgIHRoaXMubGlrZXMuc2V0KHNvbmdJZCwgbGlrZWQgYXMgYm9vbGVhbilcclxuICAgICAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUg64yA65+JIOyii+yVhOyalCDroZzrlKkg7JmE66OMOiAke09iamVjdC5rZXlzKGRhdGEubGlrZXMpLmxlbmd0aH3qs6FgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+uMgOufiSDsoovslYTsmpQg66Gc65SpIOyLpO2MqDonLCByZXNwb25zZS5zdGF0dXMpXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+uMgOufiSDsoovslYTsmpQg66Gc65SpIOyYpOulmDonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5saWtlcy5jbGVhcigpXHJcbiAgICB0aGlzLmxvYWRpbmcuY2xlYXIoKVxyXG4gICAgdGhpcy5zdWJzY3JpYmVycy5jbGVhcigpXHJcbiAgICB0aGlzLmJ1bGtMb2FkUHJvbWlzZSA9IG51bGxcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGxpa2VzU3RvcmUgPSBuZXcgTGlrZXNTdG9yZSgpXHJcblxyXG4vLyDsoITsl60g7J2067Kk7Yq4IOumrOyKpOuEiCDshKTsoJUgKO2UjOugiOydtOumrOyKpO2KuOyXkOyEnCBidWxrIOuNsOydtO2EsCDsiJjsi6ApXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsaWtlc0xvYWRlZCcsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgIGNvbnN0IHsgbGlrZXMgfSA9IGV2ZW50LmRldGFpbFxyXG4gICAgY29uc29sZS5sb2coJ/Cfk6gg7KKL7JWE7JqUIGJ1bGsg642w7J207YSwIOyImOyLoDonLCBsaWtlcylcclxuICAgIGxpa2VzU3RvcmUuc2V0QnVsa0xpa2VzKGxpa2VzKVxyXG4gIH0pXHJcbn1cclxuXHJcbmludGVyZmFjZSBVc2VMaWtlUmV0dXJuIHtcclxuICBsaWtlZDogYm9vbGVhblxyXG4gIGlzTG9hZGluZzogYm9vbGVhblxyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsXHJcbiAgdG9nZ2xlTGlrZTogKCkgPT4gUHJvbWlzZTx2b2lkPlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlTGlrZShzb25nSWQ6IHN0cmluZyk6IFVzZUxpa2VSZXR1cm4ge1xyXG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiB9ID0gdXNlU2Vzc2lvbigpXHJcbiAgY29uc3QgW3VwZGF0ZUNvdW50ZXIsIHNldFVwZGF0ZUNvdW50ZXJdID0gdXNlU3RhdGUoMClcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXHJcbiAgY29uc3QgbW91bnRlZCA9IHVzZVJlZih0cnVlKVxyXG5cclxuICAvLyDqsJXsoJwg7JeF642w7J207Yq4IO2VqOyImFxyXG4gIGNvbnN0IGZvcmNlVXBkYXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKG1vdW50ZWQuY3VycmVudCkge1xyXG4gICAgICBzZXRVcGRhdGVDb3VudGVyKHByZXYgPT4gcHJldiArIDEpXHJcbiAgICB9XHJcbiAgfSwgW10pXHJcblxyXG4gIC8vIOy7tO2PrOuEjO2KuCDslrjrp4jsmrTtirgg7IucIGNsZWFudXBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbW91bnRlZC5jdXJyZW50ID0gdHJ1ZVxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgbW91bnRlZC5jdXJyZW50ID0gZmFsc2VcclxuICAgIH1cclxuICB9LCBbXSlcclxuXHJcbiAgLy8g7IS47IWYIOuzgOqyvSDsi5wgc3RvcmUg66as7IWLICjri6Trpbgg7IKs7Jqp7J6Q66GcIOuzgOqyveuQnCDqsr3smrDsl5Drp4wpXHJcbiAgY29uc3QgcHJldkNoYW5uZWxJZFJlZiA9IHVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50Q2hhbm5lbElkID0gc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkIHx8IG51bGxcclxuICAgIFxyXG4gICAgLy8g7J207KCEIGNoYW5uZWxJZOqwgCDsnojsl4jripTrjbAg64uk66W4IOyCrOyaqeyekOuhnCDrs4Dqsr3rkJwg6rK97Jqw7JeQ66eMIOumrOyFi1xyXG4gICAgaWYgKHByZXZDaGFubmVsSWRSZWYuY3VycmVudCAmJiBwcmV2Q2hhbm5lbElkUmVmLmN1cnJlbnQgIT09IGN1cnJlbnRDaGFubmVsSWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/CflIQg7IKs7Jqp7J6QIOuzgOqyvSDqsJDsp4AsIHN0b3JlIOumrOyFizonLCBwcmV2Q2hhbm5lbElkUmVmLmN1cnJlbnQsICctPicsIGN1cnJlbnRDaGFubmVsSWQpXHJcbiAgICAgIGxpa2VzU3RvcmUucmVzZXQoKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcmV2Q2hhbm5lbElkUmVmLmN1cnJlbnQgPSBjdXJyZW50Q2hhbm5lbElkXHJcbiAgfSwgW3Nlc3Npb24/LnVzZXI/LmNoYW5uZWxJZF0pXHJcblxyXG4gIC8vIHN0b3JlIOq1rOuPhSAtIFVJIOyXheuNsOydtO2KuOulvCDsnITtlbQg7ZWE7JqUXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghc29uZ0lkKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IGxpa2VzU3RvcmUuc3Vic2NyaWJlKHNvbmdJZCwgZm9yY2VVcGRhdGUpXHJcblxyXG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlXHJcbiAgfSwgW3NvbmdJZCwgZm9yY2VVcGRhdGVdKVxyXG5cclxuICAvLyDqsJzrs4QgQVBJIO2YuOy2nCDsoJzqsbAgLSDsmKTsp4Eg64yA65+JIOuhnOuUqeyXkOunjCDsnZjsobRcclxuXHJcbiAgY29uc3QgdG9nZ2xlTGlrZSA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkKSB7XHJcbiAgICAgIHNldEVycm9yKCfroZzqt7jsnbjsnbQg7ZWE7JqU7ZWp64uI64ukJylcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY3VycmVudExpa2VkID0gbGlrZXNTdG9yZS5nZXRMaWtlKHNvbmdJZCkgfHwgZmFsc2VcclxuICAgIGNvbnN0IG5ld0xpa2VkU3RhdGUgPSAhY3VycmVudExpa2VkXHJcbiAgICBcclxuICAgIC8vIOymieyLnCBVSSDrsJjsmIEgKOuCmeq0gOyggSDsl4XrjbDsnbTtirgpXHJcbiAgICBsaWtlc1N0b3JlLnNldExpa2Uoc29uZ0lkLCBuZXdMaWtlZFN0YXRlKVxyXG4gICAgbGlrZXNTdG9yZS5zZXRMb2FkaW5nKHNvbmdJZCwgdHJ1ZSlcclxuICAgIHNldEVycm9yKG51bGwpXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGN1cnJlbnRMaWtlZCkge1xyXG4gICAgICAgIC8vIOyii+yVhOyalCDst6jshoxcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2xpa2VzP3NvbmdJZD0ke3NvbmdJZH1gLCB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgLy8g7Iuk7YyoIOyLnCDsm5Drnpgg7IOB7YOc66GcIOuQmOuPjOumvFxyXG4gICAgICAgICAgbGlrZXNTdG9yZS5zZXRMaWtlKHNvbmdJZCwgY3VycmVudExpa2VkKVxyXG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgc2V0RXJyb3IoZGF0YS5lcnJvciB8fCAn7KKL7JWE7JqUIOy3qOyGjOyXkCDsi6TtjKjtlojsirXri4jri6QnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDsoovslYTsmpQg7LaU6rCAXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9saWtlcycsIHtcclxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzb25nSWQgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAvLyDsi6TtjKgg7IucIOybkOuemCDsg4Htg5zroZwg65CY64+M66a8XHJcbiAgICAgICAgICBsaWtlc1N0b3JlLnNldExpa2Uoc29uZ0lkLCBjdXJyZW50TGlrZWQpXHJcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICBzZXRFcnJvcihkYXRhLmVycm9yIHx8ICfsoovslYTsmpQg7LaU6rCA7JeQIOyLpO2MqO2WiOyKteuLiOuLpCcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgLy8g7Jik66WYIOyLnCDsm5Drnpgg7IOB7YOc66GcIOuQmOuPjOumvFxyXG4gICAgICBsaWtlc1N0b3JlLnNldExpa2Uoc29uZ0lkLCBjdXJyZW50TGlrZWQpXHJcbiAgICAgIHNldEVycm9yKCfrhKTtirjsm4ztgawg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpCcpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+yii+yVhOyalCDthqDquIAg7Jik66WYOicsIGVycilcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGxpa2VzU3RvcmUuc2V0TG9hZGluZyhzb25nSWQsIGZhbHNlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxpa2VkOiBsaWtlc1N0b3JlLmdldExpa2Uoc29uZ0lkKSB8fCBmYWxzZSxcclxuICAgIGlzTG9hZGluZzogbGlrZXNTdG9yZS5pc0xvYWRpbmcoc29uZ0lkKSxcclxuICAgIGVycm9yLFxyXG4gICAgdG9nZ2xlTGlrZVxyXG4gIH1cclxufVxyXG5cclxuLy8g64yA65+JIOyii+yVhOyalCDroZzrlKnsnYQg7JyE7ZWcIO2bhVxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQnVsa0xpa2VzKCkge1xyXG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiB9ID0gdXNlU2Vzc2lvbigpXHJcblxyXG4gIGNvbnN0IGxvYWRMaWtlcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChzb25nSWRzOiBzdHJpbmdbXSwgcHJpb3JpdHk6ICdoaWdoJyB8ICdsb3cnID0gJ2xvdycpID0+IHtcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkIHx8ICFzb25nSWRzLmxlbmd0aCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+aqyDsoovslYTsmpQg66Gc65SpIOqxtOuEiOucgDonLCB7IFxyXG4gICAgICAgIGhhc1Nlc3Npb246ICEhc2Vzc2lvbj8udXNlcj8uY2hhbm5lbElkLCBcclxuICAgICAgICBzb25nQ291bnQ6IHNvbmdJZHMubGVuZ3RoIFxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBsaWtlc1N0b3JlLmJ1bGtMb2FkTGlrZXMoc29uZ0lkcywgcHJpb3JpdHkpXHJcbiAgfSwgW3Nlc3Npb24/LnVzZXI/LmNoYW5uZWxJZF0pXHJcblxyXG4gIHJldHVybiB7IGxvYWRMaWtlcyB9XHJcbn1cclxuXHJcbi8vIOyii+yVhOyalCDqtIDroKgg7KCV67O066W8IOqwgOyguOyYpOuKlCDtm4VcclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxpa2VzKCkge1xyXG4gIGNvbnN0IGdldExpa2VkU29uZ0lkcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHJldHVybiBsaWtlc1N0b3JlLmdldExpa2VkU29uZ0lkcygpXHJcbiAgfSwgW10pXHJcblxyXG4gIHJldHVybiB7IGdldExpa2VkU29uZ0lkcyB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBVc2VyTGlrZXNSZXR1cm4ge1xyXG4gIGxpa2VzOiB1bmtub3duW11cclxuICBpc0xvYWRpbmc6IGJvb2xlYW5cclxuICBlcnJvcjogc3RyaW5nIHwgbnVsbFxyXG4gIHJlZnJlc2g6ICgpID0+IFByb21pc2U8dm9pZD5cclxuICBwYWdpbmF0aW9uOiB7XHJcbiAgICBwYWdlOiBudW1iZXJcclxuICAgIHRvdGFsUGFnZXM6IG51bWJlclxyXG4gICAgaGFzTmV4dDogYm9vbGVhblxyXG4gICAgaGFzUHJldjogYm9vbGVhblxyXG4gIH0gfCBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VVc2VyTGlrZXMocGFnZTogbnVtYmVyID0gMSwgbGltaXQ6IG51bWJlciA9IDIwKTogVXNlckxpa2VzUmV0dXJuIHtcclxuICBjb25zdCB7IGRhdGE6IHNlc3Npb24gfSA9IHVzZVNlc3Npb24oKVxyXG4gIGNvbnN0IFtsaWtlcywgc2V0TGlrZXNdID0gdXNlU3RhdGU8dW5rbm93bltdPihbXSlcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxyXG4gIGNvbnN0IFtwYWdpbmF0aW9uLCBzZXRQYWdpbmF0aW9uXSA9IHVzZVN0YXRlPHVua25vd24+KG51bGwpXHJcblxyXG4gIGNvbnN0IGZldGNoTGlrZXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmNoYW5uZWxJZCkgcmV0dXJuXHJcblxyXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpXHJcbiAgICBzZXRFcnJvcihudWxsKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvdXNlci9saWtlcz9wYWdlPSR7cGFnZX0mbGltaXQ9JHtsaW1pdH1gKVxyXG4gICAgICBcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHNldExpa2VzKGRhdGEubGlrZXMpXHJcbiAgICAgICAgc2V0UGFnaW5hdGlvbihkYXRhLnBhZ2luYXRpb24pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIHNldEVycm9yKGRhdGEuZXJyb3IgfHwgJ+yii+yVhOyalCDrqqnroZ3snYQg67aI65+s7Jik64qU642wIOyLpO2MqO2WiOyKteuLiOuLpCcpXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBzZXRFcnJvcign64Sk7Yq47JuM7YGsIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QnKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCfsoovslYTsmpQg66qp66GdIOyhsO2ajCDsmKTrpZg6JywgZXJyKVxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoTGlrZXMoKVxyXG4gIH0sIFtzZXNzaW9uLCBwYWdlLCBsaW1pdF0pXHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsaWtlcyxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgcmVmcmVzaDogZmV0Y2hMaWtlcyxcclxuICAgIHBhZ2luYXRpb25cclxuICB9XHJcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZVNlc3Npb24iLCJMaWtlc1N0b3JlIiwic2V0TGlrZSIsInNvbmdJZCIsImxpa2VkIiwibGlrZXMiLCJzZXQiLCJub3RpZnlTdWJzY3JpYmVycyIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImdldExpa2UiLCJnZXQiLCJzZXRMb2FkaW5nIiwibG9hZGluZyIsImFkZCIsImRlbGV0ZSIsImlzTG9hZGluZyIsImhhcyIsInN1YnNjcmliZSIsImNhbGxiYWNrIiwic3Vic2NyaWJlcnMiLCJTZXQiLCJzb25nU3Vic2NyaWJlcnMiLCJzaXplIiwiZm9yRWFjaCIsInNldEJ1bGtMaWtlcyIsImxpa2VzRGF0YSIsIk9iamVjdCIsImVudHJpZXMiLCJnZXRMaWtlZFNvbmdJZHMiLCJsaWtlZElkcyIsInB1c2giLCJidWxrTG9hZExpa2VzIiwic29uZ0lkcyIsInByaW9yaXR5IiwiYnVsa0xvYWRQcm9taXNlIiwidW5sb2FkZWRTb25nSWRzIiwiZmlsdGVyIiwiaWQiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwicmVxdWVzdEtleSIsInNvcnQiLCJqb2luIiwicGVyZm9ybUJ1bGtMb2FkIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZGF0YSIsImpzb24iLCJrZXlzIiwiZXJyb3IiLCJzdGF0dXMiLCJyZXNldCIsImNsZWFyIiwiTWFwIiwibGlrZXNTdG9yZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImRldGFpbCIsInVzZUxpa2UiLCJzZXNzaW9uIiwidXBkYXRlQ291bnRlciIsInNldFVwZGF0ZUNvdW50ZXIiLCJzZXRFcnJvciIsIm1vdW50ZWQiLCJmb3JjZVVwZGF0ZSIsImN1cnJlbnQiLCJwcmV2IiwicHJldkNoYW5uZWxJZFJlZiIsImN1cnJlbnRDaGFubmVsSWQiLCJ1c2VyIiwiY2hhbm5lbElkIiwidW5zdWJzY3JpYmUiLCJ0b2dnbGVMaWtlIiwiY3VycmVudExpa2VkIiwibmV3TGlrZWRTdGF0ZSIsImVyciIsInVzZUJ1bGtMaWtlcyIsImxvYWRMaWtlcyIsImhhc1Nlc3Npb24iLCJzb25nQ291bnQiLCJ1c2VMaWtlcyIsInVzZVVzZXJMaWtlcyIsInBhZ2UiLCJsaW1pdCIsInNldExpa2VzIiwic2V0SXNMb2FkaW5nIiwicGFnaW5hdGlvbiIsInNldFBhZ2luYXRpb24iLCJmZXRjaExpa2VzIiwicmVmcmVzaCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useLikes.ts\n"));

/***/ })

});