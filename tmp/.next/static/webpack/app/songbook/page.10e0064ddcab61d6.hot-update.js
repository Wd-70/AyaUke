"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/songbook/page",{

/***/ "(app-pages-browser)/./src/hooks/useLikes.ts":
/*!*******************************!*\
  !*** ./src/hooks/useLikes.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useBulkLikes: () => (/* binding */ useBulkLikes),\n/* harmony export */   useLike: () => (/* binding */ useLike),\n/* harmony export */   useLikes: () => (/* binding */ useLikes),\n/* harmony export */   useUserLikes: () => (/* binding */ useUserLikes)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/./node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// ì „ì—­ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ store\nclass LikesStore {\n    setLike(songId, liked) {\n        this.likes.set(songId, liked);\n        this.notifySubscribers(songId);\n        // ì „ì—­ ì´ë²¤íŠ¸ ë°œìƒ\n        if (true) {\n            window.dispatchEvent(new CustomEvent('likesUpdated'));\n        }\n    }\n    getLike(songId) {\n        return this.likes.get(songId);\n    }\n    setLoading(songId, loading) {\n        if (loading) {\n            this.loading.add(songId);\n        } else {\n            this.loading.delete(songId);\n        }\n        this.notifySubscribers(songId);\n    }\n    isLoading(songId) {\n        return this.loading.has(songId);\n    }\n    subscribe(songId, callback) {\n        if (!this.subscribers.has(songId)) {\n            this.subscribers.set(songId, new Set());\n        }\n        this.subscribers.get(songId).add(callback);\n        return ()=>{\n            const songSubscribers = this.subscribers.get(songId);\n            if (songSubscribers) {\n                songSubscribers.delete(callback);\n                if (songSubscribers.size === 0) {\n                    this.subscribers.delete(songId);\n                }\n            }\n        };\n    }\n    notifySubscribers(songId) {\n        const songSubscribers = this.subscribers.get(songId);\n        if (songSubscribers) {\n            songSubscribers.forEach((callback)=>callback());\n        }\n    }\n    // bulk ë°ì´í„°ë¥¼ ì§ì ‘ ì„¤ì •\n    setBulkLikes(likesData) {\n        Object.entries(likesData).forEach((param)=>{\n            let [songId, liked] = param;\n            this.likes.set(songId, liked);\n            this.notifySubscribers(songId);\n        });\n    }\n    // ì¢‹ì•„ìš”í•œ ê³¡ IDë“¤ ë°˜í™˜\n    getLikedSongIds() {\n        const likedIds = [];\n        this.likes.forEach((liked, songId)=>{\n            if (liked) {\n                likedIds.push(songId);\n            }\n        });\n        return likedIds;\n    }\n    // ëŒ€ëŸ‰ ë¡œë”© (ì¤‘ë³µ ë°©ì§€)\n    async bulkLoadLikes(songIds) {\n        let priority = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'low';\n        if (this.bulkLoadPromise && priority === 'low') {\n            // ë‚®ì€ ìš°ì„ ìˆœìœ„ ìš”ì²­ì´ê³  ì´ë¯¸ ì§„í–‰ ì¤‘ì¸ ìš”ì²­ì´ ìžˆìœ¼ë©´ ê¸°ë‹¤ë¦¼\n            await this.bulkLoadPromise;\n        }\n        // ì•„ì§ ë¡œë”©ë˜ì§€ ì•Šì€ ê³¡ë“¤ë§Œ í•„í„°ë§\n        const unloadedSongIds = songIds.filter((id)=>!this.likes.has(id));\n        if (unloadedSongIds.length === 0) {\n            console.log(\"â­ï¸ ëª¨ë“  ê³¡ì´ ì´ë¯¸ ë¡œë”©ë¨: \".concat(songIds.length, \"ê³¡\"));\n            return;\n        }\n        // ë™ì¼í•œ ìš”ì²­ì´ ì§„í–‰ ì¤‘ì¸ì§€ í™•ì¸ (songIds ë°°ì—´ì„ ë¬¸ìžì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ)\n        const requestKey = unloadedSongIds.sort().join(',');\n        if (this.bulkLoadPromise) {\n            console.log(\"âŒ› ë™ì¼í•œ ëŒ€ëŸ‰ ë¡œë”© ìš”ì²­ ëŒ€ê¸° ì¤‘: \".concat(unloadedSongIds.length, \"ê³¡\"));\n            await this.bulkLoadPromise;\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì‹œìž‘ (\".concat(priority, \"): \").concat(unloadedSongIds.length, \"ê³¡\"));\n        this.bulkLoadPromise = this.performBulkLoad(unloadedSongIds);\n        await this.bulkLoadPromise;\n        this.bulkLoadPromise = null;\n    }\n    async performBulkLoad(songIds) {\n        try {\n            const response = await fetch('/api/likes-bulk', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    songIds\n                })\n            });\n            if (response.ok) {\n                const data = await response.json();\n                // ê²°ê³¼ë¥¼ storeì— ì €ìž¥í•˜ê³  ëª¨ë“  ê´€ë ¨ êµ¬ë…ìžì—ê²Œ ì•Œë¦¼\n                Object.entries(data.likes).forEach((param)=>{\n                    let [songId, liked] = param;\n                    this.likes.set(songId, liked);\n                    this.notifySubscribers(songId);\n                });\n                console.log(\"âœ… ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì™„ë£Œ: \".concat(Object.keys(data.likes).length, \"ê³¡\"));\n            } else {\n                console.error('ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì‹¤íŒ¨:', response.status);\n            }\n        } catch (error) {\n            console.error('ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”© ì˜¤ë¥˜:', error);\n        }\n    }\n    reset() {\n        this.likes.clear();\n        this.loading.clear();\n        this.subscribers.clear();\n        this.bulkLoadPromise = null;\n    }\n    constructor(){\n        this.likes = new Map();\n        this.loading = new Set();\n        this.subscribers = new Map();\n        this.bulkLoadPromise = null;\n    }\n}\nconst likesStore = new LikesStore();\n// ì „ì—­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì—ì„œ bulk ë°ì´í„° ìˆ˜ì‹ )\nif (true) {\n    window.addEventListener('likesLoaded', (event)=>{\n        const { likes } = event.detail;\n        console.log('ðŸ“¨ ì¢‹ì•„ìš” bulk ë°ì´í„° ìˆ˜ì‹ :', likes);\n        likesStore.setBulkLikes(likes);\n    });\n}\nfunction useLike(songId) {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [updateCounter, setUpdateCounter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const mounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    // ê°•ì œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n    const forceUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLike.useCallback[forceUpdate]\": ()=>{\n            if (mounted.current) {\n                setUpdateCounter({\n                    \"useLike.useCallback[forceUpdate]\": (prev)=>prev + 1\n                }[\"useLike.useCallback[forceUpdate]\"]);\n            }\n        }\n    }[\"useLike.useCallback[forceUpdate]\"], []);\n    // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ cleanup\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            mounted.current = true;\n            return ({\n                \"useLike.useEffect\": ()=>{\n                    mounted.current = false;\n                }\n            })[\"useLike.useEffect\"];\n        }\n    }[\"useLike.useEffect\"], []);\n    // ì„¸ì…˜ ë³€ê²½ ì‹œ store ë¦¬ì…‹ (ë‹¤ë¥¸ ì‚¬ìš©ìžë¡œ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ)\n    const prevChannelIdRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            var _session_user;\n            const currentChannelId = (session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId) || null;\n            // ì´ì „ channelIdê°€ ìžˆì—ˆëŠ”ë° ë‹¤ë¥¸ ì‚¬ìš©ìžë¡œ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ë¦¬ì…‹\n            if (prevChannelIdRef.current && prevChannelIdRef.current !== currentChannelId) {\n                console.log('ðŸ”„ ì‚¬ìš©ìž ë³€ê²½ ê°ì§€, store ë¦¬ì…‹:', prevChannelIdRef.current, '->', currentChannelId);\n                likesStore.reset();\n            }\n            prevChannelIdRef.current = currentChannelId;\n        }\n    }[\"useLike.useEffect\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId\n    ]);\n    // store êµ¬ë… - UI ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í•„ìš”\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useLike.useEffect\": ()=>{\n            if (!songId) return;\n            const unsubscribe = likesStore.subscribe(songId, forceUpdate);\n            return unsubscribe;\n        }\n    }[\"useLike.useEffect\"], [\n        songId,\n        forceUpdate\n    ]);\n    // ê°œë³„ API í˜¸ì¶œ ì œê±° - ì˜¤ì§ ëŒ€ëŸ‰ ë¡œë”©ì—ë§Œ ì˜ì¡´\n    const toggleLike = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId)) {\n            setError('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');\n            return;\n        }\n        const currentLiked = likesStore.getLike(songId) || false;\n        const newLikedState = !currentLiked;\n        // ì¦‰ì‹œ UI ë°˜ì˜ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\n        likesStore.setLike(songId, newLikedState);\n        likesStore.setLoading(songId, true);\n        setError(null);\n        try {\n            if (currentLiked) {\n                // ì¢‹ì•„ìš” ì·¨ì†Œ\n                const response = await fetch(\"/api/likes?songId=\".concat(songId), {\n                    method: 'DELETE'\n                });\n                if (!response.ok) {\n                    // ì‹¤íŒ¨ ì‹œ ì›ëž˜ ìƒíƒœë¡œ ë˜ëŒë¦¼\n                    likesStore.setLike(songId, currentLiked);\n                    const data = await response.json();\n                    setError(data.error || 'ì¢‹ì•„ìš” ì·¨ì†Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n                }\n            } else {\n                // ì¢‹ì•„ìš” ì¶”ê°€\n                const response = await fetch('/api/likes', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        songId\n                    })\n                });\n                if (!response.ok) {\n                    // ì‹¤íŒ¨ ì‹œ ì›ëž˜ ìƒíƒœë¡œ ë˜ëŒë¦¼\n                    likesStore.setLike(songId, currentLiked);\n                    const data = await response.json();\n                    setError(data.error || 'ì¢‹ì•„ìš” ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n                }\n            }\n        } catch (err) {\n            // ì˜¤ë¥˜ ì‹œ ì›ëž˜ ìƒíƒœë¡œ ë˜ëŒë¦¼\n            likesStore.setLike(songId, currentLiked);\n            setError('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n            console.error('ì¢‹ì•„ìš” í† ê¸€ ì˜¤ë¥˜:', err);\n        } finally{\n            likesStore.setLoading(songId, false);\n        }\n    };\n    return {\n        liked: likesStore.getLike(songId) || false,\n        isLoading: likesStore.isLoading(songId),\n        error,\n        toggleLike\n    };\n}\n// ëŒ€ëŸ‰ ì¢‹ì•„ìš” ë¡œë”©ì„ ìœ„í•œ í›…\nfunction useBulkLikes() {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const loadLikes = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBulkLikes.useCallback[loadLikes]\": async function(songIds) {\n            let priority = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'low';\n            var _session_user;\n            if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId) || !songIds.length) {\n                var _session_user1;\n                console.log('ðŸš« ì¢‹ì•„ìš” ë¡œë”© ê±´ë„ˆëœ€:', {\n                    hasSession: !!(session === null || session === void 0 ? void 0 : (_session_user1 = session.user) === null || _session_user1 === void 0 ? void 0 : _session_user1.channelId),\n                    songCount: songIds.length\n                });\n                return;\n            }\n            await likesStore.bulkLoadLikes(songIds, priority);\n        }\n    }[\"useBulkLikes.useCallback[loadLikes]\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId\n    ]);\n    return {\n        loadLikes\n    };\n}\n// ì¢‹ì•„ìš” ê´€ë ¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í›…\nfunction useLikes() {\n    const getLikedSongIds = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLikes.useCallback[getLikedSongIds]\": ()=>{\n            return likesStore.getLikedSongIds();\n        }\n    }[\"useLikes.useCallback[getLikedSongIds]\"], []);\n    return {\n        getLikedSongIds\n    };\n}\nfunction useUserLikes() {\n    let page = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1, limit = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 20;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [likes, setLikes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [pagination, setPagination] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const fetchLikes = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.channelId)) return;\n        setIsLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(\"/api/user/likes?page=\".concat(page, \"&limit=\").concat(limit));\n            if (response.ok) {\n                const data = await response.json();\n                setLikes(data.likes);\n                setPagination(data.pagination);\n            } else {\n                const data = await response.json();\n                setError(data.error || 'ì¢‹ì•„ìš” ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n            }\n        } catch (err) {\n            setError('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');\n            console.error('ì¢‹ì•„ìš” ëª©ë¡ ì¡°íšŒ ì˜¤ë¥˜:', err);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useUserLikes.useEffect\": ()=>{\n            fetchLikes();\n        }\n    }[\"useUserLikes.useEffect\"], [\n        session,\n        page,\n        limit\n    ]);\n    return {\n        likes,\n        isLoading,\n        error,\n        refresh: fetchLikes,\n        pagination\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VMaWtlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnRTtBQUNwQjtBQUU1Qyx5QkFBeUI7QUFDekIsTUFBTUs7SUFNSkMsUUFBUUMsTUFBYyxFQUFFQyxLQUFjLEVBQUU7UUFDdEMsSUFBSSxDQUFDQyxLQUFLLENBQUNDLEdBQUcsQ0FBQ0gsUUFBUUM7UUFDdkIsSUFBSSxDQUFDRyxpQkFBaUIsQ0FBQ0o7UUFDdkIsWUFBWTtRQUNaLElBQUksSUFBNkIsRUFBRTtZQUNqQ0ssT0FBT0MsYUFBYSxDQUFDLElBQUlDLFlBQVk7UUFDdkM7SUFDRjtJQUVBQyxRQUFRUixNQUFjLEVBQXVCO1FBQzNDLE9BQU8sSUFBSSxDQUFDRSxLQUFLLENBQUNPLEdBQUcsQ0FBQ1Q7SUFDeEI7SUFFQVUsV0FBV1YsTUFBYyxFQUFFVyxPQUFnQixFQUFFO1FBQzNDLElBQUlBLFNBQVM7WUFDWCxJQUFJLENBQUNBLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDWjtRQUNuQixPQUFPO1lBQ0wsSUFBSSxDQUFDVyxPQUFPLENBQUNFLE1BQU0sQ0FBQ2I7UUFDdEI7UUFDQSxJQUFJLENBQUNJLGlCQUFpQixDQUFDSjtJQUN6QjtJQUVBYyxVQUFVZCxNQUFjLEVBQVc7UUFDakMsT0FBTyxJQUFJLENBQUNXLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDZjtJQUMxQjtJQUVBZ0IsVUFBVWhCLE1BQWMsRUFBRWlCLFFBQW9CLEVBQUU7UUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQ0MsV0FBVyxDQUFDSCxHQUFHLENBQUNmLFNBQVM7WUFDakMsSUFBSSxDQUFDa0IsV0FBVyxDQUFDZixHQUFHLENBQUNILFFBQVEsSUFBSW1CO1FBQ25DO1FBQ0EsSUFBSSxDQUFDRCxXQUFXLENBQUNULEdBQUcsQ0FBQ1QsUUFBU1ksR0FBRyxDQUFDSztRQUVsQyxPQUFPO1lBQ0wsTUFBTUcsa0JBQWtCLElBQUksQ0FBQ0YsV0FBVyxDQUFDVCxHQUFHLENBQUNU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O0lBQ2hELE1BQU0sQ0FBQ3FCLFdBQVc2RSxhQUFhLEdBQUdsRywrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM4RCxPQUFPYSxTQUFTLEdBQUczRSwrQ0FBUUEsQ0FBZ0I7SUFDbEQsTUFBTSxDQUFDbUcsWUFBWUMsY0FBYyxHQUFHcEcsK0NBQVFBLENBQVU7SUFFdEQsTUFBTXFHLGFBQWE7WUFDWjdCO1FBQUwsSUFBSSxFQUFDQSxvQkFBQUEsK0JBQUFBLGdCQUFBQSxRQUFTVSxJQUFJLGNBQWJWLG9DQUFBQSxjQUFlVyxTQUFTLEdBQUU7UUFFL0JlLGFBQWE7UUFDYnZCLFNBQVM7UUFFVCxJQUFJO1lBQ0YsTUFBTXhCLFdBQVcsTUFBTUMsTUFBTSx3QkFBc0M0QyxPQUFkRCxNQUFLLFdBQWUsT0FBTkM7WUFFbkUsSUFBSTdDLFNBQVNPLEVBQUUsRUFBRTtnQkFDZixNQUFNQyxPQUFPLE1BQU1SLFNBQVNTLElBQUk7Z0JBQ2hDcUMsU0FBU3RDLEtBQUtsRCxLQUFLO2dCQUNuQjJGLGNBQWN6QyxLQUFLd0MsVUFBVTtZQUMvQixPQUFPO2dCQUNMLE1BQU14QyxPQUFPLE1BQU1SLFNBQVNTLElBQUk7Z0JBQ2hDZSxTQUFTaEIsS0FBS0csS0FBSyxJQUFJO1lBQ3pCO1FBQ0YsRUFBRSxPQUFPMEIsS0FBSztZQUNaYixTQUFTO1lBQ1Q5QixRQUFRaUIsS0FBSyxDQUFDLGlCQUFpQjBCO1FBQ2pDLFNBQVU7WUFDUlUsYUFBYTtRQUNmO0lBQ0Y7SUFFQWpHLGdEQUFTQTtrQ0FBQztZQUNSb0c7UUFDRjtpQ0FBRztRQUFDN0I7UUFBU3VCO1FBQU1DO0tBQU07SUFFekIsT0FBTztRQUNMdkY7UUFDQVk7UUFDQXlDO1FBQ0F3QyxTQUFTRDtRQUNURjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9tbnQvZi9EYXRhL0dpdC9jbGF1ZGUtY29kZS9heWF1a2UtcGFnZS9heWF1a2UtcGFnZS9zcmMvaG9va3MvdXNlTGlrZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0J1xyXG5cclxuLy8g7KCE7JetIOyDge2DnCDqtIDrpqzrpbwg7JyE7ZWcIOqwhOuLqO2VnCBzdG9yZVxyXG5jbGFzcyBMaWtlc1N0b3JlIHtcclxuICBwcml2YXRlIGxpa2VzOiBNYXA8c3RyaW5nLCBib29sZWFuPiA9IG5ldyBNYXAoKVxyXG4gIHByaXZhdGUgbG9hZGluZzogU2V0PHN0cmluZz4gPSBuZXcgU2V0KClcclxuICBwcml2YXRlIHN1YnNjcmliZXJzOiBNYXA8c3RyaW5nLCBTZXQ8KCkgPT4gdm9pZD4+ID0gbmV3IE1hcCgpXHJcbiAgcHJpdmF0ZSBidWxrTG9hZFByb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbFxyXG5cclxuICBzZXRMaWtlKHNvbmdJZDogc3RyaW5nLCBsaWtlZDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5saWtlcy5zZXQoc29uZ0lkLCBsaWtlZClcclxuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkKVxyXG4gICAgLy8g7KCE7JetIOydtOuypO2KuCDrsJzsg51cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xpa2VzVXBkYXRlZCcpKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TGlrZShzb25nSWQ6IHN0cmluZyk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMubGlrZXMuZ2V0KHNvbmdJZClcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcoc29uZ0lkOiBzdHJpbmcsIGxvYWRpbmc6IGJvb2xlYW4pIHtcclxuICAgIGlmIChsb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMubG9hZGluZy5hZGQoc29uZ0lkKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5sb2FkaW5nLmRlbGV0ZShzb25nSWQpXHJcbiAgICB9XHJcbiAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKHNvbmdJZClcclxuICB9XHJcblxyXG4gIGlzTG9hZGluZyhzb25nSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMubG9hZGluZy5oYXMoc29uZ0lkKVxyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKHNvbmdJZDogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKCF0aGlzLnN1YnNjcmliZXJzLmhhcyhzb25nSWQpKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMuc2V0KHNvbmdJZCwgbmV3IFNldCgpKVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdWJzY3JpYmVycy5nZXQoc29uZ0lkKSEuYWRkKGNhbGxiYWNrKVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNvbmdTdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHNvbmdJZClcclxuICAgICAgaWYgKHNvbmdTdWJzY3JpYmVycykge1xyXG4gICAgICAgIHNvbmdTdWJzY3JpYmVycy5kZWxldGUoY2FsbGJhY2spXHJcbiAgICAgICAgaWYgKHNvbmdTdWJzY3JpYmVycy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmRlbGV0ZShzb25nSWQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vdGlmeVN1YnNjcmliZXJzKHNvbmdJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBzb25nU3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzLmdldChzb25nSWQpXHJcbiAgICBpZiAoc29uZ1N1YnNjcmliZXJzKSB7XHJcbiAgICAgIHNvbmdTdWJzY3JpYmVycy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKCkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBidWxrIOuNsOydtO2EsOulvCDsp4HsoJEg7ISk7KCVXHJcbiAgc2V0QnVsa0xpa2VzKGxpa2VzRGF0YTogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4pIHtcclxuICAgIE9iamVjdC5lbnRyaWVzKGxpa2VzRGF0YSkuZm9yRWFjaCgoW3NvbmdJZCwgbGlrZWRdKSA9PiB7XHJcbiAgICAgIHRoaXMubGlrZXMuc2V0KHNvbmdJZCwgbGlrZWQpXHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoc29uZ0lkKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIOyii+yVhOyalO2VnCDqs6EgSUTrk6Qg67CY7ZmYXHJcbiAgZ2V0TGlrZWRTb25nSWRzKCk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGxpa2VkSWRzOiBzdHJpbmdbXSA9IFtdXHJcbiAgICB0aGlzLmxpa2VzLmZvckVhY2goKGxpa2VkLCBzb25nSWQpID0+IHtcclxuICAgICAgaWYgKGxpa2VkKSB7XHJcbiAgICAgICAgbGlrZWRJZHMucHVzaChzb25nSWQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gbGlrZWRJZHNcclxuICB9XHJcblxyXG4gIC8vIOuMgOufiSDroZzrlKkgKOykkeuztSDrsKnsp4ApXHJcbiAgYXN5bmMgYnVsa0xvYWRMaWtlcyhzb25nSWRzOiBzdHJpbmdbXSwgcHJpb3JpdHk6ICdoaWdoJyB8ICdsb3cnID0gJ2xvdycpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICh0aGlzLmJ1bGtMb2FkUHJvbWlzZSAmJiBwcmlvcml0eSA9PT0gJ2xvdycpIHtcclxuICAgICAgLy8g64Ku7J2AIOyasOyEoOyInOychCDsmpTssq3snbTqs6Ag7J2066+4IOynhO2WiSDspJHsnbgg7JqU7LKt7J20IOyeiOycvOuptCDquLDri6TrprxcclxuICAgICAgYXdhaXQgdGhpcy5idWxrTG9hZFByb21pc2VcclxuICAgIH1cclxuXHJcbiAgICAvLyDslYTsp4Eg66Gc65Sp65CY7KeAIOyViuydgCDqs6Hrk6Trp4wg7ZWE7YSw66eBXHJcbiAgICBjb25zdCB1bmxvYWRlZFNvbmdJZHMgPSBzb25nSWRzLmZpbHRlcihpZCA9PiAhdGhpcy5saWtlcy5oYXMoaWQpKVxyXG4gICAgXHJcbiAgICBpZiAodW5sb2FkZWRTb25nSWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhg4o+t77iPIOuqqOuToCDqs6HsnbQg7J2066+4IOuhnOuUqeuQqDogJHtzb25nSWRzLmxlbmd0aH3qs6FgKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyDrj5nsnbztlZwg7JqU7LKt7J20IOynhO2WiSDspJHsnbjsp4Ag7ZmV7J24IChzb25nSWRzIOuwsOyXtOydhCDrrLjsnpDsl7TroZwg67OA7ZmY7ZWY7JesIOu5hOq1kClcclxuICAgIGNvbnN0IHJlcXVlc3RLZXkgPSB1bmxvYWRlZFNvbmdJZHMuc29ydCgpLmpvaW4oJywnKVxyXG4gICAgaWYgKHRoaXMuYnVsa0xvYWRQcm9taXNlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDijJsg64+Z7J287ZWcIOuMgOufiSDroZzrlKkg7JqU7LKtIOuMgOq4sCDspJE6ICR7dW5sb2FkZWRTb25nSWRzLmxlbmd0aH3qs6FgKVxyXG4gICAgICBhd2FpdCB0aGlzLmJ1bGtMb2FkUHJvbWlzZVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhg8J+UhCDrjIDrn4kg7KKL7JWE7JqUIOuhnOuUqSDsi5zsnpEgKCR7cHJpb3JpdHl9KTogJHt1bmxvYWRlZFNvbmdJZHMubGVuZ3RofeqzoWApXHJcblxyXG4gICAgdGhpcy5idWxrTG9hZFByb21pc2UgPSB0aGlzLnBlcmZvcm1CdWxrTG9hZCh1bmxvYWRlZFNvbmdJZHMpXHJcbiAgICBhd2FpdCB0aGlzLmJ1bGtMb2FkUHJvbWlzZVxyXG4gICAgdGhpcy5idWxrTG9hZFByb21pc2UgPSBudWxsXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1CdWxrTG9hZChzb25nSWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9saWtlcy1idWxrJywge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc29uZ0lkcyB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOqysOqzvOulvCBzdG9yZeyXkCDsoIDsnqXtlZjqs6Ag66qo65OgIOq0gOugqCDqtazrj4XsnpDsl5Dqsowg7JWM66a8XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YS5saWtlcykuZm9yRWFjaCgoW3NvbmdJZCwgbGlrZWRdKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmxpa2VzLnNldChzb25nSWQsIGxpa2VkIGFzIGJvb2xlYW4pXHJcbiAgICAgICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKHNvbmdJZClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIOuMgOufiSDsoovslYTsmpQg66Gc65SpIOyZhOujjDogJHtPYmplY3Qua2V5cyhkYXRhLmxpa2VzKS5sZW5ndGh96rOhYClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfrjIDrn4kg7KKL7JWE7JqUIOuhnOuUqSDsi6TtjKg6JywgcmVzcG9uc2Uuc3RhdHVzKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfrjIDrn4kg7KKL7JWE7JqUIOuhnOuUqSDsmKTrpZg6JywgZXJyb3IpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMubGlrZXMuY2xlYXIoKVxyXG4gICAgdGhpcy5sb2FkaW5nLmNsZWFyKClcclxuICAgIHRoaXMuc3Vic2NyaWJlcnMuY2xlYXIoKVxyXG4gICAgdGhpcy5idWxrTG9hZFByb21pc2UgPSBudWxsXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBsaWtlc1N0b3JlID0gbmV3IExpa2VzU3RvcmUoKVxyXG5cclxuLy8g7KCE7JetIOydtOuypO2KuCDrpqzsiqTrhIgg7ISk7KCVICjtlIzroIjsnbTrpqzsiqTtirjsl5DshJwgYnVsayDrjbDsnbTthLAg7IiY7IugKVxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbGlrZXNMb2FkZWQnLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCB7IGxpa2VzIH0gPSBldmVudC5kZXRhaWxcclxuICAgIGNvbnNvbGUubG9nKCfwn5OoIOyii+yVhOyalCBidWxrIOuNsOydtO2EsCDsiJjsi6A6JywgbGlrZXMpXHJcbiAgICBsaWtlc1N0b3JlLnNldEJ1bGtMaWtlcyhsaWtlcylcclxuICB9KVxyXG59XHJcblxyXG5pbnRlcmZhY2UgVXNlTGlrZVJldHVybiB7XHJcbiAgbGlrZWQ6IGJvb2xlYW5cclxuICBpc0xvYWRpbmc6IGJvb2xlYW5cclxuICBlcnJvcjogc3RyaW5nIHwgbnVsbFxyXG4gIHRvZ2dsZUxpa2U6ICgpID0+IFByb21pc2U8dm9pZD5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxpa2Uoc29uZ0lkOiBzdHJpbmcpOiBVc2VMaWtlUmV0dXJuIHtcclxuICBjb25zdCB7IGRhdGE6IHNlc3Npb24gfSA9IHVzZVNlc3Npb24oKVxyXG4gIGNvbnN0IFt1cGRhdGVDb3VudGVyLCBzZXRVcGRhdGVDb3VudGVyXSA9IHVzZVN0YXRlKDApXHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxyXG4gIGNvbnN0IG1vdW50ZWQgPSB1c2VSZWYodHJ1ZSlcclxuXHJcbiAgLy8g6rCV7KCcIOyXheuNsOydtO2KuCDtlajsiJhcclxuICBjb25zdCBmb3JjZVVwZGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmIChtb3VudGVkLmN1cnJlbnQpIHtcclxuICAgICAgc2V0VXBkYXRlQ291bnRlcihwcmV2ID0+IHByZXYgKyAxKVxyXG4gICAgfVxyXG4gIH0sIFtdKVxyXG5cclxuICAvLyDsu7Ttj6zrhIztirgg7Ja466eI7Jq07Yq4IOyLnCBjbGVhbnVwXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIG1vdW50ZWQuY3VycmVudCA9IHRydWVcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIG1vdW50ZWQuY3VycmVudCA9IGZhbHNlXHJcbiAgICB9XHJcbiAgfSwgW10pXHJcblxyXG4gIC8vIOyEuOyFmCDrs4Dqsr0g7IucIHN0b3JlIOumrOyFiyAo64uk66W4IOyCrOyaqeyekOuhnCDrs4Dqsr3rkJwg6rK97Jqw7JeQ66eMKVxyXG4gIGNvbnN0IHByZXZDaGFubmVsSWRSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbClcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudENoYW5uZWxJZCA9IHNlc3Npb24/LnVzZXI/LmNoYW5uZWxJZCB8fCBudWxsXHJcbiAgICBcclxuICAgIC8vIOydtOyghCBjaGFubmVsSWTqsIAg7J6I7JeI64qU642wIOuLpOuluCDsgqzsmqnsnpDroZwg67OA6rK965CcIOqyveyasOyXkOunjCDrpqzshYtcclxuICAgIGlmIChwcmV2Q2hhbm5lbElkUmVmLmN1cnJlbnQgJiYgcHJldkNoYW5uZWxJZFJlZi5jdXJyZW50ICE9PSBjdXJyZW50Q2hhbm5lbElkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIOyCrOyaqeyekCDrs4Dqsr0g6rCQ7KeALCBzdG9yZSDrpqzshYs6JywgcHJldkNoYW5uZWxJZFJlZi5jdXJyZW50LCAnLT4nLCBjdXJyZW50Q2hhbm5lbElkKVxyXG4gICAgICBsaWtlc1N0b3JlLnJlc2V0KClcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJldkNoYW5uZWxJZFJlZi5jdXJyZW50ID0gY3VycmVudENoYW5uZWxJZFxyXG4gIH0sIFtzZXNzaW9uPy51c2VyPy5jaGFubmVsSWRdKVxyXG5cclxuICAvLyBzdG9yZSDqtazrj4UgLSBVSSDsl4XrjbDsnbTtirjrpbwg7JyE7ZW0IO2VhOyalFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIXNvbmdJZCkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBsaWtlc1N0b3JlLnN1YnNjcmliZShzb25nSWQsIGZvcmNlVXBkYXRlKVxyXG5cclxuICAgIHJldHVybiB1bnN1YnNjcmliZVxyXG4gIH0sIFtzb25nSWQsIGZvcmNlVXBkYXRlXSlcclxuXHJcbiAgLy8g6rCc67OEIEFQSSDtmLjstpwg7KCc6rGwIC0g7Jik7KeBIOuMgOufiSDroZzrlKnsl5Drp4wg7J2Y7KG0XHJcblxyXG4gIGNvbnN0IHRvZ2dsZUxpa2UgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmNoYW5uZWxJZCkge1xyXG4gICAgICBzZXRFcnJvcign66Gc6re47J247J20IO2VhOyalO2VqeuLiOuLpCcpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnJlbnRMaWtlZCA9IGxpa2VzU3RvcmUuZ2V0TGlrZShzb25nSWQpIHx8IGZhbHNlXHJcbiAgICBjb25zdCBuZXdMaWtlZFN0YXRlID0gIWN1cnJlbnRMaWtlZFxyXG4gICAgXHJcbiAgICAvLyDsponsi5wgVUkg67CY7JiBICjrgpnqtIDsoIEg7JeF642w7J207Yq4KVxyXG4gICAgbGlrZXNTdG9yZS5zZXRMaWtlKHNvbmdJZCwgbmV3TGlrZWRTdGF0ZSlcclxuICAgIGxpa2VzU3RvcmUuc2V0TG9hZGluZyhzb25nSWQsIHRydWUpXHJcbiAgICBzZXRFcnJvcihudWxsKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChjdXJyZW50TGlrZWQpIHtcclxuICAgICAgICAvLyDsoovslYTsmpQg7Leo7IaMXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9saWtlcz9zb25nSWQ9JHtzb25nSWR9YCwge1xyXG4gICAgICAgICAgbWV0aG9kOiAnREVMRVRFJ1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIC8vIOyLpO2MqCDsi5wg7JuQ656YIOyDge2DnOuhnCDrkJjrj4zrprxcclxuICAgICAgICAgIGxpa2VzU3RvcmUuc2V0TGlrZShzb25nSWQsIGN1cnJlbnRMaWtlZClcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgIHNldEVycm9yKGRhdGEuZXJyb3IgfHwgJ+yii+yVhOyalCDst6jshozsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukJylcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g7KKL7JWE7JqUIOy2lOqwgFxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvbGlrZXMnLCB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc29uZ0lkIH0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgLy8g7Iuk7YyoIOyLnCDsm5Drnpgg7IOB7YOc66GcIOuQmOuPjOumvFxyXG4gICAgICAgICAgbGlrZXNTdG9yZS5zZXRMaWtlKHNvbmdJZCwgY3VycmVudExpa2VkKVxyXG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgc2V0RXJyb3IoZGF0YS5lcnJvciB8fCAn7KKL7JWE7JqUIOy2lOqwgOyXkCDsi6TtjKjtlojsirXri4jri6QnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIC8vIOyYpOulmCDsi5wg7JuQ656YIOyDge2DnOuhnCDrkJjrj4zrprxcclxuICAgICAgbGlrZXNTdG9yZS5zZXRMaWtlKHNvbmdJZCwgY3VycmVudExpa2VkKVxyXG4gICAgICBzZXRFcnJvcign64Sk7Yq47JuM7YGsIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QnKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCfsoovslYTsmpQg7Yag6riAIOyYpOulmDonLCBlcnIpXHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBsaWtlc1N0b3JlLnNldExvYWRpbmcoc29uZ0lkLCBmYWxzZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsaWtlZDogbGlrZXNTdG9yZS5nZXRMaWtlKHNvbmdJZCkgfHwgZmFsc2UsXHJcbiAgICBpc0xvYWRpbmc6IGxpa2VzU3RvcmUuaXNMb2FkaW5nKHNvbmdJZCksXHJcbiAgICBlcnJvcixcclxuICAgIHRvZ2dsZUxpa2VcclxuICB9XHJcbn1cclxuXHJcbi8vIOuMgOufiSDsoovslYTsmpQg66Gc65Sp7J2EIOychO2VnCDtm4VcclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJ1bGtMaWtlcygpIHtcclxuICBjb25zdCB7IGRhdGE6IHNlc3Npb24gfSA9IHVzZVNlc3Npb24oKVxyXG5cclxuICBjb25zdCBsb2FkTGlrZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoc29uZ0lkczogc3RyaW5nW10sIHByaW9yaXR5OiAnaGlnaCcgfCAnbG93JyA9ICdsb3cnKSA9PiB7XHJcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmNoYW5uZWxJZCB8fCAhc29uZ0lkcy5sZW5ndGgpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfmqsg7KKL7JWE7JqUIOuhnOuUqSDqsbTrhIjrnIA6JywgeyBcclxuICAgICAgICBoYXNTZXNzaW9uOiAhIXNlc3Npb24/LnVzZXI/LmNoYW5uZWxJZCwgXHJcbiAgICAgICAgc29uZ0NvdW50OiBzb25nSWRzLmxlbmd0aCBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgbGlrZXNTdG9yZS5idWxrTG9hZExpa2VzKHNvbmdJZHMsIHByaW9yaXR5KVxyXG4gIH0sIFtzZXNzaW9uPy51c2VyPy5jaGFubmVsSWRdKVxyXG5cclxuICByZXR1cm4geyBsb2FkTGlrZXMgfVxyXG59XHJcblxyXG4vLyDsoovslYTsmpQg6rSA66CoIOygleuztOulvCDqsIDsoLjsmKTripQg7ZuFXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VMaWtlcygpIHtcclxuICBjb25zdCBnZXRMaWtlZFNvbmdJZHMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICByZXR1cm4gbGlrZXNTdG9yZS5nZXRMaWtlZFNvbmdJZHMoKVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4geyBnZXRMaWtlZFNvbmdJZHMgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgVXNlckxpa2VzUmV0dXJuIHtcclxuICBsaWtlczogdW5rbm93bltdXHJcbiAgaXNMb2FkaW5nOiBib29sZWFuXHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcclxuICByZWZyZXNoOiAoKSA9PiBQcm9taXNlPHZvaWQ+XHJcbiAgcGFnaW5hdGlvbjoge1xyXG4gICAgcGFnZTogbnVtYmVyXHJcbiAgICB0b3RhbFBhZ2VzOiBudW1iZXJcclxuICAgIGhhc05leHQ6IGJvb2xlYW5cclxuICAgIGhhc1ByZXY6IGJvb2xlYW5cclxuICB9IHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlVXNlckxpa2VzKHBhZ2U6IG51bWJlciA9IDEsIGxpbWl0OiBudW1iZXIgPSAyMCk6IFVzZXJMaWtlc1JldHVybiB7XHJcbiAgY29uc3QgeyBkYXRhOiBzZXNzaW9uIH0gPSB1c2VTZXNzaW9uKClcclxuICBjb25zdCBbbGlrZXMsIHNldExpa2VzXSA9IHVzZVN0YXRlPHVua25vd25bXT4oW10pXHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcclxuICBjb25zdCBbcGFnaW5hdGlvbiwgc2V0UGFnaW5hdGlvbl0gPSB1c2VTdGF0ZTx1bmtub3duPihudWxsKVxyXG5cclxuICBjb25zdCBmZXRjaExpa2VzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5jaGFubmVsSWQpIHJldHVyblxyXG5cclxuICAgIHNldElzTG9hZGluZyh0cnVlKVxyXG4gICAgc2V0RXJyb3IobnVsbClcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL3VzZXIvbGlrZXM/cGFnZT0ke3BhZ2V9JmxpbWl0PSR7bGltaXR9YClcclxuICAgICAgXHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICBzZXRMaWtlcyhkYXRhLmxpa2VzKVxyXG4gICAgICAgIHNldFBhZ2luYXRpb24oZGF0YS5wYWdpbmF0aW9uKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICBzZXRFcnJvcihkYXRhLmVycm9yIHx8ICfsoovslYTsmpQg66qp66Gd7J2EIOu2iOufrOyYpOuKlOuNsCDsi6TtjKjtlojsirXri4jri6QnKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgc2V0RXJyb3IoJ+uEpO2KuOybjO2BrCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukJylcclxuICAgICAgY29uc29sZS5lcnJvcign7KKL7JWE7JqUIOuqqeuhnSDsobDtmowg7Jik66WYOicsIGVycilcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBmZXRjaExpa2VzKClcclxuICB9LCBbc2Vzc2lvbiwgcGFnZSwgbGltaXRdKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGlrZXMsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcixcclxuICAgIHJlZnJlc2g6IGZldGNoTGlrZXMsXHJcbiAgICBwYWdpbmF0aW9uXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VSZWYiLCJ1c2VTZXNzaW9uIiwiTGlrZXNTdG9yZSIsInNldExpa2UiLCJzb25nSWQiLCJsaWtlZCIsImxpa2VzIiwic2V0Iiwibm90aWZ5U3Vic2NyaWJlcnMiLCJ3aW5kb3ciLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJnZXRMaWtlIiwiZ2V0Iiwic2V0TG9hZGluZyIsImxvYWRpbmciLCJhZGQiLCJkZWxldGUiLCJpc0xvYWRpbmciLCJoYXMiLCJzdWJzY3JpYmUiLCJjYWxsYmFjayIsInN1YnNjcmliZXJzIiwiU2V0Iiwic29uZ1N1YnNjcmliZXJzIiwic2l6ZSIsImZvckVhY2giLCJzZXRCdWxrTGlrZXMiLCJsaWtlc0RhdGEiLCJPYmplY3QiLCJlbnRyaWVzIiwiZ2V0TGlrZWRTb25nSWRzIiwibGlrZWRJZHMiLCJwdXNoIiwiYnVsa0xvYWRMaWtlcyIsInNvbmdJZHMiLCJwcmlvcml0eSIsImJ1bGtMb2FkUHJvbWlzZSIsInVubG9hZGVkU29uZ0lkcyIsImZpbHRlciIsImlkIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsInJlcXVlc3RLZXkiLCJzb3J0Iiwiam9pbiIsInBlcmZvcm1CdWxrTG9hZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImRhdGEiLCJqc29uIiwia2V5cyIsImVycm9yIiwic3RhdHVzIiwicmVzZXQiLCJjbGVhciIsIk1hcCIsImxpa2VzU3RvcmUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkZXRhaWwiLCJ1c2VMaWtlIiwic2Vzc2lvbiIsInVwZGF0ZUNvdW50ZXIiLCJzZXRVcGRhdGVDb3VudGVyIiwic2V0RXJyb3IiLCJtb3VudGVkIiwiZm9yY2VVcGRhdGUiLCJjdXJyZW50IiwicHJldiIsInByZXZDaGFubmVsSWRSZWYiLCJjdXJyZW50Q2hhbm5lbElkIiwidXNlciIsImNoYW5uZWxJZCIsInVuc3Vic2NyaWJlIiwidG9nZ2xlTGlrZSIsImN1cnJlbnRMaWtlZCIsIm5ld0xpa2VkU3RhdGUiLCJlcnIiLCJ1c2VCdWxrTGlrZXMiLCJsb2FkTGlrZXMiLCJoYXNTZXNzaW9uIiwic29uZ0NvdW50IiwidXNlTGlrZXMiLCJ1c2VVc2VyTGlrZXMiLCJwYWdlIiwibGltaXQiLCJzZXRMaWtlcyIsInNldElzTG9hZGluZyIsInBhZ2luYXRpb24iLCJzZXRQYWdpbmF0aW9uIiwiZmV0Y2hMaWtlcyIsInJlZnJlc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useLikes.ts\n"));

/***/ })

});